/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/google-closure-library/master/LICENSE
 *
 *  - zlib.js, the ultimate gzip/zlib javascript implementation (https://github.com/imaya/zlib.js)
 *    LICENSE: https://raw.github.com/imaya/zlib.js/master/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function n(a){throw a;}var p=void 0,q=!0,t=null,u=!1;function da(){return function(){}}function ea(a){return function(b){this[a]=b}}function v(a){return function(){return this[a]}}var w,fa=this;function ga(){}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return a!==p}function ka(a){return"array"==ha(a)}function la(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"string"==typeof a}function x(a){return"number"==typeof a}function na(a){return"function"==ha(a)}function oa(a){var b=typeof a;return"object"==b&&a!=t||"function"==b}function pa(a){return a[qa]||(a[qa]=++ra)}var qa="closure_uid_"+(1E9*Math.random()>>>0),ra=0;
function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){a||n(Error());if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,e);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(t,arguments)}
function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var wa=Date.now||function(){return+new Date};function B(a,b){var c=a.split("."),e=fa;!(c[0]in e)&&e.execScript&&e.execScript("var "+c[0]);for(var d;c.length&&(d=c.shift());)!c.length&&ia(b)?e[d]=b:e=e[d]?e[d]:e[d]={}}
function C(a,b){function c(){}c.prototype=b.prototype;a.u=b.prototype;a.prototype=new c;a.prototype.constructor=a};function xa(a,b,c){this.Pa=this.Oa=this.Na=0;3==arguments.length?(this.Na=Number(a),this.Oa=Number(b),this.Pa=Number(c)):a instanceof xa?(this.Na=Number(a.x()),this.Oa=Number(a.y()),this.Pa=Number(a.d())):(this.Na=Number(a[0]),this.Oa=Number(a[1]),this.Pa=Number(a[2]))}
xa.prototype={k:function(){return new xa(this.Na,this.Oa,this.Pa)},Xb:function(a){return this.Na*a.x()+this.Oa*a.y()+this.Pa*a.d()},ge:function(a,b){return za(this,Aa(Ba(a,this),b))},length:function(){return Math.sqrt(this.Xb(this))},hc:function(a){return new xa(this.Oa*a.d()-this.Pa*a.y(),this.Pa*a.x()-this.Na*a.d(),this.Na*a.y()-this.Oa*a.x())},x:v("Na"),y:v("Oa"),d:v("Pa")};function Ca(a){var b=a.length();return new xa(a.Na/b,a.Oa/b,a.Pa/b)}
function Aa(a,b){return new xa(a.Na*b,a.Oa*b,a.Pa*b)}function Ba(a,b){return new xa(a.Na-b.x(),a.Oa-b.y(),a.Pa-b.d())}function za(a,b){return new xa(a.Na+b.x(),a.Oa+b.y(),a.Pa+b.d())}function Da(a){return new xa(-a.Na,-a.Oa,-a.Pa)};var E=E||{};E.Rj=q;E.Wa=function(a){eval("X.DEV === undefined")||window.console.time(a)};E.Qa=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.Fh=0;this.Nj=function(){return this.Fh++}};function Ea(a,b){for(var c in b){var e=b.__lookupGetter__(c),d=b.__lookupSetter__(c);c in a||(e||d?(e&&a.__defineGetter__(c,e),d&&a.__defineSetter__(c,d)):a[c]=b[c])}}var Fa=window.uh;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,d.concat(e.call(arguments)))}function c(){}"function"!==typeof this&&n(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var e=Array.prototype.slice,d=e.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var Ga=0,Ha=["ms","moz","webkit","o"],Ia=0;Ia<Ha.length&&!window.requestAnimationFrame;++Ia)window.requestAnimationFrame=window[Ha[Ia]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ha[Ia]+"CancelAnimationFrame"]||window[Ha[Ia]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-Ga)),e=window.setTimeout(function(){a(b+c)},c);Ga=b+c;return e});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){a===p&&n(Error("Not enough arguments."));var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var e=new ArrayBuffer(c-a),d=new Uint8Array(this),f=new Uint8Array(e),g=a,h=0;g<c;++g,++h)f[h]=d[g];return e});B("$",Fa);B("Function.prototype.bind",Function.prototype.bind);
B("window.requestAnimationFrame",window.requestAnimationFrame);B("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ja=0;function Ka(){}w=Ka.prototype;w.key=0;w.lc=u;w.Ud=u;w.sa=function(a,b,c,e,d,f){na(a)?this.Ig=q:a&&a.handleEvent&&na(a.handleEvent)?this.Ig=u:n(Error("Invalid listener argument"));this.Yb=a;this.$g=b;this.src=c;this.type=e;this.capture=!!d;this.ef=f;this.Ud=u;this.key=++Ja;this.lc=u};w.handleEvent=function(a){return this.Ig?this.Yb.call(this.ef||this.src,a):this.Yb.handleEvent.call(this.Yb,a)};function La(a){var b=[],c=0,e;for(e in a)b[c++]=a[e];return b}var Na="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oa(a,b){for(var c,e,d=1;d<arguments.length;d++){e=arguments[d];for(c in e)a[c]=e[c];for(var f=0;f<Na.length;f++)c=Na[f],Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}};function Pa(a){if(!Qa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ra,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ua,"&quot;"));return a}var Ra=/&/g,Sa=/</g,Ta=/>/g,Ua=/\"/g,Qa=/[&<>\"]/;var Va,Wa,Xa,Ya,Za,$a,ab;function cb(){return fa.navigator?fa.navigator.userAgent:t}function db(){return fa.navigator}Ya=Xa=Wa=Va=u;var eb;if(eb=cb()){var fb=db();Va=0==eb.indexOf("Opera");Wa=!Va&&-1!=eb.indexOf("MSIE");Xa=!Va&&-1!=eb.indexOf("WebKit");Ya=!Va&&!Xa&&"Gecko"==fb.product}var gb=Va,I=Wa,ib=Ya,jb=Xa,kb,mb=db();kb=mb&&mb.platform||"";Za=-1!=kb.indexOf("Mac");$a=-1!=kb.indexOf("Win");ab=-1!=kb.indexOf("Linux");var nb=!!db()&&-1!=(db().appVersion||"").indexOf("X11");
function ob(){var a=fa.document;return a?a.documentMode:p}var pb;a:{var qb="",rb;if(gb&&fa.opera)var sb=fa.opera.version,qb="function"==typeof sb?sb():sb;else if(ib?rb=/rv\:([^\);]+)(\)|;)/:I?rb=/MSIE\s+([^\);]+)(\)|;)/:jb&&(rb=/WebKit\/(\S+)/),rb)var tb=rb.exec(cb()),qb=tb?tb[1]:"";if(I){var ub=ob();if(ub>parseFloat(qb)){pb=String(ub);break a}}pb=qb}var vb={};
function wb(a){var b;if(!(b=vb[a])){b=0;for(var c=String(pb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=Math.max(c.length,e.length),f=0;0==b&&f<d;f++){var g=c[f]||"",h=e[f]||"",l=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var j=l.exec(g)||["","",""],m=k.exec(h)||["","",""];if(0==j[0].length&&0==m[0].length)break;b=((0==j[1].length?0:parseInt(j[1],10))<(0==m[1].length?0:parseInt(m[1],10))?-1:(0==j[1].length?0:parseInt(j[1],
10))>(0==m[1].length?0:parseInt(m[1],10))?1:0)||((0==j[2].length)<(0==m[2].length)?-1:(0==j[2].length)>(0==m[2].length)?1:0)||(j[2]<m[2]?-1:j[2]>m[2]?1:0)}while(0==b)}b=vb[a]=0<=b}return b}var xb=fa.document,yb=!xb||!I?p:ob()||("CSS1Compat"==xb.compatMode?parseInt(pb,10):5);var zb=!I||I&&9<=yb,Ab=I&&!wb("9");!jb||wb("528");ib&&wb("1.9b")||I&&wb("8")||gb&&wb("9.5")||jb&&wb("528");ib&&!wb("8")||I&&wb("9");var Bb=Array.prototype,Cb=Bb.indexOf?function(a,b,c){return Bb.indexOf.call(a,b,c)}:function(a,b,c){c=c==t?0:0>c?Math.max(0,a.length+c):c;if(ma(a))return!ma(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Eb=Bb.forEach?function(a,b,c){Bb.forEach.call(a,b,c)}:function(a,b,c){for(var e=a.length,d=ma(a)?a.split(""):a,f=0;f<e;f++)f in d&&b.call(c,d[f],f,a)},Fb=Bb.map?function(a,b,c){return Bb.map.call(a,b,c)}:function(a,b,c){for(var e=a.length,d=Array(e),f=
ma(a)?a.split(""):a,g=0;g<e;g++)g in f&&(d[g]=b.call(c,f[g],g,a));return d},Gb=Bb.some?function(a,b,c){return Bb.some.call(a,b,c)}:function(a,b,c){for(var e=a.length,d=ma(a)?a.split(""):a,f=0;f<e;f++)if(f in d&&b.call(c,d[f],f,a))return q;return u};function Hb(a,b){var c=Cb(a,b);0<=c&&Bb.splice.call(a,c,1)}function Ib(a,b,c){return 2>=arguments.length?Bb.slice.call(a,b):Bb.slice.call(a,b,c)};function Jb(){0!=Kb&&(this.Sk=Error().stack,pa(this))}var Kb=0;function Lb(a,b){this.type=a;this.currentTarget=this.target=b}w=Lb.prototype;w.kc=u;w.defaultPrevented=u;w.le=q;w.stopPropagation=function(){this.kc=q};w.preventDefault=function(){this.defaultPrevented=q;this.le=u};function Mb(a){Mb[" "](a);return a}Mb[" "]=ga;function Nb(a,b){a&&this.sa(a,b)}C(Nb,Lb);w=Nb.prototype;w.target=t;w.relatedTarget=t;w.offsetX=0;w.offsetY=0;w.clientX=0;w.clientY=0;w.screenX=0;w.screenY=0;w.button=0;w.keyCode=0;w.charCode=0;w.ctrlKey=u;w.altKey=u;w.shiftKey=u;w.metaKey=u;w.uj=u;w.jb=t;
w.sa=function(a,b){var c=this.type=a.type;Lb.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var e=a.relatedTarget;if(e){if(ib){var d;a:{try{Mb(e.nodeName);d=q;break a}catch(f){}d=u}d||(e=t)}}else"mouseover"==c?e=a.fromElement:"mouseout"==c&&(e=a.toElement);this.relatedTarget=e;this.offsetX=jb||a.offsetX!==p?a.offsetX:a.layerX;this.offsetY=jb||a.offsetY!==p?a.offsetY:a.layerY;this.clientX=a.clientX!==p?a.clientX:a.pageX;this.clientY=a.clientY!==p?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.uj=Za?a.metaKey:a.ctrlKey;this.state=a.state;this.jb=a;a.defaultPrevented&&this.preventDefault();delete this.kc};w.stopPropagation=function(){Nb.u.stopPropagation.call(this);this.jb.stopPropagation?this.jb.stopPropagation():this.jb.cancelBubble=q};
w.preventDefault=function(){Nb.u.preventDefault.call(this);var a=this.jb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=u,Ab)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};w.pi=v("jb");var Ob={},Pb={},Qb={},Rb={};function M(a,b,c,e,d){if(ka(b)){for(var f=0;f<b.length;f++)M(a,b[f],c,e,d);return t}a=Sb(a,b,c,u,e,d);b=a.key;Ob[b]=a;return b}
function Sb(a,b,c,e,d,f){b||n(Error("Invalid event type"));d=!!d;var g=Pb;b in g||(g[b]={fa:0,Fa:0});g=g[b];d in g||(g[d]={fa:0,Fa:0},g.fa++);var g=g[d],h=pa(a),l;g.Fa++;if(g[h]){l=g[h];for(var k=0;k<l.length;k++)if(g=l[k],g.Yb==c&&g.ef==f){if(g.lc)break;e||(l[k].Ud=u);return l[k]}}else l=g[h]=[],g.fa++;var j=Tb,m=zb?function(a){return j.call(m.src,m.Yb,a)}:function(a){a=j.call(m.src,m.Yb,a);if(!a)return a},k=m,g=new Ka;g.sa(c,k,a,b,d,f);g.Ud=e;k.src=a;k.Yb=g;l.push(g);Qb[h]||(Qb[h]=[]);Qb[h].push(g);
a.addEventListener?(a==fa||!a.customEvent_)&&a.addEventListener(b,k,d):a.attachEvent(b in Rb?Rb[b]:Rb[b]="on"+b,k);return g}function Ub(a,b,c,e,d){if(ka(b))for(var f=0;f<b.length;f++)Ub(a,b[f],c,e,d);else a=Sb(a,b,c,q,e,d),Ob[a.key]=a}function Vb(a,b,c,e,d){if(ka(b))for(var f=0;f<b.length;f++)Vb(a,b[f],c,e,d);else{e=!!e;a:{f=Pb;if(b in f&&(f=f[b],e in f&&(f=f[e],a=pa(a),f[a]))){a=f[a];break a}a=t}if(a)for(f=0;f<a.length;f++)if(a[f].Yb==c&&a[f].capture==e&&a[f].ef==d){Wb(a[f].key);break}}}
function Wb(a){var b=Ob[a];if(!b||b.lc)return u;var c=b.src,e=b.type,d=b.$g,f=b.capture;c.removeEventListener?(c==fa||!c.customEvent_)&&c.removeEventListener(e,d,f):c.detachEvent&&c.detachEvent(e in Rb?Rb[e]:Rb[e]="on"+e,d);c=pa(c);Qb[c]&&(d=Qb[c],Hb(d,b),0==d.length&&delete Qb[c]);b.lc=q;if(b=Pb[e][f][c])b.Qg=q,Xb(e,f,c,b);delete Ob[a];return q}
function Xb(a,b,c,e){if(!e.ie&&e.Qg){for(var d=0,f=0;d<e.length;d++)e[d].lc?e[d].$g.src=t:(d!=f&&(e[f]=e[d]),f++);e.length=f;e.Qg=u;0==f&&(delete Pb[a][b][c],Pb[a][b].fa--,0==Pb[a][b].fa&&(delete Pb[a][b],Pb[a].fa--),0==Pb[a].fa&&delete Pb[a])}}function Yb(a,b){var c=pa(a),e=Qb[c];if(e){var d=ia(b),f=ia(p);return d&&f?(e=Pb[b],!!e&&!!e[p]&&c in e[p]):!d&&!f?q:Gb(e,function(a){return d&&a.type==b||f&&a.capture==p})}return u}
function Zb(a,b,c,e,d){var f=1;b=pa(b);if(a[b]){var g=--a.Fa,h=a[b];h.ie?h.ie++:h.ie=1;try{for(var l=h.length,k=0;k<l;k++){var j=h[k];j&&!j.lc&&(f&=$b(j,d)!==u)}}finally{a.Fa=Math.max(g,a.Fa),h.ie--,Xb(c,e,b,h)}}return Boolean(f)}function $b(a,b){a.Ud&&Wb(a.key);return a.handleEvent(b)}
function Tb(a,b){if(a.lc)return q;var c=a.type,e=Pb;if(!(c in e))return q;var e=e[c],d,f;if(!zb){var g;if(!(g=b))a:{g=["window","event"];for(var h=fa;d=g.shift();)if(h[d]!=t)h=h[d];else{g=t;break a}g=h}d=g;g=q in e;h=u in e;if(g){if(0>d.keyCode||d.returnValue!=p)return q;a:{var l=u;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(k){l=q}if(l||d.returnValue==p)d.returnValue=q}}l=new Nb;l.sa(d,this);d=q;try{if(g){for(var j=[],m=l.currentTarget;m;m=m.parentNode)j.push(m);f=e[q];f.Fa=f.fa;for(var r=j.length-
1;!l.kc&&0<=r&&f.Fa;r--)l.currentTarget=j[r],d&=Zb(f,j[r],c,q,l);if(h){f=e[u];f.Fa=f.fa;for(r=0;!l.kc&&r<j.length&&f.Fa;r++)l.currentTarget=j[r],d&=Zb(f,j[r],c,u,l)}}else d=$b(a,l)}finally{j&&(j.length=0)}return d}c=new Nb(b,this);return d=$b(a,c)}var ac=0;function bc(a){return a+"_"+ac++};function cc(){Jb.call(this);this.Vk={};this.Qk=this}C(cc,Jb);cc.prototype.customEvent_=q;w=cc.prototype;w.uf=t;w.Af=ea("uf");w.addEventListener=function(a,b,c,e){M(this,a,b,c,e)};w.removeEventListener=function(a,b,c,e){Vb(this,a,b,c,e)};
w.dispatchEvent=function(a){var b=a.type||a,c=Pb;if(b in c){if(ma(a))a=new Lb(a,this);else if(a instanceof Lb)a.target=a.target||this;else{var e=a;a=new Lb(b,this);Oa(a,e)}var e=1,d,c=c[b],b=q in c,f;if(b){d=[];for(f=this;f;f=f.uf)d.push(f);f=c[q];f.Fa=f.fa;for(var g=d.length-1;!a.kc&&0<=g&&f.Fa;g--)a.currentTarget=d[g],e&=Zb(f,d[g],a.type,q,a)&&a.le!=u}if(u in c)if(f=c[u],f.Fa=f.fa,b)for(g=0;!a.kc&&g<d.length&&f.Fa;g++)a.currentTarget=d[g],e&=Zb(f,d[g],a.type,u,a)&&a.le!=u;else for(d=this;!a.kc&&
d&&f.Fa;d=d.uf)a.currentTarget=d,e&=Zb(f,d,a.type,u,a)&&a.le!=u;a=Boolean(e)}else a=q;return a};function P(){cc.call(this);this.f="base";this.oa=window["X.counter"].Nj();this.i=u}C(P,cc);P.prototype.__defineGetter__("classname",v("f"));P.prototype.__defineGetter__("id",v("oa"));B("X.base",P);function dc(a,b){this.La=new xa(a);this.la=new xa(b)}dc.prototype={k:function(){return new dc(this.La.k(),this.la.k())},jc:function(){this.la=Da(this.la)}};function ec(a,b){this.la=a;this.zd=b}ec.prototype={k:function(){return new ec(this.la.k(),this.zd)},jc:function(){this.la=Da(this.la);this.zd=-this.zd}};function fc(a,b){this.Gb=a;this.se=b;var c=a[0].La,e=a[2].La,e=Ca(Ba(a[1].La,c).hc(Ba(e,c)));this.Ka=new ec(e,e.Xb(c))}fc.prototype={k:function(){var a=this.Gb.map(function(a){return a.k()});return new fc(a,this.se)},jc:function(){this.Gb.reverse().map(function(a){a.jc()});this.Ka.jc()}};
function gc(a,b,c,e,d,f){for(var g=0,h=[],l=0;l<a.Gb.length;l++){var k=b.la.Xb(a.Gb[l].La)-b.zd,k=-1E-5>k?2:1E-5<k?1:0,g=g|k;h.push(k)}switch(g){case 0:(0<b.la.Xb(a.Ka.la)?c:e).push(a);break;case 1:d.push(a);break;case 2:f.push(a);break;case 3:c=[];e=[];for(l=0;l<a.Gb.length;l++){var j=(l+1)%a.Gb.length,k=h[l],m=h[j],g=a.Gb[l],j=a.Gb[j];2!=k&&c.push(g);1!=k&&e.push(2!=k?g.k():g);3==(k|m)&&(k=(b.zd-b.la.Xb(g.La))/b.la.Xb(Ba(j.La,g.La)),k=new dc(g.La.ge(j.La,k),g.la.ge(j.la,k)),c.push(k),e.push(k.k()))}3<=
c.length&&d.push(new fc(c,a.se));3<=e.length&&f.push(new fc(e,a.se))}};function hc(a){this.qa=this.ra=this.Ka=t;this.O=[];a&&ic(this,a)}hc.prototype={k:function(){var a=new hc,b=this.Ka&&this.Ka.k();a.Ka=b;b=this.ra&&this.ra.k();a.ra=b;b=this.qa&&this.qa.k();a.qa=b;a.qe(this.O.map(function(a){return a.k()}));return a},N:function(){for(var a=0;a<this.O.length;a++)this.O[a].jc();this.Ka.jc();this.ra&&this.ra.N();this.qa&&this.qa.N();a=this.ra;this.ra=this.qa;this.qa=a},qe:ea("O")};
function ic(a,b){if(b.length){a.Ka||(a.Ka=b[0].Ka.k());for(var c=[],e=[],d=0;d<b.length;d++)gc(b[d],a.Ka,a.O,a.O,c,e);c.length&&(a.ra||(a.ra=new hc),ic(a.ra,c));e.length&&(a.qa||(a.qa=new hc),ic(a.qa,e))}}function jc(a){var b=a.O.slice();a.ra&&(b=b.concat(jc(a.ra)));a.qa&&(b=b.concat(jc(a.qa)));return b}function kc(a,b){a.O=lc(b,a.O);a.ra&&kc(a.ra,b);a.qa&&kc(a.qa,b)}
function lc(a,b){if(!a.Ka)return b.slice();for(var c=[],e=[],d=0;d<b.length;d++)gc(b[d],a.Ka,c,e,c,e);a.ra&&(c=lc(a.ra,c));e=a.qa?lc(a.qa,e):[];return c.concat(e)};function mc(){this.O=[]}function nc(a){var b=new mc;b.qe(a);return b}
mc.prototype={k:function(){var a=new mc;a.qe(this.O.map(function(a){return a.k()}));return a},Jf:function(a){var b=new hc(this.k().O);a=new hc(a.k().O);kc(b,a);kc(a,b);a.N();kc(a,b);a.N();ic(b,jc(a));return nc(jc(b))},za:function(a){var b=new hc(this.k().O);a=new hc(a.k().O);b.N();kc(b,a);kc(a,b);a.N();kc(a,b);a.N();ic(b,jc(a));b.N();return nc(jc(b))},gf:function(a){var b=new hc(this.k().O);a=new hc(a.k().O);b.N();kc(a,b);a.N();kc(b,a);kc(a,b);ic(b,jc(a));b.N();return nc(jc(b))},inverse:function(){var a=
this.k();a.O.map(function(a){a.jc()});return a},qe:ea("O")};function oc(){P.call(this);this.f="indexer";this.Qe=[];this.Jk=[];this.Ya={}}C(oc,P);oc.prototype.add=function(a){a==t&&n(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.Ya||(this.Ya[b]=this.Qe.length,this.Qe.push(a));return this.Ya[b]};oc.prototype.unique=v("Qe");function pc(a){P.call(this);this.f="file";this.Nd=a;this.i=q}C(pc,P);function qc(){this.lb=this.q=t}qc.prototype.__defineSetter__("file",function(a){if(a==t||ka(a)&&0==a.length)this.q=t;else{if(ka(a)){if(1==a.length){this.q=new pc(a[0]);return}this.q=Fb(a,function(a){var c=new S;c.q=new pc(a);return c})}else this.q=new pc(a);this.lb=t}});qc.prototype.__defineGetter__("file",function(){return!this.q?"":ka(this.q)?this.q.map(function(a){return a.q.Nd}):this.q.Nd});
qc.prototype.__defineGetter__("filedata",function(){return ka(this.q)?this.q.map(function(a){return a.lb}):this.lb});qc.prototype.__defineSetter__("filedata",function(a){if(a==t||ka(a)&&0==a.length)this.lb=t;if(ka(a))if(1==a.length)this.lb=a[0];else{var b=this.q.length,c;for(c=0;c<b;c++)this.q[c].lb=a[c]}else this.lb=a});function rc(a){if("function"==typeof a.qd)return a.qd();if(ma(a))return a.split("");if(la(a)){for(var b=[],c=a.length,e=0;e<c;e++)b.push(a[e]);return b}return La(a)};function sc(a,b){this.X={};this.J=[];var c=arguments.length;if(1<c){c%2&&n(Error("Uneven number of arguments"));for(var e=0;e<c;e+=2)this.set(arguments[e],arguments[e+1])}else a&&this.Se(a)}w=sc.prototype;w.fa=0;w.Lf=0;w.$d=v("fa");w.qd=function(){tc(this);for(var a=[],b=0;b<this.J.length;b++)a.push(this.X[this.J[b]]);return a};function uc(a){for(var b=0;b<a.J.length;b++){var c=a.J[b];if(vc(a.X,c)&&a.X[c]==u)return q}return u}w.clear=function(){this.X={};this.Lf=this.fa=this.J.length=0};
w.remove=function(a){return vc(this.X,a)?(delete this.X[a],this.fa--,this.Lf++,this.J.length>2*this.fa&&tc(this),q):u};function tc(a){if(a.fa!=a.J.length){for(var b=0,c=0;b<a.J.length;){var e=a.J[b];vc(a.X,e)&&(a.J[c++]=e);b++}a.J.length=c}if(a.fa!=a.J.length){for(var d={},c=b=0;b<a.J.length;)e=a.J[b],vc(d,e)||(a.J[c++]=e,d[e]=1),b++;a.J.length=c}}w.get=function(a,b){return vc(this.X,a)?this.X[a]:b};w.set=function(a,b){vc(this.X,a)||(this.fa++,this.J.push(a),this.Lf++);this.X[a]=b};
w.Se=function(a){var b;if(a instanceof sc)tc(a),b=a.J.concat(),a=a.qd();else{b=[];var c=0,e;for(e in a)b[c++]=e;a=La(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};w.k=function(){return new sc(this)};w.If=function(){for(var a=new sc,b=0;b<this.J.length;b++){var c=this.J[b];a.set(this.X[c],c)}return a};function vc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function wc(){P.call(this);this.f="colortable";this.Ya=new sc;Ea(this,new qc)}C(wc,P);wc.prototype.add=function(a,b,c,e,d,f){(!x(a)||!x(c)||!x(e)||!x(d)||!x(f))&&n(Error("Invalid color table entry."));this.Ya.set(a,[b,c,e,d,f]);this.i=q};wc.prototype.get=function(a){return this.Ya.get(a)};B("X.colortable.prototype.get",wc.prototype.get);function xc(a,b,c){this.x=ia(a)?a:0;this.y=ia(b)?b:0;this.d=ia(c)?c:0}xc.prototype.k=function(){return new xc(this.x,this.y,this.d)};function T(a,b,c){this.x=a;this.y=b;this.d=c}C(T,xc);w=T.prototype;w.k=function(){return new T(this.x,this.y,this.d)};w.Db=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.d*this.d)};w.scale=function(a){this.x*=a;this.y*=a;this.d*=a;return this};w.N=function(){this.x=-this.x;this.y=-this.y;this.d=-this.d;return this};w.normalize=function(){return this.scale(1/this.Db())};w.add=function(a){this.x+=a.x;this.y+=a.y;this.d+=a.d;return this};
w.za=function(a){this.x-=a.x;this.y-=a.y;this.d-=a.d;return this};function yc(a,b){var c=a.x-b.x,e=a.y-b.y,d=a.d-b.d;return Math.sqrt(c*c+e*e+d*d)}function zc(a,b){var c=a.x-b.x,e=a.y-b.y,d=a.d-b.d;return c*c+e*e+d*d}function Ac(a,b){return new T(a.x+b.x,a.y+b.y,a.d+b.d)}function Bc(a,b){return new T(a.y*b.d-a.d*b.y,a.d*b.x-a.x*b.d,a.x*b.y-a.y*b.x)};E.l=T;w=E.l.prototype;w.k=T.prototype.k;w.Db=T.prototype.Db;w.scale=T.prototype.scale;w.N=T.prototype.N;w.add=T.prototype.add;w.za=T.prototype.za;w.normalize=function(){var a=this.Db();return 0==a?this.scale(0):this.scale(1/a)};E.l.Xb=function(a,b){return a.x*b.x+a.y*b.y+a.d*b.d};E.l.hc=Bc;E.l.df=yc;E.l.ge=function(a,b,c){return new T(a.x+c*(b.x-a.x),a.y+c*(b.y-a.y),a.d+c*(b.d-a.d))};E.l.prototype.__defineGetter__("xx",v("x"));E.l.prototype.__defineGetter__("yy",v("y"));
E.l.prototype.__defineGetter__("zz",v("d"));B("X.vector",E.l);B("X.vector.prototype.clone",E.l.prototype.k);B("X.vector.prototype.magnitude",E.l.prototype.Db);B("X.vector.prototype.scale",E.l.prototype.scale);B("X.vector.prototype.invert",E.l.prototype.N);B("X.vector.prototype.normalize",E.l.prototype.normalize);B("X.vector.prototype.add",E.l.prototype.add);B("X.vector.prototype.subtract",E.l.prototype.za);B("X.vector.dot",E.l.Xb);B("X.vector.cross",E.l.hc);B("X.vector.distance",E.l.df);
B("X.vector.lerp",E.l.ge);function Cc(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Cc.prototype.BYTES_PER_ELEMENT=8;Cc.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Cc.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{Cc.BYTES_PER_ELEMENT=8}catch(Dc){}Cc.prototype.BYTES_PER_ELEMENT=Cc.prototype.BYTES_PER_ELEMENT;Cc.prototype.set=Cc.prototype.set;Cc.prototype.toString=Cc.prototype.toString;B("Float64Array",Cc)};function Hc(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}Hc.prototype.BYTES_PER_ELEMENT=4;Hc.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};Hc.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(Hc.BYTES_PER_ELEMENT=4,Hc.prototype.BYTES_PER_ELEMENT=Hc.prototype.BYTES_PER_ELEMENT,Hc.prototype.set=Hc.prototype.set,Hc.prototype.toString=Hc.prototype.toString,B("Float32Array",Hc));function Ic(a,b,c){var e=new Float32Array(3);e[0]=a;e[1]=b;e[2]=c;return e}function Jc(a,b){var c=a[0],e=a[1],d=a[2],c=1/Math.sqrt(c*c+e*e+d*d);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c};function Kc(){return new Float32Array(4)}function Lc(a,b,c,e){var d=Kc();d[0]=a;d[1]=b;d[2]=c;d[3]=e;return d};function Mc(){return new Float32Array(16)}function Nc(){var a=Mc();a[0]=a[5]=a[10]=a[15]=1;return a}function Oc(a,b,c,e,d,f,g,h,l,k,j,m,r,s,z,y,D){a[0]=b;a[1]=c;a[2]=e;a[3]=d;a[4]=f;a[5]=g;a[6]=h;a[7]=l;a[8]=k;a[9]=j;a[10]=m;a[11]=r;a[12]=s;a[13]=z;a[14]=y;a[15]=D;return a}function Pc(a,b,c){b*=4;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3]}function Qc(a,b,c){b*=4;c[0]=a[b];c[1]=a[b+1];c[2]=a[b+2];c[3]=a[b+3]}function Rc(a,b,c,e,d,f){a[b]=c;a[b+4]=e;a[b+8]=d;a[b+12]=f}
function Sc(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}function Tc(a,b,c){c[0]=a[b];c[1]=a[b+4];c[2]=a[b+8];c[3]=a[b+12]}
function Uc(a,b,c){var e=a[0],d=a[1],f=a[2],g=a[3],h=a[4],l=a[5],k=a[6],j=a[7],m=a[8],r=a[9],s=a[10],z=a[11],y=a[12],D=a[13],F=a[14];a=a[15];var H=b[0],A=b[1],G=b[2],J=b[3],K=b[4],R=b[5],N=b[6],W=b[7],aa=b[8],Z=b[9],ba=b[10],L=b[11],O=b[12],Q=b[13],hb=b[14];b=b[15];c[0]=e*H+h*A+m*G+y*J;c[1]=d*H+l*A+r*G+D*J;c[2]=f*H+k*A+s*G+F*J;c[3]=g*H+j*A+z*G+a*J;c[4]=e*K+h*R+m*N+y*W;c[5]=d*K+l*R+r*N+D*W;c[6]=f*K+k*R+s*N+F*W;c[7]=g*K+j*R+z*N+a*W;c[8]=e*aa+h*Z+m*ba+y*L;c[9]=d*aa+l*Z+r*ba+D*L;c[10]=f*aa+k*Z+s*ba+F*
L;c[11]=g*aa+j*Z+z*ba+a*L;c[12]=e*O+h*Q+m*hb+y*b;c[13]=d*O+l*Q+r*hb+D*b;c[14]=f*O+k*Q+s*hb+F*b;c[15]=g*O+j*Q+z*hb+a*b;return c}
function Vc(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],g=a[4],h=a[5],l=a[6],k=a[7],j=a[8],m=a[9],r=a[10],s=a[11],z=a[12],y=a[13],D=a[14],F=a[15],H=c*h-e*g,A=c*l-d*g,G=c*k-f*g,J=e*l-d*h,K=e*k-f*h,R=d*k-f*l,N=j*y-m*z,W=j*D-r*z,aa=j*F-s*z,Z=m*D-r*y,ba=m*F-s*y,L=r*F-s*D,O=H*L-A*ba+G*Z+J*aa-K*W+R*N;if(0==O)return u;O=1/O;b[0]=(h*L-l*ba+k*Z)*O;b[1]=(-e*L+d*ba-f*Z)*O;b[2]=(y*R-D*K+F*J)*O;b[3]=(-m*R+r*K-s*J)*O;b[4]=(-g*L+l*aa-k*W)*O;b[5]=(c*L-d*aa+f*W)*O;b[6]=(-z*R+D*G-F*A)*O;b[7]=(j*R-r*G+s*A)*O;b[8]=(g*ba-h*
aa+k*N)*O;b[9]=(-c*ba+e*aa-f*N)*O;b[10]=(z*K-y*G+F*H)*O;b[11]=(-j*K+m*G-s*H)*O;b[12]=(-g*Z+h*W-l*N)*O;b[13]=(c*Z-e*W+d*N)*O;b[14]=(-z*J+y*A-D*H)*O;b[15]=(j*J-m*A+r*H)*O;return q}function Wc(a,b,c){var e=b[0],d=b[1];b=b[2];c[0]=e*a[0]+d*a[4]+b*a[8]+a[12];c[1]=e*a[1]+d*a[5]+b*a[9]+a[13];c[2]=e*a[2]+d*a[6]+b*a[10]+a[14]}
function Xc(a,b,c){var e=b[0],d=b[1],f=b[2];b=b[3];c[0]=e*a[0]+d*a[4]+f*a[8]+b*a[12];c[1]=e*a[1]+d*a[5]+f*a[9]+b*a[13];c[2]=e*a[2]+d*a[6]+f*a[10]+b*a[14];c[3]=e*a[3]+d*a[7]+f*a[11]+b*a[15];return c}function Yc(a,b,c,e){var d=a[1]*b+a[5]*c+a[9]*e+a[13],f=a[2]*b+a[6]*c+a[10]*e+a[14],g=a[3]*b+a[7]*c+a[11]*e+a[15];a[12]=a[0]*b+a[4]*c+a[8]*e+a[12];a[13]=d;a[14]=f;a[15]=g;return a}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);E.e={};E.e.Lg=function(a,b,c,e){c=c.za(b);c.normalize();e=E.l.hc(c,e);e.normalize();var d=E.l.hc(e,c);d.normalize();c.N();Rc(a,0,e.x,e.y,e.d,0);Rc(a,1,d.x,d.y,d.d,0);Rc(a,2,c.x,c.y,c.d,0);Yc(a,-b.x,-b.y,-b.d);return a};E.e.S=function(a,b,c,e){var d=1/(b*a[3]+c*a[7]+e*a[11]+a[15]);return new E.l((b*a[0]+c*a[4]+e*a[8]+a[12])*d,(b*a[1]+c*a[5]+e*a[9]+a[13])*d,(b*a[2]+c*a[6]+e*a[10]+a[14])*d)};
E.e.Lj=function(a,b,c){var e=new Float32Array(4),d=new Float32Array(4);Tc(a,b,e);Tc(a,c,d);Sc(a,b,d);Sc(a,c,e);return a};E.e.Kj=function(a,b,c){var e=new Float32Array(4),d=new Float32Array(4);Qc(a,b,e);Qc(a,c,d);Pc(a,b,d);Pc(a,c,e);return a};E.e.rd=Nc;E.e.k=function(a){var b=Mc();b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};
E.e.If=function(a,b){if(b==a){var c=a[1],e=a[2],d=a[3],f=a[6],g=a[7],h=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=e;b[9]=f;b[11]=a[14];b[12]=d;b[13]=g;b[14]=h}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};
E.e.ei=function(a){var b=a[0],c=a[1],e=a[2],d=a[3],f=a[4],g=a[5],h=a[6],l=a[7],k=a[8],j=a[9],m=a[10],r=a[11],s=a[12],z=a[13],y=a[14];a=a[15];return(b*g-c*f)*(m*a-r*y)-(b*h-e*f)*(j*a-r*z)+(b*l-d*f)*(j*y-m*z)+(c*h-e*g)*(k*a-r*s)-(c*l-d*g)*(k*y-m*s)+(e*l-d*h)*(k*z-j*s)};E.e.N=Vc;E.e.jf=function(a,b,c,e,d){var f=b/2;b=d-e;var g=Math.sin(f);if(0==b||0==g||0==c)return a;f=Math.cos(f)/g;return Oc(a,f/c,0,0,0,0,f,0,0,0,0,-(d+e)/b,-1,0,0,-(2*e*d)/b,0)};
E.e.Ki=function(a,b,c,e,d,f,g){return Oc(a,2*f/(c-b),0,0,0,0,2*f/(d-e),0,0,(c+b)/(c-b),(d+e)/(d-e),-(g+f)/(g-f),-1,0,0,-(2*g*f)/(g-f),0)};E.e.Li=function(a,b,c,e,d,f,g){return Oc(a,2/(c-b),0,0,0,0,2/(d-e),0,0,0,0,-2/(g-f),0,-(c+b)/(c-b),-(d+e)/(d-e),-(g+f)/(g-f),1)};E.e.multiply=Uc;E.e.Pg=Xc;E.e.translate=Yc;E.e.scale=function(a,b,c,e){return Oc(a,a[0]*b,a[1]*b,a[2]*b,a[3]*b,a[4]*c,a[5]*c,a[6]*c,a[7]*c,a[8]*e,a[9]*e,a[10]*e,a[11]*e,a[12],a[13],a[14],a[15])};
E.e.rotate=function(a,b,c,e,d){var f=a[0],g=a[1],h=a[2],l=a[3],k=a[4],j=a[5],m=a[6],r=a[7],s=a[8],z=a[9],y=a[10],D=a[11],F=Math.cos(b),H=Math.sin(b),A=1-F;b=c*c*A+F;var G=c*e*A+d*H,J=c*d*A-e*H,K=c*e*A-d*H,R=e*e*A+F,N=e*d*A+c*H,W=c*d*A+e*H;c=e*d*A-c*H;d=d*d*A+F;return Oc(a,f*b+k*G+s*J,g*b+j*G+z*J,h*b+m*G+y*J,l*b+r*G+D*J,f*K+k*R+s*N,g*K+j*R+z*N,h*K+m*R+y*N,l*K+r*R+D*N,f*W+k*c+s*d,g*W+j*c+z*d,h*W+m*c+y*d,l*W+r*c+D*d,a[12],a[13],a[14],a[15])};
E.e.me=function(a,b){var c=a[4],e=a[5],d=a[6],f=a[7],g=a[8],h=a[9],l=a[10],k=a[11],j=Math.cos(b),m=Math.sin(b);a[4]=c*j+g*m;a[5]=e*j+h*m;a[6]=d*j+l*m;a[7]=f*j+k*m;a[8]=c*-m+g*j;a[9]=e*-m+h*j;a[10]=d*-m+l*j;a[11]=f*-m+k*j;return a};E.e.ne=function(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],g=a[8],h=a[9],l=a[10],k=a[11],j=Math.cos(b),m=Math.sin(b);a[0]=c*j+g*-m;a[1]=e*j+h*-m;a[2]=d*j+l*-m;a[3]=f*j+k*-m;a[8]=c*m+g*j;a[9]=e*m+h*j;a[10]=d*m+l*j;a[11]=f*m+k*j;return a};
E.e.oe=function(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],g=a[4],h=a[5],l=a[6],k=a[7],j=Math.cos(b),m=Math.sin(b);a[0]=c*j+g*m;a[1]=e*j+h*m;a[2]=d*j+l*m;a[3]=f*j+k*m;a[4]=c*-m+g*j;a[5]=e*-m+h*j;a[6]=d*-m+l*j;a[7]=f*-m+k*j;return a};B("X.matrix.identity",E.e.rd);B("X.matrix.clone",E.e.k);B("X.matrix.transpose",E.e.If);B("X.matrix.determinant",E.e.ei);B("X.matrix.invert",E.e.N);B("X.matrix.multiply",E.e.multiply);B("X.matrix.multiplyByVector",E.e.S);B("X.matrix.multiplyByVec4",E.e.Pg);
B("X.matrix.makePerspective",E.e.jf);B("X.matrix.makeFrustum",E.e.Ki);B("X.matrix.makeOrtho",E.e.Li);B("X.matrix.makeLookAt",E.e.Lg);B("X.matrix.translate",E.e.translate);B("X.matrix.scale",E.e.scale);B("X.matrix.rotate",E.e.rotate);B("X.matrix.rotateX",E.e.me);B("X.matrix.rotateY",E.e.ne);B("X.matrix.rotateZ",E.e.oe);B("X.matrix.swapRows",E.e.Lj);B("X.matrix.swapCols",E.e.Kj);function Zc(){P.call(this);this.f="transform";this.H=E.e.rd()}C(Zc,P);Zc.prototype.__defineGetter__("matrix",v("H"));Zc.prototype.__defineSetter__("matrix",function(a){(a==t||!(a instanceof Float32Array))&&n(Error("Invalid matrix."));this.H=a;this.p()});w=Zc.prototype;w.me=function(a){(!x(a)||-360>a||360<a)&&n(Error("Invalid angle."));E.e.me(this.H,a*Math.PI/180);this.p()};w.ne=function(a){(!x(a)||-360>a||360<a)&&n(Error("Invalid angle."));E.e.ne(this.H,a*Math.PI/180);this.p()};
w.oe=function(a){(!x(a)||-360>a||360<a)&&n(Error("Invalid angle."));E.e.oe(this.H,a*Math.PI/180);this.p()};w.oh=function(a){x(a)||n(Error("Invalid distance."));E.e.translate(this.H,a,0,0);this.p()};w.ph=function(a){x(a)||n(Error("Invalid distance."));E.e.translate(this.H,0,a,0);this.p()};w.qh=function(a){x(a)||n(Error("Invalid distance."));E.e.translate(this.H,0,0,a);this.p()};function $c(a,b,c){a.H[b+4*c]*=-1;a.p()}w.li=function(){$c(this,0,0)};w.mi=function(){$c(this,1,1)};
w.ni=function(){$c(this,2,2)};w.p=function(){this.i=q};B("X.transform",Zc);B("X.transform.prototype.rotateX",Zc.prototype.me);B("X.transform.prototype.rotateY",Zc.prototype.ne);B("X.transform.prototype.rotateZ",Zc.prototype.oe);B("X.transform.prototype.translateX",Zc.prototype.oh);B("X.transform.prototype.translateY",Zc.prototype.ph);B("X.transform.prototype.translateZ",Zc.prototype.qh);B("X.transform.prototype.flipX",Zc.prototype.li);B("X.transform.prototype.flipY",Zc.prototype.mi);
B("X.transform.prototype.flipZ",Zc.prototype.ni);B("X.transform.prototype.modified",Zc.prototype.p);function ad(){P.call(this);this.f="texture";this.Ub=this.Lb=this.q=t;this.Ke=this.Le=0;this.Wf=u;Ea(this,new qc)}C(ad,P);ad.prototype.__defineSetter__("rawData",function(a){this.Ub=a;this.i=q});ad.prototype.__defineSetter__("rawDataHeight",function(a){this.Ke=a;this.i=q});ad.prototype.__defineSetter__("rawDataWidth",function(a){this.Le=a;this.i=q});ad.prototype.__defineSetter__("grayscale",function(a){this.Wf=a;this.i=q});B("X.texture",ad);function U(a,b){P.call(this);this.f="triplets";this.cb=Infinity;this.Za=-Infinity;this.eb=Infinity;this.$a=-Infinity;this.fb=Infinity;this.ab=-Infinity;this.Dd=[0,0,0];this.Vf=q;this.K=0;this.V=new Float32Array(a);b!=t&&(this.V=b.V.subarray(0,b.V.length),this.K=this.V.length,this.cb=b.cb,this.Za=b.Za,this.eb=b.eb,this.$a=b.$a,this.fb=b.fb,this.ab=b.ab,this.Dd=b.Dd.slice(),this.Vf=u)}C(U,P);w=U.prototype;
w.add=function(a,b,c){this.cb=Math.min(this.cb,a);this.Za=Math.max(this.Za,a);this.eb=Math.min(this.eb,b);this.$a=Math.max(this.$a,b);this.fb=Math.min(this.fb,c);this.ab=Math.max(this.ab,c);this.Dd=[(this.cb+this.Za)/2,(this.eb+this.$a)/2,(this.fb+this.ab)/2];this.Vf=u;this.i=q;this.V[this.K++]=a;this.V[this.K++]=b;this.V[this.K++]=c;return this.K/3};w.Eb=function(){if(this.K!=this.V.length){var a=new Float32Array(this.K);a.set(this.V.subarray(0,this.K));this.V=a}};
w.get=function(a){a*=3;return[this.V[a],this.V[a+1],this.V[a+2]]};w.remove=function(){n(Error("Not implemented."))};w.clear=function(){this.V=new Float32Array(this.V.length);this.i=q};U.prototype.__defineGetter__("count",function(){this.Eb();return this.V.length/3});U.prototype.__defineGetter__("length",function(){this.Eb();return this.V.length});B("X.triplets",U);B("X.triplets.prototype.add",U.prototype.add);B("X.triplets.prototype.resize",U.prototype.Eb);B("X.triplets.prototype.get",U.prototype.get);
B("X.triplets.prototype.remove",U.prototype.remove);B("X.triplets.prototype.clear",U.prototype.clear);function bd(){this.ya=cd;this.Z=new Zc;this.F=[1,1,1];this.Ec=this.U=this.ga=this.o=this.g=t;this.zc=[];this.ia=q;this.yc=this.Zc=1;this.pc=t;this.Qc=u;this.pa=1;this.na=0;this.Yc=q}var cd="TRIANGLES";bd.prototype.__defineSetter__("type",function(a){return this.ya=a});bd.prototype.__defineGetter__("type",v("ya"));bd.prototype.__defineGetter__("texture",function(){this.U||(this.U=new ad);return this.U});bd.prototype.__defineGetter__("transform",v("Z"));bd.prototype.__defineGetter__("points",v("g"));
bd.prototype.__defineSetter__("points",ea("g"));bd.prototype.__defineGetter__("normals",v("o"));bd.prototype.__defineSetter__("normals",ea("o"));bd.prototype.__defineGetter__("colors",v("ga"));bd.prototype.__defineSetter__("colors",ea("ga"));bd.prototype.__defineGetter__("color",v("F"));bd.prototype.__defineSetter__("color",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid color."));for(var b=this.c,c=b.length,e=0,e=0;e<c;e++)b[e].color=a;this.F=a;this.i=q});
bd.prototype.__defineGetter__("opacity",v("pa"));bd.prototype.__defineSetter__("opacity",function(a){(!x(a)||1<a||0>a)&&n(Error("Invalid opacity."));for(var b=this.c,c=b.length,e=0,e=0;e<c;e++)b[e]!=t&&(b[e].opacity=a);this.pa=a;this.i=q});bd.prototype.__defineGetter__("caption",v("pc"));bd.prototype.__defineSetter__("caption",function(a){this.pc=a;this.i=q});bd.prototype.__defineGetter__("visible",v("ia"));
bd.prototype.__defineSetter__("visible",function(a){for(var b=this.c,c=b.length,e=0,e=0;e<c;e++)b[e]!=t&&(b[e].visible=a);this.ia=a;this.i=q});bd.prototype.__defineGetter__("pointsize",v("Zc"));bd.prototype.__defineSetter__("pointsize",function(a){x(a)||n(Error("Invalid point size."));this.Zc=a;this.i=q});bd.prototype.__defineGetter__("magicmode",v("Qc"));bd.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&n(Error("Invalid magic mode setting."));this.Qc=a;this.i=q});
bd.prototype.__defineGetter__("linewidth",v("yc"));bd.prototype.__defineSetter__("linewidth",function(a){x(a)||n(Error("Invalid line width."));this.yc=a;this.i=q});bd.prototype.__defineGetter__("pickable",v("Yc"));bd.prototype.__defineSetter__("pickable",function(a){"boolean"!=typeof a&&n(Error("Invalid pickable setting."));this.Yc=a;this.i=q});bd.prototype.__defineGetter__("textureCoordinateMap",v("Ec"));bd.prototype.__defineSetter__("textureCoordinateMap",ea("Ok"));function dd(){this.bb=Infinity;this.ba=this.ha=-Infinity;this.ca=Infinity;this.Qb=[0,0,0];this.Ob=[1,1,1]}dd.prototype.__defineGetter__("lowerThreshold",v("ba"));dd.prototype.__defineSetter__("lowerThreshold",ea("ba"));dd.prototype.__defineGetter__("upperThreshold",v("ca"));dd.prototype.__defineSetter__("upperThreshold",ea("ca"));dd.prototype.__defineGetter__("min",v("bb"));dd.prototype.__defineGetter__("max",v("ha"));dd.prototype.__defineGetter__("minColor",v("Qb"));
dd.prototype.__defineSetter__("minColor",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid min. color."));this.Qb=a});dd.prototype.__defineGetter__("maxColor",v("Ob"));dd.prototype.__defineSetter__("maxColor",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid max. color."));this.Ob=a});function ed(){P.call(this);this.f="scalars";this.Oc=this.A=t;this.ig=q;this.ye=0;Ea(this,new qc);Ea(this,new dd);this.Qb=[0,1,0];this.Ob=[1,0,0]}C(ed,P);ed.prototype.__defineGetter__("array",v("A"));ed.prototype.__defineSetter__("array",function(a){this.Oc=this.A=a;this.i=q});ed.prototype.__defineGetter__("interpolation",v("ye"));ed.prototype.__defineSetter__("interpolation",ea("ye"));B("X.scalars",ed);function V(a){P.call(this);this.f="object";this.c=[];this.B=this.Sa=t;Ea(this,new bd);a!=t&&this.fc(a)}C(V,P);
V.prototype.fc=function(a){this.ya=a.ya;this.Z=new Zc;this.Z.H=new Float32Array(a.Z.H);this.F=a.F.slice();a.g&&(this.g=new U(a.g.length,a.g));a.o&&(this.o=new U(a.o.length,a.o));a.ga&&(this.ga=new U(a.ga.length,a.ga));this.U=a.U;this.Ec=a.Ec;a.q&&(this.q=new pc((new String(a.q.Nd)).toString()));this.pa=a.pa;this.c.length=0;var b=a.c;if(b)for(var c=b.length,e=0,e=0;e<c;e++)this.c.push(new E[b[e].f](b[e]));this.ia=a.ia;this.Zc=a.Zc;this.yc=a.yc;a.pc&&(this.pc=(new String(a.pc)).toString());this.Qc=
a.Qc;this.Yc=a.Yc;this.zc=a.zc.slice();this.i=q};V.prototype.__defineGetter__("colortable",function(){this.Sa||(this.Sa=new wc);return this.Sa});V.prototype.__defineGetter__("scalars",function(){this.B||(this.B=new ed);return this.B});V.prototype.__defineGetter__("children",v("c"));V.prototype.p=function(){var a=new fd;a.R=this;this.dispatchEvent(a)};V.prototype.remove=function(){var a=new gd;a.R=this;this.dispatchEvent(a)};
function hd(a,b){(a==t||b==t||!(a instanceof V)||!(b instanceof V))&&n(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.pa?-1:1==b.pa?1:a.na!=t&&b.na!=t&&a.na>b.na?-1:1}B("X.object",V);B("X.object.prototype.modified",V.prototype.p);B("X.object.prototype.remove",V.prototype.remove);function id(){}function jd(a){for(var b=a.g.count,c=[],e=0,e=0;e<b;e+=3){var d=a.g.get(e),f=a.g.get(e+1),g=a.g.get(e+2),h=a.o.get(e),l=a.o.get(e+1),k=a.o.get(e+2),j=a.F;a.ga&&0<a.ga.length&&(j=a.ga.get(e));var m=[];m.push(new dc(d,h));m.push(new dc(f,l));m.push(new dc(g,k));c.push(new fc(m,j))}return nc(c)}
function kd(a,b){(b==t||!(b instanceof mc))&&n(Error("Invalid CSG object."));var c=new oc,e=[];Fb(b.O,function(a){var b=[],g=a.se,b=Fb(a.Gb,function(a){a.color=g;return c.add(a)});for(a=a=2;a<b.length;a++)e.push([b[0],b[a-1],b[a]])}.bind(a));a.Eh=Fb(c.unique(),function(a){return[a.La.x(),a.La.y(),a.La.d()]});a.Dh=Fb(c.unique(),function(a){return[a.la.x(),a.la.y(),a.la.d()]});a.Ch=Fb(c.unique(),function(a){return!a.color?t:[a.color[0],a.color[1],a.color[2]]});a.g=new U(9*e.length);a.o=new U(9*e.length);
a.ga=new U(9*e.length);Fb(e,function(a){var b=a[0],c=a[1];a=a[2];var e=this.Eh,l=this.Dh,k=this.Ch;this.g.add(e[b][0],e[b][1],e[b][2]);this.g.add(e[c][0],e[c][1],e[c][2]);this.g.add(e[a][0],e[a][1],e[a][2]);this.o.add(l[b][0],l[b][1],l[b][2]);this.o.add(l[c][0],l[c][1],l[c][2]);this.o.add(l[a][0],l[a][1],l[a][2]);k[b]&&this.ga.add(k[b][0],k[b][1],k[b][2]);k[c]&&this.ga.add(k[c][0],k[c][1],k[c][2]);k[a]&&this.ga.add(k[a][0],k[a][1],k[a][2])}.bind(a));0==a.ga.K&&(a.ga=t);a.ya=cd}
id.prototype.Jf=function(a){(a==t||!(a instanceof mc)&&!(a instanceof V))&&n(Error("Invalid object."));var b=a;a instanceof V&&(b=jd(b));a=new V;Ea(a,new id);kd(a,jd(this).Jf(b));return a};id.prototype.za=function(a){(a==t||!(a instanceof mc)&&!(a instanceof V))&&n(Error("Invalid object."));var b=a;a instanceof V&&(b=jd(b));a=new V;Ea(a,new id);kd(a,jd(this).za(b));return a};
id.prototype.gf=function(a){(a==t||!(a instanceof mc)&&!(a instanceof V))&&n(Error("Invalid object."));var b=a;a instanceof V&&(b=jd(b));a=new V;Ea(a,new id);kd(a,jd(this).gf(b));return a};id.prototype.inverse=function(){var a=new V;Ea(a,new id);kd(a,jd(this).inverse());return a};B("X.constructable",id);B("X.constructable.prototype.intersect",id.prototype.gf);B("X.constructable.prototype.inverse",id.prototype.inverse);B("X.constructable.prototype.subtract",id.prototype.za);
B("X.constructable.prototype.union",id.prototype.Jf);function ld(a){Lb.call(this,a);this.f="event"}C(ld,Lb);var md=bc("pan"),nd=bc("rotate"),od=bc("zoom"),pd=bc("scroll");bc("render");var qd=bc("resetview"),rd=bc("windowlevel"),sd=bc("modified"),td=bc("remove"),ud=bc("progress"),vd=bc("hover"),wd=bc("hover_end");function xd(){ld.call(this,rd);this.De=this.Re=0}C(xd,ld);function yd(){ld.call(this,md);this.na=new E.l(0,0,0)}C(yd,ld);function zd(){ld.call(this,nd);this.na=new E.l(0,0,0)}C(zd,ld);function Ad(){ld.call(this,od);this.Xa=this.mb=u}C(Ad,ld);
function Bd(){ld.call(this,pd);this.W=u}C(Bd,ld);function Cd(){ld.call(this,vd);this.Td=this.Sd=0}C(Cd,ld);function Dd(){ld.call(this,wd)}C(Dd,ld);function Ed(){ld.call(this,qd)}C(Ed,ld);function fd(){ld.call(this,sd);this.w=this.R=t}C(fd,ld);function gd(){ld.call(this,td);this.w=this.R=t}C(gd,ld);function Fd(){ld.call(this,ud);this.mg=0}C(Fd,ld);function Gd(){P.call(this);this.f="parser";this.I=t;this.K=0;this.Lh=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.Jd=q;this.Lk=-Infinity;this.Kk=Infinity}C(Gd,P);Gd.prototype.parse=function(){n(Error("The function parse() should be overloaded."))};function Hd(a){for(var b=Infinity,c=-Infinity,e=a.length,d=0,d=0;d<e;d++)var f=a[d],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}
function Id(a,b,c){b===p&&(b=0);c===p&&(c=a.length);for(var e="",d=0,d=b;d<c;++d)e+=String.fromCharCode(a[d]);return e}
function Y(a,b,c){c!=t||(c=1);var e=1,d=Uint8Array;switch(b){case "schar":d=Int8Array;break;case "ushort":d=Uint16Array;e=2;break;case "sshort":d=Int16Array;e=2;break;case "uint":d=Uint32Array;e=4;break;case "sint":d=Int32Array;e=4;break;case "float":d=Float32Array;e=4;break;case "complex":d=Float64Array;e=8;break;case "double":d=Float64Array,e=8}b=new d(a.I.slice(a.K,a.K+=c*e));if(a.Lh!=a.Jd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(d=0;d<a.byteLength;d+=e)for(var f=d+e-1,g=d;f>
g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function Jd(a,b){var c=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],e=Lc(0,0,0,1),d=Kc();Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];e=Lc(0,0,b[3],1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];e=Lc(0,b[2],0,
1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];e=Lc(b[1],0,0,1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];e=Lc(b[1],b[2],0,1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>
c[5]?d[2]:c[5];e=Lc(b[1],0,b[3],1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];e=Lc(0,b[2],b[3],1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];e=Lc(b[1],b[2],b[3],1);Xc(a,e,d);c[0]=d[0]<c[0]?d[0]:c[0];c[1]=d[0]>c[1]?d[0]:c[1];c[2]=d[1]<c[2]?d[1]:c[2];c[3]=d[1]>c[3]?d[1]:
c[3];c[4]=d[2]<c[4]?d[2]:c[4];c[5]=d[2]>c[5]?d[2]:c[5];return c}
function Kd(a,b){var c=Nc();if(!(a.length==b.length&&a[0]==b[0]&&a[1]==b[1]&&a[2]==b[2])){var e=Math.acos(a[2]),d=new Float32Array(3),f=a[0],g=a[1],h=a[2],l=b[0],k=b[1],j=b[2];d[0]=g*j-h*k;d[1]=h*l-f*j;d[2]=f*k-g*l;Jc(d,d);f=Math.cos(e/2);g=Math.sin(e/2)*d[0];h=Math.sin(e/2)*d[1];e=Math.sin(e/2)*d[2];Rc(c,0,f*f+g*g-h*h-e*e,2*(g*h-f*e),2*(g*e+f*h),0);Rc(c,1,2*(g*h+f*e),f*f+h*h-g*g-e*e,2*(h*e-f*g),0);Rc(c,2,2*(g*e-f*h),2*(h*e+f*g),f*f+e*e-h*h-g*g,0)}e=Mc();Vc(c,e);return[c,e]}
function Ld(a,b,c,e,d,f,g,h){var l=new Md;Jc(b,b);for(var k=[],j=[],m=0;6>m;m++)for(var r=Math.floor(m/2),s=(r+1)%3,z=(r+2)%3,y=(4+2*r)%6,D=0;2>D;D++){var F=(2+D+2*r)%6,H=-(b[r]*(e[m]-a[r])+b[s]*(e[F]-a[s]))/b[z]+a[z];if(H>=e[y]&&H<=e[y+1]||H<=e[y]&&H>=e[y+1]){var A=[];A[r]=e[m];A[s]=e[F];A[z]=H;k.push(A)}else A=[],A[r]=e[m],A[s]=e[F],A[z]=H,j.push(A)}a=Ic(0,0,1);a=Kd(b,a);e=a[0];a=a[1];r=[];for(j=0;j<k.length;++j)m=Lc(k[j][0],k[j][1],k[j][2],1),s=Kc(),Xc(e,m,s),r.push([s[0],s[1],s[2]]);e=Ic(1,0,
0);k=new Float32Array(3);Wc(a,e,k);j=Ic(0,1,0);e=new Float32Array(3);Wc(a,j,e);m=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];for(j=j=0;j<r.length;++j)r[j][0]<m[0]&&(m[0]=r[j][0]),r[j][0]>m[1]&&(m[1]=r[j][0]),r[j][1]<m[2]&&(m[2]=r[j][1]),r[j][1]>m[3]&&(m[3]=r[j][1]),r[j][2]<m[4]&&(m[4]=r[j][2]),r[j][2]>m[5]&&(m[5]=r[j][2]);j=Lc(m[0]+(m[1]-m[0])/2,m[2]+(m[3]-m[2])/2,m[4]+(m[5]-m[4])/2,0);r=Kc();Uc(a,j,r);var s=Math.floor(m[0]),z=Math.ceil(m[1]),
y=z-s,D=Math.floor(m[2]),F=Math.ceil(m[3]),H=F-D,j=Math.ceil(y/1),G=Math.ceil(H/1),A=new Uint8Array(4*j*G),J=new ad;J.Le=j;J.Ke=G;var G=Kc(),K=Lc(0,0,m[4],1),R=Mc();Uc(f.zh,a,R);for(var N=F-1E-7,W=z-1E-7,aa=0,Z=0,ba=0,L=D,L=D;L<=N;L+=1){ba++;Z=0;K[1]=L;for(j=s;j<=W;j+=1){Z++;K[0]=j;Xc(R,K,G);var O=4*aa;if(0<=G[0]&&G[0]<f.L[0]&&0<=G[1]&&G[1]<f.L[1]&&0<=G[2]&&G[2]<f.L[2]){var Q=d[Math.floor(G[2])][Math.floor(G[1])][Math.floor(G[0])],hb=0,Ec=0,Fc=0,Gc=0;h?((Q=h.get(Q))||(Q=[0,0.61,0,0,1]),hb=255*Q[1],
Ec=255*Q[2],Fc=255*Q[3],Gc=255*Q[4]):(hb=Ec=Fc=255*(Q/f.ha),Gc=255);A[O]=hb;A[++O]=Ec;A[++O]=Fc;A[++O]=Gc}else A[O]=0,A[++O]=0,A[++O]=0,A[++O]=0;aa++}}J.Ub=A;l.U=J;l.Rh=m;l.Bh=a;l.Ah=R;l.Hh=D;l.Ik=F;l.Qh=s;l.Pk=z;l.Yf=Z;l.Xf=ba;l.Gc=1;l.C=y;l.tc=1;l.t=H;l.v=[r[0],r[1],r[2]];l.sc=[b[0],b[1],b[2]];l.Od=[k[0],k[1],k[2]];l.W=[e[0],e[1],e[2]];l.ia=u;l.Ab=f;l.yb=f.Ab!=t&&!g?u:q;l.oc=c;l.gc();l.ia=u;return l}
function Nd(a,b,c,e){for(var d=e.Ra,f=[],g=[],h=0;6>h;h++){var l=Math.floor(h/2),k=(l+1)%3,j=(l+2)%3,m=(2+2*l)%6,r=(4+2*l)%6,s=(d[h]-b[l])*(1/c[l]);if(Infinity!=s&&-Infinity!=s){var z=b[k]+c[k]*s,s=b[j]+c[j]*s;z>=d[m]&&z<=d[m+1]&&s>=d[r]&&s<=d[r+1]?(m=[],m[l]=d[h],m[k]=z,m[j]=s,f.push(m)):(m=[],m[l]=d[h],m[k]=z,m[j]=s,g.push(m))}}b=[f,g];d=b[0];e.b[a].xa=b;e.b[a].He=-(c[0]*d[0][0]+c[1]*d[0][1]+c[2]*d[0][2]);b=yc(new T(d[0][0],d[0][1],d[0][2]),new T(d[1][0],d[1][1],d[1][2]));e.b[a].Hk=b;d=Ic(0,0,1);
c=Kd(c,d);d=c[0];f=c[1];g=Lc(e.ve[0],e.ve[1],e.ve[2],0);c=Kc();Xc(d,g,c);d=Kc();Qc(f,2,d);f=c[2];d[0]*=f;d[1]*=f;d[2]*=f;d[3]*=f;e.b[a].Cc=c[2];e.b[a].wa=d;c=Math.abs(Math.floor(b/c[2]));e.ad[a]=c;e.b[a].n=c}
function Od(a,b){var c;c=b.I;for(var e=b.L,d=b.ha,f=Array(e[2]),g=Array(e[2]),h=e[1]*e[0],l=0,k=0,j=0,m=0,r=0,m=0;m<e[2];m++){var s=c.subarray(m*h,(m+1)*h),r=0;g[m]=Array(e[1]);f[m]=Array(e[1]);for(j=0;j<e[1];j++){g[m][j]=new c.constructor(e[0]);f[m][j]=new c.constructor(e[0]);for(k=0;k<e[0];k++)l=s[r],g[m][j][k]=255*(l/d),f[m][j][k]=l,r++}}c=[f,g];b.Aa=c[0];b.Fk=c[1];E.Wa(a.f+".reslice");b.ja=b.j!=t;b.Sa&&(b.Nc=b.Sa.Ya);b.bl=[b.L[0],b.L[1],b.L[2]];b.s=[b.ua[0]+b.xb[0]/2,b.ua[1]+b.xb[1]/2,b.ua[2]+
b.xb[2]/2];b.Ra=[Math.min(b.ua[0],b.ua[0]+b.xb[0]),Math.max(b.ua[0],b.ua[0]+b.xb[0]),Math.min(b.ua[1],b.ua[1]+b.xb[1]),Math.max(b.ua[1],b.ua[1]+b.xb[1]),Math.min(b.ua[2],b.ua[2]+b.xb[2]),Math.max(b.ua[2],b.ua[2]+b.xb[2])];b.b=[{},{},{}];c=Ic(b.s[0],b.s[1],b.s[2]);b.b[0].cd=c;e=Ic(1,0,0);Jc(e,e);b.b[0].h=e;d=[1,1,0];b.b[0].F=d;Nd(0,c,e,b);b.c[0].c=Array(b.b[0].n);c[0]=b.b[0].xa[0][0][0]+Math.abs(b.b[0].wa[0])*Math.round(b.b[0].n/2);c[1]=b.b[0].xa[0][0][1]+Math.abs(b.b[0].wa[1])*Math.round(b.b[0].n/
2);c[2]=b.b[0].xa[0][0][2]+Math.abs(b.b[0].wa[2])*Math.round(b.b[0].n/2);c=Ld(c,b.b[0].h,b.b[0].F,b.Ra,b.Aa,b,b.ja,b.Nc);b.ja&&(c.j=b.j.c[0].c[Math.round(b.b[0].n/2)].U);b.c[0].c[Math.round(b.b[0].n/2)]=c;b.nb=Math.round(b.b[0].n/2);b.uc=Math.round(b.b[0].n/2);c=Ic(b.s[0],b.s[1],b.s[2]);b.b[1].cd=c;e=Ic(0,1,0);Jc(e,e);b.b[1].h=e;d=[1,0,0];b.b[1].F=d;Nd(1,c,e,b);b.c[1].c=Array(b.b[1].n);c[0]=b.b[1].xa[0][0][0]+Math.abs(b.b[1].wa[0])*Math.round(b.b[1].n/2);c[1]=b.b[1].xa[0][0][1]+Math.abs(b.b[1].wa[1])*
Math.round(b.b[1].n/2);c[2]=b.b[1].xa[0][0][2]+Math.abs(b.b[1].wa[2])*Math.round(b.b[1].n/2);c=Ld(c,b.b[1].h,b.b[1].F,b.Ra,b.Aa,b,b.ja,b.Nc);b.ja&&(c.j=b.j.c[1].c[Math.round(b.b[1].n/2)].U);b.c[1].c[Math.round(b.b[1].n/2)]=c;b.ob=Math.round(b.b[1].n/2);b.vc=Math.round(b.b[1].n/2);c=Ic(b.s[0],b.s[1],b.s[2]);b.b[2].cd=c;e=Ic(0,0,1);Jc(e,e);b.b[2].h=e;d=[0,1,0];b.b[2].F=d;Nd(2,c,e,b);b.c[2].c=Array(b.b[2].n);c[0]=b.b[2].xa[0][0][0]+Math.abs(b.b[2].wa[0])*Math.round(b.b[2].n/2);c[1]=b.b[2].xa[0][0][1]+
Math.abs(b.b[2].wa[1])*Math.round(b.b[2].n/2);c[2]=b.b[2].xa[0][0][2]+Math.abs(b.b[2].wa[2])*Math.round(b.b[2].n/2);c=Ld(c,b.b[2].h,b.b[2].F,b.Ra,b.Aa,b,b.ja,b.Nc);b.ja&&(c.j=b.j.c[2].c[Math.round(b.b[2].n/2)].U);b.c[2].c[Math.round(b.b[2].n/2)]=c;b.pb=Math.round(b.b[2].n/2);b.wc=Math.round(b.b[2].n/2);E.Qa(a.f+".reslice");return b.Aa};function Pd(){Gd.call(this);this.f="parserLBL"}C(Pd,Gd);
Pd.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");var e=b.zc,d=e.length;0==d&&n(Error("No _pointIndices defined on the X.object."));this.I=c;var f=[],g=Y(this,"uchar",c.byteLength),h=g.length,l=u,k=0;for(c=1;c<h;c++)10==g[c-1]?(k=c,l=q):l&&32==g[c]&&(f.push(parseInt(Id(g,k,c),10)),l=u);g=b.B.A?b.B.A:new Float32Array(d);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*d);for(c=h=0;c<d;c++)l=e[c],l>d&&n(Error("Could not find scalar for vertex.")),l=g[l],f[h++]=l,f[h++]=l,f[h++]=l;b.B.A=
g;b.B.Oc=f;b.B.i=q;E.Qa(this.f+".parse");e=new fd;e.R=b;e.w=a;this.dispatchEvent(e)};B("X.parserLBL",Pd);B("X.parserLBL.prototype.parse",Pd.prototype.parse);function Qd(a,b){this.x=ia(a)?a:0;this.y=ia(b)?b:0}w=Qd.prototype;w.k=function(){return new Qd(this.x,this.y)};function Rd(a,b){return new Qd(a.x-b.x,a.y-b.y)}w.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};w.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};w.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
w.translate=function(a,b){a instanceof Qd?(this.x+=a.x,this.y+=a.y):(this.x+=a,x(b)&&(this.y+=b));return this};w.scale=function(a,b){var c=x(b)?b:a;this.x*=a;this.y*=c;return this};function Sd(a,b,c,e){this.top=a;this.right=b;this.bottom=c;this.left=e}w=Sd.prototype;w.k=function(){return new Sd(this.top,this.right,this.bottom,this.left)};w.contains=function(a){return!this||!a?u:a instanceof Sd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};
w.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};w.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};w.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};
w.translate=function(a,b){a instanceof Qd?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,x(b)&&(this.top+=b,this.bottom+=b));return this};w.scale=function(a,b){var c=x(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function Td(a,b){this.width=a;this.height=b}w=Td.prototype;w.k=function(){return new Td(this.width,this.height)};w.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};w.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};w.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};w.scale=function(a,b){var c=x(b)?b:a;this.width*=a;this.height*=c;return this};function Ud(a,b,c,e){this.left=a;this.top=b;this.width=c;this.height=e}w=Ud.prototype;w.k=function(){return new Ud(this.left,this.top,this.width,this.height)};w.Hg=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var e=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(e<=a)return this.left=b,this.top=e,this.width=c-b,this.height=a-e,q}return u};
w.contains=function(a){return a instanceof Ud?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Vd(a,b){var c=b.x<a.left?a.left-b.x:Math.max(b.x-(a.left+a.width),0),e=b.y<a.top?a.top-b.y:Math.max(b.y-(a.top+a.height),0);return c*c+e*e}w.df=function(a){return Math.sqrt(Vd(this,a))};
w.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};w.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};w.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
w.translate=function(a,b){a instanceof Qd?(this.left+=a.x,this.top+=a.y):(this.left+=a,x(b)&&(this.top+=b));return this};w.scale=function(a,b){var c=x(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};var Wd;function Xd(a,b){var c;c=a.className;c=ma(c)&&c.match(/\S+/g)||[];for(var e=Ib(arguments,1),d=c.length+e.length,f=c,g=0;g<e.length;g++)0<=Cb(f,e[g])||f.push(e[g]);a.className=c.join(" ");return c.length==d};var Yd=!I||I&&9<=yb;!ib&&!I||I&&I&&9<=yb||ib&&wb("1.9.1");I&&wb("9");function Zd(a){return a?new $d(ae(a)):Wd||(Wd=new $d)}function be(a){return ma(a)?document.getElementById(a):a}var ce={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(a,b,c){return ee(document,arguments)}
function ee(a,b){var c=b[0],e=b[1];if(!Yd&&e&&(e.name||e.type)){c=["<",c];e.name&&c.push(' name="',Pa(e.name),'"');if(e.type){c.push(' type="',Pa(e.type),'"');var d={};Oa(d,e);delete d.type;e=d}c.push(">");c=c.join("")}var f=a.createElement(c);if(e)if(ma(e))f.className=e;else if(ka(e))Xd.apply(t,[f].concat(e));else{var c=function(a,b){"style"==b?f.style.cssText=a:"class"==b?f.className=a:"for"==b?f.htmlFor=a:b in ce?f.setAttribute(ce[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?
f.setAttribute(b,a):f[b]=a},g;for(g in e)c.call(p,e[g],g)}if(2<b.length){g=function(b){b&&f.appendChild(ma(b)?a.createTextNode(b):b)};for(e=2;e<b.length;e++)if(d=b[e],la(d)&&!(oa(d)&&0<d.nodeType)){var c=Eb,h;a:{if((h=d)&&"number"==typeof h.length){if(oa(h)){h="function"==typeof h.item||"string"==typeof h.item;break a}if(na(h)){h="function"==typeof h.item;break a}}h=u}if(h)if(h=d.length,0<h){for(var l=Array(h),k=0;k<h;k++)l[k]=d[k];d=l}else d=[];c(d,g)}else g(d)}return f}
function fe(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ge(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function he(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function ae(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function $d(a){this.$=a||fa.document||document}w=$d.prototype;w.ae=Zd;
w.r=function(a){return ma(a)?this.$.getElementById(a):a};w.uh=$d.prototype.r;w.Hc=function(a,b,c){return ee(this.$,arguments)};w.createElement=function(a){return this.$.createElement(a)};w.createTextNode=function(a){return this.$.createTextNode(String(a))};function ie(a){return"CSS1Compat"==a.$.compatMode}
function je(a){var b=a.$;a=!jb&&"CSS1Compat"==b.compatMode?b.documentElement:b.body;b=b.parentWindow||b.defaultView;return I&&wb("10")&&b.pageYOffset!=a.scrollTop?new Qd(a.scrollLeft,a.scrollTop):new Qd(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}w.appendChild=function(a,b){a.appendChild(b)};w.contains=he;function ke(a,b){var c=ae(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,t))?c[b]||c.getPropertyValue(b)||"":""}function le(a,b){return ke(a,b)||(a.currentStyle?a.currentStyle[b]:t)||a.style&&a.style[b]}function me(a){a=a?ae(a):document;return I&&!(I&&9<=yb)&&!ie(Zd(a))?a.body:a.documentElement}
function ne(a){var b=a.getBoundingClientRect();I&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function oe(a){if(I&&!(I&&8<=yb))return a.offsetParent;var b=ae(a),c=le(a,"position"),e="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=le(a,"position"),e=e&&"static"==c&&a!=b.documentElement&&a!=b.body,!e&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return t}
function pe(a){for(var b=new Sd(0,Infinity,Infinity,0),c=Zd(a),e=c.$.body,d=c.$.documentElement,f=!jb&&"CSS1Compat"==c.$.compatMode?c.$.documentElement:c.$.body;a=oe(a);)if((!I||0!=a.clientWidth)&&(!jb||0!=a.clientHeight||a!=e)&&a!=e&&a!=d&&"visible"!=le(a,"overflow")){var g=qe(a),h;h=a;if(ib&&!wb("1.9")){var l=parseFloat(ke(h,"borderLeftWidth"));if(re(h))var k=h.offsetWidth-h.clientWidth-l-parseFloat(ke(h,"borderRightWidth")),l=l+k;h=new Qd(l,parseFloat(ke(h,"borderTopWidth")))}else h=new Qd(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}e=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,e);b.top=Math.max(b.top,f);c=(c.$.parentWindow||c.$.defaultView||window).document;c="CSS1Compat"==c.compatMode?c.documentElement:c.body;c=new Td(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,e+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&
b.bottom>b.top&&b.right>b.left?b:t}
function qe(a){var b,c=ae(a),e=le(a,"position"),d=ib&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==e&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Qd(0,0),g=me(c);if(a==g)return f;if(a.getBoundingClientRect)b=ne(a),a=je(Zd(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!d)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(jb&&"fixed"==le(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(gb||jb&&"absolute"==e)f.y-=c.body.offsetTop;for(b=a;(b=oe(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!gb||"TR"!=b.tagName)f.y-=b.scrollTop}return f}
function se(a){var b=new Qd;if(1==a.nodeType){if(a.getBoundingClientRect){var c=ne(a);b.x=c.left;b.y=c.top}else{var c=je(Zd(a)),e=qe(a);b.x=e.x-c.x;b.y=e.y-c.y}if(ib&&!wb(12)){var d;I?d="-ms-transform":jb?d="-webkit-transform":gb?d="-o-transform":ib&&(d="-moz-transform");var f;d&&(f=le(a,d));f||(f=le(a,"transform"));f?(a=f.match(te),a=!a?new Qd(0,0):new Qd(parseFloat(a[1]),parseFloat(a[2]))):a=new Qd(0,0);b=new Qd(b.x+a.x,b.y+a.y)}}else d=na(a.pi),f=a,a.targetTouches?f=a.targetTouches[0]:d&&a.jb.targetTouches&&
(f=a.jb.targetTouches[0]),b.x=f.clientX,b.y=f.clientY;return b}function ue(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function ve(a){if("none"!=le(a,"display"))return we(a);var b=a.style,c=b.display,e=b.visibility,d=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=we(a);b.display=c;b.position=d;b.visibility=e;return a}
function we(a){var b=a.offsetWidth,c=a.offsetHeight,e=jb&&!b&&!c;return(!ia(b)||e)&&a.getBoundingClientRect?(a=ne(a),new Td(a.right-a.left,a.bottom-a.top)):new Td(b,c)}function xe(a,b){a.style.display=b?"":"none"}function re(a){return"rtl"==le(a,"direction")}function ye(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var d=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=e;return d}
function ze(a,b){var c=a.currentStyle?a.currentStyle[b]:t;return c?ye(a,c):0}var Ae={thin:2,medium:4,thick:6};function Be(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:t))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:t;return c in Ae?Ae[c]:ye(a,c)}var te=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Ce(a,b){cc.call(this);this.z=a;var c=oa(this.z)&&1==this.z.nodeType?this.z:this.z?this.z.body:t;this.Ii=!!c&&re(c);this.Yk=M(this.z,ib?"DOMMouseScroll":"mousewheel",this,b)}C(Ce,cc);
Ce.prototype.handleEvent=function(a){var b=0,c=0,e=0;a=a.jb;if("mousewheel"==a.type){c=1;if(I||jb&&($a||wb("532.0")))c=40;e=De(-a.wheelDelta,c);ia(a.wheelDeltaX)?(b=De(-a.wheelDeltaX,c),c=De(-a.wheelDeltaY,c)):c=e}else e=a.detail,100<e?e=3:-100>e&&(e=-3),ia(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=e:c=e;x(this.Mg)&&(b=Math.min(Math.max(b,-this.Mg),this.Mg));x(this.Ng)&&(c=Math.min(Math.max(c,-this.Ng),this.Ng));this.Ii&&(b=-b);b=new Ee(e,a,b,c);this.dispatchEvent(b)};
function De(a,b){return jb&&(Za||ab)&&0!=a%b?a:a/b}function Ee(a,b,c,e){b&&this.sa(b,p);this.type="mousewheel";this.detail=a;this.Tk=c;this.Ic=e}C(Ee,Nb);I||jb&&wb("525");function Fe(a){P.call(this);this.f="interactor";this.Ga=a;this.Ee=this.cg=this.bg=this.dg=this.ag=this.eg=t;this.Md=q;this.Vb=this.Pb=this.qb=u;this.ka=[0,0];this.ze=new E.l(0,0,0);this.Pc=new E.l(0,0,0);this.Jg=0;this.lg=this.Hd=t;this.kg=u;this.P={MOUSEWHEEL_ENABLED:q,MOUSECLICKS_ENABLED:q,KEYBOARD_ENABLED:q,HOVERING_ENABLED:q,CONTEXTMENU_ENABLED:u,TOUCH_ENABLED:q,TOUCH_BOUNCING_ENABLED:u}}C(Fe,P);Fe.prototype.__defineGetter__("config",v("P"));Fe.prototype.__defineGetter__("leftButtonDown",v("qb"));
Fe.prototype.__defineGetter__("middleButtonDown",v("Pb"));Fe.prototype.__defineGetter__("rightButtonDown",v("Vb"));
Fe.prototype.sa=function(){this.P.MOUSEWHEEL_ENABLED?(this.Ee=new Ce(this.Ga),this.eg=M(this.Ee,"mousewheel",this.td.bind(this))):(Wb(this.eg),this.Ee=t);this.P.MOUSECLICKS_ENABLED?(this.ag=M(this.Ga,"mousedown",this.Vi.bind(this)),this.dg=M(this.Ga,"mouseup",this.$i.bind(this))):(Wb(this.ag),Wb(this.dg));this.Ga.oncontextmenu=this.P.CONTEXTMENU_ENABLED?t:function(){return u};window.onkeydown=this.P.KEYBOARD_ENABLED?this.Tg.bind(this):t;this.P.TOUCH_ENABLED?(this.P.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(a){a.preventDefault()},u),this.Ph=M(this.Ga,"touchstart",this.nj.bind(this)),this.Oh=M(this.Ga,"touchmove",this.lj.bind(this)),this.Nh=M(this.Ga,"touchend",this.hj.bind(this))):(Wb(this.Ph),Wb(this.Oh),Wb(this.Nh));Wb(this.bg);Wb(this.cg);this.bg=M(this.Ga,"mousemove",this.Xi.bind(this));this.cg=M(this.Ga,"mouseout",this.Yi.bind(this))};
Fe.prototype.Vi=function(a){0==a.button?this.qb=q:1==a.button?this.Pb=q:2==a.button&&(this.Vb=q);eval("this.onMouseDown("+this.qb+","+this.Pb+","+this.Vb+")");Ge(this);a.preventDefault()};Fe.prototype.Ui=da();Fe.prototype.$i=function(a){0==a.button?this.qb=u:1==a.button?this.Pb=u:2==a.button&&(this.Vb=u);eval("this.onMouseUp("+this.qb+","+this.Pb+","+this.Vb+")");Ge(this);a.preventDefault()};Fe.prototype.__defineGetter__("mousePosition",v("ka"));w=Fe.prototype;w.Zi=da();
w.Yi=function(a){this.Md=u;this.P.KEYBOARD_ENABLED&&(window.onkeydown=t);this.Vb=this.Pb=this.qb=u;Ge(this);this.ze=new E.l(0,0,0);a.preventDefault()};w.Wi=da();w.nj=function(a){a.preventDefault();a.sa(a.jb.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Pc=new E.l(a.clientX,a.clientY,0);this.lg=setTimeout(this.jj.bind(this,a),500)};w.mj=da();
w.jj=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new Ad;a.mb=q;a.Xa=this instanceof Je;this.dispatchEvent(a);this.Pd=q};w.ij=da();function Ke(a){clearTimeout(a.lg);if(a.Pd){var b=new Ad;b.mb=u;b.Xa=a instanceof Je;a.dispatchEvent(b)}a.Pd=u}w.hj=function(a){a.preventDefault();eval("this.onTouchEnd()");Ke(this)};w.gj=da();
w.lj=function(a){a.preventDefault();this.Pd||Ke(this);this.touchmoveEvent=a=a.jb;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new E.l(c[0],c[1],0);var b=c[0]>3*this.Ga.clientWidth/4,e=c[0]<this.Ga.clientWidth/4,d=c[1]<this.Ga.clientHeight/4,c=c[1]>3*this.Ga.clientHeight/4,c=!b&&!e&&!d&&!c,d=this.Pc.za(a);this.Pc=a.k();if(this.Pd)a=new yd,5<d.x?d.x=1:-5>d.x&&(d.x=-1),5<d.y?d.y=1:-5>d.y&&(d.y=-1),a.na=d,this.dispatchEvent(a);
else if(this instanceof Le&&(b||e))a=new Bd,a.W=0>d.y,this.dispatchEvent(a);else if(this instanceof Je||c)d.scale(3),a=new zd,a.na=d,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new E.l(a[0],a[1],0),b=new E.l(b[0],b[1],0),d=zc(a,b),b=d-this.Jg,this.Jg=d,this.Pc.za(a),this.Pc=a.k(),10<Math.abs(b)&&(a=new Ad,a.mb=0<b,a.Xa=this instanceof Je,this.dispatchEvent(a)))};w.kj=da();
w.Xi=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Md=q;this.P.KEYBOARD_ENABLED&&window.onkeydown==t&&(window.onkeydown=this.Tg.bind(this));a.preventDefault();var b=a.shiftKey;this.kg=b;this.ka=[a.offsetX,a.offsetY];var c=new E.l(this.ka[0],this.ka[1],0);a=this.ze.za(c);this.ze=c.k();this.P.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.Pb||this.qb||this.Vb)&&Ge(this),this.Hd=setTimeout(function(){Ge(this);var a=new Cd;a.Sd=c.x;a.Td=c.y;this.dispatchEvent(a);
this.Hd=t}.bind(this),300));0!=a.Db()&&(this.qb&&!b?(b=new zd,a.scale(3),b.na=a,this.dispatchEvent(b)):this.Pb||this.qb&&b?(b=new yd,b.na=a,this.dispatchEvent(b)):this.Vb&&(b=new Ad,b.mb=0<a.y,b.Xa=u,this.dispatchEvent(b)))};function Ge(a){a.Hd&&clearTimeout(a.Hd);a.dispatchEvent(new Dd)}w.aj=da();w.td=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");Ge(this);a.preventDefault()};w.Si=da();
w.Tg=function(a){if(this.Md){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");Ge(this);var b=a.altKey,c=a.ctrlKey,e=a.metaKey,d=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!e&&!d?(a.preventDefault(),a=new Ed,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),d?a=new yd:b?a=new Ad:(a=new zd,this instanceof Le&&(a=new Bd)),a&&(c=new E.l(0,0,0),37==f?(c.x=5,a.W=u,b&&(a.W=q,a.mb=q,a.Xa=u)):39==f?(c.x=-5,a.W=q,b&&(a.mb=u,a.Xa=u)):38==f?(c.y=5,a.W=q,b&&(a.mb=q,a.Xa=q)):40==f&&(c.y=-5,a.W=u,b&&(a.mb=
u,a.Xa=q)),a.na=c,this.dispatchEvent(a)))}};B("X.interactor",Fe);B("X.interactor.prototype.init",Fe.prototype.sa);B("X.interactor.prototype.onMouseDown",Fe.prototype.Ui);B("X.interactor.prototype.onMouseUp",Fe.prototype.Zi);B("X.interactor.prototype.onMouseMove",Fe.prototype.Wi);B("X.interactor.prototype.onMouseWheel",Fe.prototype.aj);B("X.interactor.prototype.onKey",Fe.prototype.Si);B("X.interactor.prototype.onTouchStart",Fe.prototype.mj);B("X.interactor.prototype.onTouchMove",Fe.prototype.kj);
B("X.interactor.prototype.onTouchEnd",Fe.prototype.gj);B("X.interactor.prototype.onTouchHover",Fe.prototype.ij);function Le(a){Fe.call(this,a);this.f="interactor2D"}C(Le,Fe);Le.prototype.td=function(a){Le.u.td.call(this,a);var b=new Bd;a.Ic==t&&(a.Ic=0);b.W=0>a.Ic;this.dispatchEvent(b)};function Md(a){V.call(this);this.f="slice";this.v=[0,0,0];this.sc=[0,0,1];this.W=[0,1,0];this.Od=[1,0,0];this.t=this.C=10;this.Ec=[0,1,0,0,1,1,1,1,1,0,0,0];this.j=this.Ab=t;this.yb=q;this.oc=[1,1,1];a!=t&&this.fc(a)}C(Md,V);Md.prototype.fc=function(a){this.v=a.v.slice();this.sc=a.sc.slice();this.W=a.W.slice();this.C=a.C;this.t=a.t;this.Ab=a.Ab;this.j=a.j;this.yb=a.yb;this.oc=a.oc;this.Gh=a.Gh;Md.u.fc.call(this,a)};Md.prototype.__defineSetter__("height",ea("t"));
Md.prototype.__defineSetter__("width",ea("C"));Md.prototype.create=function(){this.gc()};
Md.prototype.gc=function(){var a=(new T(this.sc[0],this.sc[1],this.sc[2])).normalize(),b=new T(this.W[0],this.W[1],this.W[2]),c=new T(this.Od[0],this.Od[1],this.Od[2]),e=new T(this.v[0],this.v[1],this.v[2]),d=Ac(c.k().N().scale(this.C/2),b.k().N().scale(this.t/2)),f=new T(d.x+e.x,d.y+e.y,d.d+e.d),d=Ac(c.k().N().scale(this.C/2),b.k().scale(this.t/2)),g=new T(d.x+e.x,d.y+e.y,d.d+e.d),d=Ac(c.k().scale(this.C/2),b.k().N().scale(this.t/2)),h=new T(d.x+e.x,d.y+e.y,d.d+e.d),d=Ac(c.k().scale(this.C/2),b.k().scale(this.t/
2)),b=new T(d.x+e.x,d.y+e.y,d.d+e.d);this.g=new U(18);this.o=new U(18);this.g.add(f.x,f.y,f.d);this.g.add(g.x,g.y,g.d);this.g.add(h.x,h.y,h.d);this.g.add(h.x,h.y,h.d);this.g.add(b.x,b.y,b.d);this.g.add(g.x,g.y,g.d);this.o.add(a.x,a.y,a.d);this.o.add(a.x,a.y,a.d);this.o.add(a.x,a.y,a.d);this.o.add(a.x,a.y,a.d);this.o.add(a.x,a.y,a.d);this.o.add(a.x,a.y,a.d);this.yb&&(a=new V,a.g=new U(24),a.o=new U(24),a.g.add(f.x,f.y,f.d),a.g.add(g.x,g.y,g.d),a.g.add(g.x,g.y,g.d),a.g.add(b.x,b.y,b.d),a.g.add(b.x,
b.y,b.d),a.g.add(h.x,h.y,h.d),a.g.add(h.x,h.y,h.d),a.g.add(f.x,f.y,f.d),a.o.add(0,0,0),a.o.add(0,0,0),a.o.add(0,0,0),a.o.add(0,0,0),a.o.add(0,0,0),a.o.add(0,0,0),a.o.add(0,0,0),a.o.add(0,0,0),a.F=[this.oc[0],this.oc[1],this.oc[2]],a.ya="LINES",a.yc=2,this.c.push(a))};B("X.slice",Md);B("X.slice.prototype.create",Md.prototype.create);function S(a){V.call(this);this.f="volume";this.v=[0,0,0];this.L=[10,10,10];this.Ra=[1,1,1];this.ad=[10,10,10];this.hd=[1,1,1];this.Lb=[];this.wc=this.pb=this.vc=this.ob=this.uc=this.nb=0;this.ed=new V;this.fd=new V;this.gd=new V;this.Rd=this.hb=u;this.Bb=0;this.j=t;this.yb=q;this.ea=Infinity;this.da=-Infinity;this.jg=q;this.ha=0;this.I=t;Ea(this,new qc);Ea(this,new dd);a!=t&&this.fc(a)}C(S,V);
S.prototype.fc=function(a){this.v=a.v.slice();this.L=a.L.slice();this.hd=a.hd.slice();this.nb=a.nb;this.uc=a.uc;this.ob=a.ob;this.vc=a.vc;this.pb=a.pb;this.wc=a.wc;this.Jh=a.Jh;this.Kh=a.Kh;this.Ih=a.Ih;this.Sf=a.Sf.slice();this.ed=new V(a.ed);this.fd=new V(a.fd);this.gd=new V(a.gd);this.ha=a.ha;this.I=a.I;this.hb=a.hb;this.Rd=a.Rd;this.Bb=a.Bb;this.j=a.j;this.yb=a.yb;S.u.fc.call(this,a)};
S.prototype.gc=function(a){this.c.length=0;this.ed.c.length=0;this.fd.c.length=0;this.gd.c.length=0;this.c.push(this.ed);this.c.push(this.fd);this.c.push(this.gd);this.ua=a.Bd;this.ve=a.Cd;this.xb=a.Ad;this.Ek=a.Hb;this.zh=a.Ib;this.Mk=a.kh;this.Nk=a.Ma;this.Ba=a.orientation;this.ha=a.max;this.I=a.data;this.i=q};
S.prototype.p=function(a){a="undefined"!==typeof a?a:q;if(0<this.c.length){this.hb!=this.Rd&&(this.hb?(this.c[0].c[parseInt(this.nb,10)].visible=u,this.c[1].c[parseInt(this.ob,10)].visible=u,this.c[2].c[parseInt(this.pb,10)].visible=u):this.c[this.Bb].visible=u,this.i=q,this.Rd=this.hb);if(!this.ia)return;if(this.hb)Me(this,this.Bb);else for(var b=0,b=0;3>b;b++){var c=this.c[b],e=0,d=0;0==b?(e=this.nb,d=this.uc,this.uc=this.nb):1==b?(e=this.ob,d=this.vc,this.vc=this.ob):2==b&&(e=this.pb,d=this.wc,
this.wc=this.pb);if(this.c[b].c[parseInt(e,10)]==t){var f=new Float32Array(3);f[0]=this.b[b].xa[0][0][0]+Math.abs(this.b[b].wa[0])*parseInt(e,10);f[1]=this.b[b].xa[0][0][1]+Math.abs(this.b[b].wa[1])*parseInt(e,10);f[2]=this.b[b].xa[0][0][2]+Math.abs(this.b[b].wa[2])*parseInt(e,10);if(this.ja){var g=Ld(f,this.b[b].h,this.b[b].F,this.Ra,this.j.Aa,this.j,this.j.ja,this.j.Sa.Ya);this.j.c[b].c[parseInt(e,10)]=g;this.j.c[b].p(q)}f=Ld(f,this.b[b].h,this.b[b].F,this.Ra,this.Aa,this,q,t);this.ja&&(f.j=f.U,
f.j=this.j.c[b].c[parseInt(e,10)].U);c.c[parseInt(e,10)]=f;this.c[b].p(q)}c.c[parseInt(d,10)].visible=u;c=c.c[parseInt(e,10)];c.visible=q;c.pa=1}}a&&S.u.p.call(this)};S.prototype.__defineGetter__("dimensions",v("L"));S.prototype.__defineGetter__("bbox",v("Ra"));S.prototype.__defineGetter__("range",v("ad"));S.prototype.__defineGetter__("dimensionsRAS",v("Sf"));S.prototype.__defineGetter__("volumeRendering",v("hb"));S.prototype.__defineSetter__("volumeRendering",function(a){this.hb=a;this.p(u)});
S.prototype.__defineGetter__("visible",v("ia"));S.prototype.__defineSetter__("visible",function(a){if(a)this.ia=a,this.p(u);else{for(var b=this.c,c=b.length,e=0,e=0;e<c;e++)b[e].visible=a;this.ia=a;this.i=q}});S.prototype.__defineGetter__("center",v("v"));S.prototype.__defineSetter__("center",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid center."));this.v=a});S.prototype.__defineGetter__("image",v("Lb"));
S.prototype.__defineGetter__("labelmap",function(){this.j||(this.j=new Ne(this));return this.j});S.prototype.__defineGetter__("indexX",v("nb"));S.prototype.__defineSetter__("indexX",function(a){x(a)&&(0<=a&&a<this.ed.c.length)&&(this.nb=a,this.p(u))});S.prototype.__defineGetter__("indexY",v("ob"));S.prototype.__defineSetter__("indexY",function(a){x(a)&&(0<=a&&a<this.fd.c.length)&&(this.ob=a,this.p(u))});S.prototype.__defineGetter__("indexZ",v("pb"));
S.prototype.__defineSetter__("indexZ",function(a){x(a)&&(0<=a&&a<this.gd.c.length)&&(this.pb=a,this.p(u))});S.prototype.__defineGetter__("windowLow",v("ea"));S.prototype.__defineSetter__("windowLow",ea("ea"));S.prototype.__defineGetter__("windowHigh",v("da"));S.prototype.__defineSetter__("windowHigh",ea("da"));S.prototype.__defineGetter__("borders",v("yb"));S.prototype.__defineSetter__("borders",ea("yb"));S.prototype.__defineGetter__("reslicing",v("jg"));S.prototype.__defineSetter__("reslicing",ea("jg"));
S.prototype.__defineSetter__("xNormX",function(a){this.b[0].h[0]=a});S.prototype.__defineGetter__("xNormX",function(){return this.b[0].h[0]});S.prototype.__defineSetter__("xNormY",function(a){this.b[0].h[1]=a});S.prototype.__defineGetter__("xNormY",function(){return this.b[0].h[1]});S.prototype.__defineSetter__("xNormZ",function(a){this.b[0].h[2]=a});S.prototype.__defineGetter__("xNormZ",function(){return this.b[0].h[2]});S.prototype.__defineSetter__("xColor",function(a){this.b[0].F=a});
S.prototype.__defineGetter__("xColor",function(){return this.b[0].F});S.prototype.__defineSetter__("yNormX",function(a){this.b[1].h[0]=a});S.prototype.__defineGetter__("yNormX",function(){return this.b[1].h[0]});S.prototype.__defineSetter__("yNormY",function(a){this.b[1].h[1]=a});S.prototype.__defineGetter__("yNormY",function(){return this.b[1].h[1]});S.prototype.__defineSetter__("yNormZ",function(a){this.b[1].h[2]=a});S.prototype.__defineGetter__("yNormZ",function(){return this.b[1].h[2]});
S.prototype.__defineSetter__("yColor",function(a){this.b[1].F=a});S.prototype.__defineGetter__("yColor",function(){return this.b[1].F});S.prototype.__defineSetter__("zNormX",function(a){this.b[2].h[0]=a});S.prototype.__defineGetter__("zNormX",function(){return this.b[2].h[0]});S.prototype.__defineSetter__("zNormY",function(a){this.b[2].h[1]=a});S.prototype.__defineGetter__("zNormY",function(){return this.b[2].h[1]});S.prototype.__defineSetter__("zNormZ",function(a){this.b[2].h[2]=a});
S.prototype.__defineGetter__("zNormZ",function(){return this.b[2].h[2]});S.prototype.__defineSetter__("zColor",function(a){this.b[2].F=a});S.prototype.__defineGetter__("zColor",function(){return this.b[2].F});
S.prototype.Ej=function(a){var b=this.c[a];b.visible=u;for(var c=0;c<b.c.length;c++)"undefined"!=typeof b.c[c]&&(this.ja&&this.j.c[a].c[c].remove(),this.c[a].c[c].remove());Nd(a,this.b[a].cd,this.b[a].h,this);this.c[a].c=[];this.c[a].c=Array(this.b[a].n);this.ja&&(c=Ld(this.b[a].cd,this.b[a].h,this.b[a].F,this.Ra,this.j.Aa,this.j,this.j.ja,this.j.Sa.Ya),this.j.c[a].c=[],this.j.c[a].c=Array(this.b[a].n),this.j.c[a].c[Math.round(this.b[a].n/2)]=c,this.j.c[a].p(q));c=Ld(this.b[a].cd,this.b[a].h,this.b[a].F,
this.Ra,this.Aa,this,q,t);this.ja&&(c.j=c.U,c.j=this.j.c[a].c[Math.round(this.b[a].n/2)].U);b.c[Math.round(this.b[a].n/2)]=c;0==a?(this.nb=Math.round(this.b[a].n/2),this.uc=Math.round(this.b[a].n/2)):1==a?(this.ob=Math.round(this.b[a].n/2),this.vc=Math.round(this.b[a].n/2)):(this.pb=Math.round(this.b[a].n/2),this.wc=Math.round(this.b[a].n/2));this.c[a].p(q);this.c[a].c[Math.round(this.b[a].n/2)].ia=q};
function Me(a,b){if(a.hb&&(a.i||b!=a.Bb)){var c=a.c[a.Bb];c.visible=u;var c=a.c[b],e=c.c.length,d;for(d=0;d<e;d++){if(c.c[d]==t){var f=new Float32Array(3);f[0]=a.b[b].xa[0][0][0]+Math.abs(a.b[b].wa[0])*d;f[1]=a.b[b].xa[0][0][1]+Math.abs(a.b[b].wa[1])*d;f[2]=a.b[b].xa[0][0][2]+Math.abs(a.b[b].wa[2])*d;if(a.ja){var g=Ld(f,a.b[b].h,a.b[b].F,a.Ra,a.j.Aa,a.j,a.j.ja,a.j.Sa.Ya);a.j.c[b].c[d]=g;a.j.c[b].p(q)}f=Ld(f,a.b[b].h,a.b[b].F,a.Ra,a.Aa,a,q,t);f.c[0].ia=u;a.ja&&(f.j=f.U,f.j=a.j.c[b].c[d].U);c.c[d]=
f;a.c[b].p(q)}c.c[d].ia=q}a.Bb=b;a.i=u}}B("X.volume",S);B("X.volume.prototype.modified",S.prototype.p);B("X.volume.prototype.sliceInfoChanged",S.prototype.Ej);function Oe(){Gd.call(this);this.f="parserSTL"}C(Oe,Gd);
Oe.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");this.I=c;var e=b.g,d=b.o;if("solid"==Id(Y(this,"uchar",5))){b.g=e=new U(c.byteLength);b.o=d=new U(c.byteLength);var f=e,e=d,d=Y(this,"uchar",c.byteLength-5);c=d.length;var g=u,h=u,l=0,k;for(k=0;k<c;k++)if(10==d[k]){if(g||h){var j=Id(d,l,k).split(" "),h=parseFloat(j[0]),m=parseFloat(j[1]),j=parseFloat(j[2]);g?(e.add(h,m,j),e.add(h,m,j),e.add(h,m,j)):f.add(h,m,j);h=g=u}}else 32==d[k-1]&&(102==d[k]?(l=k+=13,g=q):118==d[k]&&(l=k+=7,h=q))}else{this.K=
80;f=Y(this,"uint");b.g=e=new U(9*f);b.o=d=new U(9*f);for(c=c=0;c<f;c++)g=Y(this,"float",12),l=g[0],k=g[1],h=g[2],d.add(l,k,h),d.add(l,k,h),d.add(l,k,h),e.add(g[3],g[4],g[5]),e.add(g[6],g[7],g[8]),e.add(g[9],g[10],g[11]),this.K+=2}E.Qa(this.f+".parse");f=new fd;f.R=b;f.w=a;this.dispatchEvent(f)};B("X.parserSTL",Oe);B("X.parserSTL.prototype.parse",Oe.prototype.parse);function Pe(){Gd.call(this);this.f="parserDCM"}C(Pe,Gd);
Pe.prototype.parse=function(a,b,c){c=this.vd(c,b);if(c.he==c.sb){var e=c.Df.length,d,f=0;for(d=0;d<e;d++){var g=c.Df[e-1-d];g!==p&&(g*=c.wb,c.data.set(c.od.subarray(g,g+c.wb),f*c.wb),f++)}b.L=[c.Da[0],c.Da[1],c.Da[2]];Infinity==c.T[2]&&(1<c.location.length?(c.location.sort(),c.T[2]=Math.abs(c.location[0]-c.location[1])):c.T[2]=1);e=[c.T[0],c.T[1],c.T[2]];b.hd=e;f=Hd(c.data);d=f[0];f=f[1];c.min=b.bb=b.ea=d;c.max=b.ha=b.da=f;-Infinity==b.ba&&(b.ba=d);Infinity==b.ca&&(b.ca=f);d=0;f=c.wd[0];for(g=0;++d<
c.wd.length;)c.wd[d]>f&&(g=d,f=c.wd[d]);f=c.Yg[g].split("\\");g=Bc(new T(c.Ma[0],c.Ma[1],c.Ma[2]),new T(c.Ma[3],c.Ma[4],c.Ma[5]));d=Mc();Rc(d,0,-c.Ma[0],-c.Ma[3],-g.x,-f[0]);Rc(d,1,-c.Ma[1],-c.Ma[4],-g.y,-f[1]);Rc(d,2,c.Ma[2],c.Ma[5],g.d,f[2]);Rc(d,3,0,0,0,1);c.Hb=d;c.Ib=Mc();Vc(c.Hb,c.Ib);g=Lc(0,0,0,1);f=Kc();Xc(d,g,f);g=Lc(e[0],e[1],e[2],1);e=Kc();Xc(d,g,e);d=Jd(d,[0,b.L[0],b.L[1],b.L[2]]);c.Cd=[e[0]-f[0],e[1]-f[1],e[2]-f[2]];c.Ad=[d[1]-d[0],d[3]-d[2],d[5]-d[4]];c.Bd=[d[0],d[2],d[4]];b.gc(c);b.Lb=
Od(this,b)}c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};
Pe.prototype.vd=function(a,b){this.I=a;var c=0;if(b.nc!=t){e=b.nc;d=Y(this,"ushort",this.I.byteLength-2*e.wb);f=0;for(l=3;0<l;)if(g=d[f++],32==g)if(h=d[f++],19==h){f++;g=d[f++];for(h=0;h<g/2;h++)k=d[f++],j=k&255,k=(k&65280)>>8,c+=String.fromCharCode(j),c+=String.fromCharCode(k),c=parseInt(c,10);e.wd.push(c);l--}else if(50==h){f++;g=d[f++];m="";for(h=0;h<g/2;h++)k=d[f++],j=k&255,k=(k&65280)>>8,m+=String.fromCharCode(j),m+=String.fromCharCode(k);e.Yg.push(m);l--}else if(4161==h){f++;g=d[f++];m="";for(h=
0;h<g/2;h++)k=d[f++],j=k&255,k=(k&65280)>>8,m+=String.fromCharCode(j),m+=String.fromCharCode(k);e.location.push(m);l--}e.Da[2]++}else{var e={rows:0,cols:0,T:t,Te:0,Wh:0,sb:1,Qi:1,Xk:t,he:0,wb:0,od:t,wf:0,Df:[],data:t,min:Infinity,max:-Infinity,location:[],Yg:[],wd:[]};e.sb=b.q.length;e.sb==t&&(e.sb=1);for(var d=Y(this,"ushort",this.I.byteLength),f=66,g=t,h=t,g=t,l=9;0<l;)if(g=d[f++],40==g)switch(h=d[f++],f++,g=d[f++],h){case 16:e.rows=d[f++];l--;break;case 17:e.cols=d[f++];l--;break;case 256:e.Te=
d[f++];l--;break;case 257:e.Wh=d[f++];l--;break;case 2:e.Qi=d[f++];l--;break;case 48:m="";for(h=h=0;h<g/2;h++)var k=d[f++],j=k&255,k=(k&65280)>>8,m=m+String.fromCharCode(j),m=m+String.fromCharCode(k);m=m.split("\\");e.T=[parseFloat(m[0]),parseFloat(m[1]),Infinity];l--}else if(32==g)switch(h=d[f++],f++,g=d[f++],h){case 19:for(h=0;h<g/2;h++)k=d[f++],j=k&255,k=(k&65280)>>8,c+=String.fromCharCode(j),c+=String.fromCharCode(k),c=parseInt(c,10);l--;break;case 50:for(var m="",h=0;h<g/2;h++)k=d[f++],j=k&255,
k=(k&65280)>>8,m+=String.fromCharCode(j),m+=String.fromCharCode(k);m=m.split("\\");e.origin=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])];l--;break;case 55:m="";for(h=0;h<g/2;h++)k=d[f++],j=k&255,k=(k&65280)>>8,m+=String.fromCharCode(j),m+=String.fromCharCode(k);m=m.split("\\");e.Ma=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]),parseFloat(m[4]),parseFloat(m[5])];l--}else if(16==g)switch(h=d[f++],f++,g=d[f++],h){case 8720:for(h=0;h<g/2;h++)f++}b.nc=e;e.Da=[e.cols,e.rows,
1];e.wb=e.rows*e.cols;switch(e.Te){case 8:e.od=new Uint8Array(e.cols*e.rows*e.sb);e.data=new Uint8Array(e.cols*e.rows*e.sb);break;case 16:e.od=new Uint16Array(e.cols*e.rows*e.sb);e.data=new Uint16Array(e.cols*e.rows*e.sb);break;case 32:e.od=new Uint32Array(e.cols*e.rows*e.sb),e.data=new Uint32Array(e.cols*e.rows*e.sb)}}this.K=this.I.byteLength-2*e.wb;d=t;switch(e.Te){case 8:d=Y(this,"uchar",e.wb);break;case 16:d=Y(this,"ushort",e.wb);break;case 32:d=Y(this,"uint",e.wb)}e.Df[c]=e.wf;e.od.set(d,e.wf*
e.wb);e.wf++;++e.he;return e};B("X.parserDCM",Pe);B("X.parserDCM.prototype.parse",Pe.prototype.parse);function Qe(){Gd.call(this);this.f="parserVTK"}C(Qe,Gd);
Qe.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");var e=b.g,d=b.o,f=new Uint8Array(c),g="";b.g=e=new U(c.byteLength);b.o=d=new U(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=Id(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this.kd=this.ld=t;this.ac=[];this.Ha=cd;this.Fe=this.Sb=this.Kb=this.Tb=u;c=0;for(h=g%8;h--;)Re(this,f[c]),c++;for(h=0.125*g^0;h--;)Re(this,f[c]),c++,Re(this,f[c]),c++,Re(this,f[c]),c++,Re(this,f[c]),c++,Re(this,f[c]),c++,Re(this,f[c]),c++,Re(this,f[c]),c++,
Re(this,f[c]),c++;c=this.ld;var f=this.kd,g=f.length,l=h=this.ac.length;do{var k=this.ac[h-l],j=k.length,m;for(m=0;m<j&&!("LINES"==this.Ha&&m+1>=j);m++){var r=parseInt(k[m],10),s=c.get(r);e.add(s[0],s[1],s[2]);var z=r,y=s;"LINES"==this.Ha?(z=parseInt(k[m+1],10),y=c.get(z),e.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.Ha&&(0==m||m==j-1)&&e.add(s[0],s[1],s[2]);r<g?(y=f.get(r),d.add(y[0],y[1],y[2]),"LINES"==this.Ha?(z=f.get(z),d.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.Ha&&(0==m||m==j-1)&&d.add(y[0],
y[1],y[2])):(z=new T(s[0],s[1],s[2]),z.normalize(),d.add(z.x,z.y,z.d),"LINES"==this.Ha?(z=new T(y[0],y[1],y[2]),z.normalize(),d.add(z.x,z.y,z.d)):"TRIANGLE_STRIPS"==this.Ha&&(0==m||m==j-1)&&d.add(z.x,z.y,z.d))}l--}while(0<l);b.ya=this.Ha;E.Qa(this.f+".parse");e=new fd;e.R=b;e.w=a;this.dispatchEvent(e)};
function Re(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),e=c.length,d=c[0];switch(d){case "POINTS":a.Tb=q;a.Kb=u;a.Sb=u;c=parseInt(c[1],10);a.ld=new U(3*c);a.kd=new U(3*c);return;case "VERTICES":a.Kb=q;a.Tb=u;a.Sb=u;c=parseInt(c[1],10);3<=c?a.Ha=cd:1==c?a.Ha="POINTS":n(Error("This VTK file is not supported!"));a.ac=[];return;case "TRIANGLE_STRIPS":a.Kb=q;a.Tb=u;a.Sb=u;a.Ha="TRIANGLE_STRIPS";a.ac=[];return;case "LINES":a.Kb=q;a.Tb=u;a.Sb=u;a.Ha="LINES";a.ac=[];return;case "POLYGONS":a.Kb=q;
a.Tb=u;a.Sb=u;a.Ha="POLYGONS";a.ac=[];return;case "POINT_DATA":a.Sb=q;a.Tb=u;a.Kb=u;return}if(a.Tb)if(1==e||isNaN(parseFloat(d)))a.Tb=u;else{if(3<=e){var d=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.ld.add(d,f,g)}6<=e&&(d=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.ld.add(d,f,g));9<=e&&(e=parseFloat(c[6]),d=parseFloat(c[7]),c=parseFloat(c[8]),a.ld.add(e,d,c))}else a.Kb?1==e||isNaN(parseFloat(d))?a.Kb=u:(c=c.slice(1),a.ac.push(c)):a.Sb&&("NORMALS"==d?a.Fe=q:1==e||isNaN(parseFloat(d))?
(a.Sb=u,a.Fe=u):a.Fe&&(3<=e&&(d=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.kd.add(d,f,g)),6<=e&&(d=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.kd.add(d,f,g)),9<=e&&(e=parseFloat(c[6]),d=parseFloat(c[7]),c=parseFloat(c[8]),a.kd.add(e,d,c))))}B("X.parserVTK",Qe);B("X.parserVTK.prototype.parse",Qe.prototype.parse);function Se(){Gd.call(this);this.f="parserFSM";this.Jd=u}C(Se,Gd);
Se.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");this.I=c;var e=b.g,d=b.o;b.zc=[];var f=b.zc;c=0;var g;do g=Y(this,"uchar"),c++;while(200>c&&10!=g);Y(this,"uchar");d=Y(this,"uint");c=Y(this,"uint");var h=Y(this,"float",3*d);g=Y(this,"uint",3*c);var l=new Uint32Array(d),k=new Float32Array(9*c);b.g=e=new U(9*c);b.o=d=new U(9*c);var j;for(j=0;j<c;j++){var m=3*j,r=g[m],s=g[m+1],z=g[m+2];f.push(r);f.push(s);f.push(z);l[r]+=1;l[s]+=1;l[z]+=1;var m=3*r,y=3*s,D=3*z,F=h[m],H=h[m+1],A=h[m+2],s=h[y],
z=h[y+1],r=h[y+2],G=h[D],J=h[D+1],K=h[D+2];e.add(F,H,A);e.add(s,z,r);e.add(G,J,K);F=new T(F,H,A);G=new T(G,J,K);s=(new T(s,z,r)).k().za(F);z=G.k().za(F);s=Bc(s,z).normalize();k[m]+=s.x;k[m+1]+=s.y;k[m+2]+=s.d;k[y]+=s.x;k[y+1]+=s.y;k[y+2]+=s.d;k[D]+=s.x;k[D+1]+=s.y;k[D+2]+=s.d}for(j=0;j<c;j++)m=3*j,r=g[m],s=g[m+1],z=g[m+2],m=3*r,y=3*s,D=3*z,f=new T(k[y],k[y+1],k[y+2]),h=new T(k[D],k[D+1],k[D+2]),m=(new T(k[m],k[m+1],k[m+2])).scale(1/l[r]).normalize(),f=f.scale(1/l[s]).normalize(),h=h.scale(1/l[z]).normalize(),
d.add(m.x,m.y,m.d),d.add(f.x,f.y,f.d),d.add(h.x,h.y,h.d);c=Y(this,"uchar",this.I.byteLength-this.K);g=t;for(m=0;m<c.length;m++)if(99==c[m]&&114==c[m+1]&&97==c[m+2]&&115==c[m+3]){for(d=g=m+9;10!=c[m]&&m<c.length;)d++,m++;g=Id(c.subarray(g,d)).split(" ");break}g&&(b.Z.oh(parseFloat(g[0])),b.Z.ph(parseFloat(g[1])),b.Z.qh(parseFloat(g[2])));b.ya=cd;E.Qa(this.f+".parse");c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};B("X.parserFSM",Se);B("X.parserFSM.prototype.parse",Se.prototype.parse);var Te={Xe:function(a,b,c){return Te.update(a,0,b,c)},update:function(a,b,c,e){var d=Te.vh,f="number"===typeof c?c:c=0;e="number"===typeof e?e:a.length;b^=4294967295;for(f=e&7;f--;++c)b=b>>>8^d[(b^a[c])&255];for(f=e>>3;f--;c+=8)b=b>>>8^d[(b^a[c])&255],b=b>>>8^d[(b^a[c+1])&255],b=b>>>8^d[(b^a[c+2])&255],b=b>>>8^d[(b^a[c+3])&255],b=b>>>8^d[(b^a[c+4])&255],b=b>>>8^d[(b^a[c+5])&255],b=b>>>8^d[(b^a[c+6])&255],b=b>>>8^d[(b^a[c+7])&255];return(b^4294967295)>>>0}};
Te.vh=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Ue(a){var b=a.length,c=0,e=Number.POSITIVE_INFINITY,d,f,g,h,l,k,j,m,r;for(m=0;m<b;++m)a[m]>c&&(c=a[m]),a[m]<e&&(e=a[m]);d=1<<c;f=new Uint32Array(d);g=1;h=0;for(l=2;g<=c;){for(m=0;m<b;++m)if(a[m]===g){k=0;j=h;for(r=0;r<g;++r)k=k<<1|j&1,j>>=1;for(r=k;r<d;r+=l)f[r]=g<<16|m;++h}++g;h<<=1;l<<=1}return[f,c,e]};function Ve(a,b){this.Ue=[];this.Ve=32768;this.ib=this.md=this.ta=this.Hf=0;this.input=new Uint8Array(a);this.og=u;this.We=We;this.Eb=u;if(b||!(b={}))b.index&&(this.ta=b.index),b.bufferSize&&(this.Ve=b.bufferSize),b.bufferType&&(this.We=b.bufferType),b.resize&&(this.Eb=b.resize);switch(this.We){case Xe:this.aa=32768;this.Ja=new Uint8Array(32768+this.Ve+258);break;case We:this.aa=0;this.Ja=new Uint8Array(this.Ve);this.ic=this.ii;this.rg=this.Zh;this.cf=this.ci;break;default:n(Error("invalid inflate mode"))}}
var Xe=0,We=1;
Ve.prototype.pd=function(){for(;!this.og;){var a=Ye(this,3);a&1&&(this.og=q);a>>>=1;switch(a){case 0:var a=this.input,b=this.ta,c=this.Ja,e=this.aa,d=p,f=p,g=p,h=c.length,d=p;this.ib=this.md=0;d=a[b++];d===p&&n(Error("invalid uncompressed block header: LEN (first byte)"));f=d;d=a[b++];d===p&&n(Error("invalid uncompressed block header: LEN (second byte)"));f|=d<<8;d=a[b++];d===p&&n(Error("invalid uncompressed block header: NLEN (first byte)"));g=d;d=a[b++];d===p&&n(Error("invalid uncompressed block header: NLEN (second byte)"));g|=
d<<8;f===~g&&n(Error("invalid uncompressed block header: length verify"));b+f>a.length&&n(Error("input buffer is broken"));switch(this.We){case Xe:for(;e+f>c.length;)d=h-e,f-=d,c.set(a.subarray(b,b+d),e),e+=d,b+=d,this.aa=e,c=this.ic(),e=this.aa;break;case We:for(;e+f>c.length;)c=this.ic({xg:2});break;default:n(Error("invalid inflate mode"))}c.set(a.subarray(b,b+f),e);e+=f;this.ta=b+=f;this.aa=e;this.Ja=c;break;case 1:this.cf(Ze,$e);break;case 2:af(this);break;default:n(Error("unknown BTYPE: "+a))}}return this.rg()};
var bf=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),df=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),ef=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),ff=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),gf=new Uint8Array(288),
hf,jf;hf=0;for(jf=gf.length;hf<jf;++hf)gf[hf]=143>=hf?8:255>=hf?9:279>=hf?7:8;var Ze=Ue(gf),kf=new Uint8Array(30),lf,mf;lf=0;for(mf=kf.length;lf<mf;++lf)kf[lf]=5;var $e=Ue(kf);function Ye(a,b){for(var c=a.md,e=a.ib,d=a.input,f=a.ta,g;e<b;)g=d[f++],g===p&&n(Error("input buffer is broken")),c|=g<<e,e+=8;g=c&(1<<b)-1;a.md=c>>>b;a.ib=e-b;a.ta=f;return g}
function nf(a,b){for(var c=a.md,e=a.ib,d=a.input,f=a.ta,g=b[0],h=b[1],l;e<h;)l=d[f++],l===p&&n(Error("input buffer is broken")),c|=l<<e,e+=8;d=g[c&(1<<h)-1];g=d>>>16;a.md=c>>g;a.ib=e-g;a.ta=f;return d&65535}
function af(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=nf(this,b),d){case 16:for(d=3+Ye(this,2);d--;)c[f++]=e;break;case 17:for(d=3+Ye(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+Ye(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=Ye(a,5)+257,e=Ye(a,5)+1,d=Ye(a,4)+4,f=new Uint8Array(bf.length),g;for(g=0;g<d;++g)f[bf[g]]=Ye(a,3);d=Ue(f);f=new Uint8Array(c);g=new Uint8Array(e);a.cf(Ue(b.call(a,c,d,f)),Ue(b.call(a,e,d,g)))}w=Ve.prototype;
w.cf=function(a,b){var c=this.Ja,e=this.aa;this.ug=a;for(var d=c.length-258,f,g,h;256!==(f=nf(this,a));)if(256>f)e>=d&&(this.aa=e,c=this.ic(),e=this.aa),c[e++]=f;else{f-=257;h=cf[f];0<df[f]&&(h+=Ye(this,df[f]));f=nf(this,b);g=ef[f];0<ff[f]&&(g+=Ye(this,ff[f]));e>=d&&(this.aa=e,c=this.ic(),e=this.aa);for(;h--;)c[e]=c[e++-g]}for(;8<=this.ib;)this.ib-=8,this.ta--;this.aa=e};
w.ci=function(a,b){var c=this.Ja,e=this.aa;this.ug=a;for(var d=c.length,f,g,h;256!==(f=nf(this,a));)if(256>f)e>=d&&(c=this.ic(),d=c.length),c[e++]=f;else{f-=257;h=cf[f];0<df[f]&&(h+=Ye(this,df[f]));f=nf(this,b);g=ef[f];0<ff[f]&&(g+=Ye(this,ff[f]));e+h>d&&(c=this.ic(),d=c.length);for(;h--;)c[e]=c[e++-g]}for(;8<=this.ib;)this.ib-=8,this.ta--;this.aa=e};
w.ic=function(){var a=new Uint8Array(this.aa-32768),b=this.aa-32768,c=this.Ja;a.set(c.subarray(32768,a.length));this.Ue.push(a);this.Hf+=a.length;c.set(c.subarray(b,b+32768));this.aa=32768;return c};w.ii=function(a){var b=this.input.length/this.ta+1|0,c=this.input,e=this.Ja;a&&("number"===typeof a.xg&&(b=a.xg),"number"===typeof a.Sh&&(b+=a.Sh));2>b?(a=(c.length-this.ta)/this.ug[2],a=258*(a/2)|0,a=a<e.length?e.length+a:e.length<<1):a=e.length*b;a=new Uint8Array(a);a.set(e);return this.Ja=a};
w.rg=function(){var a=0,b=this.Ja,c=this.Ue,e,d=new Uint8Array(this.Hf+(this.aa-32768)),f,g,h,l;if(0===c.length)return this.Ja.subarray(32768,this.aa);f=0;for(g=c.length;f<g;++f){e=c[f];h=0;for(l=e.length;h<l;++h)d[a++]=e[h]}f=32768;for(g=this.aa;f<g;++f)d[a++]=b[f];this.Ue=[];return this.buffer=d};w.Zh=function(){var a,b=this.aa;this.Eb?(a=new Uint8Array(b),a.set(this.Ja.subarray(0,b))):a=this.Ja.subarray(0,b);return this.buffer=a};new Uint8Array(256);var of;for(of=0;256>of;++of)for(var pf=of,qf=7,pf=pf>>>1;pf;pf>>>=1)--qf;var rf=[],sf;for(sf=0;288>sf;sf++)switch(q){case 143>=sf:rf.push([sf+48,8]);break;case 255>=sf:rf.push([sf-144+400,9]);break;case 279>=sf:rf.push([sf-256+0,7]);break;case 287>=sf:rf.push([sf-280+192,8]);break;default:n("invalid literal: "+sf)}
function tf(){var a=uf;switch(q){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-
31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:n("invalid length: "+a)}}var vf=[],uf,wf;
for(uf=3;258>=uf;uf++)wf=tf(),vf[uf]=wf[2]<<24|wf[1]<<16|wf[0];new Uint32Array(vf);function xf(){};function yf(a){this.input=a;this.ta=0;this.member=[]}
yf.prototype.pd=function(){for(var a=this.input.length;this.ta<a;){var b=new xf,c=p,e=p,d=p,f=c=d=p,g=p,c=c=p,h=this.input,e=this.ta;b.Dg=h[e++];b.Eg=h[e++];(31!==b.Dg||139!==b.Eg)&&n(Error("invalid file signature:",b.Dg,b.Eg));b.qg=h[e++];switch(b.qg){case 8:break;default:n(Error("unknown compression method: "+b.qg))}b.Zd=h[e++];c=h[e++]|h[e++]<<8|h[e++]<<16|h[e++]<<24;b.$k=new Date(1E3*c);b.el=h[e++];b.al=h[e++];0<(b.Zd&4)&&(b.Oj=h[e++]|h[e++]<<8,e+=b.Oj);if(0<(b.Zd&8)){g=[];for(f=0;0<(c=h[e++]);)g[f++]=
String.fromCharCode(c);b.name=g.join("")}if(0<(b.Zd&16)){g=[];for(f=0;0<(c=h[e++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}0<(b.Zd&2)&&(b.$h=Te.Xe(h,0,e)&65535,b.$h!==(h[e++]|h[e++]<<8)&&n(Error("invalid header crc16")));c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-e-4-4<512*c&&(d=c);e=new Ve(h,{index:e,bufferSize:d});b.data=d=e.pd();e=e.ta;b.Rk=c=(h[e++]|h[e++]<<8|h[e++]<<16|h[e++]<<24)>>>0;Te.Xe(d)!==c&&n(Error("invalid CRC-32 checksum: 0x"+Te.Xe(d).toString(16)+
" / 0x"+c.toString(16)));b.Wk=c=(h[e++]|h[e++]<<8|h[e++]<<16|h[e++]<<24)>>>0;(d.length&4294967295)!==c&&n(Error("invalid input size: "+(d.length&4294967295)+" / "+c));this.member.push(b);this.ta=e}a=this.member;b=d=e=0;for(h=a.length;b<h;++b)d+=a[b].data.length;d=new Uint8Array(d);for(b=0;b<h;++b)d.set(a[b].data,e),e+=a[b].data.length;return d};function zf(){Gd.call(this);this.f="parserMGZ";this.Jd=u}C(zf,Gd);
zf.prototype.parse=function(a,b,c,e){E.Wa(this.f+".parse");e&&(c=(new yf(new Uint8Array(c))).pd(),c=c.buffer);e=this.vd(c);var d=[e.lf,e.mf,e.nf];b.L=d;c=e.rh;b.hd=c;var f=e.min,g=e.max;b.bb=b.ea=f;b.ha=b.da=g;-Infinity==b.ba&&(b.ba=f);Infinity==b.ca&&(b.ca=g);f=Mc();Rc(f,0,e.Va[0][0],e.Va[1][0],e.Va[2][0],0);Rc(f,1,e.Va[0][1],e.Va[1][1],e.Va[2][1],0);Rc(f,2,e.Va[0][2],e.Va[1][2],e.Va[2][2],0);Rc(f,3,0,0,0,1);for(var g=d[0]/2,h=d[1]/2,l=d[2]/2,d=[0,0,0],k=0;3>k;++k)d[k]=e.Va[3][k]-(f[k+0]*c[0]*g+
f[k+4]*c[1]*h+f[k+8]*c[2]*l);g=d[1];h=d[2];f[12]=d[0];f[13]=g;f[14]=h;f[15]=1;e.Hb=f;e.Ib=Mc();Vc(e.Hb,e.Ib);g=Lc(0,0,0,1);d=Kc();Xc(f,g,d);g=Lc(c[0],c[1],c[2],1);c=Kc();Xc(f,g,c);f=Jd(f,[0,b.L[0],b.L[1],b.L[2]]);e.Cd=[c[0]-d[0],c[1]-d[1],c[2]-d[2]];e.Ad=[f[1]-f[0],f[3]-f[2],f[5]-f[4]];e.Bd=[f[0],f[2],f[4]];b.gc(e);E.Qa(this.f+".parse");b.Lb=Od(this,b);e=new fd;e.R=b;e.w=a;this.dispatchEvent(e)};
zf.prototype.vd=function(a){this.I=a;a={version:0,yh:0,wh:0,oi:0,xh:0,lf:0,mf:0,nf:0,Pi:0,type:0,gi:0,hh:0,Uj:t,Va:t,rh:t,data:t,min:Infinity,max:-Infinity};a.version=Y(this,"uint");a.lf=Y(this,"uint");a.mf=Y(this,"uint");a.nf=Y(this,"uint");a.Pi=Y(this,"uint");a.type=Y(this,"uint");a.gi=Y(this,"uint");a.hh=Y(this,"ushort");if(0<a.hh){a.rh=Y(this,"float",3);var b=[];b.push(Y(this,"float",3));b.push(Y(this,"float",3));b.push(Y(this,"float",3));b.push(Y(this,"float",3));a.Va=b}this.K=284;b=a.lf*a.mf*
a.nf;switch(a.type){case 0:a.data=Y(this,"uchar",b);break;case 1:a.data=Y(this,"uint",b);break;case 3:a.data=Y(this,"float",b);break;case 4:a.data=Y(this,"ushort",b);break;default:n(Error("Unsupported MGH/MGZ data type: "+a.type))}b=Hd(a.data);a.min=b[0];a.max=b[1];this.K+16<this.I.byteLength&&(a.yh=Y(this,"float"),a.oi=Y(this,"float"),a.wh=Y(this,"float"),a.xh=Y(this,"float"));return a};B("X.parserMGZ",zf);B("X.parserMGZ.prototype.parse",zf.prototype.parse);function Af(){Gd.call(this);this.f="parserCRV";this.Jd=u}C(Af,Gd);
Af.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");var e=b.zc;0==e.length&&n(Error("No _pointIndices defined on the X.object."));this.I=c;this.K=3;var d=Y(this,"uint");Y(this,"uint");Y(this,"uint");var f=0,g=0,h=0,l=0,k=0,j=0,m=0,r=0,s=0,z=0,y=0;c=Array(2);var D=Array(2),F=Y(this,"float",d),H;for(H=0;H<d;H++){var A=F[H];0==H&&(c[0]=D[0]=A);0<=A?(f++,l+=A):(g++,h+=A);s+=A;y++;D[0]=Math.max(A,D[0]);c[0]=Math.min(A,c[0]);F[H]=A}0!=f&&(k=l/f);0!=g&&(j=h/g);0!=y&&(z=s/y);for(y=s=h=l=0;y<d;y++)A=
F[y],H=0,0<=A?(H=Math.pow(A-k,2),l+=H):(H=Math.pow(A-j,2),h+=H),H=Math.pow(A-z,2),s+=H;1<f&&(m=Math.sqrt(l/(f-1)));1<g&&(r=Math.sqrt(h/(g-1)));c[1]=j-2.5*r;D[1]=k+2.5*m;d=e.length;f=new Float32Array(3*d);for(y=0;y<d;y++)g=F[e[y]],h=3*y,f[h]=g,f[h+1]=g,f[h+2]=g;b.B.bb=c[1];b.B.ha=D[1];-Infinity==b.B.ba&&(b.B.ba=c[1]);Infinity==b.B.ca&&(b.B.ca=D[1]);b.B.A=F;b.B.Oc=f;b.B.i=q;E.Qa(this.f+".parse");e=new fd;e.R=b;e.w=a;this.dispatchEvent(e)};B("X.parserCRV",Af);B("X.parserCRV.prototype.parse",Af.prototype.parse);function Bf(){Gd.call(this);this.f="parserTRK"}C(Bf,Gd);
Bf.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");var e=b.g,d=b.o,f=b.ga;this.I=c;Y(this,"uchar",6);Y(this,"ushort",3);var g=Y(this,"float",3);Y(this,"float",3);var h=Y(this,"ushort");Y(this,"uchar",200);Y(this,"ushort");Y(this,"uchar",200);c=Y(this,"float",16);Y(this,"uchar",444);Y(this,"uchar",4);Y(this,"uchar",4);Y(this,"float",6);Y(this,"uchar",2);Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");Y(this,"uchar");var l=Y(this,"uint");Y(this,"uint");var k=Y(this,
"uint"),j=[],m=[],r=Infinity,s=-Infinity,z=t,y=t,D=t,F=t,d=e=t,H=Y(this,"uint",(this.I.byteLength-1E3)/4);this.K=k;for(var A=Y(this,"float",(this.I.byteLength-1E3)/4),G=0,k=f=0;k<l;k++){for(var J=H[G],K=new U(3*J),R=0,N=0;N<J;N++){var W=A[G+3*N+N*h+1],aa=A[G+3*N+N*h+2],Z=A[G+3*N+N*h+3],W=W/g[0],aa=aa/g[1],Z=Z/g[2];K.add(W,aa,Z);if(0<N)var ba=K.get(N-1),R=R+Math.sqrt(Math.pow(W-ba[0],2)+Math.pow(aa-ba[1],2)+Math.pow(Z-ba[2],2));N<J-1&&(f+=6)}G+=3*J+J*h+1;N=K.cb;J=K.Za;W=K.eb;aa=K.$a;Z=K.fb;ba=K.ab;
if(!z||N<z)z=N;if(!y||J>y)y=J;if(!D||W<D)D=W;if(!F||aa>F)F=aa;if(!e||Z<e)e=Z;if(!d||ba>d)d=ba;j.push(K);m.push(R)}g=(z+y)/2;D=(D+F)/2;h=(e+d)/2;F=new Float32Array(f);b.g=e=new U(f);b.o=d=new U(f);b.ga=f=new U(f);for(k=z=0;k<l;k++){y=j[k];H=y.count;R=m[k];r=Math.min(r,R);s=Math.max(s,R);for(N=0;N<H-1;N++){G=y.get(N);A=y.get(N+1);e.add(G[0],G[1],G[2]);e.add(A[0],A[1],A[2]);var K=G[0]-g,J=G[1]-D,W=G[2]-h,aa=Math.sqrt(K*K+J*J+W*W),Z=A[0]-g,ba=A[1]-D,L=A[2]-h,O=Math.sqrt(Z*Z+ba*ba+L*L);d.add(K/aa,J/aa,
W/aa);d.add(Z/O,ba/O,L/O);A=[Math.abs(A[0]-G[0]),Math.abs(A[1]-G[1]),Math.abs(A[2]-G[2])];G=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);A[0]/=G;A[1]/=G;A[2]/=G;f.add(A[0],A[1],A[2]);f.add(A[0],A[1],A[2]);F[z++]=R;F[z++]=R;F[z++]=R;F[z++]=R;F[z++]=R;F[z++]=R}}b.ya="LINES";l=new ed;l.bb=r;l.ha=s;l.ba=r;l.ca=s;l.Oc=F;l.ig=u;l.i=q;b.B=l;E.Qa(this.f+".parse");E.e.If(c,b.Z.H);c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};B("X.parserTRK",Bf);B("X.parserTRK.prototype.parse",Bf.prototype.parse);function Cf(){Gd.call(this);this.f="parserIMAGE"}C(Cf,Gd);Cf.prototype.parse=function(a,b,c,e){c instanceof ArrayBuffer||n(Error());for(var d=new Uint8Array(c),f=d.length,g=Array(f);f--;)g[f]=String.fromCharCode(d[f]);d=window.btoa(g.join(""));f=new Image;Ub(f,"load",this.sj.bind(this,f,a,b,c,e));f.src="data:image/"+e+";base64,"+d};Cf.prototype.sj=function(a,b,c){b.Lb=a;b.Ub=t;a=new fd;a.R=c;a.w=b;this.dispatchEvent(a)};B("X.parserIMAGE",Cf);B("X.parserIMAGE.prototype.parse",Cf.prototype.parse);function Df(){Gd.call(this);this.f="parserLUT"}C(Df,Gd);
Df.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");this.I=c;c=Y(this,"uchar",c.byteLength);var e=c.length,d=0,f;for(f=0;f<e;f++)if(10==c[f]){var g=Id(c,d,f),d=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}E.Qa(this.f+".parse");c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};
B("X.parserLUT",Df);B("X.parserLUT.prototype.parse",Df.prototype.parse);function Ef(){Gd.call(this);this.f="parserNRRD"}C(Ef,Gd);
Ef.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");this.I=c;c=Y(this,"uchar",c.byteLength);var e=c.length,d=t,f=0,g;for(g=1;g<e;g++)if(10==c[g-1]&&10==c[g]){d=Id(c,0,g-2);f=g+1;break}var h,l,k,j,e=d.split(/\r?\n/),d=0;for(g=e.length;d<g;d++)if(h=e[d],h.match(/NRRD\d+/))this.Hi=q;else if(!h.match(/^#/)&&(j=h.match(/(.*):(.*)/)))l=j[1].trim(),h=j[2].trim(),(k=this.ki[l])?k.call(this,h):this[l]=h;this.Hi||n(Error("Not an NRRD file"));"raw"!==this.encoding&&("gzip"!==this.encoding&&"gz"!==this.encoding)&&
n(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Y&&(this.Y=[new T(1,0,0),new T(0,1,0),new T(0,0,1)],this.Ff)){e=[];for(j=0;2>=j;j++)e.push(!isNaN(this.Ff[j])?this.Y[j].scale(this.Ff[j]):p)}f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new yf(new Uint8Array(f))).pd();f=f.buffer;c={data:t,min:Infinity,max:-Infinity};c.data=new this.Jb(f);f=Hd(c.data);d=c.min=f[0];g=c.max=f[1];b.bb=b.ea=d;b.ha=b.da=g;b.L=[this.Bf[0],this.Bf[1],this.Bf[2]];f=(new T(this.Y[0][0],this.Y[0][1],
this.Y[0][2])).Db();j=(new T(this.Y[1][0],this.Y[1][1],this.Y[1][2])).Db();e=(new T(this.Y[2][0],this.Y[2][1],this.Y[2][2])).Db();b.hd=[f,j,e];-Infinity==b.ba&&(b.ba=d);Infinity==b.ca&&(b.ca=g);h=g=1;"left-posterior-superior"==this.kh&&(h=g=-1);d=Nc();Rc(d,0,g*this.Y[0][0],g*this.Y[1][0],g*this.Y[2][0],g*this.Ef[0]);Rc(d,1,h*this.Y[0][1],h*this.Y[1][1],h*this.Y[2][1],h*this.Ef[1]);Rc(d,2,1*this.Y[0][2],1*this.Y[1][2],1*this.Y[2][2],1*this.Ef[2]);Rc(d,3,0,0,0,1);c.Hb=d;c.Ib=Mc();Vc(c.Hb,c.Ib);h=Lc(0,
0,0,1);g=Kc();Xc(d,h,g);j=Lc(f,j,e,1);f=Kc();Xc(d,j,f);j=Jd(d,[0,b.L[0],b.L[1],b.L[2]]);c.Cd=[f[0]-g[0],f[1]-g[1],f[2]-g[2]];c.Ad=[j[1]-j[0],j[3]-j[2],j[5]-j[4]];c.Bd=[j[0],j[2],j[4]];b.gc(c);E.Qa(this.f+".parse");b.Lb=Od(this,b);c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};
Ef.prototype.ki={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Jb=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Jb=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Jb=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Jb=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Jb=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Jb=Uint32Array;break;case "float":this.Jb=Float32Array;break;case "double":this.Jb=Float64Array;break;default:n(Error("Unsupported NRRD data type: "+a))}return this.type=a},endian:function(a){return this.Uk=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Da=parseInt(a,10)},sizes:function(a){var b,c,e,d;e=a.split(/\s+/);d=[];b=0;for(c=e.length;b<c;b++)a=e[b],d.push(parseInt(a,10));
return this.Bf=d},space:function(a){return this.kh=a},"space origin":function(a){return this.Ef=a.split("(")[1].split(")")[0].split(",")},"space directions":function(a){var b,c;a=a.match(/\(.*?\)/g);var e,d,f;f=[];e=0;for(d=a.length;e<d;e++)c=a[e],f.push(function(){var a,d,e,f;e=c.slice(1,-1).split(/,/);f=[];a=0;for(d=e.length;a<d;a++)b=e[a],f.push(parseFloat(b));return f}());return this.Y=f},spacings:function(a){var b;b=a.split(/\s+/);var c,e,d;d=[];c=0;for(e=b.length;c<e;c++)a=b[c],d.push(parseFloat(a));
return this.Ff=d}};B("X.parserNRRD",Ef);B("X.parserNRRD.prototype.parse",Ef.prototype.parse);function Ff(){Gd.call(this);this.f="parserNII"}C(Ff,Gd);
Ff.prototype.parse=function(a,b,c){var e=c,d=-1,d="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,q);348!=d&&(e=(new yf(new Uint8Array(e))).pd(),e=e.buffer);c=this.vd(e);e=c.min;d=c.max;b.bb=b.ea=e;b.ha=b.da=d;-Infinity==b.ba&&(b.ba=e);Infinity==b.ca&&(b.ca=d);e=Mc();Rc(e,3,0,0,0,1);if(0==c.xf)Rc(e,0,c.T[1],0,0,0),Rc(e,0,0,c.T[2],0,0),Rc(e,0,0,0,c.T[3],0);else if(0<c.xf){var d=0,f=c.eh,g=c.fh,h=c.gh,l=1,k=1,j=1,m=c.ah,r=c.bh,s=c.dh,d=1-(f*f+g*g+h*h);1E-7>d?(d=
1/Math.sqrt(f*f+g*g+h*h),f*=d,g*=d,h*=d,d=0):d=Math.sqrt(d);0<c.T[1]&&(l=c.T[1]);0<c.T[2]&&(k=c.T[2]);0<c.T[2]&&(j=c.T[3]);0>c.T[0]&&(j=-j);Rc(e,0,(d*d+f*f-g*g-h*h)*l,2*(f*g-d*h)*k,2*(f*h+d*g)*j,m);Rc(e,1,2*(f*g+d*h)*l,(d*d+g*g-f*f-h*h)*k,2*(g*h-d*f)*j,r);Rc(e,2,2*(f*h-d*g)*l,2*(g*h+d*f)*k,(d*d+h*h-g*g-f*f)*j,s)}else 0<c.ih?(d=c.lh,f=c.mh,g=c.nh,Rc(e,0,d[0],d[1],d[2],d[3]),Rc(e,1,f[0],f[1],f[2],f[3]),Rc(e,2,g[0],g[1],g[2],g[3])):window.console.log("UNKNOWN METHOD IN PARSER NII");c.Hb=e;c.Ib=Mc();
Vc(c.Hb,c.Ib);f=Lc(0,0,0,1);d=Kc();Xc(e,f,d);g=Lc(c.T[1],c.T[2],c.T[3],1);f=Kc();Xc(e,g,f);e=Jd(e,c.Da);c.Cd=[f[0]-d[0],f[1]-d[1],f[2]-d[2]];c.Ad=[e[1]-e[0],e[3]-e[2],e[5]-e[4]];c.Bd=[e[0],e[2],e[4]];b.L=[c.Da[1],c.Da[2],c.Da[3]];b.gc(c);b.Lb=Od(this,b);c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};
Ff.prototype.vd=function(a){this.I=a;a={Dj:0,ai:t,bi:t,ji:0,Bj:0,wj:0,fi:t,Da:t,Di:0,Ei:0,Fi:0,Bi:0,bf:0,Vh:0,Ij:0,T:t,sh:0,Aj:0,zj:0,Hj:0,Fj:t,Pj:t,Xh:0,Yh:0,Gj:0,Mj:0,qi:0,ri:0,di:t,Uh:t,xf:0,ih:0,eh:0,fh:0,gh:0,ah:0,bh:0,dh:0,lh:t,mh:t,nh:t,Ci:t,Ji:t,data:t,min:Infinity,max:-Infinity};a.Dj=Y(this,"uint");a.ai=Y(this,"uchar",10);a.bi=Y(this,"uchar",18);a.ji=Y(this,"uint");a.Bj=Y(this,"ushort");a.wj=Y(this,"uchar");a.fi=Y(this,"uchar");a.Da=Y(this,"ushort",8);a.Di=Y(this,"float");a.Ei=Y(this,"float");
a.Fi=Y(this,"float");a.Bi=Y(this,"ushort");a.bf=Y(this,"ushort");a.Vh=Y(this,"ushort");a.Ij=Y(this,"ushort");a.T=Y(this,"float",8);a.sh=Y(this,"float");a.Aj=Y(this,"float");a.zj=Y(this,"float");a.Hj=Y(this,"ushort");a.Fj=Y(this,"uchar");a.Pj=Y(this,"uchar");a.Xh=Y(this,"float");a.Yh=Y(this,"float");a.Gj=Y(this,"float");a.Mj=Y(this,"float");a.qi=Y(this,"uint",1);a.ri=Y(this,"uint",1);a.di=Y(this,"uchar",80);a.Uh=Y(this,"uchar",24);a.xf=Y(this,"ushort");a.ih=Y(this,"ushort");a.eh=Y(this,"float");a.fh=
Y(this,"float");a.gh=Y(this,"float");a.ah=Y(this,"float");a.bh=Y(this,"float");a.dh=Y(this,"float");a.lh=Y(this,"float",4);a.mh=Y(this,"float",4);a.nh=Y(this,"float",4);a.Ci=Y(this,"uchar",16);a.Ji=Y(this,"uchar",4);this.K=parseInt(a.sh,10);var b=a.Da[1]*a.Da[2]*a.Da[3];switch(a.bf){case 2:a.data=Y(this,"uchar",b);break;case 4:a.data=Y(this,"sshort",b);break;case 8:a.data=Y(this,"sint",b);break;case 16:a.data=Y(this,"float",b);break;case 32:a.data=Y(this,"complex",b);break;case 64:a.data=Y(this,"double",
b);break;case 256:a.data=Y(this,"schar",b);break;case 512:a.data=Y(this,"ushort",b);break;case 768:a.data=Y(this,"uint",b);break;default:n(Error("Unsupported NII data type: "+a.bf))}b=Hd(a.data);a.min=b[0];a.max=b[1];return a};B("X.parserNII",Ff);B("X.parserNII.prototype.parse",Ff.prototype.parse);function Gf(){Gd.call(this);this.f="parserOBJ"}C(Gf,Gd);
Gf.prototype.parse=function(a,b,c){E.Wa(this.f+".parse");this.I=c;c=c.byteLength;var e=Y(this,"uchar",c),d=[];b.g=new U(c);b.o=new U(c);var f=b.g,g=b.o,h=0,l;for(l=0;l<c;++l)if(10==e[l]){var k=Id(e,h,l).replace(/\s{2,}/g," ").split(" ");if("v"==k[0])d.push([parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])]);else if("f"==k[0]){var j=d[parseInt(k[1],10)-1],h=d[parseInt(k[2],10)-1],k=d[parseInt(k[3],10)-1];f.add(j[0],j[1],j[2]);f.add(h[0],h[1],h[2]);f.add(k[0],k[1],k[2]);j=new T(j[0],j[1],j[2]);k=
new T(k[0],k[1],k[2]);h=Bc((new T(h[0],h[1],h[2])).za(j),k.za(j));h.normalize();g.add(h.x,h.y,h.d);g.add(h.x,h.y,h.d);g.add(h.x,h.y,h.d)}h=l+1}E.Qa(this.f+".parse");c=new fd;c.R=b;c.w=a;this.dispatchEvent(c)};B("X.parserOBJ",Gf);B("X.parserOBJ.prototype.parse",Gf.prototype.parse);function Hf(){P.call(this);this.f="loader";this.xc=new sc;this.$c=0}C(Hf,P);function If(a,b){a.$c+=b/a.xc.$d()/3;a.$c=Math.min(1,a.$c);var c=new Fd;c.mg=a.$c;a.dispatchEvent(c)}function Jf(a){a=a.q.Nd;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");b in Kf||n(Error("The "+b+" file format is not supported."));return[a,b,Kf[b][0],Kf[b][1],Kf[b][2]]}
Hf.prototype.load=function(a,b){(!a||!b)&&n(Error("No container or object to load."));if(!vc(this.xc.X,a.oa)||this.xc.get(a.oa)){this.xc.set(a.oa,u);var c=Jf(a)[0];if(a.lb!=t)this.parse(t,a,b);else{var e=new XMLHttpRequest;M(e,"abort",this.wg.bind(this,e,a,b));M(e,"error",this.wg.bind(this,e,a,b));M(e,"load",this.parse.bind(this,e,a,b));e.open("GET",c,q);e.responseType="arraybuffer";e.send(t)}}};
Hf.prototype.parse=function(a,b,c){If(this,1);setTimeout(function(){var e=Jf(b),d=e[3],e=new e[2];Ub(e,sd,this.complete.bind(this));var f=b.lb;f==t&&(f=a.response,b.lb=f);e.parse(b,c,f,d)}.bind(this),100)};Hf.prototype.complete=function(a){If(this,1);setTimeout(function(){var b=a.w,c=a.R;b.q.i=u;b.i=q;c.p();this.xc.set(b.oa,q)}.bind(this),100)};Hf.prototype.wg=function(a,b,c){n(Error("Loading failed: ",b,c))};
var Kf={OBJ:[Gf,t],STL:[Oe,t],VTK:[Qe,t],TRK:[Bf,t],FSM:[Se,t],INFLATED:[Se,t],SMOOTHWM:[Se,t],SPHERE:[Se,t],PIAL:[Se,t],ORIG:[Se,t],NRRD:[Ef,t],NII:[Ff,t],GZ:[Ff,t],DCM:[Pe,t],DICOM:[Pe,t],"":[Pe,t],CRV:[Af,t],LABEL:[Pd,t],MGH:[zf,u],MGZ:[zf,q],TXT:[Df,t],LUT:[Df,t],PNG:[Cf,"png"],JPG:[Cf,"jpeg"],JPEG:[Cf,"jpeg"],GIF:[Cf,"gif"]};function Lf(a,b){(!x(a)||!x(b))&&n(Error("A camera needs valid width and height values."));P.call(this);this.f="camera";this.bc=new E.l(0,100,0);this.rc=new E.l(0,0,0);this.W=new E.l(0,0,1);this.C=a;this.t=b;this.m=this.je(this.bc,this.rc)}C(Lf,P);Lf.prototype.observe=function(a){(a==t||!(a instanceof Fe))&&n(Error("Could not observe the interactor."));M(a,nd,this.ej.bind(this));M(a,md,this.bj.bind(this));M(a,od,this.qj.bind(this))};
Lf.prototype.ej=function(a){a instanceof zd||n(Error("Received no valid rotate event."));this.rotate(a.na)};Lf.prototype.qj=function(a){a instanceof Ad||n(Error("Received no valid zoom event."));a.mb?this.Mf(a.Xa):this.Nf(a.Xa)};Lf.prototype.bj=function(a){a instanceof yd||n(Error("Received no valid pan event."));this.tf(a.na)};Lf.prototype.__defineGetter__("view",v("m"));
Lf.prototype.__defineSetter__("view",function(a){(a==t||!(a instanceof Float32Array))&&n(Error("Invalid view matrix."));this.m=a});Lf.prototype.__defineGetter__("position",function(){return[this.bc.x,this.bc.y,this.bc.d]});Lf.prototype.__defineSetter__("position",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid position."));this.bc=new E.l(a[0],a[1],a[2]);this.reset()});Lf.prototype.__defineGetter__("focus",function(){return[this.rc.x,this.rc.y,this.rc.d]});
Lf.prototype.__defineSetter__("focus",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid focus"));this.rc=new E.l(a[0],a[1],a[2]);this.reset()});Lf.prototype.__defineGetter__("up",function(){return[this.W.x,this.W.y,this.W.d]});Lf.prototype.__defineSetter__("up",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid up vector."));this.W=new E.l(a[0],a[1],a[2]);this.reset()});w=Lf.prototype;w.reset=function(){this.m=this.je(this.bc,this.rc)};
w.rotate=function(a){ka(a)&&2==a.length?a=new E.l(a[0],a[1],0):a instanceof E.l||n(Error("Invalid distance vector for rotate operation."));return a};w.tf=function(a){ka(a)&&2==a.length?a=new E.l(a[0],a[1],0):a instanceof E.l||n(Error("Invalid distance vector for pan operation."));this.m[12]-=a.x;this.m[13]+=a.y};w.Mf=function(a){var b=20;a!=t&&!a&&(b=1);this.m[14]+=b};w.Nf=function(a){var b=20;a!=t&&!a&&(b=1);this.m[14]-=b};
w.je=function(a,b){(!(a instanceof E.l)||!(b instanceof E.l))&&n(Error("3D vectors required for calculating the view."));return E.e.rd()};B("X.camera",Lf);B("X.camera.prototype.pan",Lf.prototype.tf);B("X.camera.prototype.rotate",Lf.prototype.rotate);B("X.camera.prototype.zoomIn",Lf.prototype.Mf);B("X.camera.prototype.zoomOut",Lf.prototype.Nf);function Mf(a){function b(a,b,e){b=2*b*Math.PI;b=za(Aa(l,Math.cos(b)),Aa(k,Math.sin(b)));a=za(za(c,Aa(d,a)),Aa(b,f));e=za(Aa(b,1-Math.abs(e)),Aa(g,e));return new dc(a,e)}this.O=[];a=a||{};var c=new xa(a.start||[0,-1,0]),e=new xa(a.end||[0,1,0]),d=Ba(e,c),f=a.tb||1;a=a.Cf||16;for(var g=Ca(d),h=0.5<Math.abs(g.y()),l=Ca((new xa(h,!h,0)).hc(g)),k=Ca(l.hc(g)),h=new dc(c,Da(g)),e=new dc(e,Ca(g)),j=[],m=0;m<a;m++){var r=m/a,s=(m+1)/a;j.push(new fc([h,b(0,r,-1),b(0,s,-1)]));j.push(new fc([b(0,s,0),b(0,r,
0),b(1,r,0),b(1,s,0)]));j.push(new fc([e,b(1,s,1),b(1,r,1)]))}return nc(j)}C(Mf,mc);function Nf(){V.call(this);this.f="cylinder";this.Pe=[-10,-10,-10];this.xe=[10,10,10];this.cc=10;this.Ua=32;Ea(this,new id)}C(Nf,V);Nf.prototype.__defineGetter__("start",v("Pe"));Nf.prototype.__defineSetter__("start",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid start"));this.Pe=a});Nf.prototype.__defineGetter__("end",v("xe"));Nf.prototype.__defineSetter__("end",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid end"));this.xe=a});Nf.prototype.__defineGetter__("radius",v("cc"));
Nf.prototype.__defineSetter__("radius",function(a){x(a)||n(Error("Invalid radius."));this.cc=a});Nf.prototype.p=function(){kd(this,new Mf({start:this.Pe,end:this.xe,tb:this.cc,Cf:this.Ua}));Nf.u.p.call(this)};B("X.cylinder",Nf);B("X.cylinder.prototype.modified",Nf.prototype.p);function Of(a){function b(a,b){a*=2*Math.PI;b*=Math.PI;var d=new xa(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new dc(za(c,Aa(d,e)),d))}this.O=[];a=a||{};var c=new xa(a.Ye||[0,0,0]),e=a.tb||1,d=a.Cf||16;a=a.Jj||8;for(var f=[],g=[],h=0;h<d;h++)for(var l=0;l<a;l++)g=[],b(h/d,l/a),0<l&&b((h+1)/d,l/a),l<a-1&&b((h+1)/d,(l+1)/a),b(h/d,(l+1)/a),f.push(new fc(g));return nc(f)}C(Of,mc);function Pf(){V.call(this);this.f="sphere";this.v=[0,0,0];this.cc=5;this.Ua=32;this.Mh=16;Ea(this,new id)}C(Pf,V);Pf.prototype.__defineGetter__("center",v("v"));Pf.prototype.__defineSetter__("center",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid center"));this.v=a});Pf.prototype.__defineGetter__("radius",v("cc"));Pf.prototype.__defineSetter__("radius",function(a){x(a)||n(Error("Invalid radius."));this.cc=a});
Pf.prototype.p=function(){kd(this,new Of({Ye:this.v,tb:this.cc,Cf:this.Ua,Jj:this.Mh}));Pf.u.p.call(this)};B("X.sphere",Pf);B("X.sphere.prototype.modified",Pf.prototype.p);function Ne(a){S.call(this);this.f="labelmap";this.Ab=a;this.Oe=new Float32Array([-255,-255,-255,-255])}C(Ne,S);Ne.prototype.p=function(){var a=new fd;a.R=this;this.dispatchEvent(a);this.Ab.p()};Ne.prototype.__defineSetter__("showOnly",function(a){var b=[-1,-1,-1,-1];a!=t&&(ka(a)&&4==a.length?b=a:(this.Sa||n(Error("No colortable assigned.")),b=this.Sa.Ya.get(a).slice(1,5)));this.Oe=new Float32Array([Math.floor(255*b[0]),Math.floor(255*b[1]),Math.floor(255*b[2]),Math.floor(255*b[3])])});
B("X.labelmap",Ne);function Qf(a){this.O=[];a=a||{};var b=new xa(a.Ye||[0,0,0]),c=!a.tb?[1,1,1]:a.tb.length?a.tb:[a.tb,a.tb,a.tb];return nc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new fc(a[0].map(function(d){d=new xa(b.x()+c[0]*(2*!!(d&1)-1),b.y()+c[1]*(2*!!(d&2)-1),b.d()+c[2]*(2*!!(d&4)-1));return new dc(d,new xa(a[1]))}))}))}C(Qf,mc);function Rf(){V.call(this);this.f="cube";this.v=[0,0,0];this.Ce=this.Be=this.Ae=20;this.Ec=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ea(this,new id)}C(Rf,V);Rf.prototype.__defineGetter__("center",v("v"));Rf.prototype.__defineSetter__("center",function(a){(a==t||!ka(a)||3!=a.length)&&n(Error("Invalid center"));this.v=a});Rf.prototype.__defineGetter__("lengthX",v("Ae"));
Rf.prototype.__defineSetter__("lengthX",function(a){x(a)||n(Error("Invalid lengthX."));this.Ae=a});Rf.prototype.__defineGetter__("lengthY",v("Be"));Rf.prototype.__defineSetter__("lengthY",function(a){x(a)||n(Error("Invalid lengthY."));this.Be=a});Rf.prototype.__defineGetter__("lengthZ",v("Ce"));Rf.prototype.__defineSetter__("lengthZ",function(a){x(a)||n(Error("Invalid lengthZ."));this.Ce=a});Rf.prototype.p=function(){kd(this,new Qf({Ye:this.v,tb:[this.Ae/2,this.Be/2,this.Ce/2]}));Rf.u.p.call(this)};
B("X.cube",Rf);B("X.cube.prototype.modified",Rf.prototype.p);function Je(a){Fe.call(this,a);this.f="interactor3D";this.Gk=u}C(Je,Fe);Je.prototype.td=function(a){Je.u.td.call(this,a);var b=new Ad;a.Ic==t&&(a.Ic=0);b.mb=0>a.Ic;b.Xa=q;this.dispatchEvent(b)};function Sf(a){P.call(this);this.f="array";this.A=[];this.Qf=a}C(Sf,P);function Tf(a,b,c){for(var e=0;4>e;e++)if(a[e+0]!==b[e+c])return u;return q}Sf.prototype.add=function(a){this.A.push(a);return q};Sf.prototype.remove=function(a){a=this.A.indexOf(a);-1<a&&this.A.splice(a,1);return q};Sf.prototype.clear=function(){this.A.length=0};
function Uf(a,b,c){var e=c-b;if(!(2>e)){e=b+Math.floor(e/2);Uf(a,b,e);for(Uf(a,e,c);b<e;++b)if(0<a.Qf(a.A[b],a.A[e])){var d=a.A[b];a.A[b]=a.A[e];for(var f=a,g=e,h=c;g+1<h&&0>f.Qf(f.A[g+1],d);){var l=f,k=g+1,j=l.A[g];l.A[g]=l.A[k];l.A[k]=j;++g}f.A[g]=d}}}Sf.prototype.sort=function(){Uf(this,0,this.A.length)};function Vf(a,b){Lf.call(this,a,b);this.f="camera2D"}C(Vf,Lf);Vf.prototype.rotate=function(a){a=Vf.u.rotate.call(this,a);var b=new xd;0<a.x?b.Re--:0>a.x&&b.Re++;0<a.y?b.De++:0>a.y&&b.De--;this.dispatchEvent(b)};Vf.prototype.Mf=function(a){var b=20;a!=t&&!a&&(b=0.02);this.m[14]+=b};Vf.prototype.Nf=function(a){var b=20;a!=t&&!a&&(b=0.02);this.m[14]-=b};
Vf.prototype.tf=function(a){ka(a)&&2==a.length?a=new E.l(a[0],a[1],0):a instanceof E.l||n(Error("Invalid distance vector for pan operation."));this.m[12]-=a.x/this.m[14];this.m[13]+=a.y/this.m[14]};function Wf(a,b){Lf.call(this,a,b);this.f="camera3D";this.Tf=45;this.Je=E.e.jf(E.e.rd(),this.Tf,a/b,1,1E4)}C(Wf,Lf);Wf.prototype.rotate=function(a){a=Wf.u.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=new E.l(this.m[1],this.m[5],this.m[9]),e=new E.l(this.m[0],this.m[4],this.m[8]);c.normalize();e.normalize();E.e.rotate(this.m,b,c.x,c.y,c.d);E.e.rotate(this.m,a,e.x,e.y,e.d)};Wf.prototype.je=function(a,b){var c=Wf.u.je.call(this,a,b);E.e.Lg(c,a,b,this.W);return c};
function Xf(a,b,c,e){var d=new Float32Array(4),f=new Float32Array(4),g=new Float32Array(16),h=new Float32Array(16);new Float32Array(16);E.e.multiply(a.Je,a.m,h);E.e.N(h,g);d[0]=b;d[1]=c;d[2]=2*e-1;d[3]=1;E.e.Pg(g,d,f);f[3]=1/f[3];f[0]*=f[3];f[1]*=f[3];f[2]*=f[3];return f}B("X.camera3D",Wf);function Yf(a){Jb.call(this);this.Cb=a;this.J=[]}C(Yf,Jb);var Zf=[];function $f(a,b,c,e,d){ka(c)||(Zf[0]=c,c=Zf);for(var f=0;f<c.length;f++){var g=M(b,c[f],e||a,d||u,a.Cb||a);a.J.push(g)}}Yf.prototype.yf=function(){Eb(this.J,Wb);this.J.length=0};Yf.prototype.handleEvent=function(){n(Error("EventHandler.handleEvent not implemented"))};function ag(){}ag.yg=function(){return ag.Gg?ag.Gg:ag.Gg=new ag};ag.prototype.Oi=0;ag.yg();function bg(a){cc.call(this);this.Wb=a||Zd();this.yj=cg}C(bg,cc);bg.prototype.zi=ag.yg();var cg=t;w=bg.prototype;w.Fg=t;w.Kc=u;w.z=t;w.yj=t;w.ud=t;w.nd=t;w.Ze=t;w.r=v("z");w.Af=function(a){this.ud&&this.ud!=a&&n(Error("Method not supported"));bg.u.Af.call(this,a)};w.ae=v("Wb");w.Hc=function(){this.z=this.Wb.createElement("div")};w.mc=function(a){this.Zb(a)};
w.Zb=function(a,b){this.Kc&&n(Error("Component already rendered"));this.z||this.Hc();a?a.insertBefore(this.z,b||t):this.Wb.$.body.appendChild(this.z);(!this.ud||this.ud.Kc)&&this.Xd()};w.Xd=function(){function a(a){!a.Kc&&a.r()&&a.Xd()}this.Kc=q;this.nd&&Eb(this.nd,a,p)};w.Yd=function(){function a(a){a.Kc&&a.Yd()}this.nd&&Eb(this.nd,a,p);this.si&&this.si.yf();this.Kc=u};
w.removeChild=function(a,b){if(a){var c=ma(a)?a:a.Fg||(a.Fg=":"+(a.zi.Oi++).toString(36)),e;this.Ze&&c?(e=this.Ze,e=(c in e?e[c]:p)||t):e=t;a=e;c&&a&&(e=this.Ze,c in e&&delete e[c],Hb(this.nd,a),b&&(a.Yd(),a.z&&fe(a.z)),c=a,c==t&&n(Error("Unable to set parent component")),c.ud=t,bg.u.Af.call(c,t))}a||n(Error("Child is not in parent component"));return a};function dg(){cc.call(this)}C(dg,cc);w=dg.prototype;w.Kf=0;w.sd=0;w.kf=100;w.vg=0;w.Gf=1;w.Gi=u;w.Ni=u;w.re=function(a){a=eg(this,a);this.Kf!=a&&(this.Kf=a+this.vg>this.kf?this.kf-this.vg:a<this.sd?this.sd:a,!this.Gi&&!this.Ni&&this.dispatchEvent("change"))};w.de=function(){return eg(this,this.Kf)};w.ce=function(){return eg(this,this.sd)};w.be=function(){return eg(this,this.kf)};function eg(a,b){return a.Gf==t?b:a.sd+Math.round((b-a.sd)/a.Gf)*a.Gf};function fg(a){bg.call(this,a);this.xd=new dg;M(this.xd,"change",this.ti,u,this)}C(fg,bg);var hg={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};w=fg.prototype;w.Hc=function(){this.ub=this.ae().Hc("div","progress-bar-thumb");var a=hg[this.Xg];this.z=this.ae().Hc("div",a,this.ub);ig(this);a=this.ce();this.r().setAttribute("aria-valuemin",a);a=this.be();this.r().setAttribute("aria-valuemax",a)};
w.Xd=function(){fg.u.Xd.call(this);I&&7>pb&&M(this.r(),"resize",this.ue,u,this);this.ue();var a=this.r();a.setAttribute("role","progressbar");a.setAttribute("aria-live","polite")};w.Yd=function(){fg.u.Yd.call(this);I&&7>pb&&Vb(this.r(),"resize",this.ue,u,this)};w.de=function(){return this.xd.de()};w.re=function(a){this.xd.re(a);this.r()&&ig(this)};function ig(a){var b=a.de();a.r().setAttribute("aria-valuenow",b)}w.ce=function(){return this.xd.ce()};w.be=function(){return this.xd.be()};w.Xg="horizontal";
w.ti=function(){this.ue();this.dispatchEvent("change")};w.ue=function(){if(this.ub){var a=this.ce(),b=this.be(),a=(this.de()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Xg?I&&7>pb?(this.ub.style.top=0,this.ub.style.height="100%",b=this.ub.offsetHeight,a=Math.round(a*b),this.ub.style.top=b-a+"px",this.ub.style.height=a+"px"):(this.ub.style.top=100-b+"%",this.ub.style.height=b+"%"):this.ub.style.width=b+"%"}};function jg(a,b){a==t&&n(Error("No valid parent element."));b==t&&n(Error("Invalid initial value."));fg.call(this);this.f="progressbar";this.Ta=a;this.Ie="";this.Ed=this.zb=t;this.$b=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var e;e=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
e+="  overflow: hidden;\n";e+="  width: 0%;\n";e+="  height: 100%;\n";e+="}";var d;d=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.$b=[c,e,d];this.re(b);this.ff()}C(jg,fg);
jg.prototype.ff=function(){var a=ke(this.Ta,"position");if("static"==a||""==a)this.Ie=this.Ta.style.position,this.Ta.style.position="relative";var a=document.getElementsByTagName("head")[0],b=de("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.$b[0])),e=document.createTextNode(String(this.$b[1])),d=document.createTextNode(String(this.$b[2]));a.appendChild(b);b.appendChild(c);b.appendChild(e);b.appendChild(d);this.zb=b;this.mc(this.Ta);a=this.r();a.style.position=
"absolute";a.style.top=(this.Ta.clientHeight-5)/2+"px";a.style.left=(this.Ta.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};function kg(a){var b=a.r().style.top,c=a.r().style.left;fe(a.r());var e=new jg(a.Ta,100),d=e.r();d.style.position="absolute";d.style.top=b;d.style.left=c;d.classList.add("xtk-progress-bar");(d.firstElementChild!=p?d.firstElementChild:ge(d.firstChild)).classList.add("progress-bar-thumb-done");a.Ed=e}
jg.prototype.fe=function(){this.zb&&fe(this.zb);this.r()&&fe(this.r());this.Ed&&fe(this.Ed.r());this.Ed=this.zb=t;this.Ie&&(this.Ta.style.position=this.Ie)};function lg(a,b,c){na(a)?c&&(a=ua(a,c)):a&&"function"==typeof a.handleEvent?a=ua(a.handleEvent,a):n(Error("Invalid listener argument"));return 2147483647<b?-1:fa.setTimeout(a,b||0)};function mg(){P.call(this);this.f="renderer";this.w=window.document.body;this.C=this.w.clientWidth;this.t=this.w.clientHeight;this.M=this.D=this.ma=t;this.rb=new Sf(hd);this.gb=[];this.Q=t;this.Ge=this.Kd=this.Ld=u;this.a=this.Ca=t;this.P={PROGRESSBAR_ENABLED:q,INTERMEDIATE_RENDERING:u,SLICENAVIGATORS:q};this.Of=-1;window.console.log("XTK release 10 -- 2013-08-22 13:30:15 -- http://www.goXTK.com -- @goXTK")}C(mg,P);w=mg.prototype;w.cj=function(a){this.Ca&&this.Ca.re(100*a.mg)};
w.Ti=function(a){a!=t&&a instanceof fd&&a.R&&this.vb(a.R)};w.dj=function(a){a!=t&&a instanceof gd&&a.R&&this.remove(a.R)};w.qf=function(a){(a==t||!(a instanceof Cd))&&n(Error("Invalid hover event."))};w.rf=function(){var a=be(this.w);this.C=a.clientWidth;this.t=a.clientHeight;a=be(this.ma);a.width=this.C;a.height=this.t;"renderer3D"==this.f&&(this.a.viewport(0,0,this.C,this.t),this.D.Je=E.e.jf(E.e.rd(),this.D.Tf,this.ma.width/this.ma.height,1,1E4))};w.sf=function(a){(a==t||!(a instanceof Bd))&&n(Error("Invalid scroll event."))};
mg.prototype.__defineGetter__("config",v("P"));mg.prototype.__defineGetter__("interactor",v("M"));mg.prototype.__defineGetter__("camera",v("D"));mg.prototype.__defineGetter__("loadingCompleted",v("Kd"));mg.prototype.__defineGetter__("container",v("w"));mg.prototype.__defineSetter__("container",function(a){a==t&&n(Error("An ID to a valid container (<div>..) is required."));var b=a;ma(b)&&(b=be(a));oa(b)&&1==b.nodeType||n(Error("Could not find the given container."));this.w=b});w=mg.prototype;
w.yd=function(){this.D.reset()};
w.sa=function(a){var b=de("canvas");this.w.appendChild(b);this.C=this.w.clientWidth;this.t=this.w.clientHeight;b.width=this.C;b.height=this.t;try{var c=b.getContext(a);c||n(Error())}catch(e){var d="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.w.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+d+"</p>";
n(Error(d))}this.Q=new Hf;M(this.Q,ud,this.cj.bind(this));this.ma=b;this.a=c;b=new Je(this.ma);"2d"==a&&(b=new Le(this.ma));b.sa();M(b,qd,this.yd.bind(this));M(b,vd,this.qf.bind(this));M(b,pd,this.sf.bind(this));this.M=b;b=new Wf(this.C,this.t);"2d"==a&&(b=new Vf(this.C,this.t));b.observe(this.M);this.D=b;M(window,"resize",this.rf,u,this)};w.add=function(a){(a instanceof Rf||a instanceof Pf||a instanceof Nf)&&a.p();this.gb.push(a);this.vb(a)};
w.remove=function(a){(!this.ma||!this.a)&&n(Error("The renderer was not initialized properly."));a==t&&n(Error("Illegal object."));return u};w.vb=function(a){(!this.ma||!this.a)&&n(Error("The renderer was not initialized properly."));a!=t&&(Yb(a,sd)||M(a,sd,this.Ti.bind(this)),Yb(a,td)||M(a,td,this.dj.bind(this)))};w.get=function(a){a==t&&n(Error("Invalid object id."));for(var b=this.rb.A,c=b.length,e=0,e=0;e<c;e++)if(b[e].oa==a)return b[e];return t};
w.mc=function(){(!this.ma||!this.a)&&n(Error("The renderer was not initialized properly."));if(this.hg==t){if(uc(this.Q.xc)){if(this.P.PROGRESSBAR_ENABLED&&!this.Ca&&(this.Ca=new jg(this.w,3)),this.Ge=this.Kd=u,this.hg=lg(function(){this.hg=t;this.mc()}.bind(this),100),!this.P.INTERMEDIATE_RENDERING)return}else if(!this.Kd&&!this.Ge&&(this.Ge=q,eval("this.onShowtime()"),this.Kd=q),this.Ca){this.P.PROGRESSBAR_ENABLED&&(this.Ca&&!this.Pf)&&(kg(this.Ca),this.Pf=lg(function(){this.Pf=t;this.Ca&&(this.Ca.fe(),
this.Ca=t);this.mc()}.bind(this),700));return}this.Of=window.requestAnimationFrame(this.mc.bind(this),this.ma);eval("this.onRender()");this.Zb(u,q)}};w.Wg=da();w.Ug=da();w.Zb=da();
w.Vd=function(){window.cancelAnimationFrame(this.Of);this.Q&&(delete this.Q,this.Q=t);this.Ca&&(this.Ca.fe(),delete this.Ca,this.Ca=t);this.rb.clear();delete this.rb;this.gb.length=0;delete this.gb;delete this.Q;this.Q=t;delete this.D;this.D=t;delete this.M;this.M=t;delete this.a;this.a=t;fe(this.ma);delete this.ma;this.ma=t};function ng(){P.call(this);this.f="shaders";this.Qd="";var a;a="precision mediump float;\n\n";a+="attribute vec3 vertexPosition;\n";a+="attribute vec3 vertexNormal;\n";a+="attribute vec3 vertexColor;\n";a+="attribute vec2 vertexTexturePos;\n";a+="attribute float vertexScalar;\n";a+="\n";a+="uniform mat4 view;\n";a+="uniform mat4 perspective;\n";a+="uniform vec3 center;\n";a+="uniform mat4 objectTransform;\n";a+="uniform bool useObjectColor;\n";a+="uniform bool useScalars;\n";a+="uniform bool scalarsReplaceMode;\n";
a+="uniform float scalarsMin;\n";a+="uniform float scalarsMax;\n";a+="uniform vec3 scalarsMinColor;\n";a+="uniform vec3 scalarsMaxColor;\n";a+="uniform float scalarsMinThreshold;\n";a+="uniform float scalarsMaxThreshold;\n";a+="uniform int scalarsInterpolation;\n";a+="uniform vec3 objectColor;\n";a+="uniform float pointSize;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";
a+="varying vec3 fTransformedVertexNormal;\n";a+="\n";a+="void main(void) {\n";a+="  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * ";a+="mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * ";a+="vertexNormal;\n";a+="  fVertexNormal = vertexNormal;\n";a+="  fDiscardNow = 0.0;\n";a+="  vec3 vertexPosition2 = vertexPosition - center;\n";a+="  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n";a+="  fragmentTexturePos = vertexTexturePos;\n";
a+="  if (useScalars) {\n";a+="    float scalarValue = vertexScalar;\n";a+="    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n";a+="      if (scalarsReplaceMode) {\n";a+="        fragmentColor = objectColor;\n";a+="      } else {\n";a+="        fDiscardNow = 1.0;\n";a+="      }\n";a+="    } else {\n";a+="      if (scalarsReplaceMode) {\n";a+="        if (scalarsInterpolation == 1) {\n";a+="            vec3 zeroMaxColor;\n";a+="            vec3 zeroMinColor;\n";a+=
"            zeroMaxColor[0] = scalarsMaxColor[0]*0.33;\n";a+="            zeroMaxColor[1] = scalarsMaxColor[1]*0.33;\n";a+="            zeroMaxColor[2] = scalarsMaxColor[2]*0.33;\n";a+="            zeroMinColor[0] = scalarsMinColor[0]*0.33;\n";a+="            zeroMinColor[1] = scalarsMinColor[1]*0.33;\n";a+="            zeroMinColor[2] = scalarsMinColor[2]*0.33;\n";a+="            if(scalarValue < 0.0) {fragmentColor = scalarValue/(scalarsMin) * scalarsMinColor + (1.0 - scalarValue/(scalarsMin)) * (zeroMinColor);}\n";
a+="            else {fragmentColor = scalarValue/(scalarsMax) * scalarsMaxColor + (1.0 - scalarValue/(scalarsMax)) * (zeroMaxColor);}\n";a+="        } else {\n";a+="            fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n";a+="          }\n";a+="      } else {\n";a+="        fragmentColor = vertexColor;\n";a+="      }\n";a+="    }\n";a+="  } else if (useObjectColor) {\n";a+="    fragmentColor = objectColor;\n";a+="  } else {\n";a+="    fragmentColor = vertexColor;\n";
a+="  }\n";a+="  gl_PointSize = pointSize;\n";a+="  gl_Position = perspective * fVertexPosition;\n";this.Qd=a+="}\n";this.Fd="";a="precision mediump float;\n\n";a+="uniform bool usePicking;\n";a+="uniform bool useTexture;\n";a+="uniform bool volumeTexture;\n";a+="uniform bool useLabelMapTexture;\n";a+="uniform sampler2D textureSampler;\n";a+="uniform sampler2D textureSampler2;\n";a+="uniform float objectOpacity;\n";a+="uniform float labelmapOpacity;\n";a+="uniform vec4 labelmapColor;\n";a+="uniform float volumeLowerThreshold;\n";
a+="uniform float volumeUpperThreshold;\n";a+="uniform float volumeScalarMin;\n";a+="uniform float volumeScalarMax;\n";a+="uniform vec3 volumeScalarMinColor;\n";a+="uniform vec3 volumeScalarMaxColor;\n";a+="uniform float volumeWindowLow;\n";a+="uniform float volumeWindowHigh;\n";a+="\n";a+="varying float fDiscardNow;\n";a+="varying vec4 fVertexPosition;\n";a+="varying vec3 fragmentColor;\n";a+="varying vec2 fragmentTexturePos;\n";a+="varying vec3 fVertexNormal;\n";a+="varying vec3 fTransformedVertexNormal;\n";
a+="\n";a+="void main(void) {\n";a+=" if (fDiscardNow > 0.0) {\n";a+="   discard;\n";a+=" }\n";a+=" if (usePicking) {\n";a+="   gl_FragColor = vec4(fragmentColor, 1.0);\n";a+=" } else if (useTexture) {\n";a+="   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n";a+="   vec4 textureSum = texture1;\n";a+="   if (volumeTexture) {\n";a+="     float _windowLow = (volumeWindowLow / volumeScalarMax);\n";a+="     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n";a+="     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n";
a+="     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n";a+="     vec3 fac = _maxrange - _minrange;\n";a+="     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n";a+="     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n";a+="   }\n";a+="   if (useLabelMapTexture) {\n";a+="     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n";a+="     if (texture2.a > 0.0) {\n";a+="         if (labelmapColor.a != -255.0) {\n";
a+="           if (all(equal(floor(texture2 * vec4(255)), labelmapColor))) {\n";a+="             if (labelmapOpacity < 1.0) {\n";a+="               textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="             } else {\n";a+="               textureSum = texture2;\n";a+="             }\n";a+="           }\n";a+="         } else {\n";a+="           if (labelmapOpacity < 1.0) {\n";a+="             textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n";a+="           } else {\n";
a+="             textureSum = texture2;\n";a+="           }\n";a+="         }\n";a+="     }\n";a+="   }\n";a+="   if (volumeTexture) {\n";a+="     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n";a+="     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n";a+="     if (texture1.r < _volumeLowerThreshold ||\n";a+="         texture1.r > _volumeUpperThreshold ||\n";a+="         texture1.a == 0.0 ) {\n";a+="       discard;\n";a+="     };\n";a+="   };\n";
a+="   gl_FragColor = textureSum;\n";a+="   gl_FragColor.a = objectOpacity;\n";a+=" } else {\n";a+="   vec3 nNormal = normalize(fTransformedVertexNormal);\n";a+="   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n";a+="     gl_FragColor = vec4(fragmentColor,1.0);\n";a+="     return;\n";a+="   }\n";a+="   vec3 light = vec3(0.0, 0.0, 1.0);\n";a+="   vec3 lightDirection = vec3(0,0,-10);\n";a+="   lightDirection = normalize(lightDirection);\n";a+="   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n";
a+="   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n";a+="   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n";a+="   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n";a+="   float ambient = 0.3;\n";a+="   gl_FragColor = vec4(fragmentColor * ambient +\n";a+="                       fragmentColor * diffuse +\n";a+="                       vec3(0.2, 0.2, 0.2) * specular,\n";a+="                       objectOpacity);\n";a+=" }\n";this.Fd=a+="}\n"}
C(ng,P);
var og={rk:"vertexPosition",qk:"vertexNormal",pk:"vertexColor",tk:"vertexTexturePos",sk:"vertexScalar"},pg={uk:"view",Zj:"perspective",Qj:"center",Yj:"objectTransform",lk:"useObjectColor",Wj:"objectColor",nk:"useScalars",hk:"scalarsReplaceMode",ek:"scalarsMin",bk:"scalarsMax",fk:"scalarsMinColor",ck:"scalarsMaxColor",gk:"scalarsMinThreshold",dk:"scalarsMaxThreshold",ak:"scalarsInterpolation",$j:"pointSize",Xj:"objectOpacity",Vj:"normal",mk:"usePicking",ok:"useTexture",kk:"useLabelMapTexture",Tj:"labelmapOpacity",
Sj:"labelmapColor",ik:"textureSampler",jk:"textureSampler2",vk:"volumeLowerThreshold",Bk:"volumeUpperThreshold",yk:"volumeScalarMin",wk:"volumeScalarMax",zk:"volumeScalarMinColor",xk:"volumeScalarMaxColor",Dk:"volumeWindowLow",Ck:"volumeWindowHigh",Ak:"volumeTexture"};function qg(a,b,c){a==t&&n(Error("Invalid GL Buffer."));b==t&&n(Error("Invalid number of items."));c==t&&n(Error("Invalid item size."));P.call(this);this.f="buffer";this.G=a;this.Mb=b;this.Nb=c}C(qg,P);function rg(a,b,c,e,d,f,g,h){var l,k;if(l=c.offsetParent){var j="HTML"==l.tagName||"BODY"==l.tagName;if(!j||"static"!=le(l,"position"))k=qe(l),j||(j=(j=re(l))&&ib?-l.scrollLeft:j&&(!I||!wb("8"))&&"visible"!=le(l,"overflowX")?l.scrollWidth-l.clientWidth-l.scrollLeft:l.scrollLeft,k=Rd(k,new Qd(j,l.scrollTop)))}l=k||new Qd;k=qe(a);j=ve(a);k=new Ud(k.x,k.y,j.width,j.height);(j=pe(a))&&k.Hg(new Ud(j.left,j.top,j.right-j.left,j.bottom-j.top));var j=Zd(a),m=Zd(c);if(j.$!=m.$){var r=j.$.body,m=m.$.parentWindow||
m.$.defaultView,s=new Qd(0,0),z=ae(r)?ae(r).parentWindow||ae(r).defaultView:window,y=r;do{var D=z==m?qe(y):se(y);s.x+=D.x;s.y+=D.y}while(z&&z!=m&&(y=z.frameElement)&&(z=z.parent));r=Rd(s,qe(r));I&&!ie(j)&&(r=Rd(r,je(j)));k.left+=r.x;k.top+=r.y}a=(b&4&&re(a)?b^2:b)&-5;b=new Qd(a&2?k.left+k.width:k.left,a&1?k.top+k.height:k.top);b=Rd(b,l);d&&(b.x+=(a&2?-1:1)*d.x,b.y+=(a&1?-1:1)*d.y);var F;if(g&&(F=pe(c)))F.top-=l.y,F.right-=l.x,F.bottom-=l.y,F.left-=l.x;return sg(b,c,e,f,F,g,h)}
function sg(a,b,c,e,d,f,g){a=a.k();var h=0,l=(c&4&&re(b)?c^2:c)&-5;c=ve(b);g=g?g.k():c.k();if(e||0!=l)l&2?a.x-=g.width+(e?e.right:0):e&&(a.x+=e.left),l&1?a.y-=g.height+(e?e.bottom:0):e&&(a.y+=e.top);if(f){if(d){h=a;e=0;if(65==(f&65)&&(h.x<d.left||h.x>=d.right))f&=-2;if(132==(f&132)&&(h.y<d.top||h.y>=d.bottom))f&=-5;h.x<d.left&&f&1&&(h.x=d.left,e|=1);h.x<d.left&&(h.x+g.width>d.right&&f&16)&&(g.width=Math.max(g.width-(h.x+g.width-d.right),0),e|=4);h.x+g.width>d.right&&f&1&&(h.x=Math.max(d.right-g.width,
d.left),e|=1);f&2&&(e|=(h.x<d.left?16:0)|(h.x+g.width>d.right?32:0));h.y<d.top&&f&4&&(h.y=d.top,e|=2);h.y<=d.top&&(h.y+g.height<d.bottom&&f&32)&&(g.height=Math.max(g.height-(d.top-h.y),0),h.y=0,e|=8);h.y>=d.top&&(h.y+g.height>d.bottom&&f&32)&&(g.height=Math.max(g.height-(h.y+g.height-d.bottom),0),e|=8);h.y+g.height>d.bottom&&f&4&&(h.y=Math.max(d.bottom-g.height,d.top),e|=2);f&8&&(e|=(h.y<d.top?64:0)|(h.y+g.height>d.bottom?128:0));h=e}else h=256;if(h&496)return h}f=a;d=ib&&(Za||nb)&&wb("1.9");f instanceof
Qd?(a=f.x,f=f.y):(a=f,f=p);b.style.left=ue(a,d);b.style.top=ue(f,d);if(!(c==g||(!c||!g?0:c.width==g.width&&c.height==g.height)))a=ie(Zd(ae(b))),I&&(!a||!wb("8"))?(c=b.style,a?(I?(a=ze(b,"paddingLeft"),d=ze(b,"paddingRight"),f=ze(b,"paddingTop"),e=ze(b,"paddingBottom"),a=new Sd(f,d,e,a)):(a=ke(b,"paddingLeft"),d=ke(b,"paddingRight"),f=ke(b,"paddingTop"),e=ke(b,"paddingBottom"),a=new Sd(parseFloat(f),parseFloat(d),parseFloat(e),parseFloat(a))),I?(d=Be(b,"borderLeft"),f=Be(b,"borderRight"),e=Be(b,"borderTop"),
b=Be(b,"borderBottom"),b=new Sd(e,f,b,d)):(d=ke(b,"borderLeftWidth"),f=ke(b,"borderRightWidth"),e=ke(b,"borderTopWidth"),b=ke(b,"borderBottomWidth"),b=new Sd(parseFloat(e),parseFloat(f),parseFloat(b),parseFloat(d))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,ib?b.MozBoxSizing="border-box":jb?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",
b.height=Math.max(g.height,0)+"px");return h};function tg(){}tg.prototype.kb=da();function ug(a,b){this.$e=a instanceof Qd?a:new Qd(a,b)}C(ug,tg);ug.prototype.kb=function(a,b,c,e){rg(me(a),0,a,b,this.$e,c,t,e)};function vg(a,b,c){this.element=a;this.tg=b;this.rj=c}C(vg,tg);vg.prototype.kb=function(a,b,c){rg(this.element,this.tg,a,b,p,c,this.rj)};function wg(a,b){cc.call(this);this.Cb=new Yf(this);this.zf(a||t);b&&(this.Lc=b)}C(wg,cc);w=wg.prototype;w.z=t;w.Th=q;w.ng=t;w.Ea=u;w.Cj=u;w.hf=-1;w.Kg=-1;w.yi=u;w.hi=q;w.Lc="toggle_display";w.r=v("z");w.zf=function(a){this.Ea&&n(Error("Can not change this state of the popup while showing."));this.z=a};
function xg(a,b){a.te&&a.te.stop();a.ee&&a.ee.stop();if(b){if(!a.Ea&&a.of()){a.z||n(Error("Caller must call setElement before trying to show the popup"));a.kb();var c=ae(a.z);a.yi&&$f(a.Cb,c,"keydown",a.Ri,q);if(a.Th)if($f(a.Cb,c,"mousedown",a.Sg,q),I){var e;try{e=c.activeElement}catch(d){}for(;e&&"IFRAME"==e.nodeName;){try{var f=e.contentDocument||e.contentWindow.document}catch(g){break}c=f;e=c.activeElement}$f(a.Cb,c,"mousedown",a.Sg,q);$f(a.Cb,c,"deactivate",a.Rg)}else $f(a.Cb,c,"blur",a.Rg);"toggle_display"==
a.Lc?(a.z.style.visibility="visible",xe(a.z,q)):"move_offscreen"==a.Lc&&a.kb();a.Ea=q;a.te?(Ub(a.te,"end",a.Vg,u,a),a.te.play()):a.Vg()}}else yg(a)}w.kb=ga;function yg(a,b){if(!a.Ea||!a.dispatchEvent({type:"beforehide",target:b}))return u;a.Cb&&a.Cb.yf();a.Ea=u;a.Kg=wa();a.ee?(Ub(a.ee,"end",va(a.sg,b),u,a),a.ee.play()):a.sg(b);return q}w.sg=function(a){"toggle_display"==this.Lc?this.Cj?lg(this.Cg,0,this):this.Cg():"move_offscreen"==this.Lc&&(this.z.style.top="-10000px");this.pf(a)};
w.Cg=function(){this.z.style.visibility="hidden";xe(this.z,u)};w.of=function(){return this.dispatchEvent("beforeshow")};w.Vg=function(){this.hf=wa();this.Kg=-1;this.dispatchEvent("show")};w.pf=function(a){this.dispatchEvent({type:"hide",target:a})};w.Sg=function(a){a=a.target;!he(this.z,a)&&((!this.ng||he(this.ng,a))&&!(150>wa()-this.hf))&&yg(this,a)};w.Ri=function(a){27==a.keyCode&&yg(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
w.Rg=function(a){if(this.hi){var b=ae(this.z);if(I||gb){if(a=b.activeElement,!a||he(this.z,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>wa()-this.hf||yg(this)}};function zg(a,b){this.vj=4;this.ke=b||p;wg.call(this,a)}C(zg,wg);zg.prototype.kb=function(){if(this.ke){var a=!this.Ea&&"move_offscreen"!=this.Lc,b=this.r();a&&(b.style.visibility="hidden",xe(b,q));this.ke.kb(b,this.vj,this.Zk);a&&xe(b,u)}};function Ag(a){this.X=new sc;a&&this.Se(a)}function Bg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+pa(a):b.substr(0,1)+a}w=Ag.prototype;w.$d=function(){return this.X.$d()};w.add=function(a){this.X.set(Bg(a),a)};w.Se=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};w.yf=function(a){a=rc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};w.remove=function(a){return this.X.remove(Bg(a))};w.clear=function(){this.X.clear()};
w.contains=function(a){a=Bg(a);return vc(this.X.X,a)};w.Hg=function(a){var b=new Ag;a=rc(a);for(var c=0;c<a.length;c++){var e=a[c];this.contains(e)&&b.add(e)}return b};w.qd=function(){return this.X.qd()};w.k=function(){return new Ag(this)};function Cg(a,b,c){this.Wb=c||(a?Zd(be(a)):Zd());zg.call(this,this.Wb.Hc("div",{style:"position:absolute;display:none;"}));this.af=new Qd(1,1);this.Wd=new Ag;a&&Dg(this,a);if(b!=t)if(a=this.r(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(ae(a).createTextNode(String(b)))}}C(Cg,zg);var Eg=[];w=Cg.prototype;w.Ia=t;w.className="goog-tooltip";
w.jh=500;w.xi=0;w.ae=v("Wb");function Dg(a,b){b=be(b);a.Wd.add(b);M(b,"mouseover",a.wi,u,a);M(b,"mouseout",a.zg,u,a);M(b,"mousemove",a.vi,u,a);M(b,"focus",a.ui,u,a);M(b,"blur",a.zg,u,a)}w.zf=function(a){var b=this.r();b&&fe(b);Cg.u.zf.call(this,a);a&&(b=this.Wb.$.body,b.insertBefore(a,b.lastChild))};
w.of=function(){if(!wg.prototype.of.call(this))return u;if(this.anchor)for(var a,b=0;a=Eg[b];b++)he(a.r(),this.anchor)||xg(a,u);0<=Cb(Eg,this)||Eg.push(this);a=this.r();a.className=this.className;Fg(this);M(a,"mouseover",this.Bg,u,this);M(a,"mouseout",this.Ag,u,this);Gg(this);return q};
w.pf=function(){Hb(Eg,this);for(var a=this.r(),b,c=0;b=Eg[c];c++)b.anchor&&he(a,b.anchor)&&xg(b,u);this.Zg&&Hg(this.Zg);Vb(a,"mouseover",this.Bg,u,this);Vb(a,"mouseout",this.Ag,u,this);this.anchor=p;if(0==(this.Fb?this.Ea?4:1:this.Jc?3:this.Ea?2:0))this.pe=u;wg.prototype.pf.call(this)};w.Og=function(a,b){this.anchor==a&&this.Wd.contains(this.anchor)&&(this.pe||!this.cl?(xg(this,u),this.Ea||(this.anchor=a,this.ke=b||Ig(this,0)||p,this.Ea&&this.kb(),xg(this,q))):this.anchor=p);this.Fb=p};
w.Mi=function(a){this.Jc=p;a==this.anchor&&(this.Ia==t||this.Ia!=this.r()&&!this.Wd.contains(this.Ia))&&(!this.pg||!this.pg.Ia)&&xg(this,u)};function Jg(a,b){var c=je(a.Wb);a.af.x=b.clientX+c.x;a.af.y=b.clientY+c.y}w.wi=function(a){var b=Kg(this,a.target);this.Ia=b;Fg(this);b!=this.anchor&&(this.anchor=b,this.Fb||(this.Fb=lg(ua(this.Og,this,b,p),this.jh)),Lg(this),Jg(this,a))};function Kg(a,b){try{for(;b&&!a.Wd.contains(b);)b=b.parentNode;return b}catch(c){return t}}
w.vi=function(a){Jg(this,a);this.pe=q};w.ui=function(a){this.Ia=a=Kg(this,a.target);this.pe=q;if(this.anchor!=a){this.anchor=a;var b=Ig(this,1);Fg(this);this.Fb||(this.Fb=lg(ua(this.Og,this,a,b),this.jh));Lg(this)}};function Ig(a,b){if(0==b){var c=a.af.k();return new Mg(c)}return new Ng(a.Ia)}function Lg(a){if(a.anchor)for(var b,c=0;b=Eg[c];c++)he(b.r(),a.anchor)&&(b.pg=a,a.Zg=b)}
w.zg=function(a){var b=Kg(this,a.target),c=Kg(this,a.relatedTarget);b!=c&&(b==this.Ia&&(this.Ia=t),Gg(this),this.pe=u,this.Ea&&(!a.relatedTarget||!he(this.r(),a.relatedTarget))?Hg(this):this.anchor=p)};w.Bg=function(){var a=this.r();this.Ia!=a&&(Fg(this),this.Ia=a)};w.Ag=function(a){var b=this.r();if(this.Ia==b&&(!a.relatedTarget||!he(b,a.relatedTarget)))this.Ia=t,Hg(this)};function Gg(a){a.Fb&&(fa.clearTimeout(a.Fb),a.Fb=p)}
function Hg(a){if(2==(a.Fb?a.Ea?4:1:a.Jc?3:a.Ea?2:0))a.Jc=lg(ua(a.Mi,a,a.anchor),a.xi)}function Fg(a){a.Jc&&(fa.clearTimeout(a.Jc),a.Jc=p)}function Mg(a,b){ug.call(this,a,b)}C(Mg,ug);Mg.prototype.kb=function(a,b,c){b=me(a);b=pe(b);c=c?new Sd(c.top+10,c.right,c.bottom,c.left+10):new Sd(10,0,0,10);sg(this.$e,a,4,c,b,9)&496&&sg(this.$e,a,4,c,b,5)};function Ng(a){vg.call(this,a,3)}C(Ng,vg);
Ng.prototype.kb=function(a,b,c){var e=new Qd(10,0);rg(this.element,this.tg,a,b,e,c,9)&496&&rg(this.element,2,a,1,e,c,5)};function Og(a,b,c,e){a==t&&n(Error("No valid parent element."));(!x(b)||!x(c))&&n(Error("Invalid coordinates."));(e==t||!(e instanceof Fe))&&n(Error("Invalid interactor."));Cg.call(this);this.f="caption";this.Ta=a;this.Sd=b;this.Td=c;this.M=e;this.zb=t;this.$b=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.$b=[a];Ub(e,wd,this.fe.bind(this));this.ff()}C(Og,Cg);
Og.prototype.ff=function(){var a=ke(this.Ta,"position");if("static"==a||""==a)this.Ta.style.position="relative";var a=document.getElementsByTagName("head")[0],b=de("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.$b[0]));a.appendChild(b);b.appendChild(c);this.zb=b;this.ke=new ug(this.Sd,this.Td)||p;this.Ea&&this.kb();xg(this,q);Dg(this,this.Ta);this.r().classList.add("x-tooltip")};
Og.prototype.fe=function(){xg(this,u);this.zb&&fe(this.zb);this.r()&&fe(this.r());this.zb=t};function Pg(){mg.call(this);this.f="renderer3D";this.Tc=this.Wc=this.Sc=this.Vc=this.Rc=this.Uc=this.Me=this.Ne=t;this.v=[0,0,0];this.Mc=[0,0,0];this.fg=t;this.we=new sc;this.jd=new sc;this.ec=new sc;this.Xc=new sc;this.qc=new sc;this.Ac=new sc;this.dc=new sc;this.Fc=new sc;this.P={PROGRESSBAR_ENABLED:q,PICKING_ENABLED:q,ORDERING_ENABLED:q,STATISTICS_ENABLED:u,INTERMEDIATE_RENDERING:u}}C(Pg,mg);Pg.prototype.__defineGetter__("config",v("P"));w=Pg.prototype;
w.xj=function(){this.Tc=this.Wc=this.Sc=this.Vc=this.Rc=this.Uc=t;this.v=[0,0,0]};w.qf=function(a){Pg.u.qf.call(this,a);var b=a.Sd;a=a.Td;var c=this.vf(b,a);if(c=this.get(c))if(c=c.pc){var e=se(this.w);(new Og(this.w,e.x+b+10,e.y+a+10,this.M)).r().innerHTML=c}};
w.sa=function(){Pg.u.sa.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.C,this.t),this.a.clearColor(this.Mc[0],this.Mc[1],this.Mc[2],0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.P.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();
this.a.bindTexture(this.a.TEXTURE_2D,c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.C,this.t,0,this.a.RGB,this.a.UNSIGNED_BYTE,t);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST);this.a.bindFramebuffer(this.a.FRAMEBUFFER,
a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.C,this.t);this.a.bindRenderbuffer(this.a.RENDERBUFFER,t);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,t);this.fg=a}}catch(e){n(Error("Exception while accessing GL Context!\n"+e))}a=new ng;
(this.ma==t||this.a==t||this.D==t)&&n(Error("Renderer was not initialized properly."));(a==t||!(a instanceof ng))&&n(Error("Could not add shaders."));b=Object.keys(pg);Object.keys(og).every(function(a){a=og[a];return-1!=this.Qd.search(a)||-1!=this.Fd.search(a)}.bind(a))||n(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=pg[a];return-1!=this.Qd.search(a)||-1!=this.Fd.search(a)}.bind(a))||n(Error("Could not find all uniforms in the shader sources."));b=this.a.createShader(this.a.FRAGMENT_SHADER);
c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.Fd);this.a.shaderSource(c,a.Qd);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||n(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||n(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));var d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);
this.a.getProgramParameter(d,this.a.LINK_STATUS)||n(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(d)));this.a.useProgram(d);this.Me=d;Object.keys(og).forEach(function(a){a=og[a];this.we.set(a,this.a.getAttribLocation(this.Me,a));this.a.enableVertexAttribArray(this.we.get(a))}.bind(this));Object.keys(pg).forEach(function(a){a=pg[a];this.jd.set(a,this.a.getUniformLocation(this.Me,a))}.bind(this));this.Ne=a};
w.vb=function(a){Pg.u.vb.call(this,a);var b=u;if(a!=t){this.get(a.oa)&&(b=q);var c=a.oa,e=a.g,d=a.o,f=a.ga,g=a.U,h=a.q,l=a.Z,k=a.Sa,j=a.j,m=a.B;if(j!=t&&j.q!=t&&j.q.i)this.vb(j);else if(j!=t&&j.i&&this.vb(j),k!=t&&k.q!=t&&k.q.i)this.Q.load(k,a);else if(g!=t&&g.q!=t&&g.q.i)this.Q.load(g,a);else{if(h!=t&&ka(h))if(a.nc!=t){if(a.nc.he!=h.length||!a.i)return}else{b=0;c=h.length;for(b=0;b<c;b++)this.Q.load(h[b],a);return}else{if(h!=t&&h.i){this.Q.load(a,a);return}if(m!=t&&m.q!=t&&m.q.i){this.Q.load(m,a);
return}}if(0<a.c.length){h=a.c;k=h.length;for(j=j=0;j<k;j++)this.vb(h[j])}if(e){for(h=0;this.Ld;)h++,window.console.log("Possible thread lock avoided: "+h);this.Ld=q;k=a instanceof Md&&a.Ab instanceof Ne;b&&(g!=t&&g.i)&&(h=this.dc.get(c),h!=t&&this.a.isBuffer(h.G)&&this.a.deleteBuffer(h.G));h=t;g!=t&&(!b||g.i?(h=a.Ec,h==t&&n(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),j=u,g.Ub&&(j=q),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,j),j=
this.a.createTexture(),j.Ai=g.Lb,this.Fc.set(g.oa,j),this.a.bindTexture(this.a.TEXTURE_2D,j),g.Ub?(j=this.a.RGBA,g.Wf&&(j=this.a.LUMINANCE,this.a.pixelStorei(this.a.UNPACK_ALIGNMENT,1)),this.a.texImage2D(this.a.TEXTURE_2D,0,j,g.Le,g.Ke,0,j,this.a.UNSIGNED_BYTE,g.Ub)):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,j.Ai),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,
this.a.CLAMP_TO_EDGE),k?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,t),j=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,j),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),
this.a.STATIC_DRAW),h=new qg(j,h.length,2),this.dc.set(c,h),g.i=u):h=this.dc.get(c));If(this.Q,0.1);if(k)this.Ld=u,E.Qa(this.f+".update"),If(this.Q,0.9);else{if(!b||e.i||l.i){k=l.H;g=E.e.S(k,e.cb,e.eb,e.fb);k=E.e.S(k,e.Za,e.$a,e.ab);if(this.Uc===t||g.x<this.Uc)this.Uc=g.x;if(this.Rc===t||k.x>this.Rc)this.Rc=k.x;if(this.Vc===t||g.y<this.Vc)this.Vc=g.y;if(this.Sc===t||k.y>this.Sc)this.Sc=k.y;if(this.Wc===t||g.d<this.Wc)this.Wc=g.d;if(this.Tc===t||k.d>this.Tc)this.Tc=k.d;this.v=[(this.Uc+this.Rc)/2,
(this.Vc+this.Sc)/2,(this.Wc+this.Tc)/2];l.i=u}b&&e.i&&(l=this.ec.get(c),l!=t&&this.a.isBuffer(l.G)&&this.a.deleteBuffer(l.G));l=t;!b||e.i?(l=this.a.createBuffer(),e.Eb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,l),this.a.bufferData(this.a.ARRAY_BUFFER,e.V,this.a.STATIC_DRAW),l=new qg(l,e.count,3),e.i=u):l=this.ec.get(c);If(this.Q,0.3);b&&d.i&&(g=this.ec.get(c),g!=t&&this.a.isBuffer(g.G)&&this.a.deleteBuffer(g.G));g=t;!b||d.i?(g=this.a.createBuffer(),d.Eb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,
d.V,this.a.STATIC_DRAW),g=new qg(g,d.count,3),d.i=u):g=this.Xc.get(c);If(this.Q,0.3);b&&(f&&f.i)&&(d=this.qc.get(c),d!=t&&this.a.isBuffer(d.G)&&this.a.deleteBuffer(d.G));d=t;f&&(!b||f.i?(f.length!=e.length&&n(Error("Mismatch between points and point colors.")),d=this.a.createBuffer(),f.Eb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),this.a.bufferData(this.a.ARRAY_BUFFER,f.V,this.a.STATIC_DRAW),d=new qg(d,f.count,3),f.i=u):d=this.qc.get(c));If(this.Q,0.2);b&&(m&&m.i)&&(f=this.Ac.get(c),f!=t&&this.a.isBuffer(f.G)&&
this.a.deleteBuffer(f.G));f=t;m&&(f=m.Oc,!b||m.i?(f.length!=e.length&&n(Error("Mismatch between points and scalars.")),e=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW),f=new qg(e,f.length,3),m.i=u):f=this.Ac.get(c));If(this.Q,0.1);b||this.rb.add(a);this.ec.set(c,l);this.Xc.set(c,g);this.qc.set(c,d);this.dc.set(c,h);this.Ac.set(c,f);this.Ld=a.i=u}}else a.i=u}}};
w.vf=function(a,b){if(this.P.PICKING_ENABLED){this.Zb(q,u);var c=new Uint8Array(4);this.a.readPixels(a,this.t-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
w.Zb=function(a,b){Pg.u.Zb.call(this,a,b);this.a.viewport(0,0,this.C,this.t);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var c=this.rb.A,e=c.length;if(0!=e){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.fg):this.a.bindFramebuffer(this.a.FRAMEBUFFER,t);var d=this.D.Je,f=this.D.m;this.a.uniformMatrix4fv(this.jd.get("perspective"),u,d);this.a.uniformMatrix4fv(this.jd.get("view"),u,f);d=this.v;this.a.uniform3f(this.jd.get("center"),parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]));
f=this.gb.length;for(d=0;d<f;++d){var g=this.gb[d];if(g instanceof S){var h=E.e.S(this.D.m,g.s[0]+g.b[0].h[0],g.s[1]+g.b[0].h[1],g.s[2]+g.b[0].h[2]),l=E.e.S(this.D.m,g.s[0]-g.b[0].h[0],g.s[1]-g.b[0].h[1],g.s[2]-g.b[0].h[2]),k=Math.abs(h.d-l.d),h=E.e.S(this.D.m,g.s[0]+g.b[1].h[0],g.s[1]+g.b[1].h[1],g.s[2]+g.b[1].h[2]),l=E.e.S(this.D.m,g.s[0]-g.b[1].h[0],g.s[1]-g.b[1].h[1],g.s[2]+-g.b[1].h[2]),j=Math.abs(h.d-l.d),h=E.e.S(this.D.m,g.s[0]+g.b[2].h[0],g.s[1]+g.b[2].h[1],g.s[2]+g.b[2].h[2]),l=E.e.S(this.D.m,
g.s[0]-g.b[2].h[0],g.s[1]-g.b[2].h[1],g.s[2]-g.b[2].h[2]),h=Math.max(k,j,Math.abs(h.d-l.d));h==k?Me(g,0):h==j?Me(g,1):Me(g,2)}}if(this.P.ORDERING_ENABLED){k=u;f=this.gb;g=f.length-1;do if(d=f[g],d instanceof S&&d.hb){k=d.c[d.Bb].c;j=d.Bb;h=E.e.S(this.D.m,d.s[0]+d.b[j].h[0],d.s[1]+d.b[j].h[1],d.s[2]+d.b[j].h[2]);l=E.e.S(this.D.m,d.s[0]-d.b[j].h[0],d.s[1]+-d.b[j].h[1],d.s[2]-d.b[j].h[2]);h=h.d-l.d;if(0<h&&0!=j||0>h&&0==j)for(h=h=0;h<d.ad[j]-1;h++)k[h].pa=d.pa,k[h].na=d.b[j].Cc*h;else for(h=d.ad[j]-
1;0<=h;h--)k[h].pa=d.pa,k[h].na=(d.ad[j]-1)*d.b[j].Cc-d.b[j].Cc*h;k=q}while(g--);f=this.rb.A;g=f.length-1;do if(d=f[g],d.ia&&!(1==d.pa||d instanceof Md))k=d,j=d.g.Dd,d=E.e.S(d.Z.H,j[0],j[1],j[2]),d=E.e.S(this.D.m,d.x,d.y,d.d),d=E.l.df(this.D.bc,d),d=Math.round(1E3*d)/1E3,k.na=d,k=q;while(g--);k&&this.rb.sort()}if(f=!a&&b!=t&&b&&this.P.STATISTICS_ENABLED)var m=0,r=0,s=0,z=0;var d=this.we,g=d.get("vertexPosition"),k=d.get("vertexNormal"),j=d.get("vertexColor"),h=d.get("vertexTexturePos"),l=d.get("vertexScalar"),
d=this.jd,y=d.get("usePicking"),D=d.get("useObjectColor"),F=d.get("objectColor"),H=d.get("useScalars"),A=d.get("scalarsReplaceMode"),G=d.get("scalarsMin"),J=d.get("scalarsMax"),K=d.get("scalarsMinColor"),R=d.get("scalarsMaxColor"),N=d.get("scalarsInterpolation"),W=d.get("scalarsMinThreshold"),aa=d.get("scalarsMaxThreshold"),Z=d.get("objectOpacity"),ba=d.get("labelmapOpacity"),L=d.get("labelmapColor"),O=d.get("useTexture"),Q=d.get("useLabelMapTexture"),hb=d.get("textureSampler"),Ec=d.get("textureSampler2"),
Fc=d.get("volumeLowerThreshold"),Gc=d.get("volumeUpperThreshold"),Tg=d.get("volumeScalarMin"),Ug=d.get("volumeScalarMax"),Vg=d.get("volumeWindowLow"),Wg=d.get("volumeWindowHigh"),Xg=d.get("volumeScalarMinColor"),Yg=d.get("volumeScalarMaxColor"),gg=d.get("volumeTexture"),Zg=d.get("objectTransform"),$g=d.get("pointSize"),d=e;do{var ca=c[e-d];if(ca){var ja=t;ca instanceof Md&&ca.Ab&&(ja=ca.Ab);if(ca.ia&&(!ja||ja.ia)&&(!a||ca.Yc)){var ya=ca.oa,bb=ca.Qc,Ma=this.ec.get(ya),lb=this.Xc.get(ya),He=this.qc.get(ya),
Db=this.Ac.get(ya),Ie=this.dc.get(ya);this.a.bindBuffer(this.a.ARRAY_BUFFER,Ma.G);this.a.vertexAttribPointer(g,Ma.Nb,this.a.FLOAT,u,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,lb.G);this.a.vertexAttribPointer(k,lb.Nb,this.a.FLOAT,u,0,0);a?this.a.uniform1i(y,q):this.a.uniform1i(y,u);He&&!a&&!bb?(this.a.uniform1i(D,u),this.a.bindBuffer(this.a.ARRAY_BUFFER,He.G),this.a.vertexAttribPointer(j,He.Nb,this.a.FLOAT,u,0,0)):(lb=1,bb&&!a&&(lb=0),this.a.uniform1i(D,lb),lb=ca.F,a&&(lb=[Math.floor(ya%65025%255)/
255,Math.floor(ya%65025/255)/255,Math.floor(ya/65025)/255]),this.a.uniform3f(F,parseFloat(lb[0]),parseFloat(lb[1]),parseFloat(lb[2])),this.a.vertexAttribPointer(j,Ma.Nb,this.a.FLOAT,u,0,0));Db&&!a&&!bb?(this.a.uniform1i(H,q),this.a.uniform1i(A,ca.B.ig),ya=ca.B.Qb,bb=ca.B.Ob,this.a.uniform3f(K,parseFloat(ya[0]),parseFloat(ya[1]),parseFloat(ya[2])),this.a.uniform3f(R,parseFloat(bb[0]),parseFloat(bb[1]),parseFloat(bb[2])),this.a.uniform1f(W,parseFloat(ca.B.ba)),this.a.uniform1f(aa,parseFloat(ca.B.ca)),
this.a.uniform1f(G,parseFloat(ca.B.bb)),this.a.uniform1f(J,parseFloat(ca.B.ha)),this.a.uniform1i(N,parseInt(ca.B.ye,10)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Db.G),this.a.vertexAttribPointer(l,Db.Nb,this.a.FLOAT,u,0,0)):(this.a.uniform1i(H,u),this.a.vertexAttribPointer(l,Ma.Nb,this.a.FLOAT,u,0,0));this.a.uniform1f(Z,parseFloat(ca.pa));ca.U&&Ie&&!a?(this.a.uniform1i(O,q),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.Fc.get(ca.U.oa)),this.a.uniform1i(hb,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,
Ie.G),this.a.vertexAttribPointer(h,Ie.Nb,this.a.FLOAT,u,0,0),this.a.uniform1i(gg,u)):(this.a.uniform1i(O,u),this.a.vertexAttribPointer(h,Ma.Nb,this.a.FLOAT,u,0,0));ja&&(this.a.uniform1i(gg,q),this.a.uniform1f(Fc,ja.ba),this.a.uniform1f(Gc,ja.ca),this.a.uniform1f(Tg,ja.bb),this.a.uniform1f(Ug,ja.ha),ya=ja.Qb,bb=ja.Ob,this.a.uniform3f(Xg,parseFloat(ya[0]),parseFloat(ya[1]),parseFloat(ya[2])),this.a.uniform3f(Yg,parseFloat(bb[0]),parseFloat(bb[1]),parseFloat(bb[2])),this.a.uniform1f(Vg,ja.ea),this.a.uniform1f(Wg,
ja.da),Db=ja.j,this.a.uniform1i(Q,u),ja.hb?this.a.uniform1f(Z,parseFloat(ja.pa)):Db&&Db.ia&&(ja=ca.j.oa,this.a.uniform1i(Q,q),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.Fc.get(ja)),this.a.uniform1i(Ec,1),this.a.uniform1f(ba,Db.pa),this.a.uniform4fv(L,Db.Oe)));this.a.uniformMatrix4fv(Zg,u,ca.Z.H);ja=1;"POINTS"==ca.ya&&(ja=ca.Zc);this.a.uniform1f($g,ja);ja=-1;ca.ya==cd?(ja=this.a.TRIANGLES,f&&(r+=Ma.Mb/3)):"LINES"==ca.ya?(this.a.lineWidth(ca.yc),ja=this.a.LINES,
f&&(s+=Ma.Mb/2)):"POINTS"==ca.ya?(ja=this.a.POINTS,f&&(z+=Ma.Mb)):"TRIANGLE_STRIPS"==ca.ya?(ja=this.a.TRIANGLE_STRIP,f&&(r+=Ma.Mb/3)):"POLYGONS"==ca.ya&&(ja=0==Ma.Mb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(r+=Ma.Mb/3));f&&(m+=Ma.Mb);this.a.drawArrays(ja,0,Ma.Mb)}}}while(--d);f&&(c="Objects: "+e+" | "+("Vertices: "+m+" | "),c+="Triangles: "+Math.round(r)+" | ",c+="Lines: "+s+" | ",c+="Points: "+z+" | ",c+="Textures: "+this.Fc.$d(),window.console.log(c))}};
w.remove=function(a){Pg.u.remove.call(this,a);if(0<a.c.length)for(var b=a.c,c=b.length,e=0,e=0;e<c;e++)this.remove(b[e]);b=a.oa;c=this.dc.get(b);c!=t&&this.a.isBuffer(c.G)&&this.a.deleteBuffer(c.G);if(a.dl&&(c=this.Fc.get(a.U.oa)))this.a.deleteTexture(c),this.Fc.remove(a.U.oa);c=this.ec.get(b);c!=t&&this.a.isBuffer(c.G)&&this.a.deleteBuffer(c.G);c=this.Xc.get(b);c!=t&&this.a.isBuffer(c.G)&&this.a.deleteBuffer(c.G);c=this.qc.get(b);c!=t&&this.a.isBuffer(c.G)&&this.a.deleteBuffer(c.G);c=this.Ac.get(b);
c!=t&&this.a.isBuffer(c.G)&&this.a.deleteBuffer(c.G);this.ec.remove(b);this.Xc.remove(b);this.qc.remove(b);this.dc.remove(b);this.Ac.remove(b);this.rb.remove(a);return q};w.Vd=function(){this.Ne=t;delete this.Ne;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);Pg.u.Vd.call(this)};Pg.prototype.__defineGetter__("bgColor",v("Mc"));Pg.prototype.__defineSetter__("bgColor",ea("Mc"));
Pg.prototype.tj=function(a,b,c,e,d){c!=t||(c=4);e!=t||(e=2);if(d==t){d=this.vf(a,b);if(-1==d)return t;d=this.get(d);if(!d)return t}var f=Xf(this.D,2*(a/this.C)-1,2*((this.t-b)/this.t)-1,0);a=Xf(this.D,2*(a/this.C)-1,2*((this.t-b)/this.t)-1,1);f[0]+=this.v[0];f[1]+=this.v[1];f[2]+=this.v[2];a[0]+=this.v[0];a[1]+=this.v[1];a[2]+=this.v[2];b=[d.g.cb,d.g.eb,d.g.fb];var g=[d.g.Za,d.g.eb,d.g.fb],h=[d.g.Za,d.g.$a,d.g.fb],l=[d.g.cb,d.g.$a,d.g.fb],k=[d.g.cb,d.g.$a,d.g.ab],j=[d.g.cb,d.g.eb,d.g.ab],m=[d.g.Za,
d.g.$a,d.g.ab],r=[d.g.Za,d.g.eb,d.g.ab];b=[E.e.S(d.Z.H,b[0],b[1],b[2]),E.e.S(d.Z.H,g[0],g[1],g[2]),E.e.S(d.Z.H,h[0],h[1],h[2]),E.e.S(d.Z.H,l[0],l[1],l[2]),E.e.S(d.Z.H,k[0],k[1],k[2]),E.e.S(d.Z.H,j[0],j[1],j[2]),E.e.S(d.Z.H,m[0],m[1],m[2]),E.e.S(d.Z.H,r[0],r[1],r[2])];var g=[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity],s;for(s in b)s=b[s],g=[Math.min(g[0],s.x),Math.max(g[1],s.x),Math.min(g[2],s.y),Math.max(g[3],s.y),Math.min(g[4],s.d),Math.max(g[5],s.d)];s=g;b=[];g=[];for(h=0;6>h;h++){var l=
Math.floor(h/2),k=(l+1)%3,j=(l+2)%3,r=(2+2*l)%6,z=(4+2*l)%6,y=(s[h]-f[l])*(1/a[l]);Infinity!=y&&-Infinity!=y&&(m=f[k]+a[k]*y,y=f[j]+a[j]*y,m>=s[r]&&m<=s[r+1]&&y>=s[z]&&y<=s[z+1]?(r=[],r[l]=s[h],r[k]=m,r[j]=y,b.push(r)):(r=[],r[l]=s[h],r[k]=m,r[j]=y,g.push(r)))}a=[b,g];a=a[0];if(0==a.length)return t;g=Array(2);for(s=0;2>s;s++)b=a[s],g[s]=Math.sqrt((b[0]-f[0])*(b[0]-f[0])+(b[1]-f[1])*(b[1]-f[1])+(b[2]-f[2])*(b[2]-f[2]));f=b=s=t;g[0]<g[1]?(s=a[0],b=a[1]):(s=a[1],b=a[0]);f=Math.sqrt((s[0]-b[0])*(s[0]-
b[0])+(s[1]-b[1])*(s[1]-b[1])+(s[2]-b[2])*(s[2]-b[2]));f/=c;a=s;s=[b[0]-s[0],b[1]-s[1],b[2]-s[2]];b=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);g=[s[0]/b,s[1]/b,s[2]/b];h=d.g.V;l=h.length;for(s=0;s<f;s+=c){a=[a[0]+c*g[0],a[1]+c*g[1],a[2]+c*g[2]];for(b=0;b<l;b+=3)if(k=h[b],j=h[b+1],m=h[b+2],r=new E.l(k,j,m),r=E.e.S(d.Z.H,k,j,m),Math.sqrt((a[0]-r.x)*(a[0]-r.x)+(a[1]-r.y)*(a[1]-r.y)+(a[2]-r.d)*(a[2]-r.d))<=e)return[r.x,r.y,r.d]}return t};B("X.renderer3D",Pg);B("X.renderer3D.prototype.init",Pg.prototype.sa);
B("X.renderer3D.prototype.add",Pg.prototype.add);B("X.renderer3D.prototype.onShowtime",Pg.prototype.Wg);B("X.renderer3D.prototype.onRender",Pg.prototype.Ug);B("X.renderer3D.prototype.get",Pg.prototype.get);B("X.renderer3D.prototype.render",Pg.prototype.mc);B("X.renderer3D.prototype.destroy",Pg.prototype.Vd);B("X.renderer3D.prototype.remove",Pg.prototype.remove);B("X.renderer3D.prototype.resetBoundingBox",Pg.prototype.xj);B("X.renderer3D.prototype.resetViewAndRender",Pg.prototype.yd);
B("X.renderer3D.prototype.pick",Pg.prototype.vf);B("X.renderer3D.prototype.pick3d",Pg.prototype.tj);function Qg(){mg.call(this);this.f="renderer2D";this.Ba=t;this.va=-1;this.Rb=[];this.Zf=this.Id=this.Uf=this.Gd=t;this.Bc=this.Dc=this.bd=this.dd=0;this.da=this.ea=this.ca=this.ba=this.Rf=-1;this.$f=new Float32Array([-255,-255,-255,-255]);this.gg=q}C(Qg,mg);Qg.prototype.fj=da();Qg.prototype.oj=da();Qg.prototype.sf=function(a){Qg.u.sf.call(this,a);var b=this.gb[0];if(b){var c="",c=0==this.va?"indexX":1==this.va?"indexY":"indexZ";b[c]=a.W?b[c]+1:b[c]-1;eval("this.onScroll();")}};
Qg.prototype.pj=function(a){var b=this.gb[0];if(b){var c=b.da-b.ea,e=c/2,d=parseInt(c+c/15*-a.Re,10);a=parseInt(e+e/15*a.De,10);c==d&&d++;e==a&&a++;b.ea-=parseInt(e-a,10);b.ea-=parseInt(c-d,10);b.ea=Math.max(b.ea,b.bb);b.da-=parseInt(e-a,10);b.da+=parseInt(c-d,10);b.da=Math.min(b.da,b.ha);eval("this.onWindowLevel();")}};Qg.prototype.__defineGetter__("orientation",v("Ba"));
Qg.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"AXIAL"==a?(a="Z",this.va=2):"SAGITTAL"==a?(a="X",this.va=0):"CORONAL"==a&&(a="Y",this.va=1);"X"!=a&&("Y"!=a&&"Z"!=a)&&n(Error("Invalid orientation."));this.Ba=a});Qg.prototype.__defineGetter__("radiological",v("gg"));Qg.prototype.__defineSetter__("radiological",ea("gg"));w=Qg.prototype;
w.sa=function(){this.Ba||n(Error("No 2D orientation set."));Qg.u.sa.call(this,"2d");this.a.fillStyle="rgba(50,50,50,0)";this.a.fillRect(0,0,this.ma.width,this.ma.height);this.Gd=de("canvas");this.Id=de("canvas");M(this.D,rd,this.pj.bind(this))};w.rf=function(){Qg.u.rf.call(this);Rg(this)};w.yd=function(){Qg.u.yd.call(this);Rg(this);var a=this.gb[0];a&&(a.da=a.ha,a.ea=a.bb)};
w.vb=function(a){Qg.u.vb.call(this,a);var b=u;this.get(a.oa)&&(b=q);if(a instanceof S){var c=a.q,e=a.j,d=a.Sa;if(e!=t&&e.q!=t&&e.q.i)this.vb(e);else if(d!=t&&d.q!=t&&d.q.i)this.Q.load(d,a);else{if(c!=t&&ka(c))if(a.nc!=t){if(a.nc.he!=c.length||b&&!a.i)return}else{b=0;e=c.length;for(b=0;b<e;b++)this.Q.load(c[b],a);return}else if(c!=t&&c.i){this.Q.load(a,a);return}this.va="X"==this.Ba?0:"Y"==this.Ba?1:2;this.Ua=a.c[this.va].c;d=t;d=0==this.va?a.indexX:1==this.va?a.indexY:a.indexZ;c=a.c[this.va].c[d].Yf;
e=a.c[this.va].c[d].Xf;this.Dc=a.c[this.va].c[d].Gc;this.Bc=a.c[this.va].c[d].tc;this.dd=c;this.bd=e;d=this.Gd;d.width=c;d.height=e;var f=this.Id;f.width=c;f.height=e;this.Uf=d.getContext("2d");this.Zf=f.getContext("2d");b||(this.rb.add(a),Rg(this))}}};function Rg(a){var b=Math.min(a.C/(a.dd*a.Dc),a.t/(a.bd*a.Bc));a.D.m[14]=b}
w.th=function(a,b){var c=this.gb[0],e=this.D.m,d=t,f=this.dd,g=this.bd,h=t,l=t;if("Y"==this.Ba)d=this.Ua[parseInt(c.indexY,10)],h=d.Gc,l=d.tc,this.Rb[0]="yellow",this.Rb[1]="green";else if("Z"==this.Ba)d=this.Ua[parseInt(c.indexZ,10)],h=d.Gc,l=d.tc,this.Rb[0]="yellow",this.Rb[1]="red";else{d=this.Ua[parseInt(c.indexX,10)];h=d.tc;l=d.Gc;this.Rb[0]="red";this.Rb[1]="green";var k=f,f=g,g=k,k=h,h=l,l=k}var j=1*e[12],m=-1*e[13],k=Math.max(e[14],0.6),e=[this.C/2,this.t/2],h=f*h*k,r=g*l*k,l=e[0]-h/2,e=e[1]-
r/2,m=(b-(e+m*k))/r,j=(a-(l+j*k))/h*f,m=m*g,h=d.Rh[4];"X"==this.Ba?(k=f-j,j=m,m=k):"Y"==this.Ba?j=f-j:"Z"==this.Ba&&(j=f-j,m=g-m);j=d.Qh+j*d.Gc;m=d.Hh+m*d.tc;j=Lc(j,m,h,1);f=Mc();Xc(d.Ah,j,f);g=Mc();Xc(d.Bh,j,g);d=Math.round((c.b[0].h[0]*g[0]+c.b[0].h[1]*g[1]+c.b[0].h[2]*g[2]+c.b[0].He)/Math.abs(c.b[0].Cc));d>=c.b[0].n?d=c.b[0].n-1:0>d&&(d=0);j=Math.round((c.b[1].h[0]*g[0]+c.b[1].h[1]*g[1]+c.b[1].h[2]*g[2]+c.b[1].He)/Math.abs(c.b[1].Cc));j>=c.b[1].n?j=c.b[1].n-1:0>j&&(j=0);m=Math.round((c.b[2].h[0]*
g[0]+c.b[2].h[1]*g[1]+c.b[2].h[2]*g[2]+c.b[2].He)/Math.abs(c.b[2].Cc));m>=c.b[2].n?m=c.b[2].n-1:0>m&&(m=0);return[[d,j,m],[f[0],f[1],f[2]],[g[0],g[1],g[2]]]};
w.Zb=function(a,b){Qg.u.Zb.call(this,a,b);if(0!=this.rb.A.length){var c=this.gb[0],e=t,e=0==this.va?c.indexX:1==this.va?c.indexY:c.indexZ,d=this.Ua[parseInt(e,10)].Yf,f=this.Ua[parseInt(e,10)].Xf;this.Dc=this.Ua[parseInt(e,10)].Gc;this.Bc=this.Ua[parseInt(e,10)].tc;this.dd=d;this.bd=f;var g=this.C,h=this.t,l=this.D.m;this.a.save();this.a.clearRect(-g,-h,2*g,2*h);this.a.restore();var k=Math.max(l[14],0.1);this.a.setTransform(k,0,0,k,0,0);var j=1*l[12],l=-1*l[13],m=t;c.j&&(m=c.j.Oe);var r=this.Ua[parseInt(e,
10)],s=r.U.Ub,r=r.j,z=t;r&&(z=r.Ub);var y=this.dd,D=this.bd,F=this.Uf,H=this.Zf,A=F.getImageData(0,0,y,D),G=H.getImageData(0,0,y,D),J=A.data,K=G.data,R=J.length,N=c.ha,W=c.ba,aa=c.ca,Z=c.ea/N,ba=c.da/N;if(this.Rf!=e||this.ba!=W||this.ca!=aa||this.ea!=Z||this.da!=ba||m&&!Tf(m,this.$f,0)){var L=this.Gd;L.width=d;L.height=f;L=this.Id;L.width=d;L.height=f;d=0;do{var L=[0,0,0,0],f=[0,0,0,0],O=s[d]/255*N,Q=s[d],Q=(Q/255-Z)/(ba-Z),Q=255*Q;O>=W&&O<=aa&&(L=new T(c.Qb[0],c.Qb[1],c.Qb[2]),L=(new T(c.Ob[0],c.Ob[1],
c.Ob[2])).scale(Q).add(L.scale(255-Q)),L=[Math.floor(L.x),Math.floor(L.y),Math.floor(L.d),255],r&&(-255==m[3]?f=[z[d],z[d+1],z[d+2],z[d+3]]:Tf(m,z,d)&&(f=[z[d],z[d+1],z[d+2],z[d+3]])));"X"==this.Ba?(J[d]=L[0],J[d+1]=L[1],J[d+2]=L[2],J[d+3]=L[3],K[d]=f[0],K[d+1]=f[1],K[d+2]=f[2],K[d+3]=f[3]):"Y"==this.Ba?(Q=4*y*Math.floor(d/(4*y))-d%(4*y),J[Q]=L[0],J[Q+1]=L[1],J[Q+2]=L[2],J[Q+3]=L[3],K[Q]=f[0],K[Q+1]=f[1],K[Q+2]=f[2],K[Q+3]=f[3]):(Q=R-1-d,J[Q-3]=L[0],J[Q-2]=L[1],J[Q-1]=L[2],J[Q]=L[3],K[Q-3]=f[0],K[Q-
2]=f[1],K[Q-1]=f[2],K[Q]=f[3]);d+=4}while(d<R);F.putImageData(A,0,0);H.putImageData(G,0,0);this.Rf=e;this.ba=W;this.ca=aa;this.ea=Z;this.da=ba;r&&(this.$f=m)}this.a.globalAlpha=1;this.a.translate(g/2/k,h/2/k);"X"==this.Ba&&(this.a.rotate(0.5*Math.PI),e=j,j=l,l=-e);j=-y*this.Dc/2+j;l=-D*this.Bc/2+l;this.a.drawImage(this.Gd,j,l,y*this.Dc,D*this.Bc);r&&c.j.ia&&(this.a.globalAlpha=c.j.pa,this.a.drawImage(this.Id,j,l,y*this.Dc,D*this.Bc));if(this.P.SLICENAVIGATORS&&(this.M.Md&&this.M.kg&&!this.M.qb)&&
(j=this.M.ka,j=this.th(j[0],j[1])))c.nb=j[0][0],c.ob=j[0][1],c.pb=j[0][2],c.p(u),this.a.setTransform(1,0,0,1,0,0),this.a.lineWidth=1,this.a.beginPath(),this.a.moveTo(this.M.ka[0],0),this.a.lineTo(this.M.ka[0],this.M.ka[1]-10),this.a.moveTo(this.M.ka[0],this.M.ka[1]+10),this.a.lineTo(this.M.ka[0],this.t),this.a.strokeStyle=this.Rb[0],this.a.stroke(),this.a.closePath(),this.a.beginPath(),this.a.moveTo(0,this.M.ka[1]),this.a.lineTo(this.M.ka[0]-10,this.M.ka[1]),this.a.moveTo(this.M.ka[0]+10,this.M.ka[1]+
0.5),this.a.lineTo(this.C,this.M.ka[1]),this.a.strokeStyle=this.Rb[1],this.a.stroke(),this.a.closePath(),this.a.font="10pt Arial",this.a.textAlign="left",this.a.textBaseline="top",this.a.fillStyle="white",this.a.fillText("RAS: "+j[2][0].toFixed(2)+", "+j[2][1].toFixed(2)+", "+j[2][2].toFixed(2),0,0),y=r=l="undefined","undefined"!=typeof c.Aa[j[1][2].toFixed(0)]&&"undefined"!=typeof c.Aa[j[1][2].toFixed(0)][j[1][1].toFixed(0)]&&(l=c.Aa[j[1][2].toFixed(0)][j[1][1].toFixed(0)][j[1][0].toFixed(0)],c.ja&&
(r=c.j.Aa[j[1][2].toFixed(0)][j[1][1].toFixed(0)][j[1][0].toFixed(0)],c.j.Nc&&(y=c.j.Nc.get(r),"undefined"!=typeof y&&(y=y[0])))),this.a.fillText("Background:  "+l+" ("+j[1][0].toFixed(0)+", "+j[1][1].toFixed(0)+", "+j[1][2].toFixed(0)+")",0,15),c.ja&&this.a.fillText("Labelmap:  "+y+" ("+r+")",0,30)}};B("X.renderer2D",Qg);B("X.renderer2D.prototype.init",Qg.prototype.sa);B("X.renderer2D.prototype.add",Qg.prototype.add);B("X.renderer2D.prototype.onShowtime",Qg.prototype.Wg);
B("X.renderer2D.prototype.onRender",Qg.prototype.Ug);B("X.renderer2D.prototype.onScroll",Qg.prototype.fj);B("X.renderer2D.prototype.onWindowLevel",Qg.prototype.oj);B("X.renderer2D.prototype.get",Qg.prototype.get);B("X.renderer2D.prototype.resetViewAndRender",Qg.prototype.yd);B("X.renderer2D.prototype.xy2ijk",Qg.prototype.th);B("X.renderer2D.prototype.render",Qg.prototype.mc);B("X.renderer2D.prototype.destroy",Qg.prototype.Vd);function Sg(){V.call(this);this.f="fibers";Ea(this,new qc)}C(Sg,V);B("X.fibers",Sg);function ah(){V.call(this);this.f="mesh";Ea(this,new qc)}C(ah,V);B("X.mesh",ah);
