/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function i(a){throw a;}var m=void 0,n=!0,p=null,q=!1;function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function s(a){return function(){return this[a]}}var v,da=this;function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ga(a){return a!==m}function x(a){return a!=p}function ha(a){return"array"==fa(a)}function ia(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function la(a){return"string"==typeof a}function z(a){return"number"==typeof a}function ma(a){return"function"==fa(a)}function na(a){a=fa(a);return"object"==a||"array"==a||"function"==a}function oa(a){return a[pa]||(a[pa]=++ta)}
var pa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ta=0;function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){a||i(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function wa(a,b,c){wa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:va;return wa.apply(p,arguments)}function xa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var ya=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=da;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ga(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function B(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function Ba(a,b,c){this.sa=this.ra=this.qa=0;3==arguments.length?(this.qa=Number(a),this.ra=Number(b),this.sa=Number(c)):a instanceof Ba?(this.qa=Number(a.x()),this.ra=Number(a.y()),this.sa=Number(a.b())):(this.qa=Number(a[0]),this.ra=Number(a[1]),this.sa=Number(a[2]))}
Ba.prototype={f:function(){return new Ba(this.qa,this.ra,this.sa)},Qe:function(){return new Ba(-this.qa,-this.ra,-this.sa)},pc:function(a){return new Ba(this.qa+a.x(),this.ra+a.y(),this.sa+a.b())},Vc:function(a){return new Ba(this.qa-a.x(),this.ra-a.y(),this.sa-a.b())},yb:function(a){return new Ba(this.qa*a,this.ra*a,this.sa*a)},Zg:function(a){return new Ba(this.qa/a,this.ra/a,this.sa/a)},mc:function(a){return this.qa*a.x()+this.ra*a.y()+this.sa*a.b()},ag:function(a,b){return this.pc(a.Vc(this).yb(b))},
length:function(){return Math.sqrt(this.mc(this))},bd:function(){return this.Zg(this.length())},ze:function(a){return new Ba(this.ra*a.b()-this.sa*a.y(),this.sa*a.x()-this.qa*a.b(),this.qa*a.y()-this.ra*a.x())},x:s("qa"),y:s("ra"),b:s("sa")};var Ca=Ca||{};Ca.Gi=n;window["X.counter"]=new function(){this.Ng=0;this.Bi=function(){return this.Ng++}};function Da(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&i(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.Yc;++c)window.Yc=window[b[c]+"RequestAnimationFrame"],window.ue=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.Yc||(window.Yc=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),h=window.setTimeout(function(){b(c+f)},f);a=c+f;return h});window.ue||(window.ue=function(a){clearTimeout(a)})})();A("Function.prototype.bind",Function.prototype.bind);A("window.requestAnimationFrame",window.Yc);
A("window.cancelAnimationFrame",window.ue);function Ea(a){if(!Fa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ga,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ha,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ia,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ja,"&quot;"));return a}var Ga=/&/g,Ha=/</g,Ia=/>/g,Ja=/\"/g,Fa=/[&<>\"]/;var Ka,La,Ma,Na,Oa,Pa,Ra;function Sa(){return da.navigator?da.navigator.userAgent:p}function Ta(){return da.navigator}Oa=Na=Ma=La=Ka=q;var Ua;if(Ua=Sa()){var Va=Ta();Ka=0==Ua.indexOf("Opera");La=!Ka&&-1!=Ua.indexOf("MSIE");Na=(Ma=!Ka&&-1!=Ua.indexOf("WebKit"))&&-1!=Ua.indexOf("Mobile");Oa=!Ka&&!Ma&&"Gecko"==Va.product}var Wa=Ka,G=La,Xa=Oa,Ya=Ma,Za=Na,ab,bb=Ta();ab=bb&&bb.platform||"";Pa=-1!=ab.indexOf("Mac");Ra=-1!=ab.indexOf("Win");var cb=!!Ta()&&-1!=(Ta().appVersion||"").indexOf("X11"),db;
a:{var eb="",fb;if(Wa&&da.opera)var hb=da.opera.version,eb="function"==typeof hb?hb():hb;else if(Xa?fb=/rv\:([^\);]+)(\)|;)/:G?fb=/MSIE\s+([^\);]+)(\)|;)/:Ya&&(fb=/WebKit\/(\S+)/),fb)var ib=fb.exec(Sa()),eb=ib?ib[1]:"";if(G){var jb,kb=da.document;jb=kb?kb.documentMode:m;if(jb>parseFloat(eb)){db=""+jb;break a}}db=eb}var nb={};
function ob(a){var b;if(!(b=nb[a])){b=0;for(var c=(""+db).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",g=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var o=j.exec(h)||["","",""],l=k.exec(g)||["","",""];if(0==o[0].length&&0==l[0].length)break;b=((0==o[1].length?0:parseInt(o[1],10))<(0==l[1].length?0:parseInt(l[1],10))?-1:(0==o[1].length?0:parseInt(o[1],
10))>(0==l[1].length?0:parseInt(l[1],10))?1:0)||((0==o[2].length)<(0==l[2].length)?-1:(0==o[2].length)>(0==l[2].length)?1:0)||(o[2]<l[2]?-1:o[2]>l[2]?1:0)}while(0==b)}b=nb[a]=0<=b}return b}var pb={};function qb(a){return pb[a]||(pb[a]=G&&document.documentMode&&document.documentMode>=a)};function rb(a,b){for(var c in a)b.call(m,a[c],c,a)}function sb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function tb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var ub="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function vb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<ub.length;f++)c=ub[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var wb=Array.prototype,xb=wb.indexOf?function(a,b,c){return wb.indexOf.call(a,b,c)}:function(a,b,c){c=c==p?0:0>c?Math.max(0,a.length+c):c;if(la(a))return!la(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},yb=wb.forEach?function(a,b,c){wb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},zb=wb.map?function(a,b,c){return wb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
la(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ab=wb.some?function(a,b,c){return wb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return n;return q},Bb=wb.every?function(a,b,c){return wb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return q;return n};function Cb(a,b){var c=xb(a,b);0<=c&&wb.splice.call(a,c,1)}
function Gb(a){return wb.concat.apply(wb,arguments)}function Hb(a){if(ha(a))return Gb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Ib(a,b,c){return 2>=arguments.length?wb.slice.call(a,b):wb.slice.call(a,b,c)};function Jb(a){if("function"==typeof a.ma)a=a.ma();else if(ia(a)||la(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Kb(a){if("function"==typeof a.Ub)return a.Ub();if(la(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return sb(a)}
function Lb(a,b){if("function"==typeof a.every)return a.every(b,m);if(ia(a)||la(a))return Bb(a,b,m);var c;if("function"==typeof a.Rc)c=a.Rc();else if("function"!=typeof a.Ub)if(ia(a)||la(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=tb(a);else c=m;for(var d=Kb(a),e=d.length,f=0;f<e;f++)if(!b.call(m,d[f],c&&c[f],a))return q;return n};var Mb="StopIteration"in da?da.StopIteration:Error("StopIteration");function Nb(){}Nb.prototype.next=function(){i(Mb)};Nb.prototype.uc=function(){return this};function Ob(a){if(a instanceof Nb)return a;if("function"==typeof a.uc)return a.uc(q);if(ia(a)){var b=0,c=new Nb;c.next=function(){for(;;){b>=a.length&&i(Mb);if(b in a)return a[b++];b++}};return c}i(Error("Not implemented"))}
function Pb(a,b){if(ia(a))try{yb(a,b,m)}catch(c){c!==Mb&&i(c)}else{a=Ob(a);try{for(;;)b.call(m,a.next(),m,a)}catch(d){d!==Mb&&i(d)}}};function Qb(a,b){this.B={};this.s=[];var c=arguments.length;if(1<c){c%2&&i(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.se(a)}v=Qb.prototype;v.H=0;v.cd=0;v.ma=s("H");v.Ub=function(){Rb(this);for(var a=[],b=0;b<this.s.length;b++)a.push(this.B[this.s[b]]);return a};v.Rc=function(){Rb(this);return this.s.concat()};v.xe=function(a){for(var b=0;b<this.s.length;b++){var c=this.s[b];if(Sb(this.B,c)&&this.B[c]==a)return n}return q};
v.Nc=function(a,b){if(this===a)return n;if(this.H!=a.ma())return q;var c=b||Tb;Rb(this);for(var d,e=0;d=this.s[e];e++)if(!c(this.get(d),a.get(d)))return q;return n};function Tb(a,b){return a===b}v.clear=function(){this.B={};this.cd=this.H=this.s.length=0};v.remove=function(a){return Sb(this.B,a)?(delete this.B[a],this.H--,this.cd++,this.s.length>2*this.H&&Rb(this),n):q};
function Rb(a){if(a.H!=a.s.length){for(var b=0,c=0;b<a.s.length;){var d=a.s[b];Sb(a.B,d)&&(a.s[c++]=d);b++}a.s.length=c}if(a.H!=a.s.length){for(var e={},c=b=0;b<a.s.length;)d=a.s[b],Sb(e,d)||(a.s[c++]=d,e[d]=1),b++;a.s.length=c}}v.get=function(a,b){return Sb(this.B,a)?this.B[a]:b};v.set=function(a,b){Sb(this.B,a)||(this.H++,this.s.push(a),this.cd++);this.B[a]=b};v.se=function(a){var b;a instanceof Qb?(b=a.Rc(),a=a.Ub()):(b=tb(a),a=sb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};v.f=function(){return new Qb(this)};
v.uc=function(a){Rb(this);var b=0,c=this.s,d=this.B,e=this.cd,f=this,h=new Nb;h.next=function(){for(;;){e!=f.cd&&i(Error("The map has changed since the iterator was created"));b>=c.length&&i(Mb);var g=c[b++];return a?g:d[g]}};return h};function Sb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ub(a){this.B=new Qb;a&&this.se(a)}function Vb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+oa(a):b.substr(0,1)+a}v=Ub.prototype;v.ma=function(){return this.B.ma()};v.add=function(a){this.B.set(Vb(a),a)};v.se=function(a){for(var a=Kb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};v.Qd=function(a){for(var a=Kb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};v.remove=function(a){return this.B.remove(Vb(a))};v.clear=function(){this.B.clear()};
v.contains=function(a){a=Vb(a);return Sb(this.B.B,a)};v.Zf=function(a){for(var b=new Ub,a=Kb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};v.Ub=function(){return this.B.Ub()};v.f=function(){return new Ub(this)};v.Nc=function(a){return this.ma()==Jb(a)&&Wb(this,a)};
function Wb(a,b){var c=Jb(b);if(a.ma()>c)return q;!(b instanceof Ub)&&5<c&&(b=new Ub(b));return Lb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.xe)a=b.xe(a);else if(ia(b)||la(b))a=0<=xb(b,a);else a:{for(var c in b)if(b[c]==a){a=n;break a}a=q}return a})}v.uc=function(){return this.B.uc(q)};function Xb(){}Xb.prototype.Nf=q;Xb.prototype.Ea=function(){this.Nf||(this.Nf=n,this.I())};Xb.prototype.I=function(){this.Wg&&Yb.apply(p,this.Wg)};function Zb(a){a&&"function"==typeof a.Ea&&a.Ea()}function Yb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ia(d)?Yb.apply(p,d):Zb(d)}};function $b(a,b){this.cg=b;this.Qc=[];a>this.cg&&i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Qc.push(this.zd())}B($b,Xb);v=$b.prototype;v.Jf=p;v.Mf=p;function ac(a,b){a.Qc.length<a.cg?a.Qc.push(b):a.Be(b)}v.zd=function(){return this.Jf?this.Jf():{}};v.Be=function(a){if(this.Mf)this.Mf(a);else if(na(a))if(ma(a.Ea))a.Ea();else for(var b in a)delete a[b]};v.I=function(){$b.h.I.call(this);for(var a=this.Qc;a.length;)this.Be(a.pop());delete this.Qc};function bc(){this.Oc=[];this.Xe=new Qb;this.Bg=this.Cg=this.Dg=this.yg=0;this.ad=new Qb;this.Gf=this.Ag=0;this.Re=1;this.Ce=new $b(0,4E3);this.Ce.zd=function(){return new cc};this.zg=new $b(0,50);this.zg.zd=function(){return new dc};var a=this;this.Ge=new $b(0,2E3);this.Ge.zd=function(){return""+a.Re++};this.Ge.Be=ba()}function dc(){this.kf=this.time=this.count=0}
dc.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.kf&&a.push(" [VarAlloc = ",this.kf,"]");return a.join("")};function cc(){}function ec(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(fc(a.Of-c));e.push(" ",gc(a.Of-b));0==a.De?e.push(" Start        "):1==a.De?(e.push(" Done "),e.push(fc(a.yj-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.xi&&e.push("[VarAlloc ",a.xi,"] ");return e.join("")}
cc.prototype.toString=function(){return this.type==p?this.Vg:"["+this.type+"] "+this.Vg};bc.prototype.reset=function(){for(var a=0;a<this.Oc.length;a++){var b=this.Ce.id;b&&ac(this.Ge,b);ac(this.Ce,this.Oc[a])}this.Oc.length=0;this.Xe.clear();this.yg=ya();this.Gf=this.Ag=this.Bg=this.Cg=this.Dg=0;b=this.ad.Rc();for(a=0;a<b.length;a++){var c=this.ad.get(b[a]);c.count=0;c.time=0;c.kf=0;ac(this.zg,c)}this.ad.clear()};
bc.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Oc.length;d++){var e=this.Oc[d];1==e.De&&c.pop();a.push(" ",ec(e,this.yg,b,c.join("")));b=e.Of;a.push("\n");0==e.De&&c.push("|  ")}if(0!=this.Xe.ma()){var f=ya();a.push(" Unstopped timers:\n");Pb(this.Xe,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",gc(b.startTime),")\n")})}b=this.ad.Rc();for(d=0;d<b.length;d++)c=this.ad.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Ag,"\n","Total comments created ",
this.Gf,"\n","Overhead start: ",this.Dg," ms\n","Overhead end: ",this.Cg," ms\n","Overhead comment: ",this.Bg," ms\n");return a.join("")};function fc(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function gc(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new bc;function hc(){}var ic=0;v=hc.prototype;v.key=0;v.rc=q;v.te=q;v.ca=function(a,b,c,d,e,f){ma(a)?this.$f=n:a&&a.handleEvent&&ma(a.handleEvent)?this.$f=q:i(Error("Invalid listener argument"));this.Tc=a;this.ug=b;this.src=c;this.type=d;this.capture=!!e;this.Ee=f;this.te=q;this.key=++ic;this.rc=q};v.handleEvent=function(a){return this.$f?this.Tc.call(this.Ee||this.src,a):this.Tc.handleEvent.call(this.Tc,a)};!G||qb(9);var jc=!G||qb(9),kc=G&&!ob("8");!Ya||ob("528");Xa&&ob("1.9b")||G&&ob("8")||Wa&&ob("9.5")||Ya&&ob("528");!Xa||ob("8");function lc(a,b){this.type=a;this.currentTarget=this.target=b}B(lc,Xb);v=lc.prototype;v.I=function(){delete this.type;delete this.target;delete this.currentTarget};v.Yb=q;v.Zc=n;v.stopPropagation=function(){this.Yb=n};v.preventDefault=function(){this.Zc=q};function mc(a){mc[" "](a);return a}mc[" "]=ea;function nc(a,b){a&&this.ca(a,b)}B(nc,lc);v=nc.prototype;v.target=p;v.relatedTarget=p;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=q;v.altKey=q;v.shiftKey=q;v.metaKey=q;v.Na=p;
v.ca=function(a,b){var c=this.type=a.type;lc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Xa){var e;a:{try{mc(d.nodeName);e=n;break a}catch(f){}e=q}e||(d=p)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Ya||a.offsetX!==m?a.offsetX:a.layerX;this.offsetY=Ya||a.offsetY!==m?a.offsetY:a.layerY;this.clientX=a.clientX!==m?a.clientX:a.pageX;this.clientY=a.clientY!==m?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Na=a;delete this.Zc;delete this.Yb};v.stopPropagation=function(){nc.h.stopPropagation.call(this);this.Na.stopPropagation?this.Na.stopPropagation():this.Na.cancelBubble=n};
v.preventDefault=function(){nc.h.preventDefault.call(this);var a=this.Na;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};v.hh=s("Na");v.I=function(){nc.h.I.call(this);this.relatedTarget=this.currentTarget=this.target=this.Na=p};var oc={},pc={},qc={},rc={};
function H(a,b,c,d,e){if(b){if(ha(b)){for(var f=0;f<b.length;f++)H(a,b[f],c,d,e);return p}var d=!!d,h=pc;b in h||(h[b]={H:0,va:0});h=h[b];d in h||(h[d]={H:0,va:0},h.H++);var h=h[d],g=oa(a),j;h.va++;if(h[g]){j=h[g];for(f=0;f<j.length;f++)if(h=j[f],h.Tc==c&&h.Ee==e){if(h.rc)break;return j[f].key}}else j=h[g]=[],h.H++;f=sc();f.src=a;h=new hc;h.ca(c,f,a,b,d,e);c=h.key;f.key=c;j.push(h);oc[c]=h;qc[g]||(qc[g]=[]);qc[g].push(h);a.addEventListener?(a==da||!a.Kf)&&a.addEventListener(b,f,d):a.attachEvent(b in
rc?rc[b]:rc[b]="on"+b,f);return c}i(Error("Invalid event type"))}function sc(){var a=tc,b=jc?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function uc(a,b,c,d,e){if(ha(b))for(var f=0;f<b.length;f++)uc(a,b[f],c,d,e);else a=H(a,b,c,d,e),oc[a].te=n}
function vc(a,b,c,d,e){if(ha(b))for(var f=0;f<b.length;f++)vc(a,b[f],c,d,e);else{d=!!d;a:{f=pc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=oa(a),f[a]))){a=f[a];break a}a=p}if(a)for(f=0;f<a.length;f++)if(a[f].Tc==c&&a[f].capture==d&&a[f].Ee==e){wc(a[f].key);break}}}
function wc(a){if(!oc[a])return q;var b=oc[a];if(b.rc)return q;var c=b.src,d=b.type,e=b.ug,f=b.capture;c.removeEventListener?(c==da||!c.Kf)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in rc?rc[d]:rc[d]="on"+d,e);c=oa(c);e=pc[d][f][c];if(qc[c]){var h=qc[c];Cb(h,b);0==h.length&&delete qc[c]}b.rc=n;e.gg=n;xc(d,f,c,e);delete oc[a];return n}
function xc(a,b,c,d){if(!d.Id&&d.gg){for(var e=0,f=0;e<d.length;e++)d[e].rc?d[e].ug.src=p:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.gg=q;0==f&&(delete pc[a][b][c],pc[a][b].H--,0==pc[a][b].H&&(delete pc[a][b],pc[a].H--),0==pc[a].H&&delete pc[a])}}function yc(a){var b,c=0,d=b==p;b=!!b;if(a==p)rb(qc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)wc(f.key),c++}});else if(a=oa(a),qc[a])for(var a=qc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)wc(f.key),c++}}
function zc(a){var b=Dc,a=oa(a),c=qc[a];if(c){var d=ga(b),e=ga(m);return d&&e?(c=pc[b],!!c&&!!c[m]&&a in c[m]):!d&&!e?n:Ab(c,function(a){return d&&a.type==b||e&&a.capture==m})}return q}function Ec(a,b,c,d,e){var f=1,b=oa(b);if(a[b]){a.va--;a=a[b];a.Id?a.Id++:a.Id=1;try{for(var h=a.length,g=0;g<h;g++){var j=a[g];j&&!j.rc&&(f&=Fc(j,e)!==q)}}finally{a.Id--,xc(c,d,b,a)}}return Boolean(f)}function Fc(a,b){var c=a.handleEvent(b);a.te&&wc(a.key);return c}
function tc(a,b){if(!oc[a])return n;var c=oc[a],d=c.type,e=pc;if(!(d in e))return n;var e=e[d],f,h;if(!jc){var g;if(!(g=b))a:{g=["window","event"];for(var j=da;f=g.shift();)if(x(j[f]))j=j[f];else{g=p;break a}g=j}f=g;g=n in e;j=q in e;if(g){if(0>f.keyCode||f.returnValue!=m)return n;a:{var k=q;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(o){k=n}if(k||f.returnValue==m)f.returnValue=n}}k=new nc;k.ca(f,this);f=n;try{if(g){for(var l=[],t=k.currentTarget;t;t=t.parentNode)l.push(t);h=e[n];h.va=h.H;for(var r=
l.length-1;!k.Yb&&0<=r&&h.va;r--)k.currentTarget=l[r],f&=Ec(h,l[r],d,n,k);if(j){h=e[q];h.va=h.H;for(r=0;!k.Yb&&r<l.length&&h.va;r++)k.currentTarget=l[r],f&=Ec(h,l[r],d,q,k)}}else f=Fc(c,k)}finally{l&&(l.length=0),k.Ea()}return f}d=new nc(b,this);try{f=Fc(c,d)}finally{d.Ea()}return f}var Gc=0;function Hc(a){return a+"_"+Gc++};function Ic(){}B(Ic,Xb);v=Ic.prototype;v.Kf=n;v.Kd=p;v.bf=ca("Kd");v.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};v.removeEventListener=function(a,b,c,d){vc(this,a,b,c,d)};
v.dispatchEvent=function(a){var b=a.type||a,c=pc;if(b in c){if(la(a))a=new lc(a,this);else if(a instanceof lc)a.target=a.target||this;else{var d=a,a=new lc(b,this);vb(a,d)}var d=1,e,c=c[b],b=n in c,f;if(b){e=[];for(f=this;f;f=f.Kd)e.push(f);f=c[n];f.va=f.H;for(var h=e.length-1;!a.Yb&&0<=h&&f.va;h--)a.currentTarget=e[h],d&=Ec(f,e[h],a.type,n,a)&&a.Zc!=q}if(q in c)if(f=c[q],f.va=f.H,b)for(h=0;!a.Yb&&h<e.length&&f.va;h++)a.currentTarget=e[h],d&=Ec(f,e[h],a.type,q,a)&&a.Zc!=q;else for(e=this;!a.Yb&&e&&
f.va;e=e.Kd)a.currentTarget=e,d&=Ec(f,e,a.type,q,a)&&a.Zc!=q;a=Boolean(d)}else a=n;return a};v.I=function(){Ic.h.I.call(this);yc(this);this.Kd=p};function I(){this.e="base";this.za=window["X.counter"].Bi();this.c=q}B(I,Ic);I.prototype.__defineGetter__("classname",s("e"));I.prototype.__defineGetter__("id",s("za"));A("X.base",I);function Jc(a,b){this.pa=new Ba(a);this.U=new Ba(b)}Jc.prototype={f:function(){return new Jc(this.pa.f(),this.U.f())},Tb:function(){this.U=this.U.Qe()},th:function(a,b){return new Jc(this.pa.ag(a.pa,b),this.U.ag(a.U,b))}};function Kc(a,b){this.U=a;this.dd=b}Kc.prototype={f:function(){return new Kc(this.U.f(),this.dd)},Tb:function(){this.U=this.U.Qe();this.dd=-this.dd}};function Lc(a,b){this.bb=a;this.Ud=b;var c=a[0].pa,d=a[2].pa,d=a[1].pa.Vc(c).ze(d.Vc(c)).bd();this.oa=new Kc(d,d.mc(c))}
Lc.prototype={f:function(){var a=this.bb.map(function(a){return a.f()});return new Lc(a,this.Ud)},Tb:function(){this.bb.reverse().map(function(a){a.Tb()});this.oa.Tb()},xg:function(a,b,c,d,e){for(var f=0,h=[],g=0;g<this.bb.length;g++){var j=a.U.mc(this.bb[g].pa)-a.dd,j=-1.0E-5>j?2:1.0E-5<j?1:0,f=f|j;h.push(j)}switch(f){case 0:(0<a.U.mc(this.oa.U)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(g=0;g<this.bb.length;g++){var k=(g+1)%this.bb.length,j=h[g],
o=h[k],f=this.bb[g],k=this.bb[k];2!=j&&b.push(f);1!=j&&c.push(2!=j?f.f():f);3==(j|o)&&(j=(a.dd-a.U.mc(f.pa))/a.U.mc(k.pa.Vc(f.pa)),j=f.th(k,j),b.push(j),c.push(j.f()))}3<=b.length&&d.push(new Lc(b,this.Ud));3<=c.length&&e.push(new Lc(c,this.Ud))}}};function Mc(a){this.X=this.Y=this.oa=p;this.v=[];a&&this.jc(a)}
Mc.prototype={f:function(){var a=new Mc;a.ii(this.oa&&this.oa.f());a.hi(this.Y&&this.Y.f());a.gi(this.X&&this.X.f());a.Sd(this.v.map(function(a){return a.f()}));return a},R:function(){for(var a=0;a<this.v.length;a++)this.v[a].Tb();this.oa.Tb();this.Y&&this.Y.R();this.X&&this.X.R();a=this.Y;this.Y=this.X;this.X=a},we:function(a){if(!this.oa)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].xg(this.oa,b,c,b,c);this.Y&&(b=this.Y.we(b));c=this.X?this.X.we(c):[];return b.concat(c)},Da:function(a){this.v=
a.we(this.v);this.Y&&this.Y.Da(a);this.X&&this.X.Da(a)},ub:function(){var a=this.v.slice();this.Y&&(a=a.concat(this.Y.ub()));this.X&&(a=a.concat(this.X.ub()));return a},jc:function(a){if(a.length){this.oa||(this.oa=a[0].oa.f());for(var b=[],c=[],d=0;d<a.length;d++)a[d].xg(this.oa,this.v,this.v,b,c);b.length&&(this.Y||(this.Y=new Mc),this.Y.jc(b));c.length&&(this.X||(this.X=new Mc),this.X.jc(c))}},ii:ca("oa"),hi:ca("Y"),gi:ca("X"),Sd:ca("v")};function Nc(){this.v=[]}function Oc(a){var b=new Nc;b.Sd(a);return b}
Nc.prototype={f:function(){var a=new Nc;a.Sd(this.v.map(function(a){return a.f()}));return a},gf:function(a){var b=new Mc(this.f().v),a=new Mc(a.f().v);b.Da(a);a.Da(b);a.R();a.Da(b);a.R();b.jc(a.ub());return Oc(b.ub())},ab:function(a){var b=new Mc(this.f().v),a=new Mc(a.f().v);b.R();b.Da(a);a.Da(b);a.R();a.Da(b);a.R();b.jc(a.ub());b.R();return Oc(b.ub())},Ie:function(a){var b=new Mc(this.f().v),a=new Mc(a.f().v);b.R();a.Da(b);a.R();b.Da(a);a.Da(b);b.jc(a.ub());b.R();return Oc(b.ub())},inverse:function(){var a=
this.f();a.v.map(function(a){a.Tb()});return a},Sd:ca("v")};function Pc(){I.call(this);this.e="indexer";this.re=[];this.ea={}}B(Pc,I);Pc.prototype.add=function(a){x(a)||i(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.ea||(this.ea[b]=this.re.length,this.re.push(a));return this.ea[b]};Pc.prototype.unique=s("re");function Qc(a){I.call(this);this.e="file";this.ke=a;this.c=n}B(Qc,I);function Rc(){this.hd=this.t=p}Rc.prototype.__defineSetter__("file",function(a){this.t=x(a)?new Qc(a):p});Rc.prototype.__defineGetter__("file",function(){return!this.t?"":this.t.ke});Rc.prototype.__defineGetter__("filedata",s("hd"));Rc.prototype.__defineSetter__("filedata",ca("hd"));function Sc(){I.call(this);this.e="colortable";this.ea=new Qb;Da(this,new Rc)}B(Sc,I);Sc.prototype.add=function(a,b,c,d,e,f){(!z(a)||!z(c)||!z(d)||!z(e)||!z(f))&&i(Error("Invalid color table entry."));this.ea.set(a,[b,c,d,e,f]);this.c=n};function Tc(a,b,c){this.x=ga(a)?a:0;this.y=ga(b)?b:0;this.b=ga(c)?c:0}Tc.prototype.f=function(){return new Tc(this.x,this.y,this.b)};Tc.prototype.ff=function(){return[this.x,this.y,this.b]};function J(a,b,c){this.x=a;this.y=b;this.b=c}B(J,Tc);v=J.prototype;v.f=function(){return new J(this.x,this.y,this.b)};v.Wb=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};v.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};v.R=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};v.normalize=function(){return this.scale(1/this.Wb())};v.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
v.ab=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};v.Nc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Uc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Vc(a,b){return new J(a.x+b.x,a.y+b.y,a.b+b.b)}function Wc(a,b){return new J(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Xc(a,b){this.x=ga(a)?a:0;this.y=ga(b)?b:0}Xc.prototype.f=function(){return new Xc(this.x,this.y)};function Zc(a,b){return new Xc(a.x-b.x,a.y-b.y)};function $c(a,b){this.x=a;this.y=b}B($c,Xc);v=$c.prototype;v.f=function(){return new $c(this.x,this.y)};v.Wb=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};v.scale=function(a){this.x*=a;this.y*=a;return this};v.R=function(){this.x=-this.x;this.y=-this.y;return this};v.normalize=function(){return this.scale(1/this.Wb())};v.add=function(a){this.x+=a.x;this.y+=a.y;return this};v.ab=function(a){this.x-=a.x;this.y-=a.y;return this};
v.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};v.Nc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ad(a,b){this.width=a;this.height=b}function bd(a,b){return a==b?n:!a||!b?q:a.width==b.width&&a.height==b.height}ad.prototype.f=function(){return new ad(this.width,this.height)};ad.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};ad.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};ad.prototype.scale=function(a){this.width*=a;this.height*=a;return this};function cd(a,b){if(a instanceof cd)this.L=a.ff();else{var c;if(c=ia(a))a:{for(var d=c=0;d<a.length;d++){if(!ia(a[d])||0<c&&a[d].length!=c){c=q;break a}for(var e=0;e<a[d].length;e++)if(!z(a[d][e])){c=q;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.L=Hb(a):a instanceof ad?this.L=dd(a.height,a.width):z(a)&&z(b)&&0<a&&0<b?this.L=dd(a,b):i(Error("Invalid argument(s) for Matrix contructor"))}this.z=new ad(this.L[0].length,this.L.length)}
function hd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new cd(b)}function id(a,b,c){for(var d=0;d<a.na().height;d++)for(var e=0;e<a.na().width;e++)b.call(c,a.L[d][e],d,e,a)}function jd(a,b){var c=new cd(a.na());id(a,function(d,e,f){c.L[e][f]=b.call(m,d,e,f,a)});return c}function dd(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}v=cd.prototype;
v.add=function(a){bd(this.z,a.na())||i(Error("Matrix summation is only supported on arrays of equal size"));return jd(this,function(b,c,d){return b+a.L[c][d]})};v.Nc=function(a,b){if(this.z.width!=a.z.width||this.z.height!=a.z.height)return q;for(var c=b||0,d=0;d<this.z.height;d++)for(var e=0;e<this.z.width;e++)if(!(Math.abs(this.L[d][e]-a.L[d][e])<=(c||1.0E-6)))return q;return n};v.na=s("z");v.N=function(a,b){return!(0<=a&&a<this.z.height&&0<=b&&b<this.z.width)?p:this.L[a][b]};
function K(a,b,c,d){0<=b&&b<a.z.height&&0<=c&&c<a.z.width||i(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.z.height+","+a.z.width+")"));a.L[b][c]=d}v.multiply=function(a){if(a instanceof cd)return this.z.width!=a.na().height&&i(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),kd(this,a);if(z(a))return ld(this,a);i(Error("A matrix can only be multiplied by a number or another matrix."))};
v.ab=function(a){bd(this.z,a.na())||i(Error("Matrix subtraction is only supported on arrays of equal size."));return jd(this,function(b,c,d){return b-a.L[c][d]})};v.ff=s("L");function kd(a,b){var c=new cd(a.z.height,b.na().width);id(c,function(a,e,f){for(var h=a=0;h<this.z.width;h++)a+=this.N(e,h)*b.N(h,f);K(c,e,f,a)},a);return c}function ld(a,b){return jd(a,function(a){return a*b})};function L(a,b){cd.call(this,a,b);this.e="matrix"}B(L,cd);function md(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new L(b)}v=L.prototype;v.M=function(){var a=[],b=this.na();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.N(c,d));return a};
v.translate=function(a){this.z.width!=this.z.height&&i(Error("Can not translate non-square matrix."));var b=this.na(),c=hd(b.height);a instanceof $c&&3==b.height?(K(c,0,2,a.x),K(c,1,2,a.y)):a instanceof J&&4==b.height?(K(c,0,3,a.x),K(c,1,3,a.y),K(c,2,3,a.b)):i(Error("Translation failed."));return new L(this.multiply(c))};
v.rotate=function(a,b){(4!=this.na().height||this.z.width!=this.z.height)&&i(Error("Only 4x4 matrices can be rotated."));(!x(b)||!(b instanceof J))&&i(Error("Invalid axis vector."));z(a)||i(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=hd(4);K(f,0,0,d+c.x*c.x*(1-d));K(f,0,1,c.x*c.y*(1-d)-c.b*e);K(f,0,2,c.x*c.b*(1-d)+c.y*e);K(f,1,0,c.y*c.x*(1-d)+c.b*e);K(f,1,1,d+c.y*c.y*(1-d));K(f,1,2,c.y*c.b*(1-d)-c.x*e);K(f,2,0,c.b*c.x*(1-d)-c.y*e);K(f,2,1,c.b*c.y*(1-d)+c.x*e);K(f,2,
2,d+c.b*c.b*(1-d));return new L(this.multiply(f))};v.Ga=function(a){var b=this.na(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof J&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):i(Error("Multiplication by vector failed."));a=this.multiply(new cd(c));return new J(parseFloat(a.N(0,0)),parseFloat(a.N(1,0)),parseFloat(a.N(2,0)))};v.vi=function(a,b){var c=this.L[a];this.L[a]=this.L[b];this.L[b]=c};
v.ui=function(a,b){for(var c=this.na(),d=0,d=0;d<c.height;d++){var e=this.N(d,a);e||(e=0);var f=this.N(d,b);f||(f=0);K(this,d,a,f);K(this,d,b,e)}};A("X.matrix",L);A("X.matrix.createIdentityMatrix",md);A("X.matrix.prototype.flatten",L.prototype.M);A("X.matrix.prototype.translate",L.prototype.translate);A("X.matrix.prototype.rotate",L.prototype.rotate);A("X.matrix.prototype.toArray",L.prototype.ff);A("X.matrix.prototype.getValueAt",L.prototype.N);A("X.matrix.prototype.multiplyByVector",L.prototype.Ga);
A("X.matrix.prototype.swapRows",L.prototype.vi);A("X.matrix.prototype.swapCols",L.prototype.ui);function nd(){I.call(this);this.e="transform";this.l=md(4);this.Ra=new Float32Array(this.l.M())}B(nd,I);nd.prototype.__defineGetter__("matrix",s("l"));nd.prototype.__defineSetter__("matrix",function(a){(!x(a)||!(a instanceof L))&&i(Error("Invalid matrix."));this.l=a;this.Ra=new Float32Array(this.l.M());this.c=n});v=nd.prototype;v.bi=function(a){(!z(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.l=this.l.rotate(a*Math.PI/180,new J(0,1,0));this.Ra=new Float32Array(this.l.M());this.c=n};
v.ci=function(a){(!z(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.l=this.l.rotate(a*Math.PI/180,new J(1,0,0));this.Ra=new Float32Array(this.l.M());this.c=n};v.di=function(a){(!z(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.l=this.l.rotate(a*Math.PI/180,new J(0,0,1));this.Ra=new Float32Array(this.l.M());this.c=n};v.yi=function(a){z(a)||i(Error("Invalid distance."));this.l=this.l.translate(new J(a,0,0));this.Ra=new Float32Array(this.l.M());this.c=n};
v.zi=function(a){z(a)||i(Error("Invalid distance."));this.l=this.l.translate(new J(0,a,0));this.Ra=new Float32Array(this.l.M());this.c=n};v.Ai=function(a){z(a)||i(Error("Invalid distance."));this.l=this.l.translate(new J(0,0,a));this.Ra=new Float32Array(this.l.M());this.c=n};function od(a,b,c){var d=a.l.N(b,c);d||(d=0);K(a.l,b,c,-1*d);a.Ra=new Float32Array(a.l.M());a.c=n}v.dh=function(){od(this,0,0)};v.eh=function(){od(this,1,1)};v.fh=function(){od(this,2,2)};A("X.transform",nd);
A("X.transform.prototype.rotateX",nd.prototype.bi);A("X.transform.prototype.rotateY",nd.prototype.ci);A("X.transform.prototype.rotateZ",nd.prototype.di);A("X.transform.prototype.translateX",nd.prototype.yi);A("X.transform.prototype.translateY",nd.prototype.zi);A("X.transform.prototype.translateZ",nd.prototype.Ai);A("X.transform.prototype.flipX",nd.prototype.dh);A("X.transform.prototype.flipY",nd.prototype.eh);A("X.transform.prototype.flipZ",nd.prototype.fh);function pd(){I.call(this);this.e="texture";this.qb=this.qf=this.t=p;this.nd=this.od=0;Da(this,new Rc)}B(pd,I);A("X.texture",pd);function M(a){I.call(this);this.e="triplets";this.Ib=Infinity;this.Fb=-Infinity;this.Jb=Infinity;this.Gb=-Infinity;this.Kb=Infinity;this.Hb=-Infinity;this.ed=[0,0,0];this.W=[];x(a)&&(this.W=a.W.slice(),this.Ib=a.Ib,this.Fb=a.Fb,this.Jb=a.Jb,this.Gb=a.Gb,this.Kb=a.Kb,this.Hb=a.Hb,this.ed=a.ed.slice())}B(M,I);
M.prototype.add=function(a,b,c){(!z(a)||!z(b)||!z(c))&&i(Error("Invalid triplet."));this.Ib=Math.min(this.Ib,a);this.Fb=Math.max(this.Fb,a);this.Jb=Math.min(this.Jb,b);this.Gb=Math.max(this.Gb,b);this.Kb=Math.min(this.Kb,c);this.Hb=Math.max(this.Hb,c);this.ed=[(this.Ib+this.Fb)/2,(this.Jb+this.Gb)/2,(this.Kb+this.Hb)/2];this.c=n;return this.W.push(a,b,c)/3};
M.prototype.get=function(a){(!z(a)||0>a||3*a>this.W.length||a==this.W.length/3)&&i(Error("Invalid id."));a*=3;return[this.W[a],this.W[a+1],this.W[a+2]]};M.prototype.remove=function(a){(!z(a)||0>a||3*a>this.W.length||a==this.count)&&i(Error("Invalid id."));this.W.splice(a,3);this.c=n};M.prototype.clear=function(){this.W=[];this.c=n};M.prototype.__defineGetter__("count",function(){return this.W.length/3});M.prototype.__defineGetter__("length",function(){return this.W.length});A("X.triplets",M);
A("X.triplets.prototype.add",M.prototype.add);A("X.triplets.prototype.get",M.prototype.get);A("X.triplets.prototype.remove",M.prototype.remove);A("X.triplets.prototype.clear",M.prototype.clear);function qd(){this.la=rd;this.Ob=new nd;this.zb=[1,1,1];this.j=new M;this.k=new M;this.ya=new M;this.Nb=this.ba=p;this.Gc=[];this.Ba=n;this.fc=this.Hc=1;this.bc=p;this.zc=q;this.Q=1;this.P=0}var rd="TRIANGLES";qd.prototype.__defineGetter__("texture",function(){this.ba||(this.ba=new pd);return this.ba});qd.prototype.__defineGetter__("transform",s("Ob"));qd.prototype.__defineGetter__("points",s("j"));qd.prototype.__defineGetter__("normals",s("k"));qd.prototype.__defineGetter__("colors",s("ya"));
qd.prototype.__defineGetter__("color",s("zb"));qd.prototype.__defineSetter__("color",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid color."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.zb=a;this.c=n});qd.prototype.__defineGetter__("opacity",s("Q"));qd.prototype.__defineSetter__("opacity",function(a){(!z(a)||1<a||0>a)&&i(Error("Invalid opacity."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.Q=a;this.c=n});
qd.prototype.__defineGetter__("caption",s("bc"));qd.prototype.__defineSetter__("caption",function(a){this.bc=a;this.c=n});qd.prototype.__defineGetter__("visible",s("Ba"));qd.prototype.__defineSetter__("visible",function(a){for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Ba=a;this.c=n});qd.prototype.__defineGetter__("pointsize",s("Hc"));qd.prototype.__defineSetter__("pointsize",function(a){z(a)||i(Error("Invalid point size."));this.Hc=a;this.c=n});
qd.prototype.__defineGetter__("magicmode",s("zc"));qd.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&i(Error("Invalid magic mode setting."));this.zc=a;this.c=n});qd.prototype.__defineGetter__("linewidth",s("fc"));qd.prototype.__defineSetter__("linewidth",function(a){z(a)||i(Error("Invalid line width."));this.fc=a;this.c=n});function sd(){this.Ka=Infinity;this.da=this.Aa=-Infinity;this.fa=Infinity;this.nb=[0,0,0];this.lb=[1,1,1]}sd.prototype.__defineGetter__("lowerThreshold",s("da"));sd.prototype.__defineSetter__("lowerThreshold",function(a){a>=this.Ka&&a<=this.Aa&&(this.da=a)});sd.prototype.__defineGetter__("upperThreshold",s("fa"));sd.prototype.__defineSetter__("upperThreshold",function(a){a>=this.Ka&&a<=this.Aa&&(this.fa=a)});sd.prototype.__defineGetter__("min",s("Ka"));sd.prototype.__defineGetter__("max",s("Aa"));
sd.prototype.__defineGetter__("minColor",s("nb"));sd.prototype.__defineSetter__("minColor",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid min. color."));this.nb=a});sd.prototype.__defineGetter__("maxColor",s("lb"));sd.prototype.__defineSetter__("maxColor",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid max. color."));this.lb=a});function td(){I.call(this);this.e="scalars";this.vc=this.r=p;this.Cf=n;Da(this,new Rc);Da(this,new sd);this.nb=[0,1,0];this.lb=[1,0,0]}B(td,I);td.prototype.__defineGetter__("array",s("r"));td.prototype.__defineSetter__("array",function(a){this.vc=this.r=a;this.c=n});A("X.scalars",td);function S(a){I.call(this);this.e="object";this.d=[];this.q=this.S=p;Da(this,new qd);x(a)&&this.Rb(a)}B(S,I);
S.prototype.Rb=function(a){this.la=a.la;this.Ob=new nd;this.Ob.l=new L(a.Ob.l.L);this.zb=a.zb.slice();this.j=new M(a.j);this.k=new M(a.k);this.ya=new M(a.ya);this.ba=a.ba;this.Nb=a.Nb;a.t&&(this.t=new Qc((new String(a.t.ke)).toString()));this.Q=a.Q;this.d.length=0;var b=a.d;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.d.push(new Ca[b[d].e](b[d]));this.Ba=a.Ba;this.Hc=a.Hc;this.fc=a.fc;a.bc&&(this.bc=(new String(a.bc)).toString());this.zc=a.zc;this.Gc=a.Gc.slice();this.c=n};
S.prototype.__defineGetter__("colortable",function(){this.S||(this.S=new Sc);return this.S});S.prototype.__defineGetter__("scalars",function(){this.q||(this.q=new td);return this.q});S.prototype.__defineGetter__("children",s("d"));S.prototype.C=function(){var a=new ud;a.V=this;this.dispatchEvent(a)};function vd(a,b){(!x(a)||!x(b)||!(a instanceof S)||!(b instanceof S))&&i(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.Q?-1:1==b.Q?1:x(a.P)&&x(b.P)&&a.P>b.P?-1:1}
A("X.object",S);A("X.object.prototype.modified",S.prototype.C);function wd(){}function xd(a){for(var b=a.j.count,c=[],d=0,d=0;d<b;d+=3){var e=a.j.get(d),f=a.j.get(d+1),h=a.j.get(d+2),g=a.k.get(d),j=a.k.get(d+1),k=a.k.get(d+2),o=a.zb;0<a.ya.length&&(o=a.ya.get(d));var l=[];l.push(new Jc(e,g));l.push(new Jc(f,j));l.push(new Jc(h,k));c.push(new Lc(l,o))}return Oc(c)}
function yd(a,b){(!x(b)||!(b instanceof Nc))&&i(Error("Invalid CSG object."));a.j.clear();a.k.clear();a.ya.clear();var c=new Pc,d=[];zb(b.v,function(a){for(var b=[],h=a.Ud,b=zb(a.bb,function(a){a.color=h;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Mg=zb(c.unique(),function(a){return[a.pa.x(),a.pa.y(),a.pa.b()]});a.Lg=zb(c.unique(),function(a){return[a.U.x(),a.U.y(),a.U.b()]});a.Kg=zb(c.unique(),function(a){return!a.color?p:[a.color[0],a.color[1],a.color[2]]});zb(d,
function(a){var b=a[0],c=a[1],a=a[2],d=this.Mg,j=this.Lg,k=this.Kg;this.j.add(d[b][0],d[b][1],d[b][2]);this.j.add(d[c][0],d[c][1],d[c][2]);this.j.add(d[a][0],d[a][1],d[a][2]);this.k.add(j[b][0],j[b][1],j[b][2]);this.k.add(j[c][0],j[c][1],j[c][2]);this.k.add(j[a][0],j[a][1],j[a][2]);k[b]&&this.ya.add(k[b][0],k[b][1],k[b][2]);k[c]&&this.ya.add(k[c][0],k[c][1],k[c][2]);k[a]&&this.ya.add(k[a][0],k[a][1],k[a][2])}.bind(a));a.la=rd}
wd.prototype.gf=function(a){(!x(a)||!(a instanceof Nc)&&!(a instanceof S))&&i(Error("Invalid object."));var b=a;a instanceof S&&(b=xd(b));a=new S;Da(a,new wd);yd(a,xd(this).gf(b));return a};wd.prototype.ab=function(a){(!x(a)||!(a instanceof Nc)&&!(a instanceof S))&&i(Error("Invalid object."));var b=a;a instanceof S&&(b=xd(b));a=new S;Da(a,new wd);yd(a,xd(this).ab(b));return a};
wd.prototype.Ie=function(a){(!x(a)||!(a instanceof Nc)&&!(a instanceof S))&&i(Error("Invalid object."));var b=a;a instanceof S&&(b=xd(b));a=new S;Da(a,new wd);yd(a,xd(this).Ie(b));return a};wd.prototype.inverse=function(){var a=new S;Da(a,new wd);yd(a,xd(this).inverse());return a};A("X.constructable",wd);A("X.constructable.prototype.intersect",wd.prototype.Ie);A("X.constructable.prototype.inverse",wd.prototype.inverse);A("X.constructable.prototype.subtract",wd.prototype.ab);
A("X.constructable.prototype.union",wd.prototype.gf);function zd(a){lc.call(this,a);this.e="event"}B(zd,lc);var Ad=Hc("pan"),Bd=Hc("rotate"),Cd=Hc("zoom"),Dd=Hc("scroll");Hc("render");var Ed=Hc("resetview"),Dc=Hc("modified"),Fd=Hc("progress"),Gd=Hc("hover"),Hd=Hc("hover_end");function Id(){zd.call(this,Ad);this.P=new $c(0,0)}B(Id,zd);function Jd(){zd.call(this,Bd);this.P=new $c(0,0)}B(Jd,zd);function Kd(){zd.call(this,Cd);this.eb=this.Db=q}B(Kd,zd);function Ld(){zd.call(this,Dd);this.F=q}B(Ld,zd);function Md(){zd.call(this,Gd);this.vd=this.ud=0}
B(Md,zd);function Nd(){zd.call(this,Hd)}B(Nd,zd);function Od(){zd.call(this,Ed)}B(Od,zd);function ud(){zd.call(this,Dc);this.V=new S;this.n=p}B(ud,zd);function Pd(){zd.call(this,Fd);this.Df=0}B(Pd,zd);function Qd(a){x(a)||i(Error("Invalid data."));I.call(this);this.e="parserHelper";this.nf=a;this.cb=0;this.gc=this.Yd=1;this.ic=2;this.hc=this.ne=4;this.yf=p}B(Qd,I);function T(a,b,c){a.yf=b;a.Yd=c}function U(a,b){x(b)||(b=1);var c=a.yf(a.nf,a.cb,b)[0];a.cb+=a.Yd*b;return 1==b?c[0]:c};function V(){I.call(this);this.e="parser"}B(V,I);v=V.prototype;v.parse=function(){i(Error("The function parse() should be overloaded."))};v.Xc=function(a,b){var c=this.o(a,b+2),d=this.o(a,b+3),e=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.o(a,b+1)<<8|this.o(a,b);return 0==c&&-127==e?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,e)};
function Rd(a,b,c){var d=a.o(b,c),e=a.o(b,c+1),f=(d<<1&255|e>>7)-127,a=(e&127)<<16|a.o(b,c+2)<<8|a.o(b,c+3);return 0==a&&-127==f?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,f)}v.ia=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=this.Xc(a,b+4*h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};v.Ye=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=Rd(this,a,b+4*h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};
function Sd(a,b,c){return(a.o(b,c+3)<<24)+(a.o(b,c+2)<<16)+(a.o(b,c+1)<<8)+a.o(b,c)}v.$e=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=Sd(this,a,b+4*h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};function Td(a,b,c){return(a.o(b,c)<<24)+(a.o(b,c+1)<<16)+(a.o(b,c+2)<<8)+a.o(b,c+3)}v.sg=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=Td(this,a,b+4*h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};
v.Nd=function(a,b){return(this.o(a,b+1)<<8)+this.o(a,b)};v.Xb=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=this.Nd(a,b+2*h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};v.rg=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=(this.o(a,b+2*h)<<8)+this.o(a,b+2*h+1);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};v.qg=function(a,b){var c=this.o(a,b);return 127<c?c-256:c};
v.Sh=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=this.qg(a,b+h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};v.o=function(a,b){return a.charCodeAt(b)&255};v.wb=function(a,b,c){var d=[],e=0,f=Infinity,h;for(h=0;h<c;h++){var g=this.o(a,b+h);d[h]=g;e=Math.max(e,g);f=Math.min(f,g)}return[d,e,f]};
function Ud(a,b,c,d){for(var e=c[2],f=c[1],c=c[0],h=a.w!=p,g=f*c,j=Array(e),k=0;k<e;k++){j[k]=Array(f);for(var o=0;o<f;o++)j[k][o]=Array(c)}for(var l=0,k=k=0;k<e;k++){for(var o=b.slice(k*g,(k+1)*g),t=new Uint8Array(4*g),r=0,u=0,w=0,r=0;r<f;r++)for(u=0;u<c;u++){var l=o[w],C=0,E=0,D=0,y=0;a.S?((y=a.S.ea.get(Math.floor(l)))||(y=a.S.ea.get(a.S.ea.ma()-1)),C=255*y[1],E=255*y[2],D=255*y[3],y=255*y[4]):(C=E=D=255*(l/d),y=255);var F=4*w;t[F]=C;t[++F]=E;t[++F]=D;t[++F]=y;j[k][r][u]=l;w++}l=new pd;l.qb=t;l.od=
c;l.nd=f;o=a.Xa.d[k];o.ba=l;h&&(o.w=a.w.Xa.d[k].ba)}for(r=0;r<f;r++){t=new Uint8Array(4*e*c);for(k=w=0;k<e;k++)for(u=0;u<c;u++)l=j[k][r][u],a.S?((y=a.S.ea.get(Math.floor(l)))||(y=a.S.ea.get(a.S.ea.ma()-1)),C=255*y[1],E=255*y[2],D=255*y[3],y=255*y[4]):(C=E=D=255*(l/d),y=255),F=4*w,t[F]=C,t[++F]=E,t[++F]=D,t[++F]=y,w++;l=new pd;l.qb=t;l.od=c;l.nd=e;o=a.Wa.d[r];o.ba=l;h&&(o.w=a.w.Wa.d[r].ba)}for(u=0;u<c;u++){t=new Uint8Array(4*e*f);for(k=w=0;k<e;k++)for(r=0;r<f;r++)l=j[k][r][u],a.S?((y=a.S.ea.get(Math.floor(l)))||
(y=a.S.ea.get(a.S.ea.ma()-1)),C=255*y[1],E=255*y[2],D=255*y[3],y=255*y[4]):(C=E=D=255*(l/d),y=255),F=4*w,t[F]=C,t[++F]=E,t[++F]=D,t[++F]=y,w++;l=new pd;l.qb=t;l.od=f;l.nd=e;o=a.Va.d[u];o.ba=l;h&&(o.w=a.w.Va.d[u].ba)}};function Vd(){V.call(this);this.e="parserLBL"}B(Vd,V);
Vd.prototype.parse=function(a,b,c){for(var d=c.split("\n"),e=d.length,f=Array(e-3),h=0,g=0,j=0,c=b.j.count,h=2;h<e-1;h++,g++)j=this.D(d[h]),f[h-2]=j;if(b.q.r)h=b.q.r;else{h=0;h="undefined"!==typeof h?h:0;d=[];for(e=0;e<c;)d[e++]=h;h=d}d=h;for(h=0;h<f.length;h++)d[f[h]]=1;f=b.Gc;0==f.length&&i(Error("No _pointIndices defined on the X.object."));e=f.length;g=[];for(h=0;h<e;h++)j=f[h],j>c&&i(Error("Could not find scalar for vertex.")),j=d[j],g.push(j),g.push(j),g.push(j);b.q.r=d;b.q.vc=g;b.q.c=n;c=new ud;
c.V=b;c.n=a;this.dispatchEvent(c)};Vd.prototype.D=function(a){a=a.replace(/^\s+|\s+$/g,"");return parseInt(a.split(" ")[0])};A("X.parserLBL",Vd);A("X.parserLBL.prototype.parse",Vd.prototype.parse);function Xd(a){this.m=a;this.bg=H(this.m,Xa?"DOMMouseScroll":"mousewheel",this)}B(Xd,Ic);
Xd.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Na;if("mousewheel"==a.type){c=1;if(G||Ya&&(Ra||ob("532.0")))c=40;d=Ya&&Pa&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ga(a.wheelDeltaX)?(b=Ya&&Pa&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Ya&&Pa&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ga(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z(this.dg)&&Math.min(Math.max(b,-this.dg),this.dg);z(this.eg)&&(c=Math.min(Math.max(c,
-this.eg),this.eg));b=new Yd(d,a,0,c);try{this.dispatchEvent(b)}finally{b.Ea()}};Xd.prototype.I=function(){Xd.h.I.call(this);wc(this.bg);delete this.bg};function Yd(a,b,c,d){b&&this.ca(b,m);this.type="mousewheel";this.detail=a;this.lc=d}B(Yd,nc);G||Ya&&ob("525");var Zd;function $d(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=Ib(arguments,1),e;e=c;for(var f=0,h=0;h<d.length;h++)0<=xb(e,d[h])||(e.push(d[h]),f++);e=f==d.length;a.className=c.join(" ");return e};var ae=!G||qb(9);!Xa&&!G||G&&qb(9)||Xa&&ob("1.9.1");G&&ob("9");function be(a){return a?new ce(de(a)):Zd||(Zd=new ce)}function ee(a){return la(a)?document.getElementById(a):a}function fe(a,b){rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ge?a.setAttribute(ge[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var ge={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function he(a,b,c){return ie(document,arguments)}
function ie(a,b){var c=b[0],d=b[1];if(!ae&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ea(d.name),'"');if(d.type){c.push(' type="',Ea(d.type),'"');var e={};vb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(la(d)?c.className=d:ha(d)?$d.apply(p,[c].concat(d)):fe(c,d));2<b.length&&je(a,c,b);return c}
function je(a,b,c){function d(c){c&&b.appendChild(la(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ia(f)&&!(na(f)&&0<f.nodeType)?yb(ke(f)?Hb(f):f,d):d(f)}}function le(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ne(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function oe(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function de(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function ke(a){if(a&&"number"==typeof a.length){if(na(a))return"function"==typeof a.item||"string"==typeof a.item;if(ma(a))return"function"==typeof a.item}return q}function ce(a){this.J=a||da.document||document}v=ce.prototype;
v.Cd=be;v.g=function(a){return la(a)?this.J.getElementById(a):a};v.kc=function(a,b,c){return ie(this.J,arguments)};v.createElement=function(a){return this.J.createElement(a)};v.createTextNode=function(a){return this.J.createTextNode(a)};function pe(a){return"CSS1Compat"==a.J.compatMode}function qe(a){var b=a.J,a=!Ya&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Xc(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}v.appendChild=function(a,b){a.appendChild(b)};
v.contains=oe;function W(a){(!x(a)||!(a instanceof Element))&&i(Error("Could not add interactor to the given element."));I.call(this);this.e="interactor";this.cc=a;this.he=this.uf=this.tf=this.vf=this.sf=this.wf=p;this.ge=n;this.rb=this.mb=this.Sa=q;this.md=[0,0];this.be=new $c(0,0);this.O={MOUSEWHEEL_ENABLED:n,MOUSECLICKS_ENABLED:n,KEYBOARD_ENABLED:n,HOVERING_ENABLED:n,CONTEXTMENU_ENABLED:q}}B(W,I);W.prototype.__defineGetter__("config",s("O"));W.prototype.__defineGetter__("leftButtonDown",s("Sa"));
W.prototype.__defineGetter__("middleButtonDown",s("mb"));W.prototype.__defineGetter__("rightButtonDown",s("rb"));
W.prototype.ca=function(){this.O.MOUSEWHEEL_ENABLED?(this.he=new Xd(this.cc),this.wf=H(this.he,"mousewheel",this.Wc.bind(this))):(wc(this.wf),this.he=p);this.O.MOUSECLICKS_ENABLED?(this.sf=H(this.cc,"mousedown",this.Eh.bind(this)),this.vf=H(this.cc,"mouseup",this.Jh.bind(this))):(wc(this.sf),wc(this.vf));this.cc.oncontextmenu=this.O.CONTEXTMENU_ENABLED?p:function(){return q};window.onkeydown=this.O.KEYBOARD_ENABLED?this.jg.bind(this):p;wc(this.tf);wc(this.uf);this.tf=H(this.cc,"mousemove",this.Gh.bind(this));
this.uf=H(this.cc,"mouseout",this.Hh.bind(this))};W.prototype.Eh=function(a){0==a.button?this.Sa=n:1==a.button?this.mb=n:2==a.button&&(this.rb=n);eval("this.onMouseDown("+this.Sa+","+this.mb+","+this.rb+")");re(this);a.preventDefault()};W.prototype.Dh=ba();W.prototype.Jh=function(a){0==a.button?this.Sa=q:1==a.button?this.mb=q:2==a.button&&(this.rb=q);eval("this.onMouseUp("+this.Sa+","+this.mb+","+this.rb+")");re(this);a.preventDefault()};W.prototype.__defineGetter__("mousePosition",s("md"));v=W.prototype;
v.Ih=ba();v.Hh=function(a){this.ge=q;this.O.KEYBOARD_ENABLED&&(window.onkeydown=p);this.rb=this.mb=this.Sa=q;re(this);this.be=new $c(0,0);a.preventDefault()};v.Fh=ba();
v.Gh=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.ge=n;this.O.KEYBOARD_ENABLED&&window.onkeydown==p&&(window.onkeydown=this.jg.bind(this));a.preventDefault();var b=a.shiftKey;this.md=[a.offsetX,a.offsetY];var c=new $c(this.md[0],this.md[1]),a=this.be.ab(c);this.be=c.f();this.O.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.mb||this.Sa||this.rb)&&re(this),this.Fe=setTimeout(function(){re(this);var a=new Md;a.ud=c.x;a.vd=c.y;this.dispatchEvent(a);
this.Fe=p}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.Wb()&&(this.Sa&&!b?(b=new Jd,b.P=a,b.sj=0,this.dispatchEvent(b)):this.mb||this.Sa&&b?(b=new Id,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.P=a,this.dispatchEvent(b)):this.rb&&(b=new Kd,b.Db=0<a.y,b.eb=q,this.dispatchEvent(b)))};function re(a){a.Fe&&clearTimeout(a.Fe);a.dispatchEvent(new Nd)}v.Kh=ba();
v.Wc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");re(this);a.preventDefault()};v.Bh=ba();
v.jg=function(a){if(this.ge){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");re(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Od,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Id:b?a=new Kd:(a=new Jd,this instanceof se&&(a=new Ld)),a&&(c=new $c(0,0),37==f?(c.x=5,a.F=q,b&&(a.F=n,a.Db=n,a.eb=q)):39==f?(c.x=-5,a.F=n,b&&(a.Db=q,a.eb=q)):38==f?(c.y=5,a.F=n,b&&(a.Db=n,a.eb=n)):40==f&&(c.y=-5,a.F=q,b&&(a.Db=q,
a.eb=n)),a.P=c,this.dispatchEvent(a)))}};A("X.interactor",W);A("X.interactor.prototype.init",W.prototype.ca);A("X.interactor.prototype.onMouseDown",W.prototype.Dh);A("X.interactor.prototype.onMouseUp",W.prototype.Ih);A("X.interactor.prototype.onMouseMove",W.prototype.Fh);A("X.interactor.prototype.onMouseWheel",W.prototype.Kh);A("X.interactor.prototype.onKey",W.prototype.Bh);function se(a){W.call(this,a);this.e="interactor2D"}B(se,W);se.prototype.Wc=function(a){se.h.Wc.call(this,a);var b=new Ld;x(a.lc)||(a.lc=0);b.F=0>a.lc;this.dispatchEvent(b)};function te(a){S.call(this);this.e="slice";this.i=[0,0,0];this.ec=[0,0,1];this.F=[0,1,0];this.A=this.G=10;this.Nb=[0,1,0,0,1,1,1,1,1,0,0,0];this.w=this.Za=p;this.Ja=n;this.ac=[1,1,1];x(a)&&this.Rb(a)}B(te,S);te.prototype.Rb=function(a){this.i=a.i.slice();this.ec=a.ec.slice();this.F=a.F.slice();this.G=a.G;this.A=a.A;this.Za=a.Za;this.w=a.w;this.Ja=a.Ja;this.ac=a.ac;this.Og=a.Og;te.h.Rb.call(this,a)};
te.prototype.Mc=function(){this.j.clear();var a=new J(this.ec[0],this.ec[1],this.ec[2]),b=new J(this.F[0],this.F[1],this.F[2]),c=Wc(b,a),d=new J(this.i[0],this.i[1],this.i[2]),e=new J(1,1,1);1==a.x?(e=new J(this.i[0],this.A/2,this.G/2),this.Nb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new J(this.G/2,this.i[1],this.A/2),this.Nb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new J(this.G/2,this.A/2,this.i[2]));var f=Vc(c.f().R(),b.f().R()),f=new J(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var h=Vc(c.f().R(),b),h=new J(h.x*
e.x,h.y*e.y,h.b*e.b);h.add(d);var g=Vc(c,b.f().R()),g=new J(g.x*e.x,g.y*e.y,g.b*e.b);g.add(d);var j=g,b=Vc(c,b),b=new J(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=h;this.j.add(f.x,f.y,f.b);this.j.add(h.x,h.y,h.b);this.j.add(g.x,g.y,g.b);this.j.add(j.x,j.y,j.b);this.j.add(b.x,b.y,b.b);this.j.add(d.x,d.y,d.b);this.k.add(a.x,a.y,a.b);this.k.add(a.x,a.y,a.b);this.k.add(a.x,a.y,a.b);this.k.add(a.x,a.y,a.b);this.k.add(a.x,a.y,a.b);this.k.add(a.x,a.y,a.b);this.Ja&&(a=new S,a.j.add(f.x,f.y,f.b),a.j.add(h.x,h.y,
h.b),a.j.add(h.x,h.y,h.b),a.j.add(b.x,b.y,b.b),a.j.add(b.x,b.y,b.b),a.j.add(g.x,g.y,g.b),a.j.add(g.x,g.y,g.b),a.j.add(f.x,f.y,f.b),a.k.add(0,0,0),a.k.add(0,0,0),a.k.add(0,0,0),a.k.add(0,0,0),a.k.add(0,0,0),a.k.add(0,0,0),a.k.add(0,0,0),a.k.add(0,0,0),a.zb=[this.ac[0],this.ac[1],this.ac[2]],a.la="LINES",a.fc=2,this.d.push(a))};A("X.slice",te);function Y(a){S.call(this);this.e="volume";this.i=[0,0,0];this.$=[10,10,10];this.K=[1,1,1];this.yc=this.ib=this.xc=this.hb=this.wc=this.gb=0;this.Va=new S;this.Wa=new S;this.Xa=new S;this.td=this.Ca=q;this.tb=0;this.w=p;this.Ja=n;this.Qb=Infinity;this.Pb=-Infinity;Da(this,new Rc);Da(this,new sd);x(a)&&this.Rb(a)}B(Y,S);
Y.prototype.Rb=function(a){window.console.log(a);this.i=a.i.slice();this.$=a.$.slice();this.K=a.K.slice();this.gb=a.gb;this.wc=a.wc;this.hb=a.hb;this.xc=a.xc;this.ib=a.ib;this.yc=a.yc;this.Va=new S(a.Va);this.Wa=new S(a.Wa);this.Xa=new S(a.Xa);this.Ca=a.Ca;this.td=a.td;this.tb=a.tb;this.w=a.w;this.Ja=a.Ja;Y.h.Rb.call(this,a)};
Y.prototype.Mc=function(){this.d.length=0;this.Va.d.length=0;this.Wa.d.length=0;this.Xa.d.length=0;this.d.push(this.Va);this.d.push(this.Wa);this.d.push(this.Xa);for(var a=0,a=0;3>a;a++){for(var b=(this.$[a]-1)/2,c=b,d=0,d=0;d<this.$[a];d++){var e=-b*this.K[a]+d*this.K[a],f=[[this.i[0]+e,this.i[1],this.i[2]],[this.i[0],this.i[1]+e,this.i[2]],[this.i[0],this.i[1],this.i[2]+e]],e=this.d[a].d,h=0,g=0,j=[1,1,1],k=this.Ja;0==a?(h=this.$[2]*this.K[2]-this.K[2],g=this.$[1]*this.K[1]-this.K[1],j=[1,1,0]):
1==a?(h=this.$[0]*this.K[0]-this.K[0],g=this.$[2]*this.K[2]-this.K[2],j=[1,0,0]):2==a&&(h=this.$[0]*this.K[0]-this.K[0],g=this.$[1]*this.K[1]-this.K[1],j=[0,1,0]);x(this.Za)&&(k=q);var o=new te,l=o,f=f[a],t=[[1,0,0],[0,1,0],[0,0,1]][a],r=[[0,1,0],[0,0,-1],[0,1,0]][a];(!x(f)||!(f instanceof Array)||3!=f.length)&&i(Error("Invalid center."));(!x(t)||!(t instanceof Array)||3!=t.length)&&i(Error("Invalid front direction."));(!x(r)||!(r instanceof Array)||3!=r.length)&&i(Error("Invalid up direction."));
z(h)||i(Error("Invalid width."));z(g)||i(Error("Invalid height."));var u=q;x(k)&&(u=k);k=[1,1,1];x(j)&&(k=j);l.i=f;l.ec=t;l.F=r;l.G=h;l.A=g;l.Ja=u;l.ac=k;l.Mc();o.Za=this;o.visible=d==Math.floor(c);e.push(o)}0==a?this.wc=this.gb=c:1==a?this.xc=this.hb=c:2==a&&(this.yc=this.ib=c)}this.c=n};
Y.prototype.C=function(a){a="undefined"!==typeof a?a:n;if(0<this.d.length)if(this.Ca!=this.td&&(this.Ca?(this.d[0].d[parseInt(this.gb,10)].visible=q,this.d[1].d[parseInt(this.hb,10)].visible=q,this.d[2].d[parseInt(this.ib,10)].visible=q):this.d[this.tb].visible=q,this.c=n,this.td=this.Ca),this.Ca)ve(this,this.tb);else for(var b=0,b=0;3>b;b++){var c=this.d[b],d=0,e=0;0==b?(d=this.gb,e=this.wc,this.wc=this.gb):1==b?(d=this.hb,e=this.xc,this.xc=this.hb):2==b&&(d=this.ib,e=this.yc,this.yc=this.ib);c.d[parseInt(e,
10)].visible=q;c=c.d[parseInt(d,10)];c.visible=n;c.Q=1}a&&Y.h.C.call(this)};Y.prototype.__defineGetter__("dimensions",s("$"));Y.prototype.__defineGetter__("volumeRendering",s("Ca"));Y.prototype.__defineSetter__("volumeRendering",function(a){this.Ca=a;this.C(q)});Y.prototype.__defineSetter__("visible",ca("Ba"));Y.prototype.__defineGetter__("center",s("i"));Y.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center."));this.i=a});
Y.prototype.__defineGetter__("labelmap",function(){this.w||(this.w=new we(this));return this.w});Y.prototype.__defineGetter__("indexX",s("gb"));Y.prototype.__defineSetter__("indexX",function(a){z(a)&&0<=a&&a<this.Va.d.length&&(this.gb=a,this.C(q))});Y.prototype.__defineGetter__("indexY",s("hb"));Y.prototype.__defineSetter__("indexY",function(a){z(a)&&0<=a&&a<this.Wa.d.length&&(this.hb=a,this.C(q))});Y.prototype.__defineGetter__("indexZ",s("ib"));
Y.prototype.__defineSetter__("indexZ",function(a){z(a)&&0<=a&&a<this.Xa.d.length&&(this.ib=a,this.C(q))});Y.prototype.__defineGetter__("windowLow",s("Qb"));Y.prototype.__defineSetter__("windowLow",ca("Qb"));Y.prototype.__defineGetter__("windowHigh",s("Pb"));Y.prototype.__defineSetter__("windowHigh",ca("Pb"));Y.prototype.__defineGetter__("borders",s("Ja"));Y.prototype.__defineSetter__("borders",ca("Ja"));
function ve(a,b){if(a.Ca&&(a.c||b!=a.tb)){var c=a.d[a.tb];c.visible=q;var c=a.d[b],d=c.d.length,e;for(e=0;e<d;e++)c.d[e].Ba=n;a.tb=b;a.c=q}}A("X.volume",Y);A("X.volume.prototype.modified",Y.prototype.C);function xe(){V.call(this);this.e="parserSTL"}B(xe,V);xe.prototype.parse=function(a,b,c){for(var c=c.split("\n"),d=c.length,e=b.j,f=b.k,h=0,g=d%8;g--;)this.D(e,f,c[h]),h++;for(g=0.125*d^0;g--;)this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++,this.D(e,f,c[h]),h++;c=new ud;c.V=b;c.n=a;this.dispatchEvent(c)};
xe.prototype.D=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),e=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,e,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),e=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,e,d),b.add(c,e,d),b.add(c,e,d))};A("X.parserSTL",xe);A("X.parserSTL.prototype.parse",xe.prototype.parse);function ye(){V.call(this);this.e="parserVTK"}B(ye,V);
ye.prototype.parse=function(a,b,c){var d=b.j,e=b.k,f=c.split("\n"),h=f.length,c=new M,g=new M;this.Bb=[];this.ja=rd;this.je=this.ob=this.fb=this.pb=q;for(var j=0,k=h%8;k--;)this.D(c,g,f[j]),j++;for(k=0.125*h^0;k--;)this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++,this.D(c,g,f[j]),j++;f=g.length;j=h=this.Bb.length;do{var k=this.Bb[h-j],o=k.length,l;for(l=0;l<o&&!("LINES"==this.ja&&l+1>=o);l++){var t=parseInt(k[l],
10),r=c.get(t);d.add(r[0],r[1],r[2]);var u=t,w=r;"LINES"==this.ja?(u=parseInt(k[l+1],10),w=c.get(u),d.add(w[0],w[1],w[2])):"TRIANGLE_STRIPS"==this.ja&&(0==l||l==o-1)&&d.add(r[0],r[1],r[2]);t<f?(w=g.get(t),e.add(w[0],w[1],w[2]),"LINES"==this.ja?(u=g.get(u),e.add(u[0],u[1],u[2])):"TRIANGLE_STRIPS"==this.ja&&(0==l||l==o-1)&&e.add(w[0],w[1],w[2])):(u=new J(r[0],r[1],r[2]),u.normalize(),e.add(u.x,u.y,u.b),"LINES"==this.ja?(u=new J(w[0],w[1],w[2]),u.normalize(),e.add(u.x,u.y,u.b)):"TRIANGLE_STRIPS"==this.ja&&
(0==l||l==o-1)&&e.add(u.x,u.y,u.b))}j--}while(0<j);b.la=this.ja;d=new ud;d.V=b;d.n=a;this.dispatchEvent(d)};
ye.prototype.D=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":this.pb=n;this.ob=this.fb=q;return;case "VERTICES":this.fb=n;this.ob=this.pb=q;a=parseInt(c[1],10);3<=a?this.ja=rd:1==a?this.ja="POINTS":i(Error("This VTK file is not supported!"));this.Bb=[];return;case "TRIANGLE_STRIPS":this.fb=n;this.ob=this.pb=q;this.ja="TRIANGLE_STRIPS";this.Bb=[];return;case "LINES":this.fb=n;this.ob=this.pb=q;this.ja="LINES";this.Bb=[];return;case "POLYGONS":this.fb=
n;this.ob=this.pb=q;this.ja="POLYGONS";this.Bb=[];return;case "POINT_DATA":this.ob=n;this.fb=this.pb=q;return}if(this.pb)if(1==d||isNaN(parseFloat(e)))this.pb=q;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]);a.add(e,f,h)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),a.add(e,f,h));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,e,c))}else this.fb?1==d||isNaN(parseFloat(e))?this.fb=q:this.Bb.push(c.slice(1)):this.ob&&("NORMALS"==
e?this.je=n:1==d||isNaN(parseFloat(e))?this.je=this.ob=q:this.je&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),h=parseFloat(c[2]),b.add(e,f,h)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),h=parseFloat(c[5]),b.add(e,f,h)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,e,c))))};A("X.parserVTK",ye);A("X.parserVTK.prototype.parse",ye.prototype.parse);function ze(){V.call(this);this.e="parserFSM"}B(ze,V);
ze.prototype.parse=function(a,b,c){var d=b.j,e=b.k,f=b.Gc,h=new M,g;g=3;var j=0,k;do k=this.o(c,g++),j++;while(200>j&&10!=k);g++;var o=Td(this,c,g);g+=4;j=Td(this,c,g);g+=4;k=[];for(var l=0,l=0;l<o;l++){var t=Rd(this,c,g);g+=4;var r=Rd(this,c,g);g+=4;var u=Rd(this,c,g);g+=4;k[l]=0;h.add(t,r,u)}o=[];l=[];for(t=0;t<j;t++){var w=Td(this,c,g);g+=4;u=Td(this,c,g);g+=4;r=Td(this,c,g);g+=4;k[w]+=1;k[u]+=1;k[r]+=1;o.push([w,u,r]);l.push(new J(0,0,0))}for(t=0;t<j;t++){w=o[t][0];u=o[t][1];r=o[t][2];g=h.get(w);
var c=h.get(u),C=h.get(r);g=new J(g[0],g[1],g[2]);C=new J(C[0],C[1],C[2]);c=(new J(c[0],c[1],c[2])).f().ab(g);g=C.f().ab(g);c=Wc(c,g).normalize();l[w]=l[w].add(c);l[u]=l[u].add(c);l[r]=l[r].add(c)}for(t=0;t<j;t++)w=o[t][0],u=o[t][1],r=o[t][2],g=h.get(w),c=h.get(u),C=h.get(r),f.push(w),f.push(u),f.push(r),d.add(g[0],g[1],g[2]),d.add(c[0],c[1],c[2]),d.add(C[0],C[1],C[2]),w=l[w].scale(1/k[w]).normalize(),u=l[u].scale(1/k[u]).normalize(),r=l[r].scale(1/k[r]).normalize(),e.add(w.x,w.y,w.b),e.add(u.x,u.y,
u.b),e.add(r.x,r.y,r.b);b.la=rd;d=new ud;d.V=b;d.n=a;this.dispatchEvent(d)};A("X.parserFSM",ze);A("X.parserFSM.prototype.parse",ze.prototype.parse);function Ae(a){function b(){Ac+=8;return ja<qa.length?qa.charCodeAt(ja++)&255:-1}function c(){var a;Ac++;a=O&1;O>>=1;0==O&&(O=b(),a=O&1,O=O>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=N[b]>>8-a);return b}function e(a){F++;E[D++]=a;r.push(String.fromCharCode(a));32768==D&&(D=0)}function f(){this.xd=this.wd=0;this.Je=p}function h(){for(;;){if(lb[za]>=ed)return-1;if(Bc[lb[za]]==za)return lb[za]++;lb[za]++}}function g(){var a=Cc[Db],b;if(17==za)return-1;Db++;za++;b=h();if(0<=
b)a.wd=b;else if(a.wd=32768,g())return-1;b=h();if(0<=b)a.xd=b,a.Je=p;else if(a.xd=32768,a.Je=Cc[Db],a.tj=Db,g())return-1;za--;return 0}function j(a,b,c){Cc=a;Db=0;Bc=c;ed=b;for(a=0;17>a;a++)lb[a]=0;za=0;return g()?-1:0}function k(a){for(var b,d,e=0,f=a[e];;)if(b=c()){if(!(f.xd&32768))return f.xd;f=f.Je;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.wd&32768))return f.wd;e++;f=a[e]}}function o(){var a,g,h,l,o;do if(a=c(),h=d(2),0==h){O=1;h=b();h|=b()<<8;g=b();g|=b()<<8;for((h^~g)&65535&&
document.write("BlockLen checksum mismatch\n");h--;)g=b(),e(g)}else if(1==h)for(;;)if(h=N[d(7)]>>1,23<h?(h=h<<1|c(),199<h?(h-=128,h=h<<1|c()):(h-=48,143<h&&(h+=136))):h+=256,256>h)e(h);else if(256==h)break;else{var r;h-=257;o=d($[h])+P[h];h=N[d(5)]>>3;8<aa[h]?(r=d(8),r|=d(aa[h]-8)<<8):r=d(aa[h]);r+=ka[h];for(h=0;h<o;h++)g=E[D-r&32767],e(g)}else if(2==h){var t=Array(320);g=257+d(5);r=1+d(5);l=4+d(4);for(h=0;19>h;h++)t[h]=0;for(h=0;h<l;h++)t[sa[h]]=d(3);o=gb.length;for(l=0;l<o;l++)gb[l]=new f;if(j(gb,
19,t)){D=0;return}o=g+r;l=0;for(var u=-1;l<o;)if(u++,h=k(gb),16>h)t[l++]=h;else if(16==h){var w;h=3+d(2);if(l+h>o){D=0;return}for(w=l?t[l-1]:0;h--;)t[l++]=w}else{h=17==h?3+d(3):11+d(7);if(l+h>o){D=0;return}for(;h--;)t[l++]=0}o=Fb.length;for(l=0;l<o;l++)Fb[l]=new f;if(j(Fb,g,t)){D=0;return}o=Fb.length;for(l=0;l<o;l++)gb[l]=new f;h=[];o=t.length;for(l=g;l<o;l++)h[l-g]=t[l];if(j(gb,r,h)){D=0;return}for(;;)if(h=k(Fb),256<=h){h-=256;if(0==h)break;h--;o=d($[h])+P[h];h=k(gb);8<aa[h]?(r=d(8),r|=d(aa[h]-8)<<
8):r=d(aa[h]);for(r+=ka[h];o--;)g=E[D-r&32767],e(g)}else e(h)}while(!a);D=0;O=1}function l(){r=[];var a=[];y=q;a[0]=b();a[1]=b();120==a[0]&&218==a[1]&&(o(),C[w]=Array(2),C[w][0]=r.join(""),C[w][1]="geonext.gxt",w++);31==a[0]&&139==a[1]&&(t(),C[w]=Array(2),C[w][0]=r.join(""),C[w][1]="file",w++);if(80==a[0]&&75==a[1]&&(y=n,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u=b();u|=b()<<8;a=b();a|=b()<<8;b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();var c=b(),c=c|b()<<8,d=b(),
d=d|b()<<8,e=0;for(mb=[];c--;){var f=b();"/"==f|":"==f?e=0:e<fd-1&&(mb[e++]=String.fromCharCode(f))}gd||(gd=mb);for(e=0;e<d;)b(),e++;F=0;8==a&&(o(),C[w]=Array(2),C[w][0]=r.join(""),C[w][1]=mb.join(""),w++);t()}}function t(){var a=[],c;u&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b());y&&l();a[0]=b();if(8==a[0]){u=b();b();b();b();b();b();b();if(u&4){a[0]=b();a[2]=b();za=a[0]+256*a[1];for(a=0;a<za;a++)b()}if(u&8){a=0;for(mb=
[];c=b();){if("7"==c||":"==c)a=0;a<fd-1&&(mb[a++]=c)}}if(u&16)for(;b(););u&2&&(b(),b());o();b();b();b();b();b();b();b();b();y&&l()}}var r=[],u,w=0,C=[],E=Array(32768),D=0,y=q,F,N=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,
218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,
23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],P=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],ka=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],aa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],sa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],qa=a,ja=0,
O=1,Ac=0,fd=256,mb=[],gd,Fb=Array(288),gb=Array(32),Db=0,Cc=p,za=0,lb=Array(17);lb[0]=0;var Bc,ed;Ae.prototype.hf=function(){l();return C}};function Be(){V.call(this);this.e="parserMGZ"}B(Be,V);Be.prototype.parse=function(a,b,c,d){var e=0,e=d?(new Ae(c.substr(0))).hf()[0][0]:c.substr(0),c=this.Ze(e),d=[c.Ne,c.Oe,c.Pe];b.$=d;b.K=c.Wd;var e=c.min,f=c.max;b.Ka=b.Qb=e;b.Aa=b.Pb=f;-Infinity==b.da&&(b.da=e);Infinity==b.fa&&(b.fa=f);b.Mc();Ud(b,c.Eg,d,f);c=new ud;c.V=b;c.n=a;this.dispatchEvent(c)};
Be.prototype.Ze=function(a){var b={version:0,Jg:0,Hg:0,gh:0,Ig:0,Ne:0,Oe:0,Pe:0,zh:0,type:0,$g:0,vg:0,Ii:p,ta:[[0,0,0,0],[0,0,0,0],[0,0,0,0]],Wd:[],Eg:[],rj:[],xj:p,min:0,max:0},c={value:0,name:"uchar",size:1,Oa:this.wb.bind(this)},d={value:1,name:"int",size:4,Oa:this.sg.bind(this)},e={value:3,name:"float",size:4,Oa:this.Ye.bind(this)},f={value:4,name:"short",size:2,Oa:this.rg.bind(this)},h=256,g=new Qd(a);T(g,this.sg.bind(this),g.ne);b.version=U(g);b.Ne=U(g);b.Oe=U(g);b.Pe=U(g);b.zh=U(g);b.type=
U(g);switch(b.type){case 0:b.xa=c;break;case 1:b.xa=d;break;case 3:b.xa=e;break;case 4:b.xa=f}b.$g=U(g);T(g,this.rg.bind(this),g.ic);b.vg=U(g);h-=2;0<b.vg&&(T(g,this.Ye.bind(this),g.hc),h-=60,b.Wd[0]=U(g),b.Wd[1]=U(g),b.Wd[2]=U(g),b.ta[0][0]=U(g),b.ta[1][0]=U(g),b.ta[2][0]=U(g),b.ta[0][1]=U(g),b.ta[1][1]=U(g),b.ta[2][1]=U(g),b.ta[0][2]=U(g),b.ta[1][2]=U(g),b.ta[2][2]=U(g),b.ta[0][3]=U(g),b.ta[1][3]=U(g),b.ta[2][3]=U(g));T(g,this.wb.bind(this),g.gc);U(g,h);a=b.xa.Oa(a,g.cb,b.Ne*b.Oe*b.Pe);b.Eg=a[0];
b.min=a[2];b.max=a[1];g.cb+=g.Yd*b.xa.size;g.cb+16<g.nf.length&&(T(g,this.Ye.bind(this),g.hc),b.Jg=U(g),b.gh=U(g),b.Hg=U(g),b.Ig=U(g));return b};A("X.parserMGZ",Be);A("X.parserMGZ.prototype.parse",Be.prototype.parse);function Ce(){V.call(this);this.e="parserBINSTL"}B(Ce,V);Ce.prototype.parse=function(a,b,c){var d=b.j,e=b.k;c.slice(0,80);for(var f=Sd(this,c,80),h=0,g,j,k,o,l=84,h=0;h<f;h++)g=this.ia(c,l,3)[0],l+=12,j=this.ia(c,l,3)[0],l+=12,k=this.ia(c,l,3)[0],l+=12,o=this.ia(c,l,3)[0],l+=12,l+=2,d.add(j[0],j[1],j[2]),d.add(k[0],k[1],k[2]),d.add(o[0],o[1],o[2]),e.add(g[0],g[1],g[2]),e.add(g[0],g[1],g[2]),e.add(g[0],g[1],g[2]);c=new ud;c.V=b;c.n=a;this.dispatchEvent(c)};A("X.parserBINSTL",xe);
A("X.parserBINSTL.prototype.parse",Ce.prototype.parse);function De(){V.call(this);this.e="parserCRV"}B(De,V);
De.prototype.parse=function(a,b,c){var d=b.Gc;0==d.length&&i(Error("No _pointIndices defined on the X.object."));var e=0,f=(this.o(c,e)<<16)+(this.o(c,e+1)<<8)+this.o(c,e+2)&16777215,e=e+3;if(16777215!=f)alert("Can't load curvature file, invalid magic number.");else{var f=Td(this,c,e),e=e+4+4+4,h=0,g=0,j=0,k=0,o=0,l=0,t=0,r=0,u=0,w=0,C=0,E=Array(f),D=Array(2),y=Array(2),F;for(F=0;F<f;F++){var N=Rd(this,c,e),e=e+4;0==F&&(D[0]=y[0]=N);0<=N?(h++,k+=N):(g++,j+=N);u+=N;C++;y[0]=Math.max(N,y[0]);D[0]=Math.min(N,
D[0]);E[F]=N}0!=h&&(o=k/h);0!=g&&(l=j/g);0!=C&&(w=u/C);for(c=u=j=k=0;c<f;c++)N=E[c],e=0,0<=N?(e=Math.pow(N-o,2),k+=e):(e=Math.pow(N-l,2),j+=e),e=Math.pow(N-w,2),u+=e;1<h&&(t=Math.sqrt(k/(h-1)));1<g&&(r=Math.sqrt(j/(g-1)));D[1]=l-2.5*r;y[1]=o+2.5*t;h=d.length;g=[];for(c=0;c<h;c++)j=d[c],j>f&&i(Error("Could not find scalar for vertex.")),j=E[j],g.push(j),g.push(j),g.push(j);b.q.Ka=D[1];b.q.Aa=y[1];-Infinity==b.q.da&&(b.q.da=D[1]);Infinity==b.q.fa&&(b.q.fa=y[1]);b.q.r=E;b.q.vc=g;b.q.c=n;d=new ud;d.V=
b;d.n=a;this.dispatchEvent(d)}};A("X.parserCRV",De);A("X.parserCRV.prototype.parse",De.prototype.parse);function Ee(){V.call(this);this.e="parserTRK"}B(Ee,V);
Ee.prototype.parse=function(a,b,c){var d=b.j,e=b.k,f=b.ya,h=0;this.Xb(c,h+6,3);var g=this.ia(c,h+12,3)[0];this.ia(c,h+24,3);var j=this.Nd(c,h+36),k=this.Nd(c,h+238);this.ia(c,h+440,16);this.ia(c,h+956,6);var o=Sd(this,c,h+988),h=Sd(this,c,h+996),l=[],t=[],r=Infinity,u=-Infinity,w=p,C=p,E=p,D=p,y=p,F=p,N;for(N=0;N<o;N++){for(var P=Sd(this,c,h),$=new M,ka=0,h=h+4,aa=0;aa<P;aa++){var sa=this.Xc(c,h),h=h+4,qa=this.Xc(c,h),h=h+4,ja=this.Xc(c,h),h=h+4,O=p;0<j&&(this.ia(c,h,j),h+=4*j);sa/=g[0];qa/=g[1];
ja/=g[2];$.add(sa,qa,ja);0<aa&&(O=$.get(aa-1),ka+=Math.sqrt(Math.pow(sa-O[0],2)+Math.pow(qa-O[1],2)+Math.pow(ja-O[2],2)))}0<k&&(h+=4*k);aa=$.Ib;P=$.Fb;sa=$.Jb;qa=$.Gb;ja=$.Kb;O=$.Hb;if(!w||aa<w)w=aa;if(!C||P>C)C=P;if(!E||sa<E)E=sa;if(!D||qa>D)D=qa;if(!y||ja<y)y=ja;if(!F||O>F)F=O;l.push($);t.push(ka)}c=(w+C)/2;E=(E+D)/2;F=(y+F)/2;y=[];for(N=0;N<o;N++){D=l[N];h=D.count;ka=t[N];r=Math.min(r,ka);u=Math.max(u,ka);for(aa=0;aa<h-1;aa++)j=D.get(aa),g=D.get(aa+1),d.add(j[0],j[1],j[2]),d.add(g[0],g[1],g[2]),
k=j[0]-c,w=j[1]-E,C=j[2]-F,$=Math.sqrt(k*k+w*w+C*C),P=g[0]-c,sa=g[1]-E,qa=g[2]-F,ja=Math.sqrt(P*P+sa*sa+qa*qa),e.add(k/$,w/$,C/$),e.add(P/ja,sa/ja,qa/ja),g=[Math.abs(g[0]-j[0]),Math.abs(g[1]-j[1]),Math.abs(g[2]-j[2])],j=Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]),g[0]/=j,g[1]/=j,g[2]/=j,f.add(g[0],g[1],g[2]),f.add(g[0],g[1],g[2]),y.push(ka),y.push(ka),y.push(ka),y.push(ka),y.push(ka),y.push(ka)}b.la="LINES";O=new td;O.Ka=r;O.Aa=u;O.da=r;O.fa=u;O.vc=y;O.Cf=q;O.c=n;b.q=O;d=new ud;d.V=b;d.n=a;this.dispatchEvent(d)};
A("X.parserTRK",Ee);A("X.parserTRK.prototype.parse",Ee.prototype.parse);function Fe(){V.call(this);this.e="parserIMAGE"}B(Fe,V);Fe.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||i(Error());for(var e=new Uint8Array(c),f=e.length,h=Array(f);f--;)h[f]=String.fromCharCode(e[f]);e=window.btoa(h.join(""));f=new Image;uc(f,"load",this.Rh.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};Fe.prototype.Rh=function(a,b,c){b.qf=a;a=new ud;a.V=c;a.n=b;this.dispatchEvent(a)};A("X.parserIMAGE",Fe);A("X.parserIMAGE.prototype.parse",Fe.prototype.parse);function Ge(){V.call(this);this.e="parserLUT"}B(Ge,V);Ge.prototype.parse=function(a,b,c){var c=c.split("\n"),d=c.length,e;for(e=0;e<d;++e){var f=c[e],f=f.replace(/^\s+|\s+$/g,"");"#"!=f[0]&&(f=f.split(" "),f=f.filter(function(a){return""!=a}),6==f.length&&(f[2]=parseInt(f[2],10)/255,f[3]=parseInt(f[3],10)/255,f[4]=parseInt(f[4],10)/255,f[5]=parseInt(f[5],10)/255,a.add(parseInt(f[0],10),f[1],f[2],f[3],f[4],f[5],10)))}c=new ud;c.V=b;c.n=a;this.dispatchEvent(c)};A("X.parserLUT",Ge);
A("X.parserLUT.prototype.parse",Ge.prototype.parse);function He(){V.call(this);this.e="parserNRRD"}B(He,V);
He.prototype.parse=function(a,b,c){var d=0,e=c.match(/^([\s\S]*?)\r?\n\r?\n/),d=e[0].length,f,h,g,j,k,o,e=e[1].split(/\r?\n/);for(k=0,o=e.length;k<o;k++)if(f=e[k],f.match(/NRRD\d+/))this.vh=n;else if(!f.match(/^#/)&&(j=f.match(/(.*):(.*)/)))h=j[1].trim(),f=j[2].trim(),(g=this.bh[h])?g.call(this,f):this[h]=f;this.vh||i(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&i(Error("Only raw or gz/gzip encoding is allowed"));if(!this.wa&&(this.wa=[new J(1,0,
0),new J(0,1,0),new J(0,0,1)],this.df)){e=[];for(j=0;2>=j;j++)e.push(!isNaN(this.df[j])?this.wa[j].scale(this.df[j]):m)}j=0;j="gzip"==this.encoding||"gz"==this.encoding?(new Ae(c.substr(d))).hf()[0][0]:c.substr(d);c=this.$b[0]*this.$b[1]*this.$b[2];d=Array(c);e=-Infinity;k=Infinity;for(o=0;o<c;o++)f=this.Md(j,0+o*this.Ld),d[o]=f,e=Math.max(e,f),k=Math.min(k,f);b.$=[this.$b[0],this.$b[1],this.$b[2]];b.K=[(new J(this.wa[0][0],this.wa[0][1],this.wa[0][2])).Wb(),(new J(this.wa[1][0],this.wa[1][1],this.wa[1][2])).Wb(),
(new J(this.wa[2][0],this.wa[2][1],this.wa[2][2])).Wb()];b.Ka=b.Qb=k;b.Aa=b.Pb=e;-Infinity==b.da&&(b.da=k);Infinity==b.fa&&(b.fa=e);b.Mc();Ud(b,d,this.$b,e);c=new ud;c.V=b;c.n=a;this.dispatchEvent(c)};
He.prototype.bh={type:function(a){switch(a){case "unsigned char":case "uint8":this.Md=this.o;this.Ld=1;break;case "signed char":case "int8":this.Md=this.qg;this.Ld=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Md=this.Nd;this.Ld=2;break;case "int":case "int32":break;case "float":this.Md=this.Xc;this.Ld=4;break;default:i(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return a},encoding:function(a){return this.encoding=
a},dimension:function(a){return this.vb=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.$b=e},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.wa=function(){var a,f,h;h=[];for(a=0,f=c.length;a<f;a++)d=c[a],h.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return h}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.df=e}};A("X.parserNRRD",He);A("X.parserNRRD.prototype.parse",He.prototype.parse);function Ie(){V.call(this);this.e="parserNII"}B(Ie,V);Ie.prototype.parse=function(a,b,c,d){var e=0,e=d?(new Ae(c.substr(0))).hf()[0][0]:c.substr(0),c=this.Ze(e),d=[c.vb[1],c.vb[2],c.vb[3]];b.$=d;b.K=[c.Od[1],c.Od[2],c.Od[3]];var e=c.min,f=c.max;b.Ka=b.Qb=e;b.Aa=b.Pb=f;-Infinity==b.da&&(b.da=e);Infinity==b.fa&&(b.fa=f);b.Mc();Ud(b,c.data,d,f);c=new ud;c.V=b;c.n=a;this.dispatchEvent(c)};
Ie.prototype.Ze=function(a){var b={li:0,Yg:p,vb:[],qh:0,rh:0,sh:0,oh:0,Lf:0,Sg:0,pi:0,Od:[],Ci:0,fi:0,ei:0,oi:0,mi:p,Ei:p,Tg:0,Ug:0,ni:0,wi:0,Xg:p,Rg:p,Uh:0,ji:0,Yh:0,Zh:0,$h:0,Vh:0,Wh:0,Xh:0,qi:[],ri:[],si:[],ph:p,wh:[],data:[]},c={value:0,name:"uchar",size:1,Oa:this.wb.bind(this)},d={value:0,name:"schar",size:1,Oa:this.Sh.bind(this)},e={value:1,name:"uint32",size:4,Oa:this.$e.bind(this)},f={value:3,name:"float",size:4,Oa:this.ia.bind(this)},h={value:4,name:"short",size:2,Oa:this.Xb.bind(this)},
g=new Qd(a);T(g,this.$e.bind(this),g.ne);b.li=U(g);T(g,this.wb.bind(this),g.gc);U(g,28);T(g,this.$e.bind(this),g.ne);U(g,1);T(g,this.Xb.bind(this),g.ic);U(g,1);T(g,this.wb.bind(this),g.gc);U(g,1);b.Yg=U(g,1);T(g,this.Xb.bind(this),g.ic);b.vb=U(g,8);var j=b.vb[1]*b.vb[2]*b.vb[3];T(g,this.ia.bind(this),g.hc);b.qh=U(g);b.rh=U(g);b.sh=U(g);T(g,this.Xb.bind(this),g.ic);b.oh=U(g);b.Lf=U(g);b.Sg=U(g);b.pi=U(g);T(g,this.ia.bind(this),g.hc);b.Od=U(g,8);b.Ci=U(g);b.fi=U(g);b.ei=U(g);T(g,this.Xb.bind(this),
g.ic);b.oi=U(g);T(g,this.wb.bind(this),g.gc);b.mi=U(g);b.Ei=U(g);T(g,this.ia.bind(this),g.hc);b.Tg=U(g);b.Ug=U(g);b.ni=U(g);b.wi=U(g);T(g,this.wb.bind(this),g.gc);b.Xg=U(g,80);b.Rg=U(g,24);T(g,this.Xb.bind(this),g.ic);b.Uh=U(g);b.ji=U(g);T(g,this.ia.bind(this),g.hc);b.Yh=U(g);b.Zh=U(g);b.$h=U(g);b.Vh=U(g);b.Wh=U(g);b.Xh=U(g);b.qi=U(g,4);b.ri=U(g,4);b.si=U(g,4);T(g,this.wb.bind(this),g.gc);b.ph=U(g,16);b.wh=U(g,4);switch(b.Lf){case 2:b.xa=c;break;case 16:b.xa=f;break;case 256:b.xa=d;break;case 512:b.xa=
h;break;case 768:b.xa=e;break;default:i(Error("Unsupported NII data type."))}a=b.xa.Oa(a,g.cb,j);b.data=a[0];b.min=a[2];b.max=a[1];return b};A("X.parserNII",Ie);A("X.parserNII.prototype.parse",Ie.prototype.parse);function Je(){I.call(this);this.e="loader";this.kd=new Qb;this.Ic=0}B(Je,I);function Ke(a,b){a.Ic+=b/a.kd.ma()/3;a.Ic=Math.min(1,a.Ic);var c=new Pd;c.Df=a.Ic;a.dispatchEvent(c)}function Le(a){var a=a.t.ke,b=a.split(".").pop().toUpperCase();b in Me||i(Error("The "+b+" file format is not supported."));return[a,b,Me[b][0],Me[b][1],Me[b][2]]}
Je.prototype.load=function(a,b){(!a||!b)&&i(Error("No container or object to load."));this.kd.set(a.za,q);var c=Le(a),d=c[0],c=c[4];if(a.hd!=p)this.parse(p,a,b);else{var e=new XMLHttpRequest;H(e,"abort",this.Qf.bind(this,e,a,b));H(e,"error",this.Qf.bind(this,e,a,b));H(e,"load",this.parse.bind(this,e,a,b));e.open("GET",d,n);c&&(e.responseType=c);e.overrideMimeType("text/plain; charset=x-user-defined");e.setRequestHeader("Content-Type","text/plain");e.send(p)}};
Je.prototype.parse=function(a,b,c){Ke(this,1);setTimeout(function(){var d=Le(b),e=d[3],d=new d[2];uc(d,Dc,this.complete.bind(this));var f=b.hd;f==p&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};Je.prototype.complete=function(a){Ke(this,1);setTimeout(function(){var b=a.n,c=a.V;b.t.c=q;c.C();this.kd.set(b.za,n)}.bind(this),100)};Je.prototype.Qf=function(a,b,c){i(Error("Loading failed: ",b,c))};
var Me={STL:[xe,p,p],BINSTL:[Ce,p,p],VTK:[ye,p,p],TRK:[Ee,p,p],FSM:[ze,p,p],INFLATED:[ze,p,p],SMOOTHWM:[ze,p,p],SPHERE:[ze,p,p],PIAL:[ze,p,p],ORIG:[ze,p,p],NRRD:[He,p,p],NII:[Ie,q,p],CRV:[De,p,p],LABEL:[Vd,p,p],MGH:[Be,q,p],MGZ:[Be,n,p],TXT:[Ge,p,p],LUT:[Ge,p,p],PNG:[Fe,"png","arraybuffer"],JPG:[Fe,"jpeg","arraybuffer"],JPEG:[Fe,"jpeg","arraybuffer"],GIF:[Fe,"gif","arraybuffer"]};function Ne(a,b){(!z(a)||!z(b))&&i(Error("A camera needs valid width and height values."));I.call(this);this.e="camera";this.ka=new J(0,0,100);this.dc=new J(0,0,0);this.F=new J(0,1,0);this.u=this.Jd(this.ka,this.dc);this.Cb=new Float32Array(this.u.M())}B(Ne,I);Ne.prototype.Se=function(a){(!x(a)||!(a instanceof W))&&i(Error("Could not observe the interactor."));H(a,Ad,this.Lh.bind(this));H(a,Cd,this.Qh.bind(this))};
Ne.prototype.Qh=function(a){a instanceof Kd||i(Error("Received no valid zoom event."));a.Db?this.Fg(a.eb):this.Gg(a.eb)};Ne.prototype.Lh=function(a){a instanceof Id||i(Error("Received no valid pan event."));this.og(a.P)};Ne.prototype.__defineGetter__("view",s("u"));Ne.prototype.__defineSetter__("view",function(a){(!x(a)||!(a instanceof L))&&i(Error("Invalid view matrix."));this.u=a;this.Cb=new Float32Array(this.u.M())});
Ne.prototype.__defineGetter__("position",function(){return[this.ka.x,this.ka.y,this.ka.b]});Ne.prototype.__defineSetter__("position",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid position."));this.ka=new J(a[0],a[1],a[2]);this.reset()});Ne.prototype.__defineGetter__("focus",function(){return[this.dc.x,this.dc.y,this.dc.b]});
Ne.prototype.__defineSetter__("focus",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid focus"));this.dc=new J(a[0],a[1],a[2]);this.reset()});Ne.prototype.__defineGetter__("up",function(){return[this.F.x,this.F.y,this.F.b]});Ne.prototype.__defineSetter__("up",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid up vector."));this.F=new J(a[0],a[1],a[2]);this.reset()});v=Ne.prototype;v.reset=function(){this.u=this.Jd(this.ka,this.dc);this.Cb=new Float32Array(this.u.M())};
v.og=function(a){a instanceof Array&&2==a.length?a=new $c(a[0],a[1]):a instanceof $c||i(Error("Invalid distance vector for pan operation."));a=new J(-a.x,a.y,0);a=md(4).translate(a);this.u=new L(a.multiply(this.u));this.Cb=new Float32Array(this.u.M())};v.Fg=function(a){var b=20;x(a)&&!a&&(b=1);a=new J(0,0,b);a=md(4).translate(a);this.u=new L(a.multiply(this.u));this.Cb=new Float32Array(this.u.M())};
v.Gg=function(a){var b=30;x(a)&&!a&&(b=1);a=new J(0,0,-b);a=md(4).translate(a);this.u=new L(a.multiply(this.u));this.Cb=new Float32Array(this.u.M())};v.Jd=function(a,b){(!(a instanceof J)||!(b instanceof J))&&i(Error("3D vectors required for calculating the view."));return md(4)};A("X.camera",Ne);A("X.camera.prototype.pan",Ne.prototype.og);A("X.camera.prototype.zoomIn",Ne.prototype.Fg);A("X.camera.prototype.zoomOut",Ne.prototype.Gg);function Oe(a){function b(a,b,d){b=2*b*Math.PI;b=j.yb(Math.cos(b)).pc(k.yb(Math.sin(b)));a=c.pc(e.yb(a)).pc(b.yb(f));d=b.yb(1-Math.abs(d)).pc(h.yb(d));return new Jc(a,d)}this.v=[];for(var a=a||{},c=new Ba(a.start||[0,-1,0]),d=new Ba(a.end||[0,1,0]),e=d.Vc(c),f=a.Pa||1,a=a.cf||16,h=e.bd(),g=0.5<Math.abs(h.y()),j=(new Ba(g,!g,0)).ze(h).bd(),k=j.ze(h).bd(),g=new Jc(c,h.Qe()),d=new Jc(d,h.bd()),o=[],l=0;l<a;l++){var t=l/a,r=(l+1)/a;o.push(new Lc([g,b(0,t,-1),b(0,r,-1)]));o.push(new Lc([b(0,r,0),b(0,t,
0),b(1,t,0),b(1,r,0)]));o.push(new Lc([d,b(1,r,1),b(1,t,1)]))}return Oc(o)}B(Oe,Nc);function Pe(){S.call(this);this.e="cylinder";this.qe=[-10,-10,-10];this.Zd=[10,10,10];this.Lb=10;this.Mb=32;Da(this,new wd)}B(Pe,S);Pe.prototype.__defineGetter__("start",s("qe"));Pe.prototype.__defineSetter__("start",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid start"));this.qe=a});Pe.prototype.__defineGetter__("end",s("Zd"));Pe.prototype.__defineSetter__("end",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid end"));this.Zd=a});
Pe.prototype.__defineGetter__("radius",s("Lb"));Pe.prototype.__defineSetter__("radius",function(a){z(a)||i(Error("Invalid radius."));this.Lb=a});Pe.prototype.C=function(){yd(this,new Oe({start:this.qe,end:this.Zd,Pa:this.Lb,cf:this.Mb}));Pe.h.C.call(this)};A("X.cylinder",Pe);A("X.cylinder.prototype.modified",Pe.prototype.C);function Qe(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new Ba(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));h.push(new Jc(c.pc(e.yb(d)),e))}this.v=[];for(var a=a||{},c=new Ba(a.ve||[0,0,0]),d=a.Pa||1,e=a.cf||16,a=a.ti||8,f=[],h=[],g=0;g<e;g++)for(var j=0;j<a;j++)h=[],b(g/e,j/a),0<j&&b((g+1)/e,j/a),j<a-1&&b((g+1)/e,(j+1)/a),b(g/e,(j+1)/a),f.push(new Lc(h));return Oc(f)}B(Qe,Nc);function Re(){S.call(this);this.e="sphere";this.i=[0,0,0];this.Lb=5;this.Mb=32;this.Pg=16;Da(this,new wd)}B(Re,S);Re.prototype.__defineGetter__("center",s("i"));Re.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.i=a});Re.prototype.__defineGetter__("radius",s("Lb"));Re.prototype.__defineSetter__("radius",function(a){z(a)||i(Error("Invalid radius."));this.Lb=a});
Re.prototype.C=function(){yd(this,new Qe({ve:this.i,Pa:this.Lb,cf:this.Mb,ti:this.Pg}));Re.h.C.call(this)};A("X.sphere",Re);A("X.sphere.prototype.modified",Re.prototype.C);function we(a){Y.call(this);this.e="labelmap";this.Za=a}B(we,Y);we.prototype.C=function(){var a=new ud;a.V=this;this.dispatchEvent(a);this.Za.C()};A("X.labelmap",we);function Se(a){this.v=[];var a=a||{},b=new Ba(a.ve||[0,0,0]),c=!a.Pa?[1,1,1]:a.Pa.length?a.Pa:[a.Pa,a.Pa,a.Pa];return Oc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Lc(a[0].map(function(e){e=new Ba(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Jc(e,new Ba(a[1]))}))}))}B(Se,Nc);function Te(){S.call(this);this.e="cube";this.i=[0,0,0];this.ee=this.de=this.ce=20;this.Nb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Da(this,new wd)}B(Te,S);Te.prototype.__defineGetter__("center",s("i"));Te.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.i=a});Te.prototype.__defineGetter__("lengthX",s("ce"));
Te.prototype.__defineSetter__("lengthX",function(a){z(a)||i(Error("Invalid lengthX."));this.ce=a});Te.prototype.__defineGetter__("lengthY",s("de"));Te.prototype.__defineSetter__("lengthY",function(a){z(a)||i(Error("Invalid lengthY."));this.de=a});Te.prototype.__defineGetter__("lengthZ",s("ee"));Te.prototype.__defineSetter__("lengthZ",function(a){z(a)||i(Error("Invalid lengthZ."));this.ee=a});Te.prototype.C=function(){yd(this,new Se({ve:this.i,Pa:[this.ce/2,this.de/2,this.ee/2]}));Te.h.C.call(this)};
A("X.cube",Te);A("X.cube.prototype.modified",Te.prototype.C);function Ue(a){W.call(this,a);this.e="interactor3D"}B(Ue,W);Ue.prototype.Wc=function(a){Ue.h.Wc.call(this,a);var b=new Kd;x(a.lc)||(a.lc=0);b.Db=0>a.lc;b.eb=n;this.dispatchEvent(b)};function Ve(a){I.call(this);this.e="array";this.r=[];this.mf=a}B(Ve,I);Ve.prototype.add=function(a){this.r.push(a);return n};Ve.prototype.clear=function(){this.r.length=0};function We(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);We(a,b,d);for(We(a,d,c);b<d;++b)if(0<a.mf(a.r[b],a.r[d])){var e=a.r[b];a.r[b]=a.r[d];for(var f=a,h=d,g=c;h+1<g&&0>f.mf(f.r[h+1],e);){var j=f,k=h+1,o=j.r[h];j.r[h]=j.r[k];j.r[k]=o;++h}f.r[h]=e}}}Ve.prototype.sort=function(){We(this,0,this.r.length)};function Xe(a,b){Ne.call(this,a,b);this.e="camera2D"}B(Xe,Ne);function Ye(a,b){Ne.call(this,a,b);this.e="camera3D";this.of=45;this.zf=new Float32Array(Ze(this.of,a/b).M())}B(Ye,Ne);Ye.prototype.Se=function(a){Ye.h.Se.call(this,a);H(a,Bd,this.Oh.bind(this))};Ye.prototype.Oh=function(a){a instanceof Jd||i(Error("Received no valid rotate event."));this.rotate(a.P)};function Ze(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new L([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
Ye.prototype.rotate=function(a){a instanceof Array&&2==a.length?a=new $c(a[0],a[1]):a instanceof $c||i(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=md(4),d=new J(parseFloat(this.view.N(0,0)),parseFloat(this.view.N(0,1)),parseFloat(this.view.N(0,2))),b=c.rotate(b,new J(parseFloat(this.view.N(1,0)),parseFloat(this.view.N(1,1)),parseFloat(this.view.N(1,2)))),a=c.rotate(a,d);this.view=new L(this.view.multiply(a.multiply(b)));this.Cb=new Float32Array(this.view.M())};
Ye.prototype.Jd=function(a,b){Ye.h.Jd.call(this,a,b);var c=md(4),d=new J(a.x-b.x,a.y-b.y,a.b-b.b),d=d.normalize(),e=this.F.f();e.Nc(d)&&(e.b+=1.0E-6);var f=Wc(e,d),e=Wc(d,f),f=f.normalize(),e=e.normalize();K(c,0,0,f.x);K(c,0,1,f.y);K(c,0,2,f.b);K(c,0,3,0);K(c,1,0,e.x);K(c,1,1,e.y);K(c,1,2,e.b);K(c,1,3,0);K(c,2,0,d.x);K(c,2,1,d.y);K(c,2,2,d.b);K(c,2,3,0);K(c,3,0,0);K(c,3,1,0);K(c,3,2,0);K(c,3,3,1);d=a.f();return c.translate(d.R())};A("X.camera3D",Ye);A("X.camera3D.prototype.rotate",Ye.prototype.rotate);function $e(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}$e.prototype.f=function(){return new $e(this.top,this.right,this.bottom,this.left)};$e.prototype.contains=function(a){return!this||!a?q:a instanceof $e?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function af(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}af.prototype.f=function(){return new af(this.left,this.top,this.width,this.height)};af.prototype.Zf=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,n}return q};
af.prototype.contains=function(a){return a instanceof af?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};af.prototype.na=function(){return new ad(this.width,this.height)};function bf(a,b){var c=de(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,p))?c[b]||c.getPropertyValue(b):""}function cf(a,b){return a.currentStyle?a.currentStyle[b]:p}function df(a,b){return bf(a,b)||cf(a,b)||a.style&&a.style[b]}function ef(a){a=a?9==a.nodeType?a:de(a):document;return G&&!qb(9)&&!pe(be(a))?a.body:a.documentElement}
function ff(a){var b=a.getBoundingClientRect();G&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function gf(a){if(G&&!qb(8))return a.offsetParent;for(var b=de(a),c=df(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=df(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return p}
function hf(a){for(var b=new $e(0,Infinity,Infinity,0),c=be(a),d=c.J.body,e=c.J.documentElement,f=!Ya&&"CSS1Compat"==c.J.compatMode?c.J.documentElement:c.J.body;a=gf(a);)if((!G||0!=a.clientWidth)&&(!Ya||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=df(a,"overflow")){var h=jf(a),g;g=a;if(Xa&&!ob("1.9")){var j=parseFloat(bf(g,"borderLeftWidth"));if(kf(g))var k=g.offsetWidth-g.clientWidth-j-parseFloat(bf(g,"borderRightWidth")),j=j+k;g=new Xc(j,parseFloat(bf(g,"borderTopWidth")))}else g=new Xc(g.clientLeft,
g.clientTop);h.x+=g.x;h.y+=g.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.J.parentWindow||c.J.defaultView||window;e=c.document;Ya&&!ob("500")&&!Za?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new ad(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new ad(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:p}
function jf(a){var b,c=de(a),d=df(a,"position"),e=Xa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Xc(0,0),h=ef(c);if(a==h)return f;if(a.getBoundingClientRect)b=ff(a),a=qe(be(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(Ya&&"fixed"==df(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Wa||Ya&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=gf(b))&&b!=c.body&&b!=h;)if(f.x-=b.scrollLeft,!Wa||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function lf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function mf(a){if("none"!=df(a,"display"))return nf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=nf(a);b.display=c;b.position=e;b.visibility=d;return a}function nf(a){var b=a.offsetWidth,c=a.offsetHeight,d=Ya&&!b&&!c;return(!ga(b)||d)&&a.getBoundingClientRect?(a=ff(a),new ad(a.right-a.left,a.bottom-a.top)):new ad(b,c)}function of(a,b){a.style.display=b?"":"none"}function kf(a){return"rtl"==df(a,"direction")}
function pf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var qf={thin:2,medium:4,thick:6};function rf(a,b){if("none"==cf(a,b+"Style"))return 0;var c=cf(a,b+"Width");return c in qf?qf[c]:pf(a,c)};function sf(a){this.Fa=a;this.s=[]}B(sf,Xb);var tf=[];function uf(a,b,c,d,e){ha(c)||(tf[0]=c,c=tf);for(var f=0;f<c.length;f++)a.s.push(H(b,c[f],d||a,e||q,a.Fa||a))}sf.prototype.Qd=function(){yb(this.s,wc);this.s.length=0};sf.prototype.I=function(){sf.h.I.call(this);this.Qd()};sf.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function vf(){}(function(a){a.Rf=function(){return a.nh||(a.nh=new a)}})(vf);vf.prototype.Re=0;vf.Rf();function wf(a){this.Ma=a||be()}B(wf,Ic);v=wf.prototype;v.lh=vf.Rf();v.Yf=p;v.Vb=q;v.m=p;v.oc=p;v.yd=p;v.Lc=p;v.Di=q;v.g=s("m");v.bf=function(a){this.oc&&this.oc!=a&&i(Error("Method not supported"));wf.h.bf.call(this,a)};v.Cd=s("Ma");v.kc=function(){this.m=this.Ma.createElement("div")};v.Zb=function(a){this.xb(a)};v.xb=function(a,b){this.Vb&&i(Error("Component already rendered"));this.m||this.kc();a?a.insertBefore(this.m,b||p):this.Ma.J.body.appendChild(this.m);(!this.oc||this.oc.Vb)&&this.Bd()};
v.Bd=function(){this.Vb=n;xf(this,function(a){!a.Vb&&a.g()&&a.Bd()})};v.Pc=function(){xf(this,function(a){a.Vb&&a.Pc()});this.Gd&&this.Gd.Qd();this.Vb=q};v.I=function(){wf.h.I.call(this);this.Vb&&this.Pc();this.Gd&&(this.Gd.Ea(),delete this.Gd);xf(this,function(a){a.Ea()});!this.Di&&this.m&&le(this.m);this.oc=this.m=this.Lc=this.yd=p};function xf(a,b){a.yd&&yb(a.yd,b,m)}
v.removeChild=function(a,b){if(a){var c=la(a)?a:a.Yf||(a.Yf=":"+(a.lh.Re++).toString(36)),a=this.Lc&&c?(c in this.Lc?this.Lc[c]:m)||p:p;if(c&&a){var d=this.Lc;c in d&&delete d[c];Cb(this.yd,a);b&&(a.Pc(),a.m&&le(a.m));c=a;c==p&&i(Error("Unable to set parent component"));c.oc=p;wf.h.bf.call(c,p)}}a||i(Error("Child is not in parent component"));return a};function yf(){}B(yf,Ic);v=yf.prototype;v.jf=0;v.Uc=0;v.Me=100;v.Pf=0;v.ef=1;v.uh=q;v.yh=q;v.Td=function(a){a=zf(this,a);this.jf!=a&&(this.jf=a+this.Pf>this.Me?this.Me-this.Pf:a<this.Uc?this.Uc:a,!this.uh&&!this.yh&&this.dispatchEvent("change"))};v.Fd=function(){return zf(this,this.jf)};v.Ed=function(){return zf(this,this.Uc)};v.Dd=function(){return zf(this,this.Me)};function zf(a,b){return a.ef==p?b:a.Uc+Math.round((b-a.Uc)/a.ef)*a.ef};function Af(a){this.Ma=a||be();this.qc=new yf;H(this.qc,"change",this.ih,q,this)}B(Af,wf);var Bf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};v=Af.prototype;v.kc=function(){this.Ia=this.Cd().kc("div","progress-bar-thumb");var a=Bf[this.ng];this.m=this.Cd().kc("div",a,this.Ia);Cf(this);this.g().setAttribute("aria-valuemin",this.Ed());this.g().setAttribute("aria-valuemax",this.Dd())};
v.Bd=function(){Af.h.Bd.call(this);G&&7>db&&H(this.g(),"resize",this.Vd,q,this);this.Vd();var a=this.g();a.setAttribute("role","progressbar");a.wj="progressbar";this.g().setAttribute("aria-live","polite")};v.Pc=function(){Af.h.Pc.call(this);Df(this)};function Df(a){G&&7>db&&vc(a.g(),"resize",a.Vd,q,a)}v.Fd=function(){return this.qc.Fd()};v.Td=function(a){this.qc.Td(a);this.g()&&Cf(this)};function Cf(a){var b=a.Fd();a.g().setAttribute("aria-valuenow",b)}v.Ed=function(){return this.qc.Ed()};v.Dd=function(){return this.qc.Dd()};
v.ng="horizontal";v.ih=function(){this.Vd();this.dispatchEvent("change")};v.Vd=function(){if(this.Ia){var a=this.Ed(),b=this.Dd(),a=(this.Fd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.ng?G&&7>db?(this.Ia.style.top=0,this.Ia.style.height="100%",b=this.Ia.offsetHeight,a=Math.round(a*b),this.Ia.style.top=b-a+"px",this.Ia.style.height=a+"px"):(this.Ia.style.top=100-b+"%",this.Ia.style.height=b+"%"):this.Ia.style.width=b+"%"}};v.I=function(){Df(this);Af.h.I.call(this);this.Ia=p;this.qc.Ea()};function Ef(a,b){x(a)||i(Error("No valid parent element."));x(b)||i(Error("Invalid initial value."));Af.call(this);this.e="progressbar";this.ua=a;this.gd=this.Ya=p;this.Ab=[];this.Ab=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Td(b);this.He()}B(Ef,Af);
Ef.prototype.He=function(){if("static"==this.ua.style.position||""==this.ua.style.position)this.ua.style.position="relative";var a=document.getElementsByTagName("head")[0],b=he("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Ab[0]),d=document.createTextNode(this.Ab[1]),e=document.createTextNode(this.Ab[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Ya=b;this.Zb(this.ua);a=this.g();a.style.position="absolute";a.style.top=(this.ua.clientHeight-
5)/2;a.style.left=(this.ua.clientWidth-100)/2;a.classList.add("xtk-progress-bar")};function Ff(a){var b=a.g().style.top,c=a.g().style.left;le(a.g());var d=new Ef(a.ua,100),e=d.g();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=m?e.firstElementChild:ne(e.firstChild)).classList.add("progress-bar-thumb-done");a.gd=d}Ef.prototype.Ke=function(){this.Ya&&le(this.Ya);this.g()&&le(this.g());this.gd&&le(this.gd.g());this.gd=this.Ya=p};var Gf=da.window;function Hf(a,b,c){ma(a)?c&&(a=wa(a,c)):a&&"function"==typeof a.handleEvent?a=wa(a.handleEvent,a):i(Error("Invalid listener argument"));return 2147483647<b?-1:Gf.setTimeout(a,b||0)};function If(){I.call(this);this.e="renderer";this.n=window.document.body;this.G=this.n.clientWidth;this.A=this.n.clientHeight;this.Eb=this.p=this.Z=p;this.Ta=new Ve(vd);this.sb=[];this.T=p;this.xf=this.fe=this.ld=q;this.a=this.La=p;this.O={PROGRESSBAR_ENABLED:n};window.console.log("XTK Release 4 -- 04/12/12 -- http://www.goXTK.com")}B(If,I);v=If.prototype;v.Mh=function(a){this.La&&this.La.Td(100*a.Df)};v.Ch=function(a){x(a)&&a instanceof ud&&this.Qa(a.V)};
v.Ve=function(a){(!x(a)||!(a instanceof Md))&&i(Error("Invalid hover event."))};v.Nh=function(){var a=ee(this.n);this.G=a.clientWidth;this.A=a.clientHeight;a=ee(this.Z);a.width=this.G;a.height=this.A;this instanceof Jf&&(this.a.viewport(0,0,this.G,this.A),this.p.zf=new Float32Array(Ze(this.p.of,this.Z.width/this.Z.height).M()));this.sc()};v.We=function(a){(!x(a)||!(a instanceof Ld))&&i(Error("Invalid scroll event."))};If.prototype.__defineGetter__("config",s("O"));
If.prototype.__defineGetter__("interactor",s("Eb"));If.prototype.__defineGetter__("camera",s("p"));If.prototype.__defineGetter__("loadingCompleted",s("fe"));If.prototype.__defineGetter__("container",s("n"));If.prototype.__defineSetter__("container",function(a){x(a)||i(Error("An ID to a valid container (<div>..) is required."));var b=a;la(b)&&(b=ee(a));na(b)&&1==b.nodeType||i(Error("Could not find the given container."));this.n=b});v=If.prototype;v.sc=function(){this.p.reset()};
function Kf(a){a.O.PROGRESSBAR_ENABLED&&a.La&&!a.lf&&(Ff(a.La),a.lf=Hf(function(){this.lf=p;this.La&&(this.La.Ke(),this.La=p);this.Zb()}.bind(a),700))}
v.ca=function(a){var b=he("canvas");this.n.appendChild(b);this.G=this.n.clientWidth;this.A=this.n.clientHeight;b.width=this.G;b.height=this.A;try{var c=b.getContext(a);c||i(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.n.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+"</p>";
i(Error(e))}this.T=new Je;H(this.T,Fd,this.Mh.bind(this));this.Z=b;this.a=c;b=new Ue(this.Z);"2d"==a&&(b=new se(this.Z));b.ca();H(b,Ed,this.sc.bind(this));H(b,Gd,this.Ve.bind(this));H(b,Dd,this.We.bind(this));this.Eb=b;b=new Ye(this.G,this.A);"2d"==a&&(b=new Xe(this.G,this.A));b.Se(this.Eb);this.p=b;H(window,"resize",this.Nh,q,this)};v.add=function(a){(a instanceof Te||a instanceof Re||a instanceof Pe)&&a.C();this.sb.push(a);this.Qa(a)};
v.Qa=function(a){(!this.Z||!this.a)&&i(Error("The renderer was not initialized properly."));x(a)||(window.console.log(a),i(Error("Illegal object.")));zc(a)||H(a,Dc,this.Ch.bind(this))};v.get=function(a){x(a)||i(Error("Invalid object id."));for(var b=this.Ta.r,c=b.length,d=0,d=0;d<c;d++)if(b[d].za==a)return b[d];return p};
v.Zb=function(){(!this.Z||!this.a)&&i(Error("The renderer was not initialized properly."));x(this.Bf)||(this.T.kd.xe(q)?(this.O.PROGRESSBAR_ENABLED&&!this.La&&(this.La=new Ef(this.n,3)),this.Bf=Hf(function(){this.Bf=p;this.Zb()}.bind(this),100)):(!this.fe&&!this.xf&&(this.xf=n,eval("this.onShowtime()"),this.fe=n),this.La?Kf(this):(window.Yc(this.Zb.bind(this,this.Z)),eval("this.onRender()"),this.xb(q,n))))};v.mg=ba();v.kg=ba();v.xb=ba();
v.Ad=function(){this.Ta.clear();delete this.Ta;this.sb.length=0;delete this.sb;delete this.T;this.T=p;delete this.p;this.p=p;delete this.Eb;this.Eb=p;delete this.a;this.a=p;le(this.Z);delete this.Z;this.Z=p};function Lf(){I.call(this);this.e="shaders";this.sd="";this.sd="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\nattribute float vertexScalar;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform bool useScalars;\nuniform bool scalarsReplaceMode;\nuniform float scalarsMin;\nuniform float scalarsMax;\nuniform vec3 scalarsMinColor;\nuniform vec3 scalarsMaxColor;\nuniform float scalarsMinThreshold;\nuniform float scalarsMaxThreshold;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  fVertexNormal = vertexNormal;\n  fDiscardNow = 0.0;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useScalars) {\n    float scalarValue = vertexScalar;\n    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n      if (scalarsReplaceMode) {\n        fragmentColor = objectColor;\n      } else {\n        fDiscardNow = 1.0;\n      }\n    } else {\n      if (scalarsReplaceMode) {\n        fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n      } else {\n        fragmentColor = vertexColor;\n      }\n    }\n  } else if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.jd="";this.jd="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform bool volumeTexture;\nuniform bool useLabelMapTexture;\nuniform sampler2D textureSampler;\nuniform sampler2D textureSampler2;\nuniform float objectOpacity;\nuniform float labelmapOpacity;\nuniform float volumeLowerThreshold;\nuniform float volumeUpperThreshold;\nuniform float volumeScalarMin;\nuniform float volumeScalarMax;\nuniform vec3 volumeScalarMinColor;\nuniform vec3 volumeScalarMaxColor;\nuniform float volumeWindowLow;\nuniform float volumeWindowHigh;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (fDiscardNow > 0.0) {\n   discard;\n }\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n   vec4 textureSum = texture1;\n   if (volumeTexture) {\n     float _windowLow = (volumeWindowLow / volumeScalarMax);\n     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n     vec3 fac = _maxrange - _minrange;\n     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n   }\n   if (useLabelMapTexture) {\n     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n     if (texture2.a > 0.0) {\n       if (labelmapOpacity < 1.0) {\n         textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n       } else {\n         textureSum = texture2;\n       }\n     }\n   }\n   if (volumeTexture) {\n     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n     if (texture1.r < _volumeLowerThreshold ||\n         texture1.r > _volumeUpperThreshold) {\n       discard;\n     };\n   };\n   gl_FragColor = textureSum;\n   gl_FragColor.a = objectOpacity;\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n     gl_FragColor = vec4(fragmentColor,1.0);\n     return;\n   }\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
B(Lf,I);
var Mf={ej:"vertexPosition",dj:"vertexNormal",cj:"vertexColor",gj:"vertexTexturePos",fj:"vertexScalar"},Nf={hj:"view",Ni:"perspective",Fi:"center",Mi:"objectTransform",Zi:"useObjectColor",Ki:"objectColor",aj:"useScalars",Vi:"scalarsReplaceMode",Si:"scalarsMin",Pi:"scalarsMax",Ti:"scalarsMinColor",Qi:"scalarsMaxColor",Ui:"scalarsMinThreshold",Ri:"scalarsMaxThreshold",Oi:"pointSize",Li:"objectOpacity",Ji:"normal",$i:"usePicking",bj:"useTexture",Yi:"useLabelMapTexture",Hi:"labelmapOpacity",Wi:"textureSampler",Xi:"textureSampler2",
ij:"volumeLowerThreshold",oj:"volumeUpperThreshold",lj:"volumeScalarMin",jj:"volumeScalarMax",mj:"volumeScalarMinColor",kj:"volumeScalarMaxColor",qj:"volumeWindowLow",pj:"volumeWindowHigh",nj:"volumeTexture"};
function Of(a){var b=Object.keys(Nf);Object.keys(Mf).every(function(a){a=Mf[a];return-1!=this.sd.search(a)||-1!=this.jd.search(a)}.bind(a))||i(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=Nf[a];return-1!=this.sd.search(a)||-1!=this.jd.search(a)}.bind(a))||i(Error("Could not find all uniforms in the shader sources."))};function Pf(a,b,c){x(a)||i(Error("Invalid GL Buffer."));x(b)||i(Error("Invalid number of items."));x(c)||i(Error("Invalid item size."));I.call(this);this.e="buffer";this.aa=a;this.jb=b;this.kb=c}B(Pf,I);function Qf(a,b,c,d,e,f,h,g){var j,k=c.offsetParent;if(k){var o="HTML"==k.tagName||"BODY"==k.tagName;if(!o||"static"!=df(k,"position"))j=jf(k),o||(j=Zc(j,new Xc(k.scrollLeft,k.scrollTop)))}k=jf(a);o=mf(a);k=new af(k.x,k.y,o.width,o.height);(o=hf(a))&&k.Zf(new af(o.left,o.top,o.right-o.left,o.bottom-o.top));var o=be(a),l=be(c);if(o.J!=l.J){var t=o.J.body,l=l.J.parentWindow||l.J.defaultView,r=new Xc(0,0),u=de(t)?de(t).parentWindow||de(t).defaultView:window,w=t;do{var C;if(u==l)C=jf(w);else{var E=w;
C=new Xc;if(1==E.nodeType)if(E.getBoundingClientRect)E=ff(E),C.x=E.left,C.y=E.top;else{var D=qe(be(E)),E=jf(E);C.x=E.x-D.x;C.y=E.y-D.y}else{var D=ma(E.hh),y=E;E.targetTouches?y=E.targetTouches[0]:D&&E.Na.targetTouches&&(y=E.Na.targetTouches[0]);C.x=y.clientX;C.y=y.clientY}}r.x+=C.x;r.y+=C.y}while(u&&u!=l&&(w=u.frameElement)&&(u=u.parent));t=Zc(r,jf(t));G&&!pe(o)&&(t=Zc(t,qe(o)));k.left+=t.x;k.top+=t.y}a=(b&4&&kf(a)?b^2:b)&-5;b=new Xc(a&2?k.left+k.width:k.left,a&1?k.top+k.height:k.top);j&&(b=Zc(b,
j));e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var F;if(h&&(F=hf(c))&&j)F.top-=j.y,F.right-=j.x,F.bottom-=j.y,F.left-=j.x;return Rf(b,c,d,f,F,h,g)}
function Rf(a,b,c,d,e,f,h){var a=a.f(),g=0,j=(c&4&&kf(b)?c^2:c)&-5,c=mf(b),h=h?h.f():c.f();if(d||0!=j)j&2?a.x-=h.width+(d?d.right:0):d&&(a.x+=d.left),j&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){g=a;d=0;if(65==(f&65)&&(g.x<e.left||g.x>=e.right))f&=-2;if(132==(f&132)&&(g.y<e.top||g.y>=e.bottom))f&=-5;g.x<e.left&&f&1&&(g.x=e.left,d|=1);g.x<e.left&&g.x+h.width>e.right&&f&16&&(h.width=Math.max(h.width-(g.x+h.width-e.right),0),d|=4);g.x+h.width>e.right&&f&1&&(g.x=Math.max(e.right-h.width,
e.left),d|=1);f&2&&(d|=(g.x<e.left?16:0)|(g.x+h.width>e.right?32:0));g.y<e.top&&f&4&&(g.y=e.top,d|=2);g.y>=e.top&&g.y+h.height>e.bottom&&f&32&&(h.height=Math.max(h.height-(g.y+h.height-e.bottom),0),d|=8);g.y+h.height>e.bottom&&f&4&&(g.y=Math.max(e.bottom-h.height,e.top),d|=2);f&8&&(d|=(g.y<e.top?64:0)|(g.y+h.height>e.bottom?128:0));g=d}else g=256;if(g&496)return g}f=a;e=Xa&&(Pa||cb)&&ob("1.9");f instanceof Xc?(a=f.x,f=f.y):(a=f,f=m);b.style.left=lf(a,e);b.style.top=lf(f,e);bd(c,h)||(a=pe(be(de(b))),
G&&(!a||!ob("8"))?(c=b.style,a?(G?(a=pf(b,cf(b,"paddingLeft")),e=pf(b,cf(b,"paddingRight")),f=pf(b,cf(b,"paddingTop")),d=pf(b,cf(b,"paddingBottom")),a=new $e(f,e,d,a)):(a=bf(b,"paddingLeft"),e=bf(b,"paddingRight"),f=bf(b,"paddingTop"),d=bf(b,"paddingBottom"),a=new $e(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),G?(e=rf(b,"borderLeft"),f=rf(b,"borderRight"),d=rf(b,"borderTop"),b=rf(b,"borderBottom"),b=new $e(d,f,b,e)):(e=bf(b,"borderLeftWidth"),f=bf(b,"borderRightWidth"),d=bf(b,"borderTopWidth"),
b=bf(b,"borderBottomWidth"),b=new $e(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=h.width-b.left-a.left-a.right-b.right,c.pixelHeight=h.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=h.width,c.pixelHeight=h.height)):(b=b.style,Xa?b.MozBoxSizing="border-box":Ya?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(h.width,0)+"px",b.height=Math.max(h.height,0)+"px"));return g};function Sf(){}Sf.prototype.Ha=ba();function Tf(a,b){this.element=a;this.If=b}B(Tf,Sf);Tf.prototype.Ha=function(a,b,c){Qf(this.element,this.If,a,b,m,c)};function Uf(a,b){this.Fa=new sf(this);this.af(a||p);b&&(this.tc=b)}B(Uf,Ic);v=Uf.prototype;v.m=p;v.Qg=n;v.Ef=p;v.ha=q;v.ki=q;v.Le=-1;v.kh=q;v.ah=n;v.tc="toggle_display";v.g=s("m");v.af=function(a){this.ha&&i(Error("Can not change this state of the popup while showing."));this.m=a};
function Vf(a,b){a.$c&&a.$c.stop();a.Sc&&a.Sc.stop();if(b){if(!a.ha&&a.Te()){a.m||i(Error("Caller must call setElement before trying to show the popup"));a.Ha();var c=de(a.m);a.kh&&uf(a.Fa,c,"keydown",a.Ah,n);if(a.Qg)if(uf(a.Fa,c,"mousedown",a.ig,n),G){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(h){break}c=f;d=c.activeElement}uf(a.Fa,c,"mousedown",a.ig,n);uf(a.Fa,c,"deactivate",a.hg)}else uf(a.Fa,c,"blur",a.hg);"toggle_display"==
a.tc?(a.m.style.visibility="visible",of(a.m,n)):"move_offscreen"==a.tc&&a.Ha();a.ha=n;a.$c?(uc(a.$c,"end",a.lg,q,a),a.$c.play()):a.lg()}}else Wf(a)}v.Ha=ea;function Wf(a,b){if(!a.ha||!a.dispatchEvent({type:"beforehide",target:b}))return q;a.Fa&&a.Fa.Qd();a.Sc?(uc(a.Sc,"end",xa(a.Hf,b),q,a),a.Sc.play()):a.Hf(b);return n}v.Hf=function(a){"toggle_display"==this.tc?this.ki?Hf(this.Xf,0,this):this.Xf():"move_offscreen"==this.tc&&(this.m.style.left="-200px",this.m.style.top="-200px");this.ha=q;this.Ue(a)};
v.Xf=function(){this.m.style.visibility="hidden";of(this.m,q)};v.Te=function(){return this.dispatchEvent("beforeshow")};v.lg=function(){this.Le=ya();this.dispatchEvent("show")};v.Ue=function(a){ya();this.dispatchEvent({type:"hide",target:a})};v.ig=function(a){a=a.target;!oe(this.m,a)&&(!this.Ef||oe(this.Ef,a))&&!(150>ya()-this.Le)&&Wf(this,a)};v.Ah=function(a){27==a.keyCode&&Wf(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
v.hg=function(a){if(this.ah){var b=de(this.m);if(G||Wa){if(a=b.activeElement,!a||oe(this.m,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>ya()-this.Le||Wf(this)}};v.I=function(){Uf.h.I.call(this);this.Fa.Ea();Zb(this.$c);Zb(this.Sc);delete this.m;delete this.Fa};function Xf(a,b){this.ye=a instanceof Xc?a:new Xc(a,b)}B(Xf,Sf);Xf.prototype.Ha=function(a,b,c,d){Qf(ef(a),0,a,b,this.ye,c,p,d)};function Yf(a,b){this.Th=4;this.Pd=b||m;Uf.call(this,a)}B(Yf,Uf);Yf.prototype.Ha=function(){if(this.Pd){var a=!this.ha&&"move_offscreen"!=this.tc,b=this.g();a&&(b.style.visibility="hidden",of(b,n));this.Pd.Ha(b,this.Th,this.uj);a&&of(b,q)}};function Zf(a,b,c){this.Ma=c||(a?be(ee(a)):be());Yf.call(this,this.Ma.kc("div",{style:"position:absolute;display:none;"}));this.Ae=new Xc(1,1);this.Sb=new Ub;a&&$f(this,a);if(b!=p)if(a=this.g(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(de(a).createTextNode(b))}}B(Zf,Yf);var ag=[];v=Zf.prototype;v.ga=p;v.className="goog-tooltip";
v.wg=500;v.jh=0;v.Cd=s("Ma");function $f(a,b){b=ee(b);a.Sb.add(b);H(b,"mouseover",a.Uf,q,a);H(b,"mouseout",a.Hd,q,a);H(b,"mousemove",a.Tf,q,a);H(b,"focus",a.Sf,q,a);H(b,"blur",a.Hd,q,a)}v.detach=function(a){if(a)a=ee(a),bg(this,a),this.Sb.remove(a);else{for(var b=this.Sb.Ub(),c=0;a=b[c];c++)bg(this,a);this.Sb.clear()}};function bg(a,b){vc(b,"mouseover",a.Uf,q,a);vc(b,"mouseout",a.Hd,q,a);vc(b,"mousemove",a.Tf,q,a);vc(b,"focus",a.Sf,q,a);vc(b,"blur",a.Hd,q,a)}
v.af=function(a){var b=this.g();b&&le(b);Zf.h.af.call(this,a);a&&(b=this.Ma.J.body,b.insertBefore(a,b.lastChild))};v.Te=function(){if(!Uf.prototype.Te.call(this))return q;if(this.anchor)for(var a,b=0;a=ag[b];b++)oe(a.g(),this.anchor)||Vf(a,q);0<=xb(ag,this)||ag.push(this);a=this.g();a.className=this.className;cg(this);H(a,"mouseover",this.Wf,q,this);H(a,"mouseout",this.Vf,q,this);dg(this);return n};
v.Ue=function(){Cb(ag,this);for(var a=this.g(),b,c=0;b=ag[c];c++)b.anchor&&oe(a,b.anchor)&&Vf(b,q);this.pg&&eg(this.pg);vc(a,"mouseover",this.Wf,q,this);vc(a,"mouseout",this.Vf,q,this);this.anchor=m;if(0==(this.$a?this.ha?4:1:this.nc?3:this.ha?2:0))this.Rd=q;Uf.prototype.Ue.call(this)};v.fg=function(a,b){this.anchor==a&&this.Sb.contains(this.anchor)&&(this.Rd||!this.vj?(Vf(this,q),this.ha||(this.anchor=a,this.Pd=b||fg(this,0)||m,this.ha&&this.Ha(),Vf(this,n))):this.anchor=m);this.$a=m};
v.xh=function(a){this.nc=m;a==this.anchor&&(this.ga==p||this.ga!=this.g()&&!this.Sb.contains(this.ga))&&(!this.Ff||!this.Ff.ga)&&Vf(this,q)};function gg(a,b){var c=qe(a.Ma);a.Ae.x=b.clientX+c.x;a.Ae.y=b.clientY+c.y}v.Uf=function(a){var b=hg(this,a.target);this.ga=b;cg(this);b!=this.anchor&&(this.anchor=b,this.$a||(this.$a=Hf(wa(this.fg,this,b,m),this.wg)),ig(this),gg(this,a))};function hg(a,b){try{for(;b&&!a.Sb.contains(b);)b=b.parentNode;return b}catch(c){return p}}
v.Tf=function(a){gg(this,a);this.Rd=n};v.Sf=function(a){this.ga=a=hg(this,a.target);this.Rd=n;if(this.anchor!=a){this.anchor=a;var b=fg(this,1);cg(this);this.$a||(this.$a=Hf(wa(this.fg,this,a,b),this.wg));ig(this)}};function fg(a,b){if(0==b){var c=a.Ae.f();return new jg(c)}return new kg(a.ga)}function ig(a){if(a.anchor)for(var b,c=0;b=ag[c];c++)oe(b.g(),a.anchor)&&(b.Ff=a,a.pg=b)}
v.Hd=function(a){var b=hg(this,a.target),c=hg(this,a.relatedTarget);b!=c&&(b==this.ga&&(this.ga=p),dg(this),this.Rd=q,this.ha&&(!a.relatedTarget||!oe(this.g(),a.relatedTarget))?eg(this):this.anchor=m)};v.Wf=function(){var a=this.g();this.ga!=a&&(cg(this),this.ga=a)};v.Vf=function(a){var b=this.g();if(this.ga==b&&(!a.relatedTarget||!oe(b,a.relatedTarget)))this.ga=p,eg(this)};function dg(a){a.$a&&(Gf.clearTimeout(a.$a),a.$a=m)}
function eg(a){if(2==(a.$a?a.ha?4:1:a.nc?3:a.ha?2:0))a.nc=Hf(wa(a.xh,a,a.anchor),a.jh)}function cg(a){a.nc&&(Gf.clearTimeout(a.nc),a.nc=m)}v.I=function(){Vf(this,q);dg(this);this.detach();this.g()&&le(this.g());this.ga=p;delete this.Ma;Zf.h.I.call(this)};function jg(a,b){Xf.call(this,a,b)}B(jg,Xf);jg.prototype.Ha=function(a,b,c){b=ef(a);b=hf(b);c=c?new $e(c.top+10,c.right,c.bottom,c.left+10):new $e(10,0,0,10);Rf(this.ye,a,4,c,b,9)&496&&Rf(this.ye,a,4,c,b,5)};function kg(a){Tf.call(this,a,3)}
B(kg,Tf);kg.prototype.Ha=function(a,b,c){var d=new Xc(10,0);Qf(this.element,this.If,a,b,d,c,9)&496&&Qf(this.element,2,a,1,d,c,5)};function lg(a,b,c,d){x(a)||i(Error("No valid parent element."));(!z(b)||!z(c))&&i(Error("Invalid coordinates."));(!x(d)||!(d instanceof W))&&i(Error("Invalid interactor."));Zf.call(this);this.e="caption";this.ua=a;this.ud=b;this.vd=c;this.Eb=d;this.Ya=p;this.Ab=[];this.Ab=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];uc(d,Hd,this.Ke.bind(this));this.He()}B(lg,Zf);
lg.prototype.He=function(){if("static"==this.ua.style.position||""==this.ua.style.position)this.ua.style.position="relative";var a=document.getElementsByTagName("head")[0],b=he("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Ab[0]);a.appendChild(b);b.appendChild(c);this.Ya=b;this.Pd=new Xf(this.ud,this.vd)||m;this.ha&&this.Ha();Vf(this,n);$f(this,this.ua);this.g().classList.add("x-tooltip")};
lg.prototype.Ke=function(){Vf(this,q);this.Ya&&le(this.Ya);this.g()&&le(this.g());this.Ya=p};function Jf(){If.call(this);this.e="renderer3D";this.Cc=this.Fc=this.Bc=this.Ec=this.Ac=this.Dc=this.le=this.me=p;this.i=[0,0,0];this.Af=p;this.Xd=new Qb;this.Jc=new Qb;this.Kc=new Qb;this.ie=new Qb;this.fd=new Qb;this.pd=new Qb;this.qd=new Qb;this.rd=new Qb;this.O={PROGRESSBAR_ENABLED:n,PICKING_ENABLED:n,ORDERING_ENABLED:n,STATISTICS_ENABLED:q}}B(Jf,If);Jf.prototype.__defineGetter__("config",s("O"));v=Jf.prototype;v.ai=function(){this.Cc=this.Fc=this.Bc=this.Ec=this.Ac=this.Dc=p;this.i=[0,0,0]};
v.Ve=function(a){Jf.h.Ve.call(this,a);var b=a.ud,a=a.vd,c=this.get(this.tg(b,a));if(c&&(c=c.bc))(new lg(this.n,this.n.offsetLeft+b+10,this.n.offsetTop+a+10,this.Eb)).g().innerHTML=c};
v.ca=function(){Jf.h.ca.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.G,this.A),this.a.clearColor(0,0,0,0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.O.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,
c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.G,this.A,0,this.a.RGB,this.a.UNSIGNED_BYTE,p);this.a.bindFramebuffer(this.a.FRAMEBUFFER,a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.G,this.A);this.a.bindRenderbuffer(this.a.RENDERBUFFER,p);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,
b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,p);this.Af=a}}catch(d){i(Error("Exception while accessing GL Context!\n"+d))}ng(this)};
function ng(a){var b=new Lf;(!x(a.Z)||!x(a.a)||!x(a.p))&&i(Error("Renderer was not initialized properly."));(!x(b)||!(b instanceof Lf))&&i(Error("Could not add shaders."));Of(b);var c=a.a.createShader(a.a.FRAGMENT_SHADER),d=a.a.createShader(a.a.VERTEX_SHADER);a.a.shaderSource(c,b.jd);a.a.shaderSource(d,b.sd);a.a.compileShader(c);a.a.compileShader(d);a.a.getShaderParameter(c,a.a.COMPILE_STATUS)||i(Error("Fragement Shader compilation failed!\n"+a.a.getShaderInfoLog(c)));a.a.getShaderParameter(d,a.a.COMPILE_STATUS)||
i(Error("Vertex Shader compilation failed!\n"+a.a.getShaderInfoLog(d)));var e=a.a.createProgram();a.a.attachShader(e,d);a.a.attachShader(e,c);a.a.linkProgram(e);a.a.getProgramParameter(e,a.a.LINK_STATUS)||i(Error("Could not create shader program!\n"+a.a.getShaderInfoLog(c)+"\n"+a.a.getShaderInfoLog(d)+"\n"+a.a.getProgramInfoLog(e)));a.a.useProgram(e);a.le=e;Object.keys(Mf).forEach(function(a){a=Mf[a];this.Xd.set(a,this.a.getAttribLocation(this.le,a));this.a.enableVertexAttribArray(this.Xd.get(a))}.bind(a));
Object.keys(Nf).forEach(function(a){a=Nf[a];this.Jc.set(a,this.a.getUniformLocation(this.le,a))}.bind(a));a.me=b}
v.Qa=function(a){Jf.h.Qa.call(this,a);var b=q;this.get(a.za)&&(b=n);var c=a.za,d=a.j,e=a.k,f=a.ya,h=a.ba,g=a.t,j=a.Ob,k=a.S,o=a.w,l=a.q;if(x(o)&&x(o.t)&&o.t.c)this.Qa(o);else if(x(o)&&o.c&&this.Qa(o),x(k)&&x(k.t)&&k.t.c)this.T.load(k,a);else if(x(h)&&x(h.t)&&h.t.c)this.T.load(h,a);else if(x(g)&&g.c)this.T.load(a,a);else if(x(l)&&x(l.t)&&l.t.c)this.T.load(l,a);else{if(0<a.d.length){g=a.d;k=g.length;for(o=o=0;o<k;o++)this.Qa(g[o])}if(0==d.count)a.c=q;else{for(g=0;this.ld;)g++,window.console.log("Possible thread lock avoided: "+
g);this.ld=n;k=a instanceof te&&a.Za instanceof we;b&&x(h)&&h.c&&(g=this.qd.get(c),x(g)&&this.a.isBuffer(g.aa)&&this.a.deleteBuffer(g.aa));g=p;x(h)&&(!b||h.c?(g=a.Nb,x(g)||i(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),o=q,h.qb&&(o=n),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,o),o=this.a.createTexture(),o.mh=h.qf,this.rd.set(h.za,o),this.a.bindTexture(this.a.TEXTURE_2D,o),h.qb?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,h.od,
h.nd,0,this.a.RGBA,this.a.UNSIGNED_BYTE,h.qb):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,o.mh),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),k?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,
this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,p),o=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,o),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(g),this.a.STATIC_DRAW),g=new Pf(o,g.length,2),h.c=q):g=this.qd.get(c));Ke(this.T,0.1);if(k)this.ld=q,Ke(this.T,0.9);else{if(!b||d.c||j.c){k=j.l;h=k.Ga(new J(d.Ib,d.Jb,d.Kb));k=k.Ga(new J(d.Fb,d.Gb,d.Hb));if(this.Dc===p||
h.x<this.Dc)this.Dc=h.x;if(this.Ac===p||k.x>this.Ac)this.Ac=k.x;if(this.Ec===p||h.y<this.Ec)this.Ec=h.y;if(this.Bc===p||k.y>this.Bc)this.Bc=k.y;if(this.Fc===p||h.b<this.Fc)this.Fc=h.b;if(this.Cc===p||k.b>this.Cc)this.Cc=k.b;this.i=[(this.Dc+this.Ac)/2,(this.Ec+this.Bc)/2,(this.Fc+this.Cc)/2];j.c=q}b&&d.c&&(j=this.Kc.get(c),x(j)&&this.a.isBuffer(j.aa)&&this.a.deleteBuffer(j.aa));j=p;!b||d.c?(j=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,j),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(d.W),
this.a.STATIC_DRAW),j=new Pf(j,d.count,3),d.c=q):j=this.Kc.get(c);Ke(this.T,0.3);b&&e.c&&(h=this.Kc.get(c),x(h)&&this.a.isBuffer(h.aa)&&this.a.deleteBuffer(h.aa));h=p;!b||e.c?(h=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,h),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(e.W),this.a.STATIC_DRAW),h=new Pf(h,e.count,3),e.c=q):h=this.ie.get(c);Ke(this.T,0.3);b&&f.c&&(e=this.fd.get(c),x(e)&&this.a.isBuffer(e.aa)&&this.a.deleteBuffer(e.aa));e=p;0<f.length&&(!b||f.c?(f.length!=d.length&&
i(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f.W),this.a.STATIC_DRAW),e=new Pf(e,f.count,3),f.c=q):e=this.fd.get(c));Ke(this.T,0.2);b&&l&&l.c&&(f=this.pd.get(c),x(f)&&this.a.isBuffer(f.aa)&&this.a.deleteBuffer(f.aa));f=p;l&&(f=l.vc,!b||l.c?(f.length!=d.length&&i(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,
d),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f),this.a.STATIC_DRAW),f=new Pf(d,f.length,3),l.c=q):f=this.pd.get(c));Ke(this.T,0.1);b||this.Ta.add(a);this.Kc.set(c,j);this.ie.set(c,h);this.fd.set(c,e);this.qd.set(c,g);this.pd.set(c,f);this.ld=a.c=q}}}};function og(a,b){var c=b.j.ed,c=a.p.view.Ga(b.Ob.l.Ga(new J(c[0],c[1],c[2]))),c=Uc(a.p.ka,c);return Math.round(1E3*c)/1E3}
v.tg=function(a,b){if(this.O.PICKING_ENABLED){this.xb(n,q);var c=new Uint8Array(4);this.a.readPixels(a,this.A-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
v.xb=function(a,b){Jf.h.xb.call(this,a,b);var c=this.Ta.r,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.Af):this.a.bindFramebuffer(this.a.FRAMEBUFFER,p);this.a.viewport(0,0,this.G,this.A);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.p.zf,f=this.p.Cb;this.a.uniformMatrix4fv(this.Jc.get("perspective"),q,e);this.a.uniformMatrix4fv(this.Jc.get("view"),q,f);e=this.i;this.a.uniform3f(this.Jc.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.sb.length;for(e=0;e<f;++e){var h=this.sb[e];if(h instanceof Y){var g=new J(1,0,0),g=this.p.u.Ga(g),j=Uc(this.p.ka,g),g=new J(-1,0,0),g=this.p.u.Ga(g),k=Uc(this.p.ka,g),g=new J(0,1,0),g=this.p.u.Ga(g),o=Uc(this.p.ka,g),g=new J(0,-1,0),g=this.p.u.Ga(g),l=Uc(this.p.ka,g),g=new J(0,0,1),g=this.p.u.Ga(g),t=Uc(this.p.ka,g),g=new J(0,0,-1),g=this.p.u.Ga(g),g=Uc(this.p.ka,g),r=Math.max(j,o,t,k,l,g);r==j||r==k?ve(h,0):r==o||r==l?ve(h,1):(r==t||r==g)&&ve(h,2)}}if(this.O.ORDERING_ENABLED){j=q;f=this.sb;
h=f.length-1;do if(e=f[h],e instanceof Y&&e.Ca){k=e.tb;j=e.Va.d;1==k?j=e.Wa.d:2==k&&(j=e.Xa.d);k=j.length;o=j[0];o.P=og(this,o);o.Q=e.Q;l=j[k-1];l.P=og(this,l);l.Q=e.Q;l=Math.round(1E3*((l.P-o.P)/k))/1E3;for(t=t=1;t<k-1;t++)g=Math.round(1E3*(o.P+t*l))/1E3,j[t].P=g,j[t].Q=e.Q;j=n}while(h--);f=this.Ta.r;h=f.length-1;do if(e=f[h],e.Ba&&!(1==e.Q||e instanceof te))e.P=og(this,e),j=n;while(h--);j&&this.Ta.sort()}if(f=!a&&x(b)&&b&&this.O.STATISTICS_ENABLED)var u=0,w=0,C=0,E=0;var e=this.Xd,h=e.get("vertexPosition"),
j=e.get("vertexNormal"),k=e.get("vertexColor"),o=e.get("vertexTexturePos"),l=e.get("vertexScalar"),e=this.Jc,t=e.get("usePicking"),g=e.get("useObjectColor"),r=e.get("objectColor"),D=e.get("useScalars"),y=e.get("scalarsReplaceMode"),F=e.get("scalarsMin"),N=e.get("scalarsMax"),P=e.get("scalarsMinColor"),$=e.get("scalarsMaxColor"),ka=e.get("scalarsMinThreshold"),aa=e.get("scalarsMaxThreshold"),sa=e.get("objectOpacity"),qa=e.get("labelmapOpacity"),ja=e.get("useTexture"),O=e.get("useLabelMapTexture"),
Ac=e.get("textureSampler"),fd=e.get("textureSampler2"),mb=e.get("volumeLowerThreshold"),gd=e.get("volumeUpperThreshold"),Fb=e.get("volumeScalarMin"),gb=e.get("volumeScalarMax"),Db=e.get("volumeWindowLow"),Cc=e.get("volumeWindowHigh"),za=e.get("volumeScalarMinColor"),lb=e.get("volumeScalarMaxColor"),Bc=e.get("volumeTexture"),ed=e.get("objectTransform"),mg=e.get("pointSize"),e=d;do{var Q=c[d-e];if(Q){var R=p;Q instanceof te&&Q.Za&&(R=Q.Za);if(Q.Ba&&(!R||R.Ba)){var ra=Q.za,Qa=Q.zc,Aa=this.Kc.get(ra),
$a=this.ie.get(ra),Wd=this.fd.get(ra),Eb=this.pd.get(ra),me=this.qd.get(ra);this.a.bindBuffer(this.a.ARRAY_BUFFER,Aa.aa);this.a.vertexAttribPointer(h,Aa.kb,this.a.FLOAT,q,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,$a.aa);this.a.vertexAttribPointer(j,$a.kb,this.a.FLOAT,q,0,0);a?this.a.uniform1i(t,n):this.a.uniform1i(t,q);Wd&&!a&&!Qa?(this.a.uniform1i(g,q),this.a.bindBuffer(this.a.ARRAY_BUFFER,Wd.aa),this.a.vertexAttribPointer(k,Wd.kb,this.a.FLOAT,q,0,0)):($a=1,Qa&&!a&&($a=0),this.a.uniform1i(g,$a),
$a=Q.zb,a&&($a=[Math.floor(ra%65025%255)/255,Math.floor(ra%65025/255)/255,Math.floor(ra/65025)/255]),this.a.uniform3f(r,parseFloat($a[0]),parseFloat($a[1]),parseFloat($a[2])),this.a.vertexAttribPointer(k,Aa.kb,this.a.FLOAT,q,0,0));Eb&&!a&&!Qa?(this.a.uniform1i(D,n),this.a.uniform1i(y,Q.q.Cf),ra=Q.q.nb,Qa=Q.q.lb,this.a.uniform3f(P,parseFloat(ra[0]),parseFloat(ra[1]),parseFloat(ra[2])),this.a.uniform3f($,parseFloat(Qa[0]),parseFloat(Qa[1]),parseFloat(Qa[2])),this.a.uniform1f(ka,parseFloat(Q.q.da)),
this.a.uniform1f(aa,parseFloat(Q.q.fa)),this.a.uniform1f(F,parseFloat(Q.q.Ka)),this.a.uniform1f(N,parseFloat(Q.q.Aa)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Eb.aa),this.a.vertexAttribPointer(l,Eb.kb,this.a.FLOAT,q,0,0)):(this.a.uniform1i(D,q),this.a.vertexAttribPointer(l,Aa.kb,this.a.FLOAT,q,0,0));this.a.uniform1f(sa,parseFloat(Q.Q));Q.ba&&me&&!a?(this.a.uniform1i(ja,n),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.rd.get(Q.ba.za)),this.a.uniform1i(Ac,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,
me.aa),this.a.vertexAttribPointer(o,me.kb,this.a.FLOAT,q,0,0),this.a.uniform1i(Bc,q)):(this.a.uniform1i(ja,q),this.a.vertexAttribPointer(o,Aa.kb,this.a.FLOAT,q,0,0));R&&(this.a.uniform1i(Bc,n),this.a.uniform1f(mb,R.da),this.a.uniform1f(gd,R.fa),this.a.uniform1f(Fb,R.Ka),this.a.uniform1f(gb,R.Aa),ra=R.nb,Qa=R.lb,this.a.uniform3f(za,parseFloat(ra[0]),parseFloat(ra[1]),parseFloat(ra[2])),this.a.uniform3f(lb,parseFloat(Qa[0]),parseFloat(Qa[1]),parseFloat(Qa[2])),this.a.uniform1f(Db,R.Qb),this.a.uniform1f(Cc,
R.Pb),Eb=R.w,this.a.uniform1i(O,q),R.Ca?this.a.uniform1f(sa,parseFloat(R.Q)):Eb&&Eb.Ba&&(R=Q.w.za,this.a.uniform1i(O,n),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.rd.get(R)),this.a.uniform1i(fd,1),this.a.uniform1f(qa,Eb.Q)));this.a.uniformMatrix4fv(ed,q,Q.Ob.Ra);R=1;"POINTS"==Q.la&&(R=Q.Hc);this.a.uniform1f(mg,R);R=-1;Q.la==rd?(R=this.a.TRIANGLES,f&&(w+=Aa.jb/3)):"LINES"==Q.la?(this.a.lineWidth(Q.fc),R=this.a.LINES,f&&(C+=Aa.jb/2)):"POINTS"==Q.la?(R=this.a.POINTS,
f&&(E+=Aa.jb)):"TRIANGLE_STRIPS"==Q.la?(R=this.a.TRIANGLE_STRIP,f&&(w+=Aa.jb/3)):"POLYGONS"==Q.la&&(R=0==Aa.jb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(w+=Aa.jb/3));f&&(u+=Aa.jb);this.a.drawArrays(R,0,Aa.jb)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+u+" | ")+("Triangles: "+Math.round(w)+" | "),c=c+("Lines: "+C+" | ")+("Points: "+E+" | ")+("Textures: "+this.rd.ma()),window.console.log(c))}};
v.Ad=function(){this.me=p;delete this.me;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);Jf.h.Ad.call(this)};A("X.renderer3D",Jf);A("X.renderer3D.prototype.init",Jf.prototype.ca);A("X.renderer3D.prototype.add",Jf.prototype.add);A("X.renderer3D.prototype.onShowtime",Jf.prototype.mg);A("X.renderer3D.prototype.onRender",Jf.prototype.kg);A("X.renderer3D.prototype.get",Jf.prototype.get);A("X.renderer3D.prototype.render",Jf.prototype.Zb);A("X.renderer3D.prototype.destroy",Jf.prototype.Ad);
A("X.renderer3D.prototype.resetBoundingBox",Jf.prototype.ai);A("X.renderer3D.prototype.resetViewAndRender",Jf.prototype.sc);A("X.renderer3D.prototype.pick",Jf.prototype.tg);function Z(){If.call(this);this.e="renderer2D";this.rf=this.ae=this.pf=this.$d=this.Ua=p;this.oe=this.pe=0}B(Z,If);Z.prototype.Ph=ba();Z.prototype.We=function(a){Z.h.We.call(this,a);var b=this.sb[0];if(b){var c=this.Ua;b["index"+c]=a.F?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};Z.prototype.__defineGetter__("orientation",s("Ua"));Z.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&"Y"!=a&&"Z"!=a&&i(Error("Invalid orientation."));this.Ua=a});
Z.prototype.ca=function(){this.Ua||i(Error("No 2D orientation set."));Z.h.ca.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.Z.width,this.Z.height);this.$d=he("canvas");this.ae=he("canvas")};Z.prototype.sc=function(){Z.h.sc.call(this);pg(this)};
Z.prototype.Qa=function(a){Z.h.Qa.call(this,a);var b=q;this.get(a.za)&&(b=n);var c=a.t,d=a.w,e=a.S;if(x(d)&&x(d.t)&&d.t.c)this.Qa(d);else if(x(e)&&x(e.t)&&e.t.c)this.T.load(e,a);else if(x(c)&&c.c)this.T.load(a,a);else{d=c=0;e=a.$;"X"==this.Ua?(this.Mb=a.Va.d,c=e[2],d=e[1]):"Y"==this.Ua?(this.Mb=a.Wa.d,c=e[0],d=e[2]):"Z"==this.Ua&&(this.Mb=a.Xa.d,c=e[0],d=e[1]);"X"==this.Ua&&(e=d,d=c,c=e);this.pe=c;this.oe=d;e=this.$d;e.width=c;e.height=d;var f=this.ae;f.width=c;f.height=d;this.pf=e.getContext("2d");
this.rf=f.getContext("2d");b||(this.Ta.add(a),pg(this))}};function pg(a){var b=Math.min(a.G/a.pe,a.A/a.oe);K(a.p.u,2,3,10*b-10)}
Z.prototype.xb=function(a,b){Z.h.xb.call(this,a,b);if(0!=this.Ta.r.length){var c=this.G,d=this.A,e=this.p.u;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.N(0,3),h=-1*e.N(1,3),g=Math.max(1+e.N(2,3)/10,0.6);this.a.setTransform(g,0,0,g,f,h);var e=this.sb[0],j=this.Mb[parseInt(e["index"+this.Ua],10)],k=j.ba.qb,j=j.w,o=p;j&&(o=j.qb);var l=this.pe,t=this.oe,c=1/(2*g)*(c-l*g)+f,d=1/(2*g)*(d-t*g)+h,h=this.pf,f=this.rf,g=h.getImageData(0,0,l,t),l=f.getImageData(0,0,l,t),t=g.data,
r=l.data,u=t.length,w=e.Aa,C=e.da,E=e.fa,D=0;do{var y=[0,0,0,0],F=[0,0,0,0],N=k[D]/255*w,P=k[D],$=e.Qb/w,P=(P/255-$)/(e.Pb/w-$),P=255*P;N>=C&&N<=E&&(y=new J(e.nb[0],e.nb[1],e.nb[2]),y=(new J(e.lb[0],e.lb[1],e.lb[2])).scale(P).add(y.scale(255-P)),y=[Math.floor(y.x),Math.floor(y.y),Math.floor(y.b),255],j&&(F=[o[D],o[D+1],o[D+2],o[D+3]]));P=u-1-D;t[P-3]=y[0];t[P-2]=y[1];t[P-1]=y[2];t[P]=y[3];r[P-3]=F[0];r[P-2]=F[1];r[P-1]=F[2];r[P]=F[3];D+=4}while(D<u);h.putImageData(g,0,0);f.putImageData(l,0,0);this.a.globalAlpha=
1;this.a.drawImage(this.$d,c,d);j&&e.w.Ba&&(this.a.globalAlpha=e.w.Q,this.a.drawImage(this.ae,c,d))}};A("X.renderer2D",Z);A("X.renderer2D.prototype.init",Z.prototype.ca);A("X.renderer2D.prototype.add",Z.prototype.add);A("X.renderer2D.prototype.onShowtime",Z.prototype.mg);A("X.renderer2D.prototype.onRender",Z.prototype.kg);A("X.renderer2D.prototype.onScroll",Z.prototype.Ph);A("X.renderer2D.prototype.get",Z.prototype.get);A("X.renderer2D.prototype.resetViewAndRender",Z.prototype.sc);
A("X.renderer2D.prototype.render",Z.prototype.Zb);A("X.renderer2D.prototype.destroy",Z.prototype.Ad);function qg(){S.call(this);this.e="fibers";Da(this,new Rc)}B(qg,S);A("X.fibers",qg);function rg(){S.call(this);this.e="mesh";Da(this,new Rc)}B(rg,S);A("X.mesh",rg);
