/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function i(a){throw a;}var m=void 0,o=!0,r=null,s=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var w,ca=this;function da(){}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return a!==m}function x(a){return a!=r}function ga(a){return"array"==ea(a)}function ha(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"string"==typeof a}function z(a){return"number"==typeof a}function la(a){return"function"==ea(a)}function ma(a){a=ea(a);return"object"==a||"array"==a||"function"==a}function na(a){return a[ra]||(a[ra]=++sa)}
var ra="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}function ua(a,b,c){a||i(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function va(a,b,c){va=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ta:ua;return va.apply(r,arguments)}function wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var xa=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=ca;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&fa(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function F(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function Aa(a,b,c){this.pa=this.oa=this.na=0;3==arguments.length?(this.na=Number(a),this.oa=Number(b),this.pa=Number(c)):a instanceof Aa?(this.na=Number(a.x()),this.oa=Number(a.y()),this.pa=Number(a.b())):(this.na=Number(a[0]),this.oa=Number(a[1]),this.pa=Number(a[2]))}
Aa.prototype={f:function(){return new Aa(this.na,this.oa,this.pa)},Ce:function(){return new Aa(-this.na,-this.oa,-this.pa)},hc:function(a){return new Aa(this.na+a.x(),this.oa+a.y(),this.pa+a.b())},Kc:function(a){return new Aa(this.na-a.x(),this.oa-a.y(),this.pa-a.b())},rb:function(a){return new Aa(this.na*a,this.oa*a,this.pa*a)},Ag:function(a){return new Aa(this.na/a,this.oa/a,this.pa/a)},ec:function(a){return this.na*a.x()+this.oa*a.y()+this.pa*a.b()},Jf:function(a,b){return this.hc(a.Kc(this).rb(b))},
length:function(){return Math.sqrt(this.ec(this))},Rc:function(){return this.Ag(this.length())},oe:function(a){return new Aa(this.oa*a.b()-this.pa*a.y(),this.pa*a.x()-this.na*a.b(),this.na*a.y()-this.oa*a.x())},x:t("na"),y:t("oa"),b:t("pa")};var Ba=Ba||{};Ba.Eh=o;window["X.counter"]=new function(){this.rg=0;this.Bh=function(){return this.rg++}};function Ca(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&i(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.Nc;++c)window.Nc=window[b[c]+"RequestAnimationFrame"],window.je=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.Nc||(window.Nc=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.je||(window.je=function(a){clearTimeout(a)})})();A("Function.prototype.bind",Function.prototype.bind);A("window.requestAnimationFrame",window.Nc);
A("window.cancelAnimationFrame",window.je);function Da(a){if(!Ea.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Fa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ga,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ha,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ia,"&quot;"));return a}var Fa=/&/g,Ga=/</g,Ha=/>/g,Ia=/\"/g,Ea=/[&<>\"]/;var Ja,Ka,La,Ma,Na,Oa,Qa;function Ra(){return ca.navigator?ca.navigator.userAgent:r}function Sa(){return ca.navigator}Na=Ma=La=Ka=Ja=s;var Ta;if(Ta=Ra()){var Ua=Sa();Ja=0==Ta.indexOf("Opera");Ka=!Ja&&-1!=Ta.indexOf("MSIE");Ma=(La=!Ja&&-1!=Ta.indexOf("WebKit"))&&-1!=Ta.indexOf("Mobile");Na=!Ja&&!La&&"Gecko"==Ua.product}var Va=Ja,G=Ka,Wa=Na,Xa=La,Ya=Ma,$a,ab=Sa();$a=ab&&ab.platform||"";Oa=-1!=$a.indexOf("Mac");Qa=-1!=$a.indexOf("Win");var bb=!!Sa()&&-1!=(Sa().appVersion||"").indexOf("X11"),cb;
a:{var db="",eb;if(Va&&ca.opera)var gb=ca.opera.version,db="function"==typeof gb?gb():gb;else if(Wa?eb=/rv\:([^\);]+)(\)|;)/:G?eb=/MSIE\s+([^\);]+)(\)|;)/:Xa&&(eb=/WebKit\/(\S+)/),eb)var hb=eb.exec(Ra()),db=hb?hb[1]:"";if(G){var ib,jb=ca.document;ib=jb?jb.documentMode:m;if(ib>parseFloat(db)){cb=""+ib;break a}}cb=db}var mb={};
function nb(a){var b;if(!(b=mb[a])){b=0;for(var c=(""+cb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(g)||["","",""],n=k.exec(h)||["","",""];if(0==l[0].length&&0==n[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==n[1].length?0:parseInt(n[1],10))?-1:(0==l[1].length?0:parseInt(l[1],
10))>(0==n[1].length?0:parseInt(n[1],10))?1:0)||((0==l[2].length)<(0==n[2].length)?-1:(0==l[2].length)>(0==n[2].length)?1:0)||(l[2]<n[2]?-1:l[2]>n[2]?1:0)}while(0==b)}b=mb[a]=0<=b}return b}var ob={};function pb(a){return ob[a]||(ob[a]=G&&document.documentMode&&document.documentMode>=a)};function qb(a,b){for(var c in a)b.call(m,a[c],c,a)}function rb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function sb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var tb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function ub(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<tb.length;f++)c=tb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var vb=Array.prototype,wb=vb.indexOf?function(a,b,c){return vb.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(ka(a))return!ka(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},xb=vb.forEach?function(a,b,c){vb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},yb=vb.map?function(a,b,c){return vb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
ka(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},zb=vb.some?function(a,b,c){return vb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return o;return s},Ab=vb.every?function(a,b,c){return vb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ka(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return s;return o};function Eb(a,b){var c=wb(a,b);0<=c&&vb.splice.call(a,c,1)}
function Fb(a){return vb.concat.apply(vb,arguments)}function Gb(a){if(ga(a))return Fb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Hb(a,b,c){return 2>=arguments.length?vb.slice.call(a,b):vb.slice.call(a,b,c)};function Ib(a){if("function"==typeof a.ja)a=a.ja();else if(ha(a)||ka(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Jb(a){if("function"==typeof a.Nb)return a.Nb();if(ka(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return rb(a)}
function Kb(a,b){if("function"==typeof a.every)return a.every(b,m);if(ha(a)||ka(a))return Ab(a,b,m);var c;if("function"==typeof a.Gc)c=a.Gc();else if("function"!=typeof a.Nb)if(ha(a)||ka(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=sb(a);else c=m;for(var d=Jb(a),e=d.length,f=0;f<e;f++)if(!b.call(m,d[f],c&&c[f],a))return s;return o};var Lb="StopIteration"in ca?ca.StopIteration:Error("StopIteration");function Mb(){}Mb.prototype.next=function(){i(Lb)};Mb.prototype.mc=function(){return this};function Nb(a){if(a instanceof Mb)return a;if("function"==typeof a.mc)return a.mc(s);if(ha(a)){var b=0,c=new Mb;c.next=function(){for(;;){b>=a.length&&i(Lb);if(b in a)return a[b++];b++}};return c}i(Error("Not implemented"))}
function Ob(a,b){if(ha(a))try{xb(a,b,m)}catch(c){c!==Lb&&i(c)}else{a=Nb(a);try{for(;;)b.call(m,a.next(),m,a)}catch(d){d!==Lb&&i(d)}}};function Pb(a,b){this.C={};this.q=[];var c=arguments.length;if(1<c){c%2&&i(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.he(a)}w=Pb.prototype;w.G=0;w.Sc=0;w.ja=t("G");w.Nb=function(){Qb(this);for(var a=[],b=0;b<this.q.length;b++)a.push(this.C[this.q[b]]);return a};w.Gc=function(){Qb(this);return this.q.concat()};w.me=function(a){for(var b=0;b<this.q.length;b++){var c=this.q[b];if(Rb(this.C,c)&&this.C[c]==a)return o}return s};
w.Cc=function(a,b){if(this===a)return o;if(this.G!=a.ja())return s;var c=b||Sb;Qb(this);for(var d,e=0;d=this.q[e];e++)if(!c(this.get(d),a.get(d)))return s;return o};function Sb(a,b){return a===b}w.clear=function(){this.C={};this.Sc=this.G=this.q.length=0};w.remove=function(a){return Rb(this.C,a)?(delete this.C[a],this.G--,this.Sc++,this.q.length>2*this.G&&Qb(this),o):s};
function Qb(a){if(a.G!=a.q.length){for(var b=0,c=0;b<a.q.length;){var d=a.q[b];Rb(a.C,d)&&(a.q[c++]=d);b++}a.q.length=c}if(a.G!=a.q.length){for(var e={},c=b=0;b<a.q.length;)d=a.q[b],Rb(e,d)||(a.q[c++]=d,e[d]=1),b++;a.q.length=c}}w.get=function(a,b){return Rb(this.C,a)?this.C[a]:b};w.set=function(a,b){Rb(this.C,a)||(this.G++,this.q.push(a),this.Sc++);this.C[a]=b};w.he=function(a){var b;a instanceof Pb?(b=a.Gc(),a=a.Nb()):(b=sb(a),a=rb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};w.f=function(){return new Pb(this)};
w.mc=function(a){Qb(this);var b=0,c=this.q,d=this.C,e=this.Sc,f=this,g=new Mb;g.next=function(){for(;;){e!=f.Sc&&i(Error("The map has changed since the iterator was created"));b>=c.length&&i(Lb);var g=c[b++];return a?g:d[g]}};return g};function Rb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Tb(a){this.C=new Pb;a&&this.he(a)}function Ub(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}w=Tb.prototype;w.ja=function(){return this.C.ja()};w.add=function(a){this.C.set(Ub(a),a)};w.he=function(a){for(var a=Jb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};w.Id=function(a){for(var a=Jb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};w.remove=function(a){return this.C.remove(Ub(a))};w.clear=function(){this.C.clear()};
w.contains=function(a){a=Ub(a);return Rb(this.C.C,a)};w.Hf=function(a){for(var b=new Tb,a=Jb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};w.Nb=function(){return this.C.Nb()};w.f=function(){return new Tb(this)};w.Cc=function(a){return this.ja()==Ib(a)&&Vb(this,a)};
function Vb(a,b){var c=Ib(b);if(a.ja()>c)return s;!(b instanceof Tb)&&5<c&&(b=new Tb(b));return Kb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.me)a=b.me(a);else if(ha(b)||ka(b))a=0<=wb(b,a);else a:{for(var c in b)if(b[c]==a){a=o;break a}a=s}return a})}w.mc=function(){return this.C.mc(s)};function Wb(){}Wb.prototype.vf=s;Wb.prototype.Aa=function(){this.vf||(this.vf=o,this.H())};Wb.prototype.H=function(){this.zg&&Xb.apply(r,this.zg)};function Yb(a){a&&"function"==typeof a.Aa&&a.Aa()}function Xb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Xb.apply(r,d):Yb(d)}};function Zb(a,b){this.Lf=b;this.Fc=[];a>this.Lf&&i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Fc.push(this.qd())}F(Zb,Wb);w=Zb.prototype;w.sf=r;w.uf=r;function $b(a,b){a.Fc.length<a.Lf?a.Fc.push(b):a.qe(b)}w.qd=function(){return this.sf?this.sf():{}};w.qe=function(a){if(this.uf)this.uf(a);else if(ma(a))if(la(a.Aa))a.Aa();else for(var b in a)delete a[b]};w.H=function(){Zb.h.H.call(this);for(var a=this.Fc;a.length;)this.qe(a.pop());delete this.Fc};function ac(){this.Dc=[];this.Je=new Pb;this.ig=this.jg=this.kg=this.fg=0;this.Qc=new Pb;this.pf=this.hg=0;this.De=1;this.re=new Zb(0,4E3);this.re.qd=function(){return new bc};this.gg=new Zb(0,50);this.gg.qd=function(){return new cc};var a=this;this.ve=new Zb(0,2E3);this.ve.qd=function(){return""+a.De++};this.ve.qe=aa()}function cc(){this.Te=this.time=this.count=0}
cc.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.Te&&a.push(" [VarAlloc = ",this.Te,"]");return a.join("")};function bc(){}function dc(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ec(a.wf-c));e.push(" ",fc(a.wf-b));0==a.se?e.push(" Start        "):1==a.se?(e.push(" Done "),e.push(ec(a.ti-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.xh&&e.push("[VarAlloc ",a.xh,"] ");return e.join("")}
bc.prototype.toString=function(){return this.type==r?this.yg:"["+this.type+"] "+this.yg};ac.prototype.reset=function(){for(var a=0;a<this.Dc.length;a++){var b=this.re.id;b&&$b(this.ve,b);$b(this.re,this.Dc[a])}this.Dc.length=0;this.Je.clear();this.fg=xa();this.pf=this.hg=this.ig=this.jg=this.kg=0;b=this.Qc.Gc();for(a=0;a<b.length;a++){var c=this.Qc.get(b[a]);c.count=0;c.time=0;c.Te=0;$b(this.gg,c)}this.Qc.clear()};
ac.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Dc.length;d++){var e=this.Dc[d];1==e.se&&c.pop();a.push(" ",dc(e,this.fg,b,c.join("")));b=e.wf;a.push("\n");0==e.se&&c.push("|  ")}if(0!=this.Je.ja()){var f=xa();a.push(" Unstopped timers:\n");Ob(this.Je,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",fc(b.startTime),")\n")})}b=this.Qc.Gc();for(d=0;d<b.length;d++)c=this.Qc.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.hg,"\n","Total comments created ",
this.pf,"\n","Overhead start: ",this.kg," ms\n","Overhead end: ",this.jg," ms\n","Overhead comment: ",this.ig," ms\n");return a.join("")};function ec(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function fc(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new ac;function gc(){}var hc=0;w=gc.prototype;w.key=0;w.jc=s;w.ie=s;w.aa=function(a,b,c,d,e,f){la(a)?this.If=o:a&&a.handleEvent&&la(a.handleEvent)?this.If=s:i(Error("Invalid listener argument"));this.Ic=a;this.cg=b;this.src=c;this.type=d;this.capture=!!e;this.te=f;this.ie=s;this.key=++hc;this.jc=s};w.handleEvent=function(a){return this.If?this.Ic.call(this.te||this.src,a):this.Ic.handleEvent.call(this.Ic,a)};!G||pb(9);var ic=!G||pb(9),jc=G&&!nb("8");!Xa||nb("528");Wa&&nb("1.9b")||G&&nb("8")||Va&&nb("9.5")||Xa&&nb("528");!Wa||nb("8");function kc(a,b){this.type=a;this.currentTarget=this.target=b}F(kc,Wb);w=kc.prototype;w.H=function(){delete this.type;delete this.target;delete this.currentTarget};w.Qb=s;w.Oc=o;w.stopPropagation=function(){this.Qb=o};w.preventDefault=function(){this.Oc=s};function lc(a){lc[" "](a);return a}lc[" "]=da;function mc(a,b){a&&this.aa(a,b)}F(mc,kc);w=mc.prototype;w.target=r;w.relatedTarget=r;w.offsetX=0;w.offsetY=0;w.clientX=0;w.clientY=0;w.screenX=0;w.screenY=0;w.button=0;w.keyCode=0;w.charCode=0;w.ctrlKey=s;w.altKey=s;w.shiftKey=s;w.metaKey=s;w.Ja=r;
w.aa=function(a,b){var c=this.type=a.type;kc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Wa){var e;a:{try{lc(d.nodeName);e=o;break a}catch(f){}e=s}e||(d=r)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Xa||a.offsetX!==m?a.offsetX:a.layerX;this.offsetY=Xa||a.offsetY!==m?a.offsetY:a.layerY;this.clientX=a.clientX!==m?a.clientX:a.pageX;this.clientY=a.clientY!==m?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Ja=a;delete this.Oc;delete this.Qb};w.stopPropagation=function(){mc.h.stopPropagation.call(this);this.Ja.stopPropagation?this.Ja.stopPropagation():this.Ja.cancelBubble=o};
w.preventDefault=function(){mc.h.preventDefault.call(this);var a=this.Ja;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,jc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};w.Gg=t("Ja");w.H=function(){mc.h.H.call(this);this.relatedTarget=this.currentTarget=this.target=this.Ja=r};var nc={},oc={},pc={},qc={};
function H(a,b,c,d,e){if(b){if(ga(b)){for(var f=0;f<b.length;f++)H(a,b[f],c,d,e);return r}var d=!!d,g=oc;b in g||(g[b]={G:0,ta:0});g=g[b];d in g||(g[d]={G:0,ta:0},g.G++);var g=g[d],h=na(a),j;g.ta++;if(g[h]){j=g[h];for(f=0;f<j.length;f++)if(g=j[f],g.Ic==c&&g.te==e){if(g.jc)break;return j[f].key}}else j=g[h]=[],g.G++;f=rc();f.src=a;g=new gc;g.aa(c,f,a,b,d,e);c=g.key;f.key=c;j.push(g);nc[c]=g;pc[h]||(pc[h]=[]);pc[h].push(g);a.addEventListener?(a==ca||!a.tf)&&a.addEventListener(b,f,d):a.attachEvent(b in
qc?qc[b]:qc[b]="on"+b,f);return c}i(Error("Invalid event type"))}function rc(){var a=sc,b=ic?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function tc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)tc(a,b[f],c,d,e);else a=H(a,b,c,d,e),nc[a].ie=o}
function uc(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)uc(a,b[f],c,d,e);else{d=!!d;a:{f=oc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=na(a),f[a]))){a=f[a];break a}a=r}if(a)for(f=0;f<a.length;f++)if(a[f].Ic==c&&a[f].capture==d&&a[f].te==e){vc(a[f].key);break}}}
function vc(a){if(!nc[a])return s;var b=nc[a];if(b.jc)return s;var c=b.src,d=b.type,e=b.cg,f=b.capture;c.removeEventListener?(c==ca||!c.tf)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in qc?qc[d]:qc[d]="on"+d,e);c=na(c);e=oc[d][f][c];if(pc[c]){var g=pc[c];Eb(g,b);0==g.length&&delete pc[c]}b.jc=o;e.Pf=o;wc(d,f,c,e);delete nc[a];return o}
function wc(a,b,c,d){if(!d.Bd&&d.Pf){for(var e=0,f=0;e<d.length;e++)d[e].jc?d[e].cg.src=r:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Pf=s;0==f&&(delete oc[a][b][c],oc[a][b].G--,0==oc[a][b].G&&(delete oc[a][b],oc[a].G--),0==oc[a].G&&delete oc[a])}}function Ac(a){var b,c=0,d=b==r;b=!!b;if(a==r)qb(pc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)vc(f.key),c++}});else if(a=na(a),pc[a])for(var a=pc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)vc(f.key),c++}}
function Bc(a){var b=Cc,a=na(a),c=pc[a];if(c){var d=fa(b),e=fa(m);return d&&e?(c=oc[b],!!c&&!!c[m]&&a in c[m]):!d&&!e?o:zb(c,function(a){return d&&a.type==b||e&&a.capture==m})}return s}function Dc(a,b,c,d,e){var f=1,b=na(b);if(a[b]){a.ta--;a=a[b];a.Bd?a.Bd++:a.Bd=1;try{for(var g=a.length,h=0;h<g;h++){var j=a[h];j&&!j.jc&&(f&=Ec(j,e)!==s)}}finally{a.Bd--,wc(c,d,b,a)}}return Boolean(f)}function Ec(a,b){var c=a.handleEvent(b);a.ie&&vc(a.key);return c}
function sc(a,b){if(!nc[a])return o;var c=nc[a],d=c.type,e=oc;if(!(d in e))return o;var e=e[d],f,g;if(!ic){var h;if(!(h=b))a:{h=["window","event"];for(var j=ca;f=h.shift();)if(x(j[f]))j=j[f];else{h=r;break a}h=j}f=h;h=o in e;j=s in e;if(h){if(0>f.keyCode||f.returnValue!=m)return o;a:{var k=s;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(l){k=o}if(k||f.returnValue==m)f.returnValue=o}}k=new mc;k.aa(f,this);f=o;try{if(h){for(var n=[],p=k.currentTarget;p;p=p.parentNode)n.push(p);g=e[o];g.ta=g.G;for(var q=
n.length-1;!k.Qb&&0<=q&&g.ta;q--)k.currentTarget=n[q],f&=Dc(g,n[q],d,o,k);if(j){g=e[s];g.ta=g.G;for(q=0;!k.Qb&&q<n.length&&g.ta;q++)k.currentTarget=n[q],f&=Dc(g,n[q],d,s,k)}}else f=Ec(c,k)}finally{n&&(n.length=0),k.Aa()}return f}d=new mc(b,this);try{f=Ec(c,d)}finally{d.Aa()}return f}var Fc=0;function Gc(a){return a+"_"+Fc++};function Hc(){}F(Hc,Wb);w=Hc.prototype;w.tf=o;w.Dd=r;w.Me=ba("Dd");w.addEventListener=function(a,b,c,d){H(this,a,b,c,d)};w.removeEventListener=function(a,b,c,d){uc(this,a,b,c,d)};
w.dispatchEvent=function(a){var b=a.type||a,c=oc;if(b in c){if(ka(a))a=new kc(a,this);else if(a instanceof kc)a.target=a.target||this;else{var d=a,a=new kc(b,this);ub(a,d)}var d=1,e,c=c[b],b=o in c,f;if(b){e=[];for(f=this;f;f=f.Dd)e.push(f);f=c[o];f.ta=f.G;for(var g=e.length-1;!a.Qb&&0<=g&&f.ta;g--)a.currentTarget=e[g],d&=Dc(f,e[g],a.type,o,a)&&a.Oc!=s}if(s in c)if(f=c[s],f.ta=f.G,b)for(g=0;!a.Qb&&g<e.length&&f.ta;g++)a.currentTarget=e[g],d&=Dc(f,e[g],a.type,s,a)&&a.Oc!=s;else for(e=this;!a.Qb&&e&&
f.ta;e=e.Dd)a.currentTarget=e,d&=Dc(f,e,a.type,s,a)&&a.Oc!=s;a=Boolean(d)}else a=o;return a};w.H=function(){Hc.h.H.call(this);Ac(this);this.Dd=r};function I(){this.e="base";this.wa=window["X.counter"].Bh();this.c=s}F(I,Hc);I.prototype.__defineGetter__("classname",t("e"));I.prototype.__defineGetter__("id",t("wa"));A("X.base",I);function Ic(a,b){this.ma=new Aa(a);this.U=new Aa(b)}Ic.prototype={f:function(){return new Ic(this.ma.f(),this.U.f())},Mb:function(){this.U=this.U.Ce()},Ng:function(a,b){return new Ic(this.ma.Jf(a.ma,b),this.U.Jf(a.U,b))}};function Jc(a,b){this.U=a;this.Tc=b}Jc.prototype={f:function(){return new Jc(this.U.f(),this.Tc)},Mb:function(){this.U=this.U.Ce();this.Tc=-this.Tc}};function Kc(a,b){this.Ya=a;this.Md=b;var c=a[0].ma,d=a[2].ma,d=a[1].ma.Kc(c).oe(d.Kc(c)).Rc();this.la=new Jc(d,d.ec(c))}
Kc.prototype={f:function(){var a=this.Ya.map(function(a){return a.f()});return new Kc(a,this.Md)},Mb:function(){this.Ya.reverse().map(function(a){a.Mb()});this.la.Mb()},eg:function(a,b,c,d,e){for(var f=0,g=[],h=0;h<this.Ya.length;h++){var j=a.U.ec(this.Ya[h].ma)-a.Tc,j=-1.0E-5>j?2:1.0E-5<j?1:0,f=f|j;g.push(j)}switch(f){case 0:(0<a.U.ec(this.la.U)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(h=0;h<this.Ya.length;h++){var k=(h+1)%this.Ya.length,j=g[h],
l=g[k],f=this.Ya[h],k=this.Ya[k];2!=j&&b.push(f);1!=j&&c.push(2!=j?f.f():f);3==(j|l)&&(j=(a.Tc-a.U.ec(f.ma))/a.U.ec(k.ma.Kc(f.ma)),j=f.Ng(k,j),b.push(j),c.push(j.f()))}3<=b.length&&d.push(new Kc(b,this.Md));3<=c.length&&e.push(new Kc(c,this.Md))}}};function Lc(a){this.W=this.X=this.la=r;this.t=[];a&&this.bc(a)}
Lc.prototype={f:function(){var a=new Lc;a.sh(this.la&&this.la.f());a.rh(this.X&&this.X.f());a.qh(this.W&&this.W.f());a.Kd(this.t.map(function(a){return a.f()}));return a},R:function(){for(var a=0;a<this.t.length;a++)this.t[a].Mb();this.la.Mb();this.X&&this.X.R();this.W&&this.W.R();a=this.X;this.X=this.W;this.W=a},le:function(a){if(!this.la)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].eg(this.la,b,c,b,c);this.X&&(b=this.X.le(b));c=this.W?this.W.le(c):[];return b.concat(c)},za:function(a){this.t=
a.le(this.t);this.X&&this.X.za(a);this.W&&this.W.za(a)},pb:function(){var a=this.t.slice();this.X&&(a=a.concat(this.X.pb()));this.W&&(a=a.concat(this.W.pb()));return a},bc:function(a){if(a.length){this.la||(this.la=a[0].la.f());for(var b=[],c=[],d=0;d<a.length;d++)a[d].eg(this.la,this.t,this.t,b,c);b.length&&(this.X||(this.X=new Lc),this.X.bc(b));c.length&&(this.W||(this.W=new Lc),this.W.bc(c))}},sh:ba("la"),rh:ba("X"),qh:ba("W"),Kd:ba("t")};function Mc(){this.t=[]}function Oc(a){var b=new Mc;b.Kd(a);return b}
Mc.prototype={f:function(){var a=new Mc;a.Kd(this.t.map(function(a){return a.f()}));return a},Re:function(a){var b=new Lc(this.f().t),a=new Lc(a.f().t);b.za(a);a.za(b);a.R();a.za(b);a.R();b.bc(a.pb());return Oc(b.pb())},Xa:function(a){var b=new Lc(this.f().t),a=new Lc(a.f().t);b.R();b.za(a);a.za(b);a.R();a.za(b);a.R();b.bc(a.pb());b.R();return Oc(b.pb())},xe:function(a){var b=new Lc(this.f().t),a=new Lc(a.f().t);b.R();a.za(b);a.R();b.za(a);a.za(b);b.bc(a.pb());b.R();return Oc(b.pb())},inverse:function(){var a=
this.f();a.t.map(function(a){a.Mb()});return a},Kd:ba("t")};function Pc(){I.call(this);this.e="indexer";this.ge=[];this.ca={}}F(Pc,I);Pc.prototype.add=function(a){x(a)||i(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.ca||(this.ca[b]=this.ge.length,this.ge.push(a));return this.ca[b]};Pc.prototype.unique=t("ge");function Qc(a){I.call(this);this.e="file";this.ae=a;this.c=o}F(Qc,I);function Rc(){this.Xc=this.r=r}Rc.prototype.__defineSetter__("file",function(a){this.r=x(a)?new Qc(a):r});Rc.prototype.__defineGetter__("file",function(){return!this.r?"":this.r.ae});Rc.prototype.__defineGetter__("filedata",t("Xc"));Rc.prototype.__defineSetter__("filedata",ba("Xc"));function Sc(){I.call(this);this.e="colortable";this.ca=new Pb;Ca(this,new Rc)}F(Sc,I);Sc.prototype.add=function(a,b,c,d,e,f){(!z(a)||!z(c)||!z(d)||!z(e)||!z(f))&&i(Error("Invalid color table entry."));this.ca.set(a,[b,c,d,e,f]);this.c=o};function Tc(a,b,c){this.x=fa(a)?a:0;this.y=fa(b)?b:0;this.b=fa(c)?c:0}Tc.prototype.f=function(){return new Tc(this.x,this.y,this.b)};Tc.prototype.Qe=function(){return[this.x,this.y,this.b]};function J(a,b,c){this.x=a;this.y=b;this.b=c}F(J,Tc);w=J.prototype;w.f=function(){return new J(this.x,this.y,this.b)};w.Pb=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};w.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};w.R=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};w.normalize=function(){return this.scale(1/this.Pb())};w.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
w.Xa=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};w.Cc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Uc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Vc(a,b){return new J(a.x+b.x,a.y+b.y,a.b+b.b)}function Wc(a,b){return new J(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Xc(a,b){this.x=fa(a)?a:0;this.y=fa(b)?b:0}Xc.prototype.f=function(){return new Xc(this.x,this.y)};function Yc(a,b){return new Xc(a.x-b.x,a.y-b.y)};function Zc(a,b){this.x=a;this.y=b}F(Zc,Xc);w=Zc.prototype;w.f=function(){return new Zc(this.x,this.y)};w.Pb=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};w.scale=function(a){this.x*=a;this.y*=a;return this};w.R=function(){this.x=-this.x;this.y=-this.y;return this};w.normalize=function(){return this.scale(1/this.Pb())};w.add=function(a){this.x+=a.x;this.y+=a.y;return this};w.Xa=function(a){this.x-=a.x;this.y-=a.y;return this};
w.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};w.Cc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function $c(a,b){this.width=a;this.height=b}function dd(a,b){return a==b?o:!a||!b?s:a.width==b.width&&a.height==b.height}$c.prototype.f=function(){return new $c(this.width,this.height)};$c.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};$c.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};$c.prototype.scale=function(a){this.width*=a;this.height*=a;return this};function ed(a,b){if(a instanceof ed)this.J=a.Qe();else{var c;if(c=ha(a))a:{for(var d=c=0;d<a.length;d++){if(!ha(a[d])||0<c&&a[d].length!=c){c=s;break a}for(var e=0;e<a[d].length;e++)if(!z(a[d][e])){c=s;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.J=Gb(a):a instanceof $c?this.J=fd(a.height,a.width):z(a)&&z(b)&&0<a&&0<b?this.J=fd(a,b):i(Error("Invalid argument(s) for Matrix contructor"))}this.z=new $c(this.J[0].length,this.J.length)}
function gd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new ed(b)}function hd(a,b,c){for(var d=0;d<a.ka().height;d++)for(var e=0;e<a.ka().width;e++)b.call(c,a.J[d][e],d,e,a)}function id(a,b){var c=new ed(a.ka());hd(a,function(d,e,f){c.J[e][f]=b.call(m,d,e,f,a)});return c}function fd(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}w=ed.prototype;
w.add=function(a){dd(this.z,a.ka())||i(Error("Matrix summation is only supported on arrays of equal size"));return id(this,function(b,c,d){return b+a.J[c][d]})};w.Cc=function(a,b){if(this.z.width!=a.z.width||this.z.height!=a.z.height)return s;for(var c=b||0,d=0;d<this.z.height;d++)for(var e=0;e<this.z.width;e++)if(!(Math.abs(this.J[d][e]-a.J[d][e])<=(c||1.0E-6)))return s;return o};w.ka=t("z");w.L=function(a,b){return!(0<=a&&a<this.z.height&&0<=b&&b<this.z.width)?r:this.J[a][b]};
function K(a,b,c,d){0<=b&&b<a.z.height&&0<=c&&c<a.z.width||i(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.z.height+","+a.z.width+")"));a.J[b][c]=d}w.multiply=function(a){if(a instanceof ed)return this.z.width!=a.ka().height&&i(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),jd(this,a);if(z(a))return kd(this,a);i(Error("A matrix can only be multiplied by a number or another matrix."))};
w.Xa=function(a){dd(this.z,a.ka())||i(Error("Matrix subtraction is only supported on arrays of equal size."));return id(this,function(b,c,d){return b-a.J[c][d]})};w.Qe=t("J");function jd(a,b){var c=new ed(a.z.height,b.ka().width);hd(c,function(a,e,f){for(var g=a=0;g<this.z.width;g++)a+=this.L(e,g)*b.L(g,f);K(c,e,f,a)},a);return c}function kd(a,b){return id(a,function(a){return a*b})};function L(a,b){ed.call(this,a,b);this.e="matrix"}F(L,ed);function ld(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new L(b)}w=L.prototype;w.K=function(){var a=[],b=this.ka();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.L(c,d));return a};
w.translate=function(a){this.z.width!=this.z.height&&i(Error("Can not translate non-square matrix."));var b=this.ka(),c=gd(b.height);a instanceof Zc&&3==b.height?(K(c,0,2,a.x),K(c,1,2,a.y)):a instanceof J&&4==b.height?(K(c,0,3,a.x),K(c,1,3,a.y),K(c,2,3,a.b)):i(Error("Translation failed."));return new L(this.multiply(c))};
w.rotate=function(a,b){(4!=this.ka().height||this.z.width!=this.z.height)&&i(Error("Only 4x4 matrices can be rotated."));(!x(b)||!(b instanceof J))&&i(Error("Invalid axis vector."));z(a)||i(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=gd(4);K(f,0,0,d+c.x*c.x*(1-d));K(f,0,1,c.x*c.y*(1-d)-c.b*e);K(f,0,2,c.x*c.b*(1-d)+c.y*e);K(f,1,0,c.y*c.x*(1-d)+c.b*e);K(f,1,1,d+c.y*c.y*(1-d));K(f,1,2,c.y*c.b*(1-d)-c.x*e);K(f,2,0,c.b*c.x*(1-d)-c.y*e);K(f,2,1,c.b*c.y*(1-d)+c.x*e);K(f,2,
2,d+c.b*c.b*(1-d));return new L(this.multiply(f))};w.Ca=function(a){var b=this.ka(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof J&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):i(Error("Multiplication by vector failed."));a=this.multiply(new ed(c));return new J(parseFloat(a.L(0,0)),parseFloat(a.L(1,0)),parseFloat(a.L(2,0)))};w.wh=function(a,b){var c=this.J[a];this.J[a]=this.J[b];this.J[b]=c};
w.vh=function(a,b){for(var c=this.ka(),d=0,d=0;d<c.height;d++){var e=this.L(d,a);e||(e=0);var f=this.L(d,b);f||(f=0);K(this,d,a,f);K(this,d,b,e)}};A("X.matrix",L);A("X.matrix.createIdentityMatrix",ld);A("X.matrix.prototype.flatten",L.prototype.K);A("X.matrix.prototype.translate",L.prototype.translate);A("X.matrix.prototype.rotate",L.prototype.rotate);A("X.matrix.prototype.toArray",L.prototype.Qe);A("X.matrix.prototype.getValueAt",L.prototype.L);A("X.matrix.prototype.multiplyByVector",L.prototype.Ca);
A("X.matrix.prototype.swapRows",L.prototype.wh);A("X.matrix.prototype.swapCols",L.prototype.vh);function md(){I.call(this);this.e="transform";this.k=ld(4);this.Ma=new Float32Array(this.k.K())}F(md,I);md.prototype.__defineGetter__("matrix",t("k"));md.prototype.__defineSetter__("matrix",function(a){(!x(a)||!(a instanceof L))&&i(Error("Invalid matrix."));this.k=a;this.Ma=new Float32Array(this.k.K());this.c=o});w=md.prototype;w.nh=function(a){(!z(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.k=this.k.rotate(a*Math.PI/180,new J(0,1,0));this.Ma=new Float32Array(this.k.K());this.c=o};
w.oh=function(a){(!z(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.k=this.k.rotate(a*Math.PI/180,new J(1,0,0));this.Ma=new Float32Array(this.k.K());this.c=o};w.ph=function(a){(!z(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.k=this.k.rotate(a*Math.PI/180,new J(0,0,1));this.Ma=new Float32Array(this.k.K());this.c=o};w.yh=function(a){z(a)||i(Error("Invalid distance."));this.k=this.k.translate(new J(a,0,0));this.Ma=new Float32Array(this.k.K());this.c=o};
w.zh=function(a){z(a)||i(Error("Invalid distance."));this.k=this.k.translate(new J(0,a,0));this.Ma=new Float32Array(this.k.K());this.c=o};w.Ah=function(a){z(a)||i(Error("Invalid distance."));this.k=this.k.translate(new J(0,0,a));this.Ma=new Float32Array(this.k.K());this.c=o};function nd(a,b,c){var d=a.k.L(b,c);d||(d=0);K(a.k,b,c,-1*d);a.Ma=new Float32Array(a.k.K());a.c=o}w.Dg=function(){nd(this,0,0)};w.Eg=function(){nd(this,1,1)};w.Fg=function(){nd(this,2,2)};A("X.transform",md);
A("X.transform.prototype.rotateX",md.prototype.nh);A("X.transform.prototype.rotateY",md.prototype.oh);A("X.transform.prototype.rotateZ",md.prototype.ph);A("X.transform.prototype.translateX",md.prototype.yh);A("X.transform.prototype.translateY",md.prototype.zh);A("X.transform.prototype.translateZ",md.prototype.Ah);A("X.transform.prototype.flipX",md.prototype.Dg);A("X.transform.prototype.flipY",md.prototype.Eg);A("X.transform.prototype.flipZ",md.prototype.Fg);function od(){I.call(this);this.e="texture";this.lb=this.Ze=this.r=r;this.dd=this.ed=0;Ca(this,new Rc)}F(od,I);A("X.texture",od);function Q(a){I.call(this);this.e="triplets";this.Db=Infinity;this.Ab=-Infinity;this.Eb=Infinity;this.Bb=-Infinity;this.Fb=Infinity;this.Cb=-Infinity;this.Uc=[0,0,0];this.V=[];x(a)&&(this.V=a.V.slice(),this.Db=a.Db,this.Ab=a.Ab,this.Eb=a.Eb,this.Bb=a.Bb,this.Fb=a.Fb,this.Cb=a.Cb,this.Uc=a.Uc.slice())}F(Q,I);
Q.prototype.add=function(a,b,c){(!z(a)||!z(b)||!z(c))&&i(Error("Invalid triplet."));this.Db=Math.min(this.Db,a);this.Ab=Math.max(this.Ab,a);this.Eb=Math.min(this.Eb,b);this.Bb=Math.max(this.Bb,b);this.Fb=Math.min(this.Fb,c);this.Cb=Math.max(this.Cb,c);this.Uc=[(this.Db+this.Ab)/2,(this.Eb+this.Bb)/2,(this.Fb+this.Cb)/2];this.c=o;return this.V.push(a,b,c)/3};
Q.prototype.get=function(a){(!z(a)||0>a||3*a>this.V.length||a==this.V.length/3)&&i(Error("Invalid id."));a*=3;return[this.V[a],this.V[a+1],this.V[a+2]]};Q.prototype.remove=function(a){(!z(a)||0>a||3*a>this.V.length||a==this.count)&&i(Error("Invalid id."));this.V.splice(a,3);this.c=o};Q.prototype.clear=function(){this.V=[];this.c=o};Q.prototype.__defineGetter__("count",function(){return this.V.length/3});Q.prototype.__defineGetter__("length",function(){return this.V.length});A("X.triplets",Q);
A("X.triplets.prototype.add",Q.prototype.add);A("X.triplets.prototype.get",Q.prototype.get);A("X.triplets.prototype.remove",Q.prototype.remove);A("X.triplets.prototype.clear",Q.prototype.clear);function pd(){this.ia=qd;this.Jb=new md;this.sb=[1,1,1];this.j=new Q;this.l=new Q;this.va=new Q;this.Ib=this.$=r;this.cd=[];this.xa=o;this.Yb=this.xc=1;this.Ub=r;this.qc=s;this.P=1;this.O=0}var qd="TRIANGLES";pd.prototype.__defineGetter__("texture",function(){this.$||(this.$=new od);return this.$});pd.prototype.__defineGetter__("transform",t("Jb"));pd.prototype.__defineGetter__("points",t("j"));pd.prototype.__defineGetter__("normals",t("l"));pd.prototype.__defineGetter__("colors",t("va"));
pd.prototype.__defineGetter__("color",t("sb"));pd.prototype.__defineSetter__("color",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid color."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.sb=a;this.c=o});pd.prototype.__defineGetter__("opacity",t("P"));pd.prototype.__defineSetter__("opacity",function(a){(!z(a)||1<a||0>a)&&i(Error("Invalid opacity."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.P=a;this.c=o});
pd.prototype.__defineGetter__("caption",t("Ub"));pd.prototype.__defineSetter__("caption",function(a){this.Ub=a;this.c=o});pd.prototype.__defineGetter__("visible",t("xa"));pd.prototype.__defineSetter__("visible",function(a){for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.xa=a;this.c=o});pd.prototype.__defineGetter__("pointsize",t("xc"));pd.prototype.__defineSetter__("pointsize",function(a){z(a)||i(Error("Invalid point size."));this.xc=a;this.c=o});
pd.prototype.__defineGetter__("magicmode",t("qc"));pd.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&i(Error("Invalid magic mode setting."));this.qc=a;this.c=o});pd.prototype.__defineGetter__("linewidth",t("Yb"));pd.prototype.__defineSetter__("linewidth",function(a){z(a)||i(Error("Invalid line width."));this.Yb=a;this.c=o});function rd(){this.Oa=Infinity;this.qa=this.Ga=-Infinity;this.sa=Infinity;this.ib=[0,0,0];this.gb=[1,1,1]}rd.prototype.__defineGetter__("lowerThreshold",t("qa"));rd.prototype.__defineSetter__("lowerThreshold",function(a){a>=this.Oa&&a<=this.Ga&&(this.qa=a)});rd.prototype.__defineGetter__("upperThreshold",t("sa"));rd.prototype.__defineSetter__("upperThreshold",function(a){a>=this.Oa&&a<=this.Ga&&(this.sa=a)});rd.prototype.__defineGetter__("min",t("Oa"));rd.prototype.__defineGetter__("max",t("Ga"));
rd.prototype.__defineGetter__("minColor",t("ib"));rd.prototype.__defineSetter__("minColor",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid min. color."));this.ib=a});rd.prototype.__defineGetter__("maxColor",t("gb"));rd.prototype.__defineSetter__("maxColor",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid max. color."));this.gb=a});function sd(){I.call(this);this.e="scalars";this.Zc=this.u=r;this.kf=o;Ca(this,new Rc);Ca(this,new rd);this.ib=[0,1,0];this.gb=[1,0,0]}F(sd,I);sd.prototype.__defineGetter__("array",t("u"));sd.prototype.__defineSetter__("array",function(a){this.Zc=this.u=a;this.c=o});A("X.scalars",sd);function S(a){I.call(this);this.e="object";this.d=[];this.B=this.S=r;Ca(this,new pd);x(a)&&this.Kb(a)}F(S,I);
S.prototype.Kb=function(a){this.ia=a.ia;this.Jb=new md;this.Jb.k=new L(a.Jb.k.J);this.sb=a.sb.slice();this.j=new Q(a.j);this.l=new Q(a.l);this.va=new Q(a.va);this.$=a.$;this.Ib=a.Ib;a.r&&(this.r=new Qc((new String(a.r.ae)).toString()));this.P=a.P;this.d.length=0;var b=a.d;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.d.push(new Ba[b[d].e](b[d]));this.xa=a.xa;this.xc=a.xc;this.Yb=a.Yb;a.Ub&&(this.Ub=(new String(a.Ub)).toString());this.qc=a.qc;this.cd=a.cd.slice();this.c=o};
S.prototype.__defineGetter__("colortable",function(){this.S||(this.S=new Sc);return this.S});S.prototype.__defineGetter__("scalars",function(){this.B||(this.B=new sd);return this.B});S.prototype.__defineGetter__("children",t("d"));S.prototype.w=function(){var a=new td;a.fa=this;this.dispatchEvent(a)};function ud(a,b){(!x(a)||!x(b)||!(a instanceof S)||!(b instanceof S))&&i(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.P?-1:1==b.P?1:x(a.O)&&x(b.O)&&a.O>b.O?-1:1}
A("X.object",S);A("X.object.prototype.modified",S.prototype.w);function vd(){}function wd(a){for(var b=a.j.count,c=[],d=0,d=0;d<b;d+=3){var e=a.j.get(d),f=a.j.get(d+1),g=a.j.get(d+2),h=a.l.get(d),j=a.l.get(d+1),k=a.l.get(d+2),l=a.sb;0<a.va.length&&(l=a.va.get(d));var n=[];n.push(new Ic(e,h));n.push(new Ic(f,j));n.push(new Ic(g,k));c.push(new Kc(n,l))}return Oc(c)}
function xd(a,b){(!x(b)||!(b instanceof Mc))&&i(Error("Invalid CSG object."));a.j.clear();a.l.clear();a.va.clear();var c=new Pc,d=[];yb(b.t,function(a){for(var b=[],g=a.Md,b=yb(a.Ya,function(a){a.color=g;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.qg=yb(c.unique(),function(a){return[a.ma.x(),a.ma.y(),a.ma.b()]});a.pg=yb(c.unique(),function(a){return[a.U.x(),a.U.y(),a.U.b()]});a.og=yb(c.unique(),function(a){return!a.color?r:[a.color[0],a.color[1],a.color[2]]});yb(d,
function(a){var b=a[0],c=a[1],a=a[2],d=this.qg,j=this.pg,k=this.og;this.j.add(d[b][0],d[b][1],d[b][2]);this.j.add(d[c][0],d[c][1],d[c][2]);this.j.add(d[a][0],d[a][1],d[a][2]);this.l.add(j[b][0],j[b][1],j[b][2]);this.l.add(j[c][0],j[c][1],j[c][2]);this.l.add(j[a][0],j[a][1],j[a][2]);k[b]&&this.va.add(k[b][0],k[b][1],k[b][2]);k[c]&&this.va.add(k[c][0],k[c][1],k[c][2]);k[a]&&this.va.add(k[a][0],k[a][1],k[a][2])}.bind(a));a.ia=qd}
vd.prototype.Re=function(a){(!x(a)||!(a instanceof Mc)&&!(a instanceof S))&&i(Error("Invalid object."));var b=a;a instanceof S&&(b=wd(b));a=new S;Ca(a,new vd);xd(a,wd(this).Re(b));return a};vd.prototype.Xa=function(a){(!x(a)||!(a instanceof Mc)&&!(a instanceof S))&&i(Error("Invalid object."));var b=a;a instanceof S&&(b=wd(b));a=new S;Ca(a,new vd);xd(a,wd(this).Xa(b));return a};
vd.prototype.xe=function(a){(!x(a)||!(a instanceof Mc)&&!(a instanceof S))&&i(Error("Invalid object."));var b=a;a instanceof S&&(b=wd(b));a=new S;Ca(a,new vd);xd(a,wd(this).xe(b));return a};vd.prototype.inverse=function(){var a=new S;Ca(a,new vd);xd(a,wd(this).inverse());return a};A("X.constructable",vd);A("X.constructable.prototype.intersect",vd.prototype.xe);A("X.constructable.prototype.inverse",vd.prototype.inverse);A("X.constructable.prototype.subtract",vd.prototype.Xa);
A("X.constructable.prototype.union",vd.prototype.Re);function yd(a){kc.call(this,a);this.e="event"}F(yd,kc);var zd=Gc("pan"),Ad=Gc("rotate"),Bd=Gc("zoom"),Cd=Gc("scroll");Gc("render");var Dd=Gc("resetview"),Cc=Gc("modified"),Ed=Gc("progress"),Fd=Gc("hover"),Gd=Gc("hover_end");function Hd(){yd.call(this,zd);this.O=new Zc(0,0)}F(Hd,yd);function Id(){yd.call(this,Ad);this.O=new Zc(0,0)}F(Id,yd);function Jd(){yd.call(this,Bd);this.Za=this.yb=s}F(Jd,yd);function Kd(){yd.call(this,Cd);this.D=s}F(Kd,yd);function Ld(){yd.call(this,Fd);this.md=this.ld=0}
F(Ld,yd);function Md(){yd.call(this,Gd)}F(Md,yd);function Nd(){yd.call(this,Dd)}F(Nd,yd);function td(){yd.call(this,Cc);this.fa=new S;this.p=r}F(td,yd);function Od(){yd.call(this,Ed);this.mf=0}F(Od,yd);function Pd(a){this.m=a;this.Kf=H(this.m,Wa?"DOMMouseScroll":"mousewheel",this)}F(Pd,Hc);
Pd.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Ja;if("mousewheel"==a.type){c=1;if(G||Xa&&(Qa||nb("532.0")))c=40;d=Xa&&Oa&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;fa(a.wheelDeltaX)?(b=Xa&&Oa&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Xa&&Oa&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),fa(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z(this.Mf)&&Math.min(Math.max(b,-this.Mf),this.Mf);z(this.Nf)&&(c=Math.min(Math.max(c,
-this.Nf),this.Nf));b=new Qd(d,a,0,c);try{this.dispatchEvent(b)}finally{b.Aa()}};Pd.prototype.H=function(){Pd.h.H.call(this);vc(this.Kf);delete this.Kf};function Qd(a,b,c,d){b&&this.aa(b,m);this.type="mousewheel";this.detail=a;this.dc=d}F(Qd,mc);G||Xa&&nb("525");var Sd;function Td(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=Hb(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)0<=wb(e,d[g])||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};var Ud=!G||pb(9);!Wa&&!G||G&&pb(9)||Wa&&nb("1.9.1");G&&nb("9");function Vd(a){return a?new Wd(Xd(a)):Sd||(Sd=new Wd)}function Yd(a){return ka(a)?document.getElementById(a):a}function Zd(a,b){qb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in $d?a.setAttribute($d[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var $d={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function ae(a,b,c){return be(document,arguments)}
function be(a,b){var c=b[0],d=b[1];if(!Ud&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Da(d.name),'"');if(d.type){c.push(' type="',Da(d.type),'"');var e={};ub(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ka(d)?c.className=d:ga(d)?Td.apply(r,[c].concat(d)):Zd(c,d));2<b.length&&ce(a,c,b);return c}
function ce(a,b,c){function d(c){c&&b.appendChild(ka(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ha(f)&&!(ma(f)&&0<f.nodeType)?xb(de(f)?Gb(f):f,d):d(f)}}function ee(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function fe(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function ge(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Xd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function de(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(la(a))return"function"==typeof a.item}return s}function Wd(a){this.I=a||ca.document||document}w=Wd.prototype;
w.vd=Vd;w.g=function(a){return ka(a)?this.I.getElementById(a):a};w.cc=function(a,b,c){return be(this.I,arguments)};w.createElement=function(a){return this.I.createElement(a)};w.createTextNode=function(a){return this.I.createTextNode(a)};function ie(a){return"CSS1Compat"==a.I.compatMode}function ke(a){var b=a.I,a=!Xa&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Xc(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}w.appendChild=function(a,b){a.appendChild(b)};
w.contains=ge;function T(a){(!x(a)||!(a instanceof Element))&&i(Error("Could not add interactor to the given element."));I.call(this);this.e="interactor";this.Vb=a;this.Yd=this.cf=this.bf=this.df=this.af=this.ef=r;this.Xd=o;this.mb=this.hb=this.Na=s;this.bd=[0,0];this.Sd=new Zc(0,0);this.N={MOUSEWHEEL_ENABLED:o,MOUSECLICKS_ENABLED:o,KEYBOARD_ENABLED:o,HOVERING_ENABLED:o,CONTEXTMENU_ENABLED:s}}F(T,I);T.prototype.__defineGetter__("config",t("N"));T.prototype.__defineGetter__("leftButtonDown",t("Na"));
T.prototype.__defineGetter__("middleButtonDown",t("hb"));T.prototype.__defineGetter__("rightButtonDown",t("mb"));
T.prototype.aa=function(){this.N.MOUSEWHEEL_ENABLED?(this.Yd=new Pd(this.Vb),this.ef=H(this.Yd,"mousewheel",this.Lc.bind(this))):(vc(this.ef),this.Yd=r);this.N.MOUSECLICKS_ENABLED?(this.af=H(this.Vb,"mousedown",this.Wg.bind(this)),this.df=H(this.Vb,"mouseup",this.ah.bind(this))):(vc(this.af),vc(this.df));this.Vb.oncontextmenu=this.N.CONTEXTMENU_ENABLED?r:function(){return s};window.onkeydown=this.N.KEYBOARD_ENABLED?this.Sf.bind(this):r;vc(this.bf);vc(this.cf);this.bf=H(this.Vb,"mousemove",this.Yg.bind(this));
this.cf=H(this.Vb,"mouseout",this.Zg.bind(this))};T.prototype.Wg=function(a){0==a.button?this.Na=o:1==a.button?this.hb=o:2==a.button&&(this.mb=o);eval("this.onMouseDown("+this.Na+","+this.hb+","+this.mb+")");le(this);a.preventDefault()};T.prototype.Vg=aa();T.prototype.ah=function(a){0==a.button?this.Na=s:1==a.button?this.hb=s:2==a.button&&(this.mb=s);eval("this.onMouseUp("+this.Na+","+this.hb+","+this.mb+")");le(this);a.preventDefault()};T.prototype.__defineGetter__("mousePosition",t("bd"));w=T.prototype;
w.$g=aa();w.Zg=function(a){this.Xd=s;this.N.KEYBOARD_ENABLED&&(window.onkeydown=r);this.mb=this.hb=this.Na=s;le(this);this.Sd=new Zc(0,0);a.preventDefault()};w.Xg=aa();
w.Yg=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Xd=o;this.N.KEYBOARD_ENABLED&&window.onkeydown==r&&(window.onkeydown=this.Sf.bind(this));a.preventDefault();var b=a.shiftKey;this.bd=[a.offsetX,a.offsetY];var c=new Zc(this.bd[0],this.bd[1]),a=this.Sd.Xa(c);this.Sd=c.f();this.N.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.hb||this.Na||this.mb)&&le(this),this.ue=setTimeout(function(){le(this);var a=new Ld;a.ld=c.x;a.md=c.y;this.dispatchEvent(a);
this.ue=r}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.Pb()&&(this.Na&&!b?(b=new Id,b.O=a,b.oi=0,this.dispatchEvent(b)):this.hb||this.Na&&b?(b=new Hd,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.O=a,this.dispatchEvent(b)):this.mb&&(b=new Jd,b.yb=0<a.y,b.Za=s,this.dispatchEvent(b)))};function le(a){a.ue&&clearTimeout(a.ue);a.dispatchEvent(new Md)}w.bh=aa();
w.Lc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");le(this);a.preventDefault()};w.Tg=aa();
w.Sf=function(a){if(this.Xd){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");le(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Nd,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Hd:b?a=new Jd:(a=new Id,this instanceof me&&(a=new Kd)),a&&(c=new Zc(0,0),37==f?(c.x=5,a.D=s,b&&(a.D=o,a.yb=o,a.Za=s)):39==f?(c.x=-5,a.D=o,b&&(a.yb=s,a.Za=s)):38==f?(c.y=5,a.D=o,b&&(a.yb=o,a.Za=o)):40==f&&(c.y=-5,a.D=s,b&&(a.yb=s,
a.Za=o)),a.O=c,this.dispatchEvent(a)))}};A("X.interactor",T);A("X.interactor.prototype.init",T.prototype.aa);A("X.interactor.prototype.onMouseDown",T.prototype.Vg);A("X.interactor.prototype.onMouseUp",T.prototype.$g);A("X.interactor.prototype.onMouseMove",T.prototype.Xg);A("X.interactor.prototype.onMouseWheel",T.prototype.bh);A("X.interactor.prototype.onKey",T.prototype.Tg);function me(a){T.call(this,a);this.e="interactor2D"}F(me,T);me.prototype.Lc=function(a){me.h.Lc.call(this,a);var b=new Kd;x(a.dc)||(a.dc=0);b.D=0>a.dc;this.dispatchEvent(b)};function ne(a){S.call(this);this.e="slice";this.i=[0,0,0];this.Xb=[0,0,1];this.D=[0,1,0];this.A=this.F=10;this.Ib=[0,1,0,0,1,1,1,1,1,0,0,0];this.v=this.Va=r;this.Fa=o;this.Tb=[1,1,1];x(a)&&this.Kb(a)}F(ne,S);ne.prototype.Kb=function(a){this.i=a.i.slice();this.Xb=a.Xb.slice();this.D=a.D.slice();this.F=a.F;this.A=a.A;this.Va=a.Va;this.v=a.v;this.Fa=a.Fa;this.Tb=a.Tb;this.sg=a.sg;ne.h.Kb.call(this,a)};
ne.prototype.rd=function(){this.j.clear();var a=new J(this.Xb[0],this.Xb[1],this.Xb[2]),b=new J(this.D[0],this.D[1],this.D[2]),c=Wc(b,a),d=new J(this.i[0],this.i[1],this.i[2]),e=new J(1,1,1);1==a.x?(e=new J(this.i[0],this.A/2,this.F/2),this.Ib=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new J(this.F/2,this.i[1],this.A/2),this.Ib=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new J(this.F/2,this.A/2,this.i[2]));var f=Vc(c.f().R(),b.f().R()),f=new J(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=Vc(c.f().R(),b),g=new J(g.x*
e.x,g.y*e.y,g.b*e.b);g.add(d);var h=Vc(c,b.f().R()),h=new J(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var j=h,b=Vc(c,b),b=new J(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.j.add(f.x,f.y,f.b);this.j.add(g.x,g.y,g.b);this.j.add(h.x,h.y,h.b);this.j.add(j.x,j.y,j.b);this.j.add(b.x,b.y,b.b);this.j.add(d.x,d.y,d.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.l.add(a.x,a.y,a.b);this.Fa&&(a=new S,a.j.add(f.x,f.y,f.b),a.j.add(g.x,g.y,
g.b),a.j.add(g.x,g.y,g.b),a.j.add(b.x,b.y,b.b),a.j.add(b.x,b.y,b.b),a.j.add(h.x,h.y,h.b),a.j.add(h.x,h.y,h.b),a.j.add(f.x,f.y,f.b),a.l.add(0,0,0),a.l.add(0,0,0),a.l.add(0,0,0),a.l.add(0,0,0),a.l.add(0,0,0),a.l.add(0,0,0),a.l.add(0,0,0),a.l.add(0,0,0),a.sb=[this.Tb[0],this.Tb[1],this.Tb[2]],a.ia="LINES",a.Yb=2,this.d.push(a))};A("X.slice",ne);function U(a){S.call(this);this.e="volume";this.i=[0,0,0];this.ba=[10,10,10];this.Q=[1,1,1];this.pc=this.cb=this.oc=this.bb=this.nc=this.ab=0;this.Ra=new S;this.Sa=new S;this.Ta=new S;this.kd=this.ya=s;this.ob=0;this.v=r;this.Fa=o;this.ac=Infinity;this.$b=-Infinity;Ca(this,new Rc);Ca(this,new rd);x(a)&&this.Kb(a)}F(U,S);
U.prototype.Kb=function(a){window.console.log(a);this.i=a.i.slice();this.ba=a.ba.slice();this.Q=a.Q.slice();this.ab=a.ab;this.nc=a.nc;this.bb=a.bb;this.oc=a.oc;this.cb=a.cb;this.pc=a.pc;this.Ra=new S(a.Ra);this.Sa=new S(a.Sa);this.Ta=new S(a.Ta);this.ya=a.ya;this.kd=a.kd;this.ob=a.ob;this.v=a.v;this.Fa=a.Fa;U.h.Kb.call(this,a)};
U.prototype.rd=function(){this.d.length=0;this.Ra.d.length=0;this.Sa.d.length=0;this.Ta.d.length=0;this.d.push(this.Ra);this.d.push(this.Sa);this.d.push(this.Ta);for(var a=0,a=0;3>a;a++){for(var b=(this.ba[a]-1)/2,c=b,d=0,d=0;d<this.ba[a];d++){var e=-b*this.Q[a]+d*this.Q[a],f=[[this.i[0]+e,this.i[1],this.i[2]],[this.i[0],this.i[1]+e,this.i[2]],[this.i[0],this.i[1],this.i[2]+e]],e=this.d[a].d,g=0,h=0,j=[1,1,1],k=this.Fa;0==a?(g=this.ba[2]*this.Q[2]-this.Q[2],h=this.ba[1]*this.Q[1]-this.Q[1],j=[1,1,
0]):1==a?(g=this.ba[0]*this.Q[0]-this.Q[0],h=this.ba[2]*this.Q[2]-this.Q[2],j=[1,0,0]):2==a&&(g=this.ba[0]*this.Q[0]-this.Q[0],h=this.ba[1]*this.Q[1]-this.Q[1],j=[0,1,0]);x(this.Va)&&(k=s);var l=new ne,n=l,f=f[a],p=[[1,0,0],[0,1,0],[0,0,1]][a],q=[[0,1,0],[0,0,-1],[0,1,0]][a];(!x(f)||!(f instanceof Array)||3!=f.length)&&i(Error("Invalid center."));(!x(p)||!(p instanceof Array)||3!=p.length)&&i(Error("Invalid front direction."));(!x(q)||!(q instanceof Array)||3!=q.length)&&i(Error("Invalid up direction."));
z(g)||i(Error("Invalid width."));z(h)||i(Error("Invalid height."));var u=s;x(k)&&(u=k);k=[1,1,1];x(j)&&(k=j);n.i=f;n.Xb=p;n.D=q;n.F=g;n.A=h;n.Fa=u;n.Tb=k;n.rd();l.Va=this;l.visible=d==Math.floor(c);e.push(l)}0==a?this.nc=this.ab=c:1==a?this.oc=this.bb=c:2==a&&(this.pc=this.cb=c)}this.c=o};
U.prototype.w=function(){if(0<this.d.length)if(this.ya!=this.kd&&(this.ya?(this.d[0].d[parseInt(this.ab,10)].visible=s,this.d[1].d[parseInt(this.bb,10)].visible=s,this.d[2].d[parseInt(this.cb,10)].visible=s):this.d[this.ob].visible=s,this.c=o,this.kd=this.ya),this.ya)oe(this,this.ob);else for(var a=0,a=0;3>a;a++){var b=this.d[a],c=0,d=0;0==a?(c=this.ab,d=this.nc,this.nc=this.ab):1==a?(c=this.bb,d=this.oc,this.oc=this.bb):2==a&&(c=this.cb,d=this.pc,this.pc=this.cb);b.d[parseInt(d,10)].visible=s;b=
b.d[parseInt(c,10)];b.visible=o;b.P=1}U.h.w.call(this)};U.prototype.__defineGetter__("dimensions",t("ba"));U.prototype.__defineGetter__("volumeRendering",t("ya"));U.prototype.__defineSetter__("volumeRendering",function(a){this.ya=a;this.w()});U.prototype.__defineSetter__("visible",ba("xa"));U.prototype.__defineGetter__("center",t("i"));U.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center."));this.i=a});
U.prototype.__defineGetter__("labelmap",function(){this.v||(this.v=new pe(this));return this.v});U.prototype.__defineGetter__("indexX",t("ab"));U.prototype.__defineSetter__("indexX",function(a){z(a)&&0<=a&&a<this.Ra.d.length&&(this.ab=a,this.w())});U.prototype.__defineGetter__("indexY",t("bb"));U.prototype.__defineSetter__("indexY",function(a){z(a)&&0<=a&&a<this.Sa.d.length&&(this.bb=a,this.w())});U.prototype.__defineGetter__("indexZ",t("cb"));
U.prototype.__defineSetter__("indexZ",function(a){z(a)&&0<=a&&a<this.Ta.d.length&&(this.cb=a,this.w())});U.prototype.__defineGetter__("windowLow",t("ac"));U.prototype.__defineSetter__("windowLow",ba("ac"));U.prototype.__defineGetter__("windowHigh",t("$b"));U.prototype.__defineSetter__("windowHigh",ba("$b"));U.prototype.__defineGetter__("borders",t("Fa"));U.prototype.__defineSetter__("borders",ba("Fa"));
function oe(a,b){if(a.ya&&(a.c||b!=a.ob)){var c=a.d[a.ob];c.visible=s;var c=a.d[b],d=c.d.length,e;for(e=0;e<d;e++)c.d[e].xa=o;a.ob=b;a.c=s}}A("X.volume",U);A("X.volume.prototype.modified",U.prototype.w);function qe(){I.call(this);this.e="parser"}F(qe,I);w=qe.prototype;w.parse=function(){i(Error("The function parse() should be overloaded."))};w.Mc=function(a,b){var c=this.n(a,b+2),d=this.n(a,b+3),e=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.n(a,b+1)<<8|this.n(a,b);return 0==c&&-127==e?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,e)};
function re(a,b,c){var d=a.n(b,c),e=a.n(b,c+1),f=(d<<1&255|e>>7)-127,a=(e&127)<<16|a.n(b,c+2)<<8|a.n(b,c+3);return 0==a&&-127==f?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,f)}function se(a,b,c,d){var e=[],f=0,g=Infinity,h;for(h=0;h<d;h++){var j=a.Mc(b,c+4*h);e[h]=j;f=Math.max(f,j);g=Math.min(g,j)}return[e,f,g]}w.Ke=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=re(this,a,b+4*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};
function te(a,b,c){return(a.n(b,c+3)<<24)+(a.n(b,c+2)<<16)+(a.n(b,c+1)<<8)+a.n(b,c)}function ue(a,b,c){return(a.n(b,c)<<24)+(a.n(b,c+1)<<16)+(a.n(b,c+2)<<8)+a.n(b,c+3)}w.ag=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=ue(this,a,b+4*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.Gd=function(a,b){return(this.n(a,b+1)<<8)+this.n(a,b)};
w.$f=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=(this.n(a,b+2*g)<<8)+this.n(a,b+2*g+1);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.kh=function(a,b){var c=this.n(a,b);return 127<c?c-256:c};w.n=function(a,b){return a.charCodeAt(b)&255};w.Zf=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=this.n(a,b+g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};
function ve(a,b,c,d){for(var e=c[2],f=c[1],c=c[0],g=a.v!=r,h=f*c,j=Array(e),k=0;k<e;k++){j[k]=Array(f);for(var l=0;l<f;l++)j[k][l]=Array(c)}for(var n=0,k=k=0;k<e;k++){for(var l=b.slice(k*h,(k+1)*h),p=new Uint8Array(4*h),q=0,u=0,v=0,q=0;q<f;q++)for(u=0;u<c;u++){var n=l[v],B=0,D=0,C=0,y=0;a.S?((y=a.S.ca.get(Math.floor(n)))||(y=a.S.ca.get(a.S.ca.ja()-1)),B=255*y[1],D=255*y[2],C=255*y[3],y=255*y[4]):(B=D=C=255*(n/d),y=255);var E=4*v;p[E]=B;p[++E]=D;p[++E]=C;p[++E]=y;j[k][q][u]=n;v++}n=new od;n.lb=p;n.ed=
c;n.dd=f;l=a.Ta.d[k];l.$=n;g&&(l.v=a.v.Ta.d[k].$)}for(q=0;q<f;q++){p=new Uint8Array(4*e*c);for(k=v=0;k<e;k++)for(u=0;u<c;u++)n=j[k][q][u],a.S?((y=a.S.ca.get(Math.floor(n)))||(y=a.S.ca.get(a.S.ca.ja()-1)),B=255*y[1],D=255*y[2],C=255*y[3],y=255*y[4]):(B=D=C=255*(n/d),y=255),E=4*v,p[E]=B,p[++E]=D,p[++E]=C,p[++E]=y,v++;n=new od;n.lb=p;n.ed=c;n.dd=e;l=a.Sa.d[q];l.$=n;g&&(l.v=a.v.Sa.d[q].$)}for(u=0;u<c;u++){p=new Uint8Array(4*e*f);for(k=v=0;k<e;k++)for(q=0;q<f;q++)n=j[k][q][u],a.S?((y=a.S.ca.get(Math.floor(n)))||
(y=a.S.ca.get(a.S.ca.ja()-1)),B=255*y[1],D=255*y[2],C=255*y[3],y=255*y[4]):(B=D=C=255*(n/d),y=255),E=4*v,p[E]=B,p[++E]=D,p[++E]=C,p[++E]=y,v++;n=new od;n.lb=p;n.ed=f;n.dd=e;l=a.Ra.d[u];l.$=n;g&&(l.v=a.v.Ra.d[u].$)}};function we(){qe.call(this);this.e="parserSTL"}F(we,qe);we.prototype.parse=function(a,b,c){for(var c=c.split("\n"),d=c.length,e=b.j,f=b.l,g=0,h=d%8;h--;)this.M(e,f,c[g]),g++;for(h=0.125*d^0;h--;)this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++,this.M(e,f,c[g]),g++;c=new td;c.fa=b;c.p=a;this.dispatchEvent(c)};
we.prototype.M=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),d=c.split(" ");if("vertex"==d[0]){var c=parseFloat(d[1]),e=parseFloat(d[2]),d=parseFloat(d[3]);a.add(c,e,d)}else"facet"==d[0]&&(c=parseFloat(d[2]),e=parseFloat(d[3]),d=parseFloat(d[4]),b.add(c,e,d),b.add(c,e,d),b.add(c,e,d))};A("X.parserSTL",we);A("X.parserSTL.prototype.parse",we.prototype.parse);function xe(){qe.call(this);this.e="parserVTK"}F(xe,qe);
xe.prototype.parse=function(a,b,c){var d=b.j,e=b.l,f=c.split("\n"),g=f.length,c=new Q,h=new Q;this.wb=[];this.ga=qd;this.$d=this.jb=this.$a=this.kb=s;for(var j=0,k=g%8;k--;)this.M(c,h,f[j]),j++;for(k=0.125*g^0;k--;)this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++,this.M(c,h,f[j]),j++;f=h.length;j=g=this.wb.length;do{var k=this.wb[g-j],l=k.length,n;for(n=0;n<l&&!("LINES"==this.ga&&n+1>=l);n++){var p=parseInt(k[n],
10),q=c.get(p);d.add(q[0],q[1],q[2]);var u=p,v=q;"LINES"==this.ga?(u=parseInt(k[n+1],10),v=c.get(u),d.add(v[0],v[1],v[2])):"TRIANGLE_STRIPS"==this.ga&&(0==n||n==l-1)&&d.add(q[0],q[1],q[2]);p<f?(v=h.get(p),e.add(v[0],v[1],v[2]),"LINES"==this.ga?(u=h.get(u),e.add(u[0],u[1],u[2])):"TRIANGLE_STRIPS"==this.ga&&(0==n||n==l-1)&&e.add(v[0],v[1],v[2])):(u=new J(q[0],q[1],q[2]),u.normalize(),e.add(u.x,u.y,u.b),"LINES"==this.ga?(u=new J(v[0],v[1],v[2]),u.normalize(),e.add(u.x,u.y,u.b)):"TRIANGLE_STRIPS"==this.ga&&
(0==n||n==l-1)&&e.add(u.x,u.y,u.b))}j--}while(0<j);b.ia=this.ga;d=new td;d.fa=b;d.p=a;this.dispatchEvent(d)};
xe.prototype.M=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":this.kb=o;this.jb=this.$a=s;return;case "VERTICES":this.$a=o;this.jb=this.kb=s;a=parseInt(c[1],10);3<=a?this.ga=qd:1==a?this.ga="POINTS":i(Error("This VTK file is not supported!"));this.wb=[];return;case "TRIANGLE_STRIPS":this.$a=o;this.jb=this.kb=s;this.ga="TRIANGLE_STRIPS";this.wb=[];return;case "LINES":this.$a=o;this.jb=this.kb=s;this.ga="LINES";this.wb=[];return;case "POLYGONS":this.$a=
o;this.jb=this.kb=s;this.ga="POLYGONS";this.wb=[];return;case "POINT_DATA":this.jb=o;this.$a=this.kb=s;return}if(this.kb)if(1==d||isNaN(parseFloat(e)))this.kb=s;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,e,c))}else this.$a?1==d||isNaN(parseFloat(e))?this.$a=s:this.wb.push(c.slice(1)):this.jb&&("NORMALS"==
e?this.$d=o:1==d||isNaN(parseFloat(e))?this.$d=this.jb=s:this.$d&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),b.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),b.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,e,c))))};A("X.parserVTK",xe);A("X.parserVTK.prototype.parse",xe.prototype.parse);function ye(){qe.call(this);this.e="parserFSM"}F(ye,qe);
ye.prototype.parse=function(a,b,c){var d=b.j,e=b.l,f=b.cd,g=new Q,h;h=3;var j=0,k;do k=this.n(c,h++),j++;while(200>j&&10!=k);h++;var l=ue(this,c,h);h+=4;j=ue(this,c,h);h+=4;k=[];for(var n=0,n=0;n<l;n++){var p=re(this,c,h);h+=4;var q=re(this,c,h);h+=4;var u=re(this,c,h);h+=4;k[n]=0;g.add(p,q,u)}l=[];n=[];for(p=0;p<j;p++){var v=ue(this,c,h);h+=4;u=ue(this,c,h);h+=4;q=ue(this,c,h);h+=4;k[v]+=1;k[u]+=1;k[q]+=1;l.push([v,u,q]);n.push(new J(0,0,0))}for(p=0;p<j;p++){v=l[p][0];u=l[p][1];q=l[p][2];h=g.get(v);
var c=g.get(u),B=g.get(q);h=new J(h[0],h[1],h[2]);B=new J(B[0],B[1],B[2]);c=(new J(c[0],c[1],c[2])).f().Xa(h);h=B.f().Xa(h);c=Wc(c,h).normalize();n[v]=n[v].add(c);n[u]=n[u].add(c);n[q]=n[q].add(c)}for(p=0;p<j;p++)v=l[p][0],u=l[p][1],q=l[p][2],h=g.get(v),c=g.get(u),B=g.get(q),f.push(v),f.push(u),f.push(q),d.add(h[0],h[1],h[2]),d.add(c[0],c[1],c[2]),d.add(B[0],B[1],B[2]),v=n[v].scale(1/k[v]).normalize(),u=n[u].scale(1/k[u]).normalize(),q=n[q].scale(1/k[q]).normalize(),e.add(v.x,v.y,v.b),e.add(u.x,u.y,
u.b),e.add(q.x,q.y,q.b);b.ia=qd;d=new td;d.fa=b;d.p=a;this.dispatchEvent(d)};A("X.parserFSM",ye);A("X.parserFSM.prototype.parse",ye.prototype.parse);function ze(a){function b(){xc+=8;return ia<oa.length?oa.charCodeAt(ia++)&255:-1}function c(){var a;xc++;a=N&1;N>>=1;0==N&&(N=b(),a=N&1,N=N>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=M[b]>>8-a);return b}function e(a){E++;D[C++]=a;q.push(String.fromCharCode(a));32768==C&&(C=0)}function f(){this.od=this.nd=0;this.ye=r}function g(){for(;;){if(kb[ya]>=ad)return-1;if(yc[kb[ya]]==ya)return kb[ya]++;kb[ya]++}}function h(){var a=zc[Bb],b;if(17==ya)return-1;Bb++;ya++;b=g();if(0<=
b)a.nd=b;else if(a.nd=32768,h())return-1;b=g();if(0<=b)a.od=b,a.ye=r;else if(a.od=32768,a.ye=zc[Bb],a.pi=Bb,h())return-1;ya--;return 0}function j(a,b,c){zc=a;Bb=0;yc=c;ad=b;for(a=0;17>a;a++)kb[a]=0;ya=0;return h()?-1:0}function k(a){for(var b,d,e=0,f=a[e];;)if(b=c()){if(!(f.od&32768))return f.od;f=f.ye;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.nd&32768))return f.nd;e++;f=a[e]}}function l(){var a,g,h,l,n;do if(a=c(),h=d(2),0==h){N=1;h=b();h|=b()<<8;g=b();g|=b()<<8;for((h^~g)&65535&&
document.write("BlockLen checksum mismatch\n");h--;)g=b(),e(g)}else if(1==h)for(;;)if(h=M[d(7)]>>1,23<h?(h=h<<1|c(),199<h?(h-=128,h=h<<1|c()):(h-=48,143<h&&(h+=136))):h+=256,256>h)e(h);else if(256==h)break;else{var p;h-=257;n=d(Y[h])+O[h];h=M[d(5)]>>3;8<Z[h]?(p=d(8),p|=d(Z[h]-8)<<8):p=d(Z[h]);p+=ja[h];for(h=0;h<n;h++)g=D[C-p&32767],e(g)}else if(2==h){var q=Array(320);g=257+d(5);p=1+d(5);l=4+d(4);for(h=0;19>h;h++)q[h]=0;for(h=0;h<l;h++)q[qa[h]]=d(3);n=fb.length;for(l=0;l<n;l++)fb[l]=new f;if(j(fb,
19,q)){C=0;return}n=g+p;l=0;for(var u=-1;l<n;)if(u++,h=k(fb),16>h)q[l++]=h;else if(16==h){var v;h=3+d(2);if(l+h>n){C=0;return}for(v=l?q[l-1]:0;h--;)q[l++]=v}else{h=17==h?3+d(3):11+d(7);if(l+h>n){C=0;return}for(;h--;)q[l++]=0}n=Db.length;for(l=0;l<n;l++)Db[l]=new f;if(j(Db,g,q)){C=0;return}n=Db.length;for(l=0;l<n;l++)fb[l]=new f;h=[];n=q.length;for(l=g;l<n;l++)h[l-g]=q[l];if(j(fb,p,h)){C=0;return}for(;;)if(h=k(Db),256<=h){h-=256;if(0==h)break;h--;n=d(Y[h])+O[h];h=k(fb);8<Z[h]?(p=d(8),p|=d(Z[h]-8)<<
8):p=d(Z[h]);for(p+=ja[h];n--;)g=D[C-p&32767],e(g)}else e(h)}while(!a);C=0;N=1}function n(){q=[];var a=[];y=s;a[0]=b();a[1]=b();120==a[0]&&218==a[1]&&(l(),B[v]=Array(2),B[v][0]=q.join(""),B[v][1]="geonext.gxt",v++);31==a[0]&&139==a[1]&&(p(),B[v]=Array(2),B[v][0]=q.join(""),B[v][1]="file",v++);if(80==a[0]&&75==a[1]&&(y=o,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u=b();u|=b()<<8;a=b();a|=b()<<8;b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();var c=b(),c=c|b()<<8,d=b(),d=
d|b()<<8,e=0;for(lb=[];c--;){var f=b();"/"==f|":"==f?e=0:e<bd-1&&(lb[e++]=String.fromCharCode(f))}cd||(cd=lb);for(e=0;e<d;)b(),e++;E=0;8==a&&(l(),B[v]=Array(2),B[v][0]=q.join(""),B[v][1]=lb.join(""),v++);p()}}function p(){var a=[],c;u&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b());y&&n();a[0]=b();if(8==a[0]){u=b();b();b();b();b();b();b();if(u&4){a[0]=b();a[2]=b();ya=a[0]+256*a[1];for(a=0;a<ya;a++)b()}if(u&8){a=0;for(lb=
[];c=b();){if("7"==c||":"==c)a=0;a<bd-1&&(lb[a++]=c)}}if(u&16)for(;b(););u&2&&(b(),b());l();b();b();b();b();b();b();b();b();y&&n()}}var q=[],u,v=0,B=[],D=Array(32768),C=0,y=s,E,M=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,
218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,
23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],O=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],ja=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],qa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oa=a,ia=0,
N=1,xc=0,bd=256,lb=[],cd,Db=Array(288),fb=Array(32),Bb=0,zc=r,ya=0,kb=Array(17);kb[0]=0;var yc,ad;ze.prototype.lg=function(){n();return B}};function Ae(){qe.call(this);this.e="parserNRRD"}F(Ae,qe);
Ae.prototype.parse=function(a,b,c){var d=0,e=c.match(/^([\s\S]*?)\r?\n\r?\n/),d=e[0].length,f,g,h,j,k,l,e=e[1].split(/\r?\n/);for(k=0,l=e.length;k<l;k++)if(f=e[k],f.match(/NRRD\d+/))this.Pg=o;else if(!f.match(/^#/)&&(j=f.match(/(.*):(.*)/)))g=j[1].trim(),f=j[2].trim(),(h=this.Cg[g])?h.call(this,f):this[g]=f;this.Pg||i(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&i(Error("Only raw or gz/gzip encoding is allowed"));if(!this.ua&&(this.ua=[new J(1,0,
0),new J(0,1,0),new J(0,0,1)],this.Oe)){e=[];for(j=0;2>=j;j++)e.push(!isNaN(this.Oe[j])?this.ua[j].scale(this.Oe[j]):m)}j=0;j="gzip"==this.encoding||"gz"==this.encoding?(new ze(c.substr(d))).lg()[0][0]:c.substr(d);c=this.Sb[0]*this.Sb[1]*this.Sb[2];d=Array(c);e=-Infinity;k=Infinity;for(l=0;l<c;l++)f=this.Fd(j,0+l*this.Ed),d[l]=f,e=Math.max(e,f),k=Math.min(k,f);b.ba=[this.Sb[0],this.Sb[1],this.Sb[2]];b.Q=[(new J(this.ua[0][0],this.ua[0][1],this.ua[0][2])).Pb(),(new J(this.ua[1][0],this.ua[1][1],this.ua[1][2])).Pb(),
(new J(this.ua[2][0],this.ua[2][1],this.ua[2][2])).Pb()];b.Oa=b.ac=k;b.Ga=b.$b=e;-Infinity==b.qa&&(b.qa=k);Infinity==b.sa&&(b.sa=e);b.rd();ve(b,d,this.Sb,e);c=new td;c.fa=b;c.p=a;this.dispatchEvent(c)};
Ae.prototype.Cg={type:function(a){switch(a){case "unsigned char":case "uint8":this.Fd=this.n;this.Ed=1;break;case "signed char":case "int8":this.Fd=this.kh;this.Ed=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Fd=this.Gd;this.Ed=2;break;case "int":case "int32":break;case "float":this.Fd=this.Mc;this.Ed=4;break;default:i(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return a},encoding:function(a){return this.encoding=
a},dimension:function(a){return parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.Sb=e},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.ua=function(){var a,f,g;g=[];for(a=0,f=c.length;a<f;a++)d=c[a],g.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return g}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Oe=e}};A("X.parserNRRD",Ae);A("X.parserNRRD.prototype.parse",Ae.prototype.parse);function Be(a){x(a)||i(Error("Invalid data."));I.call(this);this.e="parserHelper";this.We=a;this.ub=0;this.tg=this.vb=1;this.vg=2;this.lf=this.ug=4;this.Zb=r}F(Be,I);function V(a,b){x(b)||(b=1);var c=a.Zb(a.We,a.ub,b)[0];a.ub+=a.vb*b;return 1==b?c[0]:c};function Ce(){qe.call(this);this.e="parserMGZ"}F(Ce,qe);
Ce.prototype.parse=function(a,b,c,d){var e=0,f=e=d?(new ze(c.substr(0))).lg()[0][0]:c.substr(0),g=e=0,h=0,j=0,k=0,l=[[0,0,0,0],[0,0,0,0],[0,0,0,0]],c=[],n=[],p=k=0,q,k={value:0,name:"uchar",size:1,ud:this.Zf.bind(this)},p={value:1,name:"int",size:4,ud:this.ag.bind(this)},u={value:3,name:"float",size:4,ud:this.Ke.bind(this)},v={value:4,name:"short",size:2,ud:this.$f.bind(this)},n=256,d=new Be(f),e=this.ag.bind(this),g=d.ug;d.Zb=e;d.vb=g;V(d);e=V(d);g=V(d);h=V(d);V(d);j=V(d);switch(j){case 0:q=k;break;
case 1:q=p;break;case 3:q=u;break;case 4:q=v}V(d);k=this.$f.bind(this);p=d.vg;d.Zb=k;d.vb=p;k=V(d);n-=2;0<k&&(k=this.Ke.bind(this),p=d.lf,d.Zb=k,d.vb=p,n-=60,c[0]=V(d),c[1]=V(d),c[2]=V(d),l[0][0]=V(d),l[1][0]=V(d),l[2][0]=V(d),l[0][1]=V(d),l[1][1]=V(d),l[2][1]=V(d),l[0][2]=V(d),l[1][2]=V(d),l[2][2]=V(d),l[0][3]=V(d),l[1][3]=V(d),l[2][3]=V(d));l=this.Zf.bind(this);k=d.tg;d.Zb=l;d.vb=k;V(d,n);f=q.ud(f,d.ub,e*g*h);n=f[0];k=f[2];p=f[1];d.ub+=d.vb*q.size;d.ub+16<d.We.length&&(q=this.Ke.bind(this),f=d.lf,
d.Zb=q,d.vb=f,V(d),V(d),V(d),V(d));q=[e,g,h];b.ba=q;b.Q=c;c=k;d=p;b.Oa=b.ac=c;b.Ga=b.$b=d;-Infinity==b.qa&&(b.qa=c);Infinity==b.sa&&(b.sa=d);b.rd();ve(b,n,q,d);c=new td;c.fa=b;c.p=a;this.dispatchEvent(c)};A("X.parserMGZ",Ce);A("X.parserMGZ.prototype.parse",Ce.prototype.parse);function De(){qe.call(this);this.e="parserCRV"}F(De,qe);
De.prototype.parse=function(a,b,c){var d=b.cd;0==d.length&&i(Error("No _pointIndices defined on the X.object."));var e=0,f=(this.n(c,e)<<16)+(this.n(c,e+1)<<8)+this.n(c,e+2)&16777215,e=e+3;if(16777215!=f)alert("Can't load curvature file, invalid magic number.");else{var f=ue(this,c,e),e=e+4+4+4,g=0,h=0,j=0,k=0,l=0,n=0,p=0,q=0,u=0,v=0,B=0,D=Array(f),C=Array(2),y=Array(2),E;for(E=0;E<f;E++){var M=re(this,c,e),e=e+4;0==E&&(C[0]=y[0]=M);0<=M?(g++,k+=M):(h++,j+=M);u+=M;B++;y[0]=Math.max(M,y[0]);C[0]=Math.min(M,
C[0]);D[E]=M}0!=g&&(l=k/g);0!=h&&(n=j/h);0!=B&&(v=u/B);for(c=u=j=k=0;c<f;c++)M=D[c],e=0,0<=M?(e=Math.pow(M-l,2),k+=e):(e=Math.pow(M-n,2),j+=e),e=Math.pow(M-v,2),u+=e;1<g&&(p=Math.sqrt(k/(g-1)));1<h&&(q=Math.sqrt(j/(h-1)));C[1]=n-2.5*q;y[1]=l+2.5*p;g=d.length;h=[];for(c=0;c<g;c++)j=d[c],j>f&&i(Error("Could not find scalar for vertex.")),j=D[j],h.push(j),h.push(j),h.push(j);b.B.Oa=C[1];b.B.Ga=y[1];-Infinity==b.B.qa&&(b.B.qa=C[1]);Infinity==b.B.sa&&(b.B.sa=y[1]);b.B.u=D;b.B.Zc=h;b.B.c=o;d=new td;d.fa=
b;d.p=a;this.dispatchEvent(d)}};A("X.parserCRV",De);A("X.parserCRV.prototype.parse",De.prototype.parse);function Ee(){qe.call(this);this.e="parserIMAGE"}F(Ee,qe);Ee.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||i(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;tc(f,"load",this.jh.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};Ee.prototype.jh=function(a,b,c){b.Ze=a;a=new td;a.fa=c;a.p=b;this.dispatchEvent(a)};A("X.parserIMAGE",Ee);A("X.parserIMAGE.prototype.parse",Ee.prototype.parse);function Fe(){qe.call(this);this.e="parserLUT"}F(Fe,qe);Fe.prototype.parse=function(a,b,c){var c=c.split("\n"),d=c.length,e;for(e=0;e<d;++e){var f=c[e],f=f.replace(/^\s+|\s+$/g,"");"#"!=f[0]&&(f=f.split(" "),f=f.filter(function(a){return""!=a}),6==f.length&&(f[2]=parseInt(f[2],10)/255,f[3]=parseInt(f[3],10)/255,f[4]=parseInt(f[4],10)/255,f[5]=parseInt(f[5],10)/255,a.add(parseInt(f[0],10),f[1],f[2],f[3],f[4],f[5],10)))}c=new td;c.fa=b;c.p=a;this.dispatchEvent(c)};A("X.parserLUT",Fe);
A("X.parserLUT.prototype.parse",Fe.prototype.parse);function Ge(){qe.call(this);this.e="parserTRK"}F(Ge,qe);
Ge.prototype.parse=function(a,b,c){var d=b.j,e=b.l,f=b.va,g=0,h=g+6,j=0,k=Infinity,l;for(l=0;3>l;l++)var n=this.Gd(c,h+2*l),j=Math.max(j,n),k=Math.min(k,n);var p=se(this,c,g+12,3)[0];se(this,c,g+24,3);var q=this.Gd(c,g+36),u=this.Gd(c,g+238);se(this,c,g+440,16);se(this,c,g+956,6);h=te(this,c,g+988);g=te(this,c,g+996);j=[];k=[];l=Infinity;var n=-Infinity,v=r,B=r,D=r,C=r,y=r,E=r,M;for(M=0;M<h;M++){for(var O=te(this,c,g),Y=new Q,ja=0,g=g+4,Z=0;Z<O;Z++){var qa=this.Mc(c,g),g=g+4,oa=this.Mc(c,g),g=g+4,
ia=this.Mc(c,g),g=g+4,N=r;0<q&&(se(this,c,g,q),g+=4*q);qa/=p[0];oa/=p[1];ia/=p[2];Y.add(qa,oa,ia);0<Z&&(N=Y.get(Z-1),ja+=Math.sqrt(Math.pow(qa-N[0],2)+Math.pow(oa-N[1],2)+Math.pow(ia-N[2],2)))}0<u&&(g+=4*u);Z=Y.Db;O=Y.Ab;qa=Y.Eb;oa=Y.Bb;ia=Y.Fb;N=Y.Cb;if(!v||Z<v)v=Z;if(!B||O>B)B=O;if(!D||qa<D)D=qa;if(!C||oa>C)C=oa;if(!y||ia<y)y=ia;if(!E||N>E)E=N;j.push(Y);k.push(ja)}c=(v+B)/2;g=(D+C)/2;E=(y+E)/2;y=[];for(M=0;M<h;M++){D=j[M];C=D.count;ja=k[M];l=Math.min(l,ja);n=Math.max(n,ja);for(Z=0;Z<C-1;Z++)q=D.get(Z),
p=D.get(Z+1),d.add(q[0],q[1],q[2]),d.add(p[0],p[1],p[2]),u=q[0]-c,v=q[1]-g,B=q[2]-E,Y=Math.sqrt(u*u+v*v+B*B),O=p[0]-c,qa=p[1]-g,oa=p[2]-E,ia=Math.sqrt(O*O+qa*qa+oa*oa),e.add(u/Y,v/Y,B/Y),e.add(O/ia,qa/ia,oa/ia),p=[Math.abs(p[0]-q[0]),Math.abs(p[1]-q[1]),Math.abs(p[2]-q[2])],q=Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2]),p[0]/=q,p[1]/=q,p[2]/=q,f.add(p[0],p[1],p[2]),f.add(p[0],p[1],p[2]),y.push(ja),y.push(ja),y.push(ja),y.push(ja),y.push(ja),y.push(ja)}b.ia="LINES";N=new sd;N.Oa=l;N.Ga=n;N.qa=l;N.sa=n;
N.Zc=y;N.kf=s;N.c=o;b.B=N;d=new td;d.fa=b;d.p=a;this.dispatchEvent(d)};A("X.parserTRK",Ge);A("X.parserTRK.prototype.parse",Ge.prototype.parse);function He(){I.call(this);this.e="loader";this.$c=new Pb;this.yc=0}F(He,I);function Ie(a,b){a.yc+=b/a.$c.ja()/3;a.yc=Math.min(1,a.yc);var c=new Od;c.mf=a.yc;a.dispatchEvent(c)}function Je(a){var a=a.r.ae,b=a.split(".").pop().toUpperCase();b in Ke||i(Error("The "+b+" file format is not supported."));return[a,b,Ke[b][0],Ke[b][1],Ke[b][2]]}
He.prototype.load=function(a,b){(!a||!b)&&i(Error("No container or object to load."));this.$c.set(a.wa,s);var c=Je(a),d=c[0],c=c[4];if(a.Xc!=r)this.parse(r,a,b);else{var e=new XMLHttpRequest;H(e,"abort",this.yf.bind(this,e,a,b));H(e,"error",this.yf.bind(this,e,a,b));H(e,"load",this.parse.bind(this,e,a,b));e.open("GET",d,o);c&&(e.responseType=c);e.overrideMimeType("text/plain; charset=x-user-defined");e.setRequestHeader("Content-Type","text/plain");e.send(r)}};
He.prototype.parse=function(a,b,c){Ie(this,1);setTimeout(function(){var d=Je(b),e=d[3],d=new d[2];tc(d,Cc,this.complete.bind(this));var f=b.Xc;f==r&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};He.prototype.complete=function(a){Ie(this,1);setTimeout(function(){var b=a.p,c=a.fa;b.r.c=s;c.w();this.$c.set(b.wa,o)}.bind(this),100)};He.prototype.yf=function(a,b,c){i(Error("Loading failed: ",b,c))};
var Ke={STL:[we,r,r],VTK:[xe,r,r],TRK:[Ge,r,r],FSM:[ye,r,r],INFLATED:[ye,r,r],SMOOTHWM:[ye,r,r],SPHERE:[ye,r,r],PIAL:[ye,r,r],ORIG:[ye,r,r],NRRD:[Ae,r,r],CRV:[De,r,r],MGH:[Ce,s,r],MGZ:[Ce,o,r],TXT:[Fe,r,r],LUT:[Fe,r,r],PNG:[Ee,"png","arraybuffer"],JPG:[Ee,"jpeg","arraybuffer"],JPEG:[Ee,"jpeg","arraybuffer"],GIF:[Ee,"gif","arraybuffer"]};function W(a,b){(!z(a)||!z(b))&&i(Error("A camera needs valid width and height values."));I.call(this);this.e="camera";this.ha=new J(0,0,100);this.Wb=new J(0,0,0);this.D=new J(0,1,0);this.s=this.Cd(this.ha,this.Wb);this.xb=new Float32Array(this.s.K())}F(W,I);W.prototype.Ee=function(a){(!x(a)||!(a instanceof T))&&i(Error("Could not observe the interactor."));H(a,zd,this.dh.bind(this));H(a,Bd,this.ih.bind(this))};
W.prototype.ih=function(a){a instanceof Jd||i(Error("Received no valid zoom event."));a.yb?this.mg(a.Za):this.ng(a.Za)};W.prototype.dh=function(a){a instanceof Hd||i(Error("Received no valid pan event."));this.Xf(a.O)};W.prototype.__defineGetter__("view",t("s"));W.prototype.__defineSetter__("view",function(a){(!x(a)||!(a instanceof L))&&i(Error("Invalid view matrix."));this.s=a;this.xb=new Float32Array(this.s.K())});W.prototype.__defineGetter__("position",function(){return[this.ha.x,this.ha.y,this.ha.b]});
W.prototype.__defineSetter__("position",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid position."));this.ha=new J(a[0],a[1],a[2]);this.reset()});W.prototype.__defineGetter__("focus",function(){return[this.Wb.x,this.Wb.y,this.Wb.b]});W.prototype.__defineSetter__("focus",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid focus"));this.Wb=new J(a[0],a[1],a[2]);this.reset()});W.prototype.__defineGetter__("up",function(){return[this.D.x,this.D.y,this.D.b]});
W.prototype.__defineSetter__("up",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid up vector."));this.D=new J(a[0],a[1],a[2]);this.reset()});w=W.prototype;w.reset=function(){this.s=this.Cd(this.ha,this.Wb);this.xb=new Float32Array(this.s.K())};w.Xf=function(a){a instanceof Array&&2==a.length?a=new Zc(a[0],a[1]):a instanceof Zc||i(Error("Invalid distance vector for pan operation."));a=new J(-a.x,a.y,0);a=ld(4).translate(a);this.s=new L(a.multiply(this.s));this.xb=new Float32Array(this.s.K())};
w.mg=function(a){var b=20;x(a)&&!a&&(b=1);a=new J(0,0,b);a=ld(4).translate(a);this.s=new L(a.multiply(this.s));this.xb=new Float32Array(this.s.K())};w.ng=function(a){var b=30;x(a)&&!a&&(b=1);a=new J(0,0,-b);a=ld(4).translate(a);this.s=new L(a.multiply(this.s));this.xb=new Float32Array(this.s.K())};w.Cd=function(a,b){(!(a instanceof J)||!(b instanceof J))&&i(Error("3D vectors required for calculating the view."));return ld(4)};A("X.camera",W);A("X.camera.prototype.pan",W.prototype.Xf);
A("X.camera.prototype.zoomIn",W.prototype.mg);A("X.camera.prototype.zoomOut",W.prototype.ng);function Le(a){function b(a,b,d){b=2*b*Math.PI;b=j.rb(Math.cos(b)).hc(k.rb(Math.sin(b)));a=c.hc(e.rb(a)).hc(b.rb(f));d=b.rb(1-Math.abs(d)).hc(g.rb(d));return new Ic(a,d)}this.t=[];for(var a=a||{},c=new Aa(a.start||[0,-1,0]),d=new Aa(a.end||[0,1,0]),e=d.Kc(c),f=a.Ka||1,a=a.Ne||16,g=e.Rc(),h=0.5<Math.abs(g.y()),j=(new Aa(h,!h,0)).oe(g).Rc(),k=j.oe(g).Rc(),h=new Ic(c,g.Ce()),d=new Ic(d,g.Rc()),l=[],n=0;n<a;n++){var p=n/a,q=(n+1)/a;l.push(new Kc([h,b(0,p,-1),b(0,q,-1)]));l.push(new Kc([b(0,q,0),b(0,p,
0),b(1,p,0),b(1,q,0)]));l.push(new Kc([d,b(1,q,1),b(1,p,1)]))}return Oc(l)}F(Le,Mc);function Me(){S.call(this);this.e="cylinder";this.fe=[-10,-10,-10];this.Pd=[10,10,10];this.Gb=10;this.Hb=32;Ca(this,new vd)}F(Me,S);Me.prototype.__defineGetter__("start",t("fe"));Me.prototype.__defineSetter__("start",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid start"));this.fe=a});Me.prototype.__defineGetter__("end",t("Pd"));Me.prototype.__defineSetter__("end",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid end"));this.Pd=a});
Me.prototype.__defineGetter__("radius",t("Gb"));Me.prototype.__defineSetter__("radius",function(a){z(a)||i(Error("Invalid radius."));this.Gb=a});Me.prototype.w=function(){xd(this,new Le({start:this.fe,end:this.Pd,Ka:this.Gb,Ne:this.Hb}));Me.h.w.call(this)};A("X.cylinder",Me);A("X.cylinder.prototype.modified",Me.prototype.w);function Ne(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new Aa(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new Ic(c.hc(e.rb(d)),e))}this.t=[];for(var a=a||{},c=new Aa(a.ke||[0,0,0]),d=a.Ka||1,e=a.Ne||16,a=a.uh||8,f=[],g=[],h=0;h<e;h++)for(var j=0;j<a;j++)g=[],b(h/e,j/a),0<j&&b((h+1)/e,j/a),j<a-1&&b((h+1)/e,(j+1)/a),b(h/e,(j+1)/a),f.push(new Kc(g));return Oc(f)}F(Ne,Mc);function Oe(){S.call(this);this.e="sphere";this.i=[0,0,0];this.Gb=5;this.Hb=32;this.wg=16;Ca(this,new vd)}F(Oe,S);Oe.prototype.__defineGetter__("center",t("i"));Oe.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.i=a});Oe.prototype.__defineGetter__("radius",t("Gb"));Oe.prototype.__defineSetter__("radius",function(a){z(a)||i(Error("Invalid radius."));this.Gb=a});
Oe.prototype.w=function(){xd(this,new Ne({ke:this.i,Ka:this.Gb,Ne:this.Hb,uh:this.wg}));Oe.h.w.call(this)};A("X.sphere",Oe);A("X.sphere.prototype.modified",Oe.prototype.w);function pe(a){U.call(this);this.e="labelmap";this.Va=a}F(pe,U);pe.prototype.w=function(){var a=new td;a.fa=this;this.dispatchEvent(a);this.Va.w()};A("X.labelmap",pe);function Pe(a){this.t=[];var a=a||{},b=new Aa(a.ke||[0,0,0]),c=!a.Ka?[1,1,1]:a.Ka.length?a.Ka:[a.Ka,a.Ka,a.Ka];return Oc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Kc(a[0].map(function(e){e=new Aa(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Ic(e,new Aa(a[1]))}))}))}F(Pe,Mc);function Qe(){S.call(this);this.e="cube";this.i=[0,0,0];this.Vd=this.Ud=this.Td=20;this.Ib=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ca(this,new vd)}F(Qe,S);Qe.prototype.__defineGetter__("center",t("i"));Qe.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.i=a});Qe.prototype.__defineGetter__("lengthX",t("Td"));
Qe.prototype.__defineSetter__("lengthX",function(a){z(a)||i(Error("Invalid lengthX."));this.Td=a});Qe.prototype.__defineGetter__("lengthY",t("Ud"));Qe.prototype.__defineSetter__("lengthY",function(a){z(a)||i(Error("Invalid lengthY."));this.Ud=a});Qe.prototype.__defineGetter__("lengthZ",t("Vd"));Qe.prototype.__defineSetter__("lengthZ",function(a){z(a)||i(Error("Invalid lengthZ."));this.Vd=a});Qe.prototype.w=function(){xd(this,new Pe({ke:this.i,Ka:[this.Td/2,this.Ud/2,this.Vd/2]}));Qe.h.w.call(this)};
A("X.cube",Qe);A("X.cube.prototype.modified",Qe.prototype.w);function Re(a){T.call(this,a);this.e="interactor3D"}F(Re,T);Re.prototype.Lc=function(a){Re.h.Lc.call(this,a);var b=new Jd;x(a.dc)||(a.dc=0);b.yb=0>a.dc;b.Za=o;this.dispatchEvent(b)};function Se(a){I.call(this);this.e="array";this.u=[];this.Ve=a}F(Se,I);Se.prototype.add=function(a){this.u.push(a);return o};Se.prototype.clear=function(){this.u.length=0};function Te(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Te(a,b,d);for(Te(a,d,c);b<d;++b)if(0<a.Ve(a.u[b],a.u[d])){var e=a.u[b];a.u[b]=a.u[d];for(var f=a,g=d,h=c;g+1<h&&0>f.Ve(f.u[g+1],e);){var j=f,k=g+1,l=j.u[g];j.u[g]=j.u[k];j.u[k]=l;++g}f.u[g]=e}}}Se.prototype.sort=function(){Te(this,0,this.u.length)};function Ue(a,b){W.call(this,a,b);this.e="camera2D"}F(Ue,W);function Ve(a,b){W.call(this,a,b);this.e="camera3D";this.Xe=45;this.gf=new Float32Array(We(this.Xe,a/b).K())}F(Ve,W);Ve.prototype.Ee=function(a){Ve.h.Ee.call(this,a);H(a,Ad,this.gh.bind(this))};Ve.prototype.gh=function(a){a instanceof Id||i(Error("Received no valid rotate event."));this.rotate(a.O)};function We(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new L([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
Ve.prototype.rotate=function(a){a instanceof Array&&2==a.length?a=new Zc(a[0],a[1]):a instanceof Zc||i(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=ld(4),d=new J(parseFloat(this.view.L(0,0)),parseFloat(this.view.L(0,1)),parseFloat(this.view.L(0,2))),b=c.rotate(b,new J(parseFloat(this.view.L(1,0)),parseFloat(this.view.L(1,1)),parseFloat(this.view.L(1,2)))),a=c.rotate(a,d);this.view=new L(this.view.multiply(a.multiply(b)));this.xb=new Float32Array(this.view.K())};
Ve.prototype.Cd=function(a,b){Ve.h.Cd.call(this,a,b);var c=ld(4),d=new J(a.x-b.x,a.y-b.y,a.b-b.b),d=d.normalize(),e=this.D.f();e.Cc(d)&&(e.b+=1.0E-6);var f=Wc(e,d),e=Wc(d,f),f=f.normalize(),e=e.normalize();K(c,0,0,f.x);K(c,0,1,f.y);K(c,0,2,f.b);K(c,0,3,0);K(c,1,0,e.x);K(c,1,1,e.y);K(c,1,2,e.b);K(c,1,3,0);K(c,2,0,d.x);K(c,2,1,d.y);K(c,2,2,d.b);K(c,2,3,0);K(c,3,0,0);K(c,3,1,0);K(c,3,2,0);K(c,3,3,1);d=a.f();return c.translate(d.R())};A("X.camera3D",Ve);A("X.camera3D.prototype.rotate",Ve.prototype.rotate);function Xe(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Xe.prototype.f=function(){return new Xe(this.top,this.right,this.bottom,this.left)};Xe.prototype.contains=function(a){return!this||!a?s:a instanceof Xe?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Ye(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Ye.prototype.f=function(){return new Ye(this.left,this.top,this.width,this.height)};Ye.prototype.Hf=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,o}return s};
Ye.prototype.contains=function(a){return a instanceof Ye?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};Ye.prototype.ka=function(){return new $c(this.width,this.height)};function Ze(a,b){var c=Xd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,r))?c[b]||c.getPropertyValue(b):""}function $e(a,b){return a.currentStyle?a.currentStyle[b]:r}function af(a,b){return Ze(a,b)||$e(a,b)||a.style&&a.style[b]}function bf(a){a=a?9==a.nodeType?a:Xd(a):document;return G&&!pb(9)&&!ie(Vd(a))?a.body:a.documentElement}
function cf(a){var b=a.getBoundingClientRect();G&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function df(a){if(G&&!pb(8))return a.offsetParent;for(var b=Xd(a),c=af(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=af(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return r}
function ef(a){for(var b=new Xe(0,Infinity,Infinity,0),c=Vd(a),d=c.I.body,e=c.I.documentElement,f=!Xa&&"CSS1Compat"==c.I.compatMode?c.I.documentElement:c.I.body;a=df(a);)if((!G||0!=a.clientWidth)&&(!Xa||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=af(a,"overflow")){var g=ff(a),h;h=a;if(Wa&&!nb("1.9")){var j=parseFloat(Ze(h,"borderLeftWidth"));if(gf(h))var k=h.offsetWidth-h.clientWidth-j-parseFloat(Ze(h,"borderRightWidth")),j=j+k;h=new Xc(j,parseFloat(Ze(h,"borderTopWidth")))}else h=new Xc(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.I.parentWindow||c.I.defaultView||window;e=c.document;Xa&&!nb("500")&&!Ya?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new $c(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new $c(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:r}
function ff(a){var b,c=Xd(a),d=af(a,"position"),e=Wa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Xc(0,0),g=bf(c);if(a==g)return f;if(a.getBoundingClientRect)b=cf(a),a=ke(Vd(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(Xa&&"fixed"==af(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Va||Xa&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=df(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!Va||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function hf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function jf(a){if("none"!=af(a,"display"))return kf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=kf(a);b.display=c;b.position=e;b.visibility=d;return a}function kf(a){var b=a.offsetWidth,c=a.offsetHeight,d=Xa&&!b&&!c;return(!fa(b)||d)&&a.getBoundingClientRect?(a=cf(a),new $c(a.right-a.left,a.bottom-a.top)):new $c(b,c)}function lf(a,b){a.style.display=b?"":"none"}function gf(a){return"rtl"==af(a,"direction")}
function mf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var nf={thin:2,medium:4,thick:6};function of(a,b){if("none"==$e(a,b+"Style"))return 0;var c=$e(a,b+"Width");return c in nf?nf[c]:mf(a,c)};function pf(a){this.Ba=a;this.q=[]}F(pf,Wb);var qf=[];function rf(a,b,c,d,e){ga(c)||(qf[0]=c,c=qf);for(var f=0;f<c.length;f++)a.q.push(H(b,c[f],d||a,e||s,a.Ba||a))}pf.prototype.Id=function(){xb(this.q,vc);this.q.length=0};pf.prototype.H=function(){pf.h.H.call(this);this.Id()};pf.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function sf(){}(function(a){a.zf=function(){return a.Mg||(a.Mg=new a)}})(sf);sf.prototype.De=0;sf.zf();function tf(a){this.Ia=a||Vd()}F(tf,Hc);w=tf.prototype;w.Kg=sf.zf();w.Gf=r;w.Ob=s;w.m=r;w.gc=r;w.pd=r;w.Bc=r;w.Ch=s;w.g=t("m");w.Me=function(a){this.gc&&this.gc!=a&&i(Error("Method not supported"));tf.h.Me.call(this,a)};w.vd=t("Ia");w.cc=function(){this.m=this.Ia.createElement("div")};w.Rb=function(a){this.qb(a)};w.qb=function(a,b){this.Ob&&i(Error("Component already rendered"));this.m||this.cc();a?a.insertBefore(this.m,b||r):this.Ia.I.body.appendChild(this.m);(!this.gc||this.gc.Ob)&&this.td()};
w.td=function(){this.Ob=o;uf(this,function(a){!a.Ob&&a.g()&&a.td()})};w.Ec=function(){uf(this,function(a){a.Ob&&a.Ec()});this.zd&&this.zd.Id();this.Ob=s};w.H=function(){tf.h.H.call(this);this.Ob&&this.Ec();this.zd&&(this.zd.Aa(),delete this.zd);uf(this,function(a){a.Aa()});!this.Ch&&this.m&&ee(this.m);this.gc=this.m=this.Bc=this.pd=r};function uf(a,b){a.pd&&xb(a.pd,b,m)}
w.removeChild=function(a,b){if(a){var c=ka(a)?a:a.Gf||(a.Gf=":"+(a.Kg.De++).toString(36)),a=this.Bc&&c?(c in this.Bc?this.Bc[c]:m)||r:r;if(c&&a){var d=this.Bc;c in d&&delete d[c];Eb(this.pd,a);b&&(a.Ec(),a.m&&ee(a.m));c=a;c==r&&i(Error("Unable to set parent component"));c.gc=r;tf.h.Me.call(c,r)}}a||i(Error("Child is not in parent component"));return a};function vf(){}F(vf,Hc);w=vf.prototype;w.Se=0;w.Jc=0;w.Be=100;w.xf=0;w.Pe=1;w.Og=s;w.Rg=s;w.Ld=function(a){a=wf(this,a);this.Se!=a&&(this.Se=a+this.xf>this.Be?this.Be-this.xf:a<this.Jc?this.Jc:a,!this.Og&&!this.Rg&&this.dispatchEvent("change"))};w.yd=function(){return wf(this,this.Se)};w.xd=function(){return wf(this,this.Jc)};w.wd=function(){return wf(this,this.Be)};function wf(a,b){return a.Pe==r?b:a.Jc+Math.round((b-a.Jc)/a.Pe)*a.Pe};function xf(a){this.Ia=a||Vd();this.ic=new vf;H(this.ic,"change",this.Hg,s,this)}F(xf,tf);var yf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};w=xf.prototype;w.cc=function(){this.Ea=this.vd().cc("div","progress-bar-thumb");var a=yf[this.Wf];this.m=this.vd().cc("div",a,this.Ea);zf(this);this.g().setAttribute("aria-valuemin",this.xd());this.g().setAttribute("aria-valuemax",this.wd())};
w.td=function(){xf.h.td.call(this);G&&7>cb&&H(this.g(),"resize",this.Nd,s,this);this.Nd();var a=this.g();a.setAttribute("role","progressbar");a.si="progressbar";this.g().setAttribute("aria-live","polite")};w.Ec=function(){xf.h.Ec.call(this);Af(this)};function Af(a){G&&7>cb&&uc(a.g(),"resize",a.Nd,s,a)}w.yd=function(){return this.ic.yd()};w.Ld=function(a){this.ic.Ld(a);this.g()&&zf(this)};function zf(a){var b=a.yd();a.g().setAttribute("aria-valuenow",b)}w.xd=function(){return this.ic.xd()};w.wd=function(){return this.ic.wd()};
w.Wf="horizontal";w.Hg=function(){this.Nd();this.dispatchEvent("change")};w.Nd=function(){if(this.Ea){var a=this.xd(),b=this.wd(),a=(this.yd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Wf?G&&7>cb?(this.Ea.style.top=0,this.Ea.style.height="100%",b=this.Ea.offsetHeight,a=Math.round(a*b),this.Ea.style.top=b-a+"px",this.Ea.style.height=a+"px"):(this.Ea.style.top=100-b+"%",this.Ea.style.height=b+"%"):this.Ea.style.width=b+"%"}};w.H=function(){Af(this);xf.h.H.call(this);this.Ea=r;this.ic.Aa()};function Bf(a,b){x(a)||i(Error("No valid parent element."));x(b)||i(Error("Invalid initial value."));xf.call(this);this.e="progressbar";this.ra=a;this.Wc=this.Ua=r;this.tb=[];this.tb=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Ld(b);this.we()}F(Bf,xf);
Bf.prototype.we=function(){if("static"==this.ra.style.position||""==this.ra.style.position)this.ra.style.position="relative";var a=document.getElementsByTagName("head")[0],b=ae("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.tb[0]),d=document.createTextNode(this.tb[1]),e=document.createTextNode(this.tb[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.Ua=b;this.Rb(this.ra);a=this.g();a.style.position="absolute";a.style.top=(this.ra.clientHeight-
5)/2;a.style.left=(this.ra.clientWidth-100)/2;a.classList.add("xtk-progress-bar")};function Cf(a){var b=a.g().style.top,c=a.g().style.left;ee(a.g());var d=new Bf(a.ra,100),e=d.g();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=m?e.firstElementChild:fe(e.firstChild)).classList.add("progress-bar-thumb-done");a.Wc=d}Bf.prototype.ze=function(){this.Ua&&ee(this.Ua);this.g()&&ee(this.g());this.Wc&&ee(this.Wc.g());this.Wc=this.Ua=r};var Df=ca.window;function Ef(a,b,c){la(a)?c&&(a=va(a,c)):a&&"function"==typeof a.handleEvent?a=va(a.handleEvent,a):i(Error("Invalid listener argument"));return 2147483647<b?-1:Df.setTimeout(a,b||0)};function Ff(){I.call(this);this.e="renderer";this.p=window.document.body;this.F=this.p.clientWidth;this.A=this.p.clientHeight;this.zb=this.o=this.Y=r;this.Pa=new Se(ud);this.nb=[];this.T=r;this.ff=this.Wd=this.ad=s;this.a=this.Ha=r;this.N={PROGRESSBAR_ENABLED:o};window.console.log("XTK Release 4 -- 04/12/12 -- http://www.goXTK.com")}F(Ff,I);w=Ff.prototype;w.eh=function(a){this.Ha&&this.Ha.Ld(100*a.mf)};w.Ug=function(a){x(a)&&a instanceof td&&this.La(a.fa)};
w.He=function(a){(!x(a)||!(a instanceof Ld))&&i(Error("Invalid hover event."))};w.fh=function(){var a=Yd(this.p);this.F=a.clientWidth;this.A=a.clientHeight;a=Yd(this.Y);a.width=this.F;a.height=this.A;this instanceof Gf&&(this.a.viewport(0,0,this.F,this.A),this.o.gf=new Float32Array(We(this.o.Xe,this.Y.width/this.Y.height).K()));this.kc()};w.Ie=function(a){(!x(a)||!(a instanceof Kd))&&i(Error("Invalid scroll event."))};Ff.prototype.__defineGetter__("config",t("N"));
Ff.prototype.__defineGetter__("interactor",t("zb"));Ff.prototype.__defineGetter__("camera",t("o"));Ff.prototype.__defineGetter__("loadingCompleted",t("Wd"));Ff.prototype.__defineGetter__("container",t("p"));Ff.prototype.__defineSetter__("container",function(a){x(a)||i(Error("An ID to a valid container (<div>..) is required."));var b=a;ka(b)&&(b=Yd(a));ma(b)&&1==b.nodeType||i(Error("Could not find the given container."));this.p=b});w=Ff.prototype;w.kc=function(){this.o.reset()};
function Hf(a){a.N.PROGRESSBAR_ENABLED&&a.Ha&&!a.Ue&&(Cf(a.Ha),a.Ue=Ef(function(){this.Ue=r;this.Ha&&(this.Ha.ze(),this.Ha=r);this.Rb()}.bind(a),700))}
w.aa=function(a){var b=ae("canvas");this.p.appendChild(b);this.F=this.p.clientWidth;this.A=this.p.clientHeight;b.width=this.F;b.height=this.A;try{var c=b.getContext(a);c||i(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.p.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+"</p>";
i(Error(e))}this.T=new He;H(this.T,Ed,this.eh.bind(this));this.Y=b;this.a=c;b=new Re(this.Y);"2d"==a&&(b=new me(this.Y));b.aa();H(b,Dd,this.kc.bind(this));H(b,Fd,this.He.bind(this));H(b,Cd,this.Ie.bind(this));this.zb=b;b=new Ve(this.F,this.A);"2d"==a&&(b=new Ue(this.F,this.A));b.Ee(this.zb);this.o=b;H(window,"resize",this.fh,s,this)};w.add=function(a){(a instanceof Qe||a instanceof Oe||a instanceof Me)&&a.w();this.nb.push(a);this.La(a)};
w.La=function(a){(!this.Y||!this.a)&&i(Error("The renderer was not initialized properly."));x(a)||(window.console.log(a),i(Error("Illegal object.")));Bc(a)||H(a,Cc,this.Ug.bind(this))};w.get=function(a){x(a)||i(Error("Invalid object id."));for(var b=this.Pa.u,c=b.length,d=0,d=0;d<c;d++)if(b[d].wa==a)return b[d];return r};
w.Rb=function(){(!this.Y||!this.a)&&i(Error("The renderer was not initialized properly."));x(this.jf)||(this.T.$c.me(s)?(this.N.PROGRESSBAR_ENABLED&&!this.Ha&&(this.Ha=new Bf(this.p,3)),this.jf=Ef(function(){this.jf=r;this.Rb()}.bind(this),100)):(!this.Wd&&!this.ff&&(this.ff=o,eval("this.onShowtime()"),this.Wd=o),this.Ha?Hf(this):(window.Nc(this.Rb.bind(this,this.Y)),eval("this.onRender()"),this.qb(s,o))))};w.Vf=aa();w.Tf=aa();w.qb=aa();
w.sd=function(){this.Pa.clear();delete this.Pa;this.nb.length=0;delete this.nb;delete this.T;this.T=r;delete this.o;this.o=r;delete this.zb;this.zb=r;delete this.a;this.a=r;ee(this.Y);delete this.Y;this.Y=r};function If(){I.call(this);this.e="shaders";this.jd="";this.jd="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\nattribute float vertexScalar;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform bool useScalars;\nuniform bool scalarsReplaceMode;\nuniform float scalarsMin;\nuniform float scalarsMax;\nuniform vec3 scalarsMinColor;\nuniform vec3 scalarsMaxColor;\nuniform float scalarsMinThreshold;\nuniform float scalarsMaxThreshold;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  fVertexNormal = vertexNormal;\n  fDiscardNow = 0.0;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useScalars) {\n    float scalarValue = vertexScalar;\n    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n      if (scalarsReplaceMode) {\n        fragmentColor = objectColor;\n      } else {\n        fDiscardNow = 1.0;\n      }\n    } else {\n      if (scalarsReplaceMode) {\n        fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n      } else {\n        fragmentColor = vertexColor;\n      }\n    }\n  } else if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.Yc="";this.Yc="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform bool volumeTexture;\nuniform bool useLabelMapTexture;\nuniform sampler2D textureSampler;\nuniform sampler2D textureSampler2;\nuniform float objectOpacity;\nuniform float labelmapOpacity;\nuniform float volumeLowerThreshold;\nuniform float volumeUpperThreshold;\nuniform float volumeScalarMin;\nuniform float volumeScalarMax;\nuniform vec3 volumeScalarMinColor;\nuniform vec3 volumeScalarMaxColor;\nuniform float volumeWindowLow;\nuniform float volumeWindowHigh;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (fDiscardNow > 0.0) {\n   discard;\n }\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n   vec4 textureSum = texture1;\n   if (volumeTexture) {\n     float _windowLow = (volumeWindowLow / volumeScalarMax);\n     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n     vec3 fac = _maxrange - _minrange;\n     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n   }\n   if (useLabelMapTexture) {\n     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n     if (texture2.a > 0.0) {\n       if (labelmapOpacity < 1.0) {\n         textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n       } else {\n         textureSum = texture2;\n       }\n     }\n   }\n   if (volumeTexture) {\n     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n     if (texture1.r < _volumeLowerThreshold ||\n         texture1.r > _volumeUpperThreshold) {\n       discard;\n     };\n   };\n   gl_FragColor = textureSum;\n   gl_FragColor.a = objectOpacity;\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n     gl_FragColor = vec4(fragmentColor,1.0);\n     return;\n   }\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
F(If,I);
var Jf={bi:"vertexPosition",ai:"vertexNormal",$h:"vertexColor",di:"vertexTexturePos",ci:"vertexScalar"},Kf={ei:"view",Kh:"perspective",Dh:"center",Jh:"objectTransform",Wh:"useObjectColor",Hh:"objectColor",Yh:"useScalars",Sh:"scalarsReplaceMode",Ph:"scalarsMin",Mh:"scalarsMax",Qh:"scalarsMinColor",Nh:"scalarsMaxColor",Rh:"scalarsMinThreshold",Oh:"scalarsMaxThreshold",Lh:"pointSize",Ih:"objectOpacity",Gh:"normal",Xh:"usePicking",Zh:"useTexture",Vh:"useLabelMapTexture",Fh:"labelmapOpacity",Th:"textureSampler",Uh:"textureSampler2",
fi:"volumeLowerThreshold",li:"volumeUpperThreshold",ii:"volumeScalarMin",gi:"volumeScalarMax",ji:"volumeScalarMinColor",hi:"volumeScalarMaxColor",ni:"volumeWindowLow",mi:"volumeWindowHigh",ki:"volumeTexture"};
function Lf(a){var b=Object.keys(Kf);Object.keys(Jf).every(function(a){a=Jf[a];return-1!=this.jd.search(a)||-1!=this.Yc.search(a)}.bind(a))||i(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=Kf[a];return-1!=this.jd.search(a)||-1!=this.Yc.search(a)}.bind(a))||i(Error("Could not find all uniforms in the shader sources."))};function Mf(a,b,c){x(a)||i(Error("Invalid GL Buffer."));x(b)||i(Error("Invalid number of items."));x(c)||i(Error("Invalid item size."));I.call(this);this.e="buffer";this.Z=a;this.eb=b;this.fb=c}F(Mf,I);function Nf(a,b,c,d,e,f,g,h){var j,k=c.offsetParent;if(k){var l="HTML"==k.tagName||"BODY"==k.tagName;if(!l||"static"!=af(k,"position"))j=ff(k),l||(j=Yc(j,new Xc(k.scrollLeft,k.scrollTop)))}k=ff(a);l=jf(a);k=new Ye(k.x,k.y,l.width,l.height);(l=ef(a))&&k.Hf(new Ye(l.left,l.top,l.right-l.left,l.bottom-l.top));var l=Vd(a),n=Vd(c);if(l.I!=n.I){var p=l.I.body,n=n.I.parentWindow||n.I.defaultView,q=new Xc(0,0),u=Xd(p)?Xd(p).parentWindow||Xd(p).defaultView:window,v=p;do{var B;if(u==n)B=ff(v);else{var D=v;
B=new Xc;if(1==D.nodeType)if(D.getBoundingClientRect)D=cf(D),B.x=D.left,B.y=D.top;else{var C=ke(Vd(D)),D=ff(D);B.x=D.x-C.x;B.y=D.y-C.y}else{var C=la(D.Gg),y=D;D.targetTouches?y=D.targetTouches[0]:C&&D.Ja.targetTouches&&(y=D.Ja.targetTouches[0]);B.x=y.clientX;B.y=y.clientY}}q.x+=B.x;q.y+=B.y}while(u&&u!=n&&(v=u.frameElement)&&(u=u.parent));p=Yc(q,ff(p));G&&!ie(l)&&(p=Yc(p,ke(l)));k.left+=p.x;k.top+=p.y}a=(b&4&&gf(a)?b^2:b)&-5;b=new Xc(a&2?k.left+k.width:k.left,a&1?k.top+k.height:k.top);j&&(b=Yc(b,
j));e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var E;if(g&&(E=ef(c))&&j)E.top-=j.y,E.right-=j.x,E.bottom-=j.y,E.left-=j.x;return Of(b,c,d,f,E,g,h)}
function Of(a,b,c,d,e,f,g){var a=a.f(),h=0,j=(c&4&&gf(b)?c^2:c)&-5,c=jf(b),g=g?g.f():c.f();if(d||0!=j)j&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),j&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){h=a;d=0;if(65==(f&65)&&(h.x<e.left||h.x>=e.right))f&=-2;if(132==(f&132)&&(h.y<e.top||h.y>=e.bottom))f&=-5;h.x<e.left&&f&1&&(h.x=e.left,d|=1);h.x<e.left&&h.x+g.width>e.right&&f&16&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4);h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1);f&2&&(d|=(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0));h.y<e.top&&f&4&&(h.y=e.top,d|=2);h.y>=e.top&&h.y+g.height>e.bottom&&f&32&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8);h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2);f&8&&(d|=(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0));h=d}else h=256;if(h&496)return h}f=a;e=Wa&&(Oa||bb)&&nb("1.9");f instanceof Xc?(a=f.x,f=f.y):(a=f,f=m);b.style.left=hf(a,e);b.style.top=hf(f,e);dd(c,g)||(a=ie(Vd(Xd(b))),
G&&(!a||!nb("8"))?(c=b.style,a?(G?(a=mf(b,$e(b,"paddingLeft")),e=mf(b,$e(b,"paddingRight")),f=mf(b,$e(b,"paddingTop")),d=mf(b,$e(b,"paddingBottom")),a=new Xe(f,e,d,a)):(a=Ze(b,"paddingLeft"),e=Ze(b,"paddingRight"),f=Ze(b,"paddingTop"),d=Ze(b,"paddingBottom"),a=new Xe(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),G?(e=of(b,"borderLeft"),f=of(b,"borderRight"),d=of(b,"borderTop"),b=of(b,"borderBottom"),b=new Xe(d,f,b,e)):(e=Ze(b,"borderLeftWidth"),f=Ze(b,"borderRightWidth"),d=Ze(b,"borderTopWidth"),
b=Ze(b,"borderBottomWidth"),b=new Xe(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,Wa?b.MozBoxSizing="border-box":Xa?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",b.height=Math.max(g.height,0)+"px"));return h};function Pf(){}Pf.prototype.Da=aa();function Qf(a,b){this.element=a;this.rf=b}F(Qf,Pf);Qf.prototype.Da=function(a,b,c){Nf(this.element,this.rf,a,b,m,c)};function Rf(a,b){this.Ba=new pf(this);this.Le(a||r);b&&(this.lc=b)}F(Rf,Hc);w=Rf.prototype;w.m=r;w.xg=o;w.nf=r;w.ea=s;w.th=s;w.Ae=-1;w.Jg=s;w.Bg=o;w.lc="toggle_display";w.g=t("m");w.Le=function(a){this.ea&&i(Error("Can not change this state of the popup while showing."));this.m=a};
function Sf(a,b){a.Pc&&a.Pc.stop();a.Hc&&a.Hc.stop();if(b){if(!a.ea&&a.Fe()){a.m||i(Error("Caller must call setElement before trying to show the popup"));a.Da();var c=Xd(a.m);a.Jg&&rf(a.Ba,c,"keydown",a.Sg,o);if(a.xg)if(rf(a.Ba,c,"mousedown",a.Rf,o),G){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}rf(a.Ba,c,"mousedown",a.Rf,o);rf(a.Ba,c,"deactivate",a.Qf)}else rf(a.Ba,c,"blur",a.Qf);"toggle_display"==
a.lc?(a.m.style.visibility="visible",lf(a.m,o)):"move_offscreen"==a.lc&&a.Da();a.ea=o;a.Pc?(tc(a.Pc,"end",a.Uf,s,a),a.Pc.play()):a.Uf()}}else Tf(a)}w.Da=da;function Tf(a,b){if(!a.ea||!a.dispatchEvent({type:"beforehide",target:b}))return s;a.Ba&&a.Ba.Id();a.Hc?(tc(a.Hc,"end",wa(a.qf,b),s,a),a.Hc.play()):a.qf(b);return o}w.qf=function(a){"toggle_display"==this.lc?this.th?Ef(this.Ff,0,this):this.Ff():"move_offscreen"==this.lc&&(this.m.style.left="-200px",this.m.style.top="-200px");this.ea=s;this.Ge(a)};
w.Ff=function(){this.m.style.visibility="hidden";lf(this.m,s)};w.Fe=function(){return this.dispatchEvent("beforeshow")};w.Uf=function(){this.Ae=xa();this.dispatchEvent("show")};w.Ge=function(a){xa();this.dispatchEvent({type:"hide",target:a})};w.Rf=function(a){a=a.target;!ge(this.m,a)&&(!this.nf||ge(this.nf,a))&&!(150>xa()-this.Ae)&&Tf(this,a)};w.Sg=function(a){27==a.keyCode&&Tf(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
w.Qf=function(a){if(this.Bg){var b=Xd(this.m);if(G||Va){if(a=b.activeElement,!a||ge(this.m,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>xa()-this.Ae||Tf(this)}};w.H=function(){Rf.h.H.call(this);this.Ba.Aa();Yb(this.Pc);Yb(this.Hc);delete this.m;delete this.Ba};function Uf(a,b){this.ne=a instanceof Xc?a:new Xc(a,b)}F(Uf,Pf);Uf.prototype.Da=function(a,b,c,d){Nf(bf(a),0,a,b,this.ne,c,r,d)};function Vf(a,b){this.lh=4;this.Hd=b||m;Rf.call(this,a)}F(Vf,Rf);Vf.prototype.Da=function(){if(this.Hd){var a=!this.ea&&"move_offscreen"!=this.lc,b=this.g();a&&(b.style.visibility="hidden",lf(b,o));this.Hd.Da(b,this.lh,this.qi);a&&lf(b,s)}};function Wf(a,b,c){this.Ia=c||(a?Vd(Yd(a)):Vd());Vf.call(this,this.Ia.cc("div",{style:"position:absolute;display:none;"}));this.pe=new Xc(1,1);this.Lb=new Tb;a&&Xf(this,a);if(b!=r)if(a=this.g(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Xd(a).createTextNode(b))}}F(Wf,Vf);var Yf=[];w=Wf.prototype;w.da=r;w.className="goog-tooltip";
w.dg=500;w.Ig=0;w.vd=t("Ia");function Xf(a,b){b=Yd(b);a.Lb.add(b);H(b,"mouseover",a.Cf,s,a);H(b,"mouseout",a.Ad,s,a);H(b,"mousemove",a.Bf,s,a);H(b,"focus",a.Af,s,a);H(b,"blur",a.Ad,s,a)}w.detach=function(a){if(a)a=Yd(a),Zf(this,a),this.Lb.remove(a);else{for(var b=this.Lb.Nb(),c=0;a=b[c];c++)Zf(this,a);this.Lb.clear()}};function Zf(a,b){uc(b,"mouseover",a.Cf,s,a);uc(b,"mouseout",a.Ad,s,a);uc(b,"mousemove",a.Bf,s,a);uc(b,"focus",a.Af,s,a);uc(b,"blur",a.Ad,s,a)}
w.Le=function(a){var b=this.g();b&&ee(b);Wf.h.Le.call(this,a);a&&(b=this.Ia.I.body,b.insertBefore(a,b.lastChild))};w.Fe=function(){if(!Rf.prototype.Fe.call(this))return s;if(this.anchor)for(var a,b=0;a=Yf[b];b++)ge(a.g(),this.anchor)||Sf(a,s);0<=wb(Yf,this)||Yf.push(this);a=this.g();a.className=this.className;$f(this);H(a,"mouseover",this.Ef,s,this);H(a,"mouseout",this.Df,s,this);ag(this);return o};
w.Ge=function(){Eb(Yf,this);for(var a=this.g(),b,c=0;b=Yf[c];c++)b.anchor&&ge(a,b.anchor)&&Sf(b,s);this.Yf&&bg(this.Yf);uc(a,"mouseover",this.Ef,s,this);uc(a,"mouseout",this.Df,s,this);this.anchor=m;if(0==(this.Wa?this.ea?4:1:this.fc?3:this.ea?2:0))this.Jd=s;Rf.prototype.Ge.call(this)};w.Of=function(a,b){this.anchor==a&&this.Lb.contains(this.anchor)&&(this.Jd||!this.ri?(Sf(this,s),this.ea||(this.anchor=a,this.Hd=b||cg(this,0)||m,this.ea&&this.Da(),Sf(this,o))):this.anchor=m);this.Wa=m};
w.Qg=function(a){this.fc=m;a==this.anchor&&(this.da==r||this.da!=this.g()&&!this.Lb.contains(this.da))&&(!this.of||!this.of.da)&&Sf(this,s)};function dg(a,b){var c=ke(a.Ia);a.pe.x=b.clientX+c.x;a.pe.y=b.clientY+c.y}w.Cf=function(a){var b=eg(this,a.target);this.da=b;$f(this);b!=this.anchor&&(this.anchor=b,this.Wa||(this.Wa=Ef(va(this.Of,this,b,m),this.dg)),fg(this),dg(this,a))};function eg(a,b){try{for(;b&&!a.Lb.contains(b);)b=b.parentNode;return b}catch(c){return r}}
w.Bf=function(a){dg(this,a);this.Jd=o};w.Af=function(a){this.da=a=eg(this,a.target);this.Jd=o;if(this.anchor!=a){this.anchor=a;var b=cg(this,1);$f(this);this.Wa||(this.Wa=Ef(va(this.Of,this,a,b),this.dg));fg(this)}};function cg(a,b){if(0==b){var c=a.pe.f();return new gg(c)}return new hg(a.da)}function fg(a){if(a.anchor)for(var b,c=0;b=Yf[c];c++)ge(b.g(),a.anchor)&&(b.of=a,a.Yf=b)}
w.Ad=function(a){var b=eg(this,a.target),c=eg(this,a.relatedTarget);b!=c&&(b==this.da&&(this.da=r),ag(this),this.Jd=s,this.ea&&(!a.relatedTarget||!ge(this.g(),a.relatedTarget))?bg(this):this.anchor=m)};w.Ef=function(){var a=this.g();this.da!=a&&($f(this),this.da=a)};w.Df=function(a){var b=this.g();if(this.da==b&&(!a.relatedTarget||!ge(b,a.relatedTarget)))this.da=r,bg(this)};function ag(a){a.Wa&&(Df.clearTimeout(a.Wa),a.Wa=m)}
function bg(a){if(2==(a.Wa?a.ea?4:1:a.fc?3:a.ea?2:0))a.fc=Ef(va(a.Qg,a,a.anchor),a.Ig)}function $f(a){a.fc&&(Df.clearTimeout(a.fc),a.fc=m)}w.H=function(){Sf(this,s);ag(this);this.detach();this.g()&&ee(this.g());this.da=r;delete this.Ia;Wf.h.H.call(this)};function gg(a,b){Uf.call(this,a,b)}F(gg,Uf);gg.prototype.Da=function(a,b,c){b=bf(a);b=ef(b);c=c?new Xe(c.top+10,c.right,c.bottom,c.left+10):new Xe(10,0,0,10);Of(this.ne,a,4,c,b,9)&496&&Of(this.ne,a,4,c,b,5)};function hg(a){Qf.call(this,a,3)}
F(hg,Qf);hg.prototype.Da=function(a,b,c){var d=new Xc(10,0);Nf(this.element,this.rf,a,b,d,c,9)&496&&Nf(this.element,2,a,1,d,c,5)};function ig(a,b,c,d){x(a)||i(Error("No valid parent element."));(!z(b)||!z(c))&&i(Error("Invalid coordinates."));(!x(d)||!(d instanceof T))&&i(Error("Invalid interactor."));Wf.call(this);this.e="caption";this.ra=a;this.ld=b;this.md=c;this.zb=d;this.Ua=r;this.tb=[];this.tb=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];tc(d,Gd,this.ze.bind(this));this.we()}F(ig,Wf);
ig.prototype.we=function(){if("static"==this.ra.style.position||""==this.ra.style.position)this.ra.style.position="relative";var a=document.getElementsByTagName("head")[0],b=ae("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.tb[0]);a.appendChild(b);b.appendChild(c);this.Ua=b;this.Hd=new Uf(this.ld,this.md)||m;this.ea&&this.Da();Sf(this,o);Xf(this,this.ra);this.g().classList.add("x-tooltip")};
ig.prototype.ze=function(){Sf(this,s);this.Ua&&ee(this.Ua);this.g()&&ee(this.g());this.Ua=r};function Gf(){Ff.call(this);this.e="renderer3D";this.tc=this.wc=this.sc=this.vc=this.rc=this.uc=this.be=this.ce=r;this.i=[0,0,0];this.hf=r;this.Od=new Pb;this.zc=new Pb;this.Ac=new Pb;this.Zd=new Pb;this.Vc=new Pb;this.fd=new Pb;this.gd=new Pb;this.hd=new Pb;this.N={PROGRESSBAR_ENABLED:o,PICKING_ENABLED:o,ORDERING_ENABLED:o,STATISTICS_ENABLED:s}}F(Gf,Ff);Gf.prototype.__defineGetter__("config",t("N"));w=Gf.prototype;w.mh=function(){this.tc=this.wc=this.sc=this.vc=this.rc=this.uc=r;this.i=[0,0,0]};
w.He=function(a){Gf.h.He.call(this,a);var b=a.ld,a=a.md,c=this.get(this.bg(b,a));if(c&&(c=c.Ub))(new ig(this.p,this.p.offsetLeft+b+10,this.p.offsetTop+a+10,this.zb)).g().innerHTML=c};
w.aa=function(){Gf.h.aa.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.F,this.A),this.a.clearColor(0,0,0,0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.N.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,
c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.F,this.A,0,this.a.RGB,this.a.UNSIGNED_BYTE,r);this.a.bindFramebuffer(this.a.FRAMEBUFFER,a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.F,this.A);this.a.bindRenderbuffer(this.a.RENDERBUFFER,r);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,
b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);this.hf=a}}catch(d){i(Error("Exception while accessing GL Context!\n"+d))}kg(this)};
function kg(a){var b=new If;(!x(a.Y)||!x(a.a)||!x(a.o))&&i(Error("Renderer was not initialized properly."));(!x(b)||!(b instanceof If))&&i(Error("Could not add shaders."));Lf(b);var c=a.a.createShader(a.a.FRAGMENT_SHADER),d=a.a.createShader(a.a.VERTEX_SHADER);a.a.shaderSource(c,b.Yc);a.a.shaderSource(d,b.jd);a.a.compileShader(c);a.a.compileShader(d);a.a.getShaderParameter(c,a.a.COMPILE_STATUS)||i(Error("Fragement Shader compilation failed!\n"+a.a.getShaderInfoLog(c)));a.a.getShaderParameter(d,a.a.COMPILE_STATUS)||
i(Error("Vertex Shader compilation failed!\n"+a.a.getShaderInfoLog(d)));var e=a.a.createProgram();a.a.attachShader(e,d);a.a.attachShader(e,c);a.a.linkProgram(e);a.a.getProgramParameter(e,a.a.LINK_STATUS)||i(Error("Could not create shader program!\n"+a.a.getShaderInfoLog(c)+"\n"+a.a.getShaderInfoLog(d)+"\n"+a.a.getProgramInfoLog(e)));a.a.useProgram(e);a.be=e;Object.keys(Jf).forEach(function(a){a=Jf[a];this.Od.set(a,this.a.getAttribLocation(this.be,a));this.a.enableVertexAttribArray(this.Od.get(a))}.bind(a));
Object.keys(Kf).forEach(function(a){a=Kf[a];this.zc.set(a,this.a.getUniformLocation(this.be,a))}.bind(a));a.ce=b}
w.La=function(a){Gf.h.La.call(this,a);var b=s;this.get(a.wa)&&(b=o);var c=a.wa,d=a.j,e=a.l,f=a.va,g=a.$,h=a.r,j=a.Jb,k=a.S,l=a.v,n=a.B;if(x(l)&&x(l.r)&&l.r.c)this.La(l);else if(x(l)&&l.c&&this.La(l),x(k)&&x(k.r)&&k.r.c)this.T.load(k,a);else if(x(g)&&x(g.r)&&g.r.c)this.T.load(g,a);else if(x(h)&&h.c)this.T.load(a,a);else if(x(n)&&x(n.r)&&n.r.c)this.T.load(n,a);else{if(0<a.d.length){h=a.d;k=h.length;for(l=l=0;l<k;l++)this.La(h[l])}if(0==d.count)a.c=s;else{for(h=0;this.ad;)h++,window.console.log("Possible thread lock avoided: "+
h);this.ad=o;k=a instanceof ne&&a.Va instanceof pe;b&&x(g)&&g.c&&(h=this.gd.get(c),x(h)&&this.a.isBuffer(h.Z)&&this.a.deleteBuffer(h.Z));h=r;x(g)&&(!b||g.c?(h=a.Ib,x(h)||i(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),l=s,g.lb&&(l=o),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,l),l=this.a.createTexture(),l.Lg=g.Ze,this.hd.set(g.wa,l),this.a.bindTexture(this.a.TEXTURE_2D,l),g.lb?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.ed,g.dd,
0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.lb):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,l.Lg),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),k?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,
this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,r),l=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,l),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new Mf(l,h.length,2),g.c=s):h=this.gd.get(c));Ie(this.T,0.1);if(k)this.ad=s,Ie(this.T,0.9);else{if(!b||d.c||j.c){k=j.k;g=k.Ca(new J(d.Db,d.Eb,d.Fb));k=k.Ca(new J(d.Ab,d.Bb,d.Cb));if(this.uc===r||
g.x<this.uc)this.uc=g.x;if(this.rc===r||k.x>this.rc)this.rc=k.x;if(this.vc===r||g.y<this.vc)this.vc=g.y;if(this.sc===r||k.y>this.sc)this.sc=k.y;if(this.wc===r||g.b<this.wc)this.wc=g.b;if(this.tc===r||k.b>this.tc)this.tc=k.b;this.i=[(this.uc+this.rc)/2,(this.vc+this.sc)/2,(this.wc+this.tc)/2];j.c=s}b&&d.c&&(j=this.Ac.get(c),x(j)&&this.a.isBuffer(j.Z)&&this.a.deleteBuffer(j.Z));j=r;!b||d.c?(j=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,j),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(d.V),
this.a.STATIC_DRAW),j=new Mf(j,d.count,3),d.c=s):j=this.Ac.get(c);Ie(this.T,0.3);b&&e.c&&(g=this.Ac.get(c),x(g)&&this.a.isBuffer(g.Z)&&this.a.deleteBuffer(g.Z));g=r;!b||e.c?(g=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(e.V),this.a.STATIC_DRAW),g=new Mf(g,e.count,3),e.c=s):g=this.Zd.get(c);Ie(this.T,0.3);b&&f.c&&(e=this.Vc.get(c),x(e)&&this.a.isBuffer(e.Z)&&this.a.deleteBuffer(e.Z));e=r;0<f.length&&(!b||f.c?(f.length!=d.length&&
i(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f.V),this.a.STATIC_DRAW),e=new Mf(e,f.count,3),f.c=s):e=this.Vc.get(c));Ie(this.T,0.2);b&&n&&n.c&&(f=this.fd.get(c),x(f)&&this.a.isBuffer(f.Z)&&this.a.deleteBuffer(f.Z));f=r;n&&(f=n.Zc,!b||n.c?(f.length!=d.length&&i(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),
this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f),this.a.STATIC_DRAW),f=new Mf(d,f.length,3),n.c=s):f=this.fd.get(c));Ie(this.T,0.1);b||this.Pa.add(a);this.Ac.set(c,j);this.Zd.set(c,g);this.Vc.set(c,e);this.gd.set(c,h);this.fd.set(c,f);this.ad=a.c=s}}}};function lg(a,b){var c=b.j.Uc,c=a.o.view.Ca(b.Jb.k.Ca(new J(c[0],c[1],c[2]))),c=Uc(a.o.ha,c);return Math.round(1E3*c)/1E3}
w.bg=function(a,b){if(this.N.PICKING_ENABLED){this.qb(o,s);var c=new Uint8Array(4);this.a.readPixels(a,this.A-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
w.qb=function(a,b){Gf.h.qb.call(this,a,b);var c=this.Pa.u,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.hf):this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);this.a.viewport(0,0,this.F,this.A);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.o.gf,f=this.o.xb;this.a.uniformMatrix4fv(this.zc.get("perspective"),s,e);this.a.uniformMatrix4fv(this.zc.get("view"),s,f);e=this.i;this.a.uniform3f(this.zc.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.nb.length;for(e=0;e<f;++e){var g=this.nb[e];if(g instanceof U){var h=new J(1,0,0),h=this.o.s.Ca(h),j=Uc(this.o.ha,h),h=new J(-1,0,0),h=this.o.s.Ca(h),k=Uc(this.o.ha,h),h=new J(0,1,0),h=this.o.s.Ca(h),l=Uc(this.o.ha,h),h=new J(0,-1,0),h=this.o.s.Ca(h),n=Uc(this.o.ha,h),h=new J(0,0,1),h=this.o.s.Ca(h),p=Uc(this.o.ha,h),h=new J(0,0,-1),h=this.o.s.Ca(h),h=Uc(this.o.ha,h),q=Math.max(j,l,p,k,n,h);q==j||q==k?oe(g,0):q==l||q==n?oe(g,1):(q==p||q==h)&&oe(g,2)}}if(this.N.ORDERING_ENABLED){j=s;f=this.nb;
g=f.length-1;do if(e=f[g],e instanceof U&&e.ya){k=e.ob;j=e.Ra.d;1==k?j=e.Sa.d:2==k&&(j=e.Ta.d);k=j.length;l=j[0];l.O=lg(this,l);l.P=e.P;n=j[k-1];n.O=lg(this,n);n.P=e.P;n=Math.round(1E3*((n.O-l.O)/k))/1E3;for(p=p=1;p<k-1;p++)h=Math.round(1E3*(l.O+p*n))/1E3,j[p].O=h,j[p].P=e.P;j=o}while(g--);f=this.Pa.u;g=f.length-1;do if(e=f[g],e.xa&&!(1==e.P||e instanceof ne))e.O=lg(this,e),j=o;while(g--);j&&this.Pa.sort()}if(f=!a&&x(b)&&b&&this.N.STATISTICS_ENABLED)var u=0,v=0,B=0,D=0;var e=this.Od,g=e.get("vertexPosition"),
j=e.get("vertexNormal"),k=e.get("vertexColor"),l=e.get("vertexTexturePos"),n=e.get("vertexScalar"),e=this.zc,p=e.get("usePicking"),h=e.get("useObjectColor"),q=e.get("objectColor"),C=e.get("useScalars"),y=e.get("scalarsReplaceMode"),E=e.get("scalarsMin"),M=e.get("scalarsMax"),O=e.get("scalarsMinColor"),Y=e.get("scalarsMaxColor"),ja=e.get("scalarsMinThreshold"),Z=e.get("scalarsMaxThreshold"),qa=e.get("objectOpacity"),oa=e.get("labelmapOpacity"),ia=e.get("useTexture"),N=e.get("useLabelMapTexture"),xc=
e.get("textureSampler"),bd=e.get("textureSampler2"),lb=e.get("volumeLowerThreshold"),cd=e.get("volumeUpperThreshold"),Db=e.get("volumeScalarMin"),fb=e.get("volumeScalarMax"),Bb=e.get("volumeWindowLow"),zc=e.get("volumeWindowHigh"),ya=e.get("volumeScalarMinColor"),kb=e.get("volumeScalarMaxColor"),yc=e.get("volumeTexture"),ad=e.get("objectTransform"),jg=e.get("pointSize"),e=d;do{var P=c[d-e];if(P){var R=r;P instanceof ne&&P.Va&&(R=P.Va);if(P.xa&&(!R||R.xa)){var pa=P.wa,Pa=P.qc,za=this.Ac.get(pa),Za=
this.Zd.get(pa),Rd=this.Vc.get(pa),Cb=this.fd.get(pa),he=this.gd.get(pa);this.a.bindBuffer(this.a.ARRAY_BUFFER,za.Z);this.a.vertexAttribPointer(g,za.fb,this.a.FLOAT,s,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,Za.Z);this.a.vertexAttribPointer(j,Za.fb,this.a.FLOAT,s,0,0);a?this.a.uniform1i(p,o):this.a.uniform1i(p,s);Rd&&!a&&!Pa?(this.a.uniform1i(h,s),this.a.bindBuffer(this.a.ARRAY_BUFFER,Rd.Z),this.a.vertexAttribPointer(k,Rd.fb,this.a.FLOAT,s,0,0)):(Za=1,Pa&&!a&&(Za=0),this.a.uniform1i(h,Za),Za=P.sb,
a&&(Za=[Math.floor(pa%65025%255)/255,Math.floor(pa%65025/255)/255,Math.floor(pa/65025)/255]),this.a.uniform3f(q,parseFloat(Za[0]),parseFloat(Za[1]),parseFloat(Za[2])),this.a.vertexAttribPointer(k,za.fb,this.a.FLOAT,s,0,0));Cb&&!a&&!Pa?(this.a.uniform1i(C,o),this.a.uniform1i(y,P.B.kf),pa=P.B.ib,Pa=P.B.gb,this.a.uniform3f(O,parseFloat(pa[0]),parseFloat(pa[1]),parseFloat(pa[2])),this.a.uniform3f(Y,parseFloat(Pa[0]),parseFloat(Pa[1]),parseFloat(Pa[2])),this.a.uniform1f(ja,parseFloat(P.B.qa)),this.a.uniform1f(Z,
parseFloat(P.B.sa)),this.a.uniform1f(E,parseFloat(P.B.Oa)),this.a.uniform1f(M,parseFloat(P.B.Ga)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Cb.Z),this.a.vertexAttribPointer(n,Cb.fb,this.a.FLOAT,s,0,0)):(this.a.uniform1i(C,s),this.a.vertexAttribPointer(n,za.fb,this.a.FLOAT,s,0,0));this.a.uniform1f(qa,parseFloat(P.P));P.$&&he&&!a?(this.a.uniform1i(ia,o),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.hd.get(P.$.wa)),this.a.uniform1i(xc,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,
he.Z),this.a.vertexAttribPointer(l,he.fb,this.a.FLOAT,s,0,0),this.a.uniform1i(yc,s)):(this.a.uniform1i(ia,s),this.a.vertexAttribPointer(l,za.fb,this.a.FLOAT,s,0,0));R&&(this.a.uniform1i(yc,s),this.a.uniform1f(lb,R.qa),this.a.uniform1f(cd,R.sa),this.a.uniform1f(Db,R.Oa),this.a.uniform1f(fb,R.Ga),pa=R.ib,Pa=R.gb,this.a.uniform3f(ya,parseFloat(pa[0]),parseFloat(pa[1]),parseFloat(pa[2])),this.a.uniform3f(kb,parseFloat(Pa[0]),parseFloat(Pa[1]),parseFloat(Pa[2])),this.a.uniform1f(Bb,R.ac),this.a.uniform1f(zc,
R.$b),Cb=R.v,this.a.uniform1i(N,s),R.ya?this.a.uniform1f(qa,parseFloat(R.P)):Cb&&Cb.xa&&(R=P.v.wa,this.a.uniform1i(N,o),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.hd.get(R)),this.a.uniform1i(bd,1),this.a.uniform1f(oa,Cb.P)));this.a.uniformMatrix4fv(ad,s,P.Jb.Ma);R=1;"POINTS"==P.ia&&(R=P.xc);this.a.uniform1f(jg,R);R=-1;P.ia==qd?(R=this.a.TRIANGLES,f&&(v+=za.eb/3)):"LINES"==P.ia?(this.a.lineWidth(P.Yb),R=this.a.LINES,f&&(B+=za.eb/2)):"POINTS"==P.ia?(R=this.a.POINTS,
f&&(D+=za.eb)):"TRIANGLE_STRIPS"==P.ia?(R=this.a.TRIANGLE_STRIP,f&&(v+=za.eb/3)):"POLYGONS"==P.ia&&(R=0==za.eb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(v+=za.eb/3));f&&(u+=za.eb);this.a.drawArrays(R,0,za.eb)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+u+" | ")+("Triangles: "+Math.round(v)+" | "),c=c+("Lines: "+B+" | ")+("Points: "+D+" | ")+("Textures: "+this.hd.ja()),window.console.log(c))}};
w.sd=function(){this.ce=r;delete this.ce;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);Gf.h.sd.call(this)};A("X.renderer3D",Gf);A("X.renderer3D.prototype.init",Gf.prototype.aa);A("X.renderer3D.prototype.add",Gf.prototype.add);A("X.renderer3D.prototype.onShowtime",Gf.prototype.Vf);A("X.renderer3D.prototype.onRender",Gf.prototype.Tf);A("X.renderer3D.prototype.get",Gf.prototype.get);A("X.renderer3D.prototype.render",Gf.prototype.Rb);A("X.renderer3D.prototype.destroy",Gf.prototype.sd);
A("X.renderer3D.prototype.resetBoundingBox",Gf.prototype.mh);A("X.renderer3D.prototype.resetViewAndRender",Gf.prototype.kc);A("X.renderer3D.prototype.pick",Gf.prototype.bg);function $(){Ff.call(this);this.e="renderer2D";this.$e=this.Rd=this.Ye=this.Qd=this.Qa=r;this.de=this.ee=0}F($,Ff);$.prototype.hh=aa();$.prototype.Ie=function(a){$.h.Ie.call(this,a);var b=this.nb[0];if(b){var c=this.Qa;b["index"+c]=a.D?b["index"+c]+1:b["index"+c]-1;b.w();eval("this.onScroll();")}};$.prototype.__defineGetter__("orientation",t("Qa"));$.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&"Y"!=a&&"Z"!=a&&i(Error("Invalid orientation."));this.Qa=a});
$.prototype.aa=function(){this.Qa||i(Error("No 2D orientation set."));$.h.aa.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.Y.width,this.Y.height);this.Qd=ae("canvas");this.Rd=ae("canvas")};$.prototype.kc=function(){$.h.kc.call(this);mg(this)};
$.prototype.La=function(a){$.h.La.call(this,a);var b=s;this.get(a.wa)&&(b=o);var c=a.r,d=a.v,e=a.S;if(x(d)&&x(d.r)&&d.r.c)this.La(d);else if(x(e)&&x(e.r)&&e.r.c)this.T.load(e,a);else if(x(c)&&c.c)this.T.load(a,a);else{d=c=0;e=a.ba;"X"==this.Qa?(this.Hb=a.Ra.d,c=e[2],d=e[1]):"Y"==this.Qa?(this.Hb=a.Sa.d,c=e[0],d=e[2]):"Z"==this.Qa&&(this.Hb=a.Ta.d,c=e[0],d=e[1]);"X"==this.Qa&&(e=d,d=c,c=e);this.ee=c;this.de=d;e=this.Qd;e.width=c;e.height=d;var f=this.Rd;f.width=c;f.height=d;this.Ye=e.getContext("2d");
this.$e=f.getContext("2d");b||(this.Pa.add(a),mg(this))}};function mg(a){var b=Math.min(a.F/a.ee,a.A/a.de);K(a.o.s,2,3,10*b-10)}
$.prototype.qb=function(a,b){$.h.qb.call(this,a,b);if(0!=this.Pa.u.length){var c=this.F,d=this.A,e=this.o.s;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.L(0,3),g=-1*e.L(1,3),h=Math.max(1+e.L(2,3)/10,0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.nb[0],j=this.Hb[parseInt(e["index"+this.Qa],10)],k=j.$.lb,j=j.v,l=r;j&&(l=j.lb);var n=this.ee,p=this.de,c=1/(2*h)*(c-n*h)+f,d=1/(2*h)*(d-p*h)+g,g=this.Ye,f=this.$e,h=g.getImageData(0,0,n,p),n=f.getImageData(0,0,n,p),p=h.data,
q=n.data,u=p.length,v=e.Ga,B=e.qa,D=e.sa,C=0;do{var y=[0,0,0,0],E=[0,0,0,0],M=k[C]/255*v,O=k[C],Y=e.ac/v,O=(O/255-Y)/(e.$b/v-Y),O=255*O;M>=B&&M<=D&&(y=new J(e.ib[0],e.ib[1],e.ib[2]),y=(new J(e.gb[0],e.gb[1],e.gb[2])).scale(O).add(y.scale(255-O)),y=[Math.floor(y.x),Math.floor(y.y),Math.floor(y.b),255],j&&(E=[l[C],l[C+1],l[C+2],l[C+3]]));O=u-1-C;p[O-3]=y[0];p[O-2]=y[1];p[O-1]=y[2];p[O]=y[3];q[O-3]=E[0];q[O-2]=E[1];q[O-1]=E[2];q[O]=E[3];C+=4}while(C<u);g.putImageData(h,0,0);f.putImageData(n,0,0);this.a.globalAlpha=
1;this.a.drawImage(this.Qd,c,d);j&&e.v.xa&&(this.a.globalAlpha=e.v.P,this.a.drawImage(this.Rd,c,d))}};A("X.renderer2D",$);A("X.renderer2D.prototype.init",$.prototype.aa);A("X.renderer2D.prototype.add",$.prototype.add);A("X.renderer2D.prototype.onShowtime",$.prototype.Vf);A("X.renderer2D.prototype.onRender",$.prototype.Tf);A("X.renderer2D.prototype.onScroll",$.prototype.hh);A("X.renderer2D.prototype.get",$.prototype.get);A("X.renderer2D.prototype.resetViewAndRender",$.prototype.kc);
A("X.renderer2D.prototype.render",$.prototype.Rb);A("X.renderer2D.prototype.destroy",$.prototype.sd);function ng(){S.call(this);this.e="fibers";Ca(this,new Rc)}F(ng,S);A("X.fibers",ng);function og(){S.call(this);this.e="mesh";Ca(this,new Rc)}F(og,S);A("X.mesh",og);
