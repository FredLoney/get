/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function i(a){throw a;}var l=void 0,n=!0,p=null,q=!1;function ca(){return function(){}}function da(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var w,ea=this;function fa(){}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return a!==l}function x(a){return a!=p}function ia(a){return"array"==ga(a)}function ja(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"string"==typeof a}function y(a){return"number"==typeof a}function na(a){return"function"==ga(a)}function oa(a){a=ga(a);return"object"==a||"array"==a||"function"==a}function pa(a){return a[ta]||(a[ta]=++ua)}
var ta="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ua=0;function va(a,b,c){return a.call.apply(a.bind,arguments)}function wa(a,b,c){a||i(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function xa(a,b,c){xa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:wa;return xa.apply(p,arguments)}function ya(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var za=Date.now||function(){return+new Date};
function z(a,b){var c=a.split("."),d=ea;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ha(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function A(a,b){function c(){}c.prototype=b.prototype;a.h=b.prototype;a.prototype=new c};function Aa(a,b,c){this.ua=this.ta=this.sa=0;3==arguments.length?(this.sa=Number(a),this.ta=Number(b),this.ua=Number(c)):a instanceof Aa?(this.sa=Number(a.x()),this.ta=Number(a.y()),this.ua=Number(a.b())):(this.sa=Number(a[0]),this.ta=Number(a[1]),this.ua=Number(a[2]))}
Aa.prototype={f:function(){return new Aa(this.sa,this.ta,this.ua)},Te:function(){return new Aa(-this.sa,-this.ta,-this.ua)},sc:function(a){return new Aa(this.sa+a.x(),this.ta+a.y(),this.ua+a.b())},Yc:function(a){return new Aa(this.sa-a.x(),this.ta-a.y(),this.ua-a.b())},Ab:function(a){return new Aa(this.sa*a,this.ta*a,this.ua*a)},bh:function(a){return new Aa(this.sa/a,this.ta/a,this.ua/a)},oc:function(a){return this.sa*a.x()+this.ta*a.y()+this.ua*a.b()},cg:function(a,b){return this.sc(a.Yc(this).Ab(b))},
length:function(){return Math.sqrt(this.oc(this))},fd:function(){return this.bh(this.length())},Be:function(a){return new Aa(this.ta*a.b()-this.ua*a.y(),this.ua*a.x()-this.sa*a.b(),this.sa*a.y()-this.ta*a.x())},x:t("sa"),y:t("ta"),b:t("ua")};var H=H||{};H.Ki=n;H.wa=function(a){eval("X.DEV === undefined")||window.console.time(a)};H.ja=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.Qg=0;this.Gi=function(){return this.Qg++}};function Da(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&i(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.bd;++c)window.bd=window[b[c]+"RequestAnimationFrame"],window.we=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.bd||(window.bd=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.we||(window.we=function(a){clearTimeout(a)})})();z("Function.prototype.bind",Function.prototype.bind);z("window.requestAnimationFrame",window.bd);
z("window.cancelAnimationFrame",window.we);function Ea(a){if(!Fa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ga,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ha,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ia,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ja,"&quot;"));return a}var Ga=/&/g,Ha=/</g,Ia=/>/g,Ja=/\"/g,Fa=/[&<>\"]/;var Ka,La,Ma,Na,Oa,Pa,Qa;function Sa(){return ea.navigator?ea.navigator.userAgent:p}function Ta(){return ea.navigator}Oa=Na=Ma=La=Ka=q;var Ua;if(Ua=Sa()){var Va=Ta();Ka=0==Ua.indexOf("Opera");La=!Ka&&-1!=Ua.indexOf("MSIE");Na=(Ma=!Ka&&-1!=Ua.indexOf("WebKit"))&&-1!=Ua.indexOf("Mobile");Oa=!Ka&&!Ma&&"Gecko"==Va.product}var Wa=Ka,I=La,Xa=Oa,Ya=Ma,Za=Na,$a,bb=Ta();$a=bb&&bb.platform||"";Pa=-1!=$a.indexOf("Mac");Qa=-1!=$a.indexOf("Win");var cb=!!Ta()&&-1!=(Ta().appVersion||"").indexOf("X11"),db;
a:{var eb="",fb;if(Wa&&ea.opera)var gb=ea.opera.version,eb="function"==typeof gb?gb():gb;else if(Xa?fb=/rv\:([^\);]+)(\)|;)/:I?fb=/MSIE\s+([^\);]+)(\)|;)/:Ya&&(fb=/WebKit\/(\S+)/),fb)var ib=fb.exec(Sa()),eb=ib?ib[1]:"";if(I){var jb,kb=ea.document;jb=kb?kb.documentMode:l;if(jb>parseFloat(eb)){db=""+jb;break a}}db=eb}var lb={};
function ob(a){var b;if(!(b=lb[a])){b=0;for(var c=(""+db).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),j=RegExp("(\\d*)(\\D*)","g");do{var m=k.exec(g)||["","",""],o=j.exec(h)||["","",""];if(0==m[0].length&&0==o[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==o[1].length?0:parseInt(o[1],10))?-1:(0==m[1].length?0:parseInt(m[1],
10))>(0==o[1].length?0:parseInt(o[1],10))?1:0)||((0==m[2].length)<(0==o[2].length)?-1:(0==m[2].length)>(0==o[2].length)?1:0)||(m[2]<o[2]?-1:m[2]>o[2]?1:0)}while(0==b)}b=lb[a]=0<=b}return b}var pb={};function qb(a){return pb[a]||(pb[a]=I&&document.documentMode&&document.documentMode>=a)};function rb(a,b){for(var c in a)b.call(l,a[c],c,a)}function sb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function tb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var ub="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function vb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<ub.length;f++)c=ub[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var wb=Array.prototype,xb=wb.indexOf?function(a,b,c){return wb.indexOf.call(a,b,c)}:function(a,b,c){c=c==p?0:0>c?Math.max(0,a.length+c):c;if(ma(a))return!ma(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},yb=wb.forEach?function(a,b,c){wb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},zb=wb.map?function(a,b,c){return wb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
ma(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ab=wb.some?function(a,b,c){return wb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return n;return q},Bb=wb.every?function(a,b,c){return wb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return q;return n};function Cb(a,b){var c=xb(a,b);0<=c&&wb.splice.call(a,c,1)}
function Db(a){return wb.concat.apply(wb,arguments)}function Hb(a){if(ia(a))return Db(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Ib(a,b,c){return 2>=arguments.length?wb.slice.call(a,b):wb.slice.call(a,b,c)};function Jb(a){if("function"==typeof a.na)a=a.na();else if(ja(a)||ma(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Kb(a){if("function"==typeof a.Wb)return a.Wb();if(ma(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return sb(a)}
function Lb(a,b){if("function"==typeof a.every)return a.every(b,l);if(ja(a)||ma(a))return Bb(a,b,l);var c;if("function"==typeof a.Uc)c=a.Uc();else if("function"!=typeof a.Wb)if(ja(a)||ma(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=tb(a);else c=l;for(var d=Kb(a),e=d.length,f=0;f<e;f++)if(!b.call(l,d[f],c&&c[f],a))return q;return n};var Mb="StopIteration"in ea?ea.StopIteration:Error("StopIteration");function Nb(){}Nb.prototype.next=function(){i(Mb)};Nb.prototype.xc=function(){return this};function Ob(a){if(a instanceof Nb)return a;if("function"==typeof a.xc)return a.xc(q);if(ja(a)){var b=0,c=new Nb;c.next=function(){for(;;){b>=a.length&&i(Mb);if(b in a)return a[b++];b++}};return c}i(Error("Not implemented"))}
function Pb(a,b){if(ja(a))try{yb(a,b,l)}catch(c){c!==Mb&&i(c)}else{a=Ob(a);try{for(;;)b.call(l,a.next(),l,a)}catch(d){d!==Mb&&i(d)}}};function Qb(a,b){this.B={};this.t=[];var c=arguments.length;if(1<c){c%2&&i(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.ue(a)}w=Qb.prototype;w.G=0;w.gd=0;w.na=t("G");w.Wb=function(){Rb(this);for(var a=[],b=0;b<this.t.length;b++)a.push(this.B[this.t[b]]);return a};w.Uc=function(){Rb(this);return this.t.concat()};w.ze=function(a){for(var b=0;b<this.t.length;b++){var c=this.t[b];if(Sb(this.B,c)&&this.B[c]==a)return n}return q};
w.Qc=function(a,b){if(this===a)return n;if(this.G!=a.na())return q;var c=b||Tb;Rb(this);for(var d,e=0;d=this.t[e];e++)if(!c(this.get(d),a.get(d)))return q;return n};function Tb(a,b){return a===b}w.clear=function(){this.B={};this.gd=this.G=this.t.length=0};w.remove=function(a){return Sb(this.B,a)?(delete this.B[a],this.G--,this.gd++,this.t.length>2*this.G&&Rb(this),n):q};
function Rb(a){if(a.G!=a.t.length){for(var b=0,c=0;b<a.t.length;){var d=a.t[b];Sb(a.B,d)&&(a.t[c++]=d);b++}a.t.length=c}if(a.G!=a.t.length){for(var e={},c=b=0;b<a.t.length;)d=a.t[b],Sb(e,d)||(a.t[c++]=d,e[d]=1),b++;a.t.length=c}}w.get=function(a,b){return Sb(this.B,a)?this.B[a]:b};w.set=function(a,b){Sb(this.B,a)||(this.G++,this.t.push(a),this.gd++);this.B[a]=b};w.ue=function(a){var b;a instanceof Qb?(b=a.Uc(),a=a.Wb()):(b=tb(a),a=sb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};w.f=function(){return new Qb(this)};
w.xc=function(a){Rb(this);var b=0,c=this.t,d=this.B,e=this.gd,f=this,g=new Nb;g.next=function(){for(;;){e!=f.gd&&i(Error("The map has changed since the iterator was created"));b>=c.length&&i(Mb);var h=c[b++];return a?h:d[h]}};return g};function Sb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Ub(a){this.B=new Qb;a&&this.ue(a)}function Vb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+pa(a):b.substr(0,1)+a}w=Ub.prototype;w.na=function(){return this.B.na()};w.add=function(a){this.B.set(Vb(a),a)};w.ue=function(a){for(var a=Kb(a),b=a.length,c=0;c<b;c++)this.add(a[c])};w.Td=function(a){for(var a=Kb(a),b=a.length,c=0;c<b;c++)this.remove(a[c])};w.remove=function(a){return this.B.remove(Vb(a))};w.clear=function(){this.B.clear()};
w.contains=function(a){a=Vb(a);return Sb(this.B.B,a)};w.ag=function(a){for(var b=new Ub,a=Kb(a),c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};w.Wb=function(){return this.B.Wb()};w.f=function(){return new Ub(this)};w.Qc=function(a){return this.na()==Jb(a)&&Wb(this,a)};
function Wb(a,b){var c=Jb(b);if(a.na()>c)return q;!(b instanceof Ub)&&5<c&&(b=new Ub(b));return Lb(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.ze)a=b.ze(a);else if(ja(b)||ma(b))a=0<=xb(b,a);else a:{for(var c in b)if(b[c]==a){a=n;break a}a=q}return a})}w.xc=function(){return this.B.xc(q)};function Xb(){}Xb.prototype.Pf=q;Xb.prototype.Ha=function(){this.Pf||(this.Pf=n,this.H())};Xb.prototype.H=function(){this.Zg&&Yb.apply(p,this.Zg)};function Zb(a){a&&"function"==typeof a.Ha&&a.Ha()}function Yb(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?Yb.apply(p,d):Zb(d)}};function $b(a,b){this.eg=b;this.Tc=[];a>this.eg&&i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Tc.push(this.Ed())}A($b,Xb);w=$b.prototype;w.Mf=p;w.Of=p;function ac(a,b){a.Tc.length<a.eg?a.Tc.push(b):a.Ee(b)}w.Ed=function(){return this.Mf?this.Mf():{}};w.Ee=function(a){if(this.Of)this.Of(a);else if(oa(a))if(na(a.Ha))a.Ha();else for(var b in a)delete a[b]};w.H=function(){$b.h.H.call(this);for(var a=this.Tc;a.length;)this.Ee(a.pop());delete this.Tc};function bc(){this.Rc=[];this.$e=new Qb;this.Dg=this.Eg=this.Fg=this.Ag=0;this.ed=new Qb;this.Jf=this.Cg=0;this.Ue=1;this.Fe=new $b(0,4E3);this.Fe.Ed=function(){return new cc};this.Bg=new $b(0,50);this.Bg.Ed=function(){return new dc};var a=this;this.Je=new $b(0,2E3);this.Je.Ed=function(){return""+a.Ue++};this.Je.Ee=ca()}function dc(){this.nf=this.time=this.count=0}
dc.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.nf&&a.push(" [VarAlloc = ",this.nf,"]");return a.join("")};function cc(){}function ec(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(fc(a.Qf-c));e.push(" ",gc(a.Qf-b));0==a.Ge?e.push(" Start        "):1==a.Ge?(e.push(" Done "),e.push(fc(a.Cj-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Ci&&e.push("[VarAlloc ",a.Ci,"] ");return e.join("")}
cc.prototype.toString=function(){return this.type==p?this.Yg:"["+this.type+"] "+this.Yg};bc.prototype.reset=function(){for(var a=0;a<this.Rc.length;a++){var b=this.Fe.id;b&&ac(this.Je,b);ac(this.Fe,this.Rc[a])}this.Rc.length=0;this.$e.clear();this.Ag=za();this.Jf=this.Cg=this.Dg=this.Eg=this.Fg=0;b=this.ed.Uc();for(a=0;a<b.length;a++){var c=this.ed.get(b[a]);c.count=0;c.time=0;c.nf=0;ac(this.Bg,c)}this.ed.clear()};
bc.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Rc.length;d++){var e=this.Rc[d];1==e.Ge&&c.pop();a.push(" ",ec(e,this.Ag,b,c.join("")));b=e.Qf;a.push("\n");0==e.Ge&&c.push("|  ")}if(0!=this.$e.na()){var f=za();a.push(" Unstopped timers:\n");Pb(this.$e,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",gc(b.startTime),")\n")})}b=this.ed.Uc();for(d=0;d<b.length;d++)c=this.ed.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Cg,"\n","Total comments created ",
this.Jf,"\n","Overhead start: ",this.Fg," ms\n","Overhead end: ",this.Eg," ms\n","Overhead comment: ",this.Dg," ms\n");return a.join("")};function fc(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function gc(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new bc;function hc(){}var ic=0;w=hc.prototype;w.key=0;w.uc=q;w.ve=q;w.ba=function(a,b,c,d,e,f){na(a)?this.bg=n:a&&a.handleEvent&&na(a.handleEvent)?this.bg=q:i(Error("Invalid listener argument"));this.Wc=a;this.wg=b;this.src=c;this.type=d;this.capture=!!e;this.He=f;this.ve=q;this.key=++ic;this.uc=q};w.handleEvent=function(a){return this.bg?this.Wc.call(this.He||this.src,a):this.Wc.handleEvent.call(this.Wc,a)};!I||qb(9);var jc=!I||qb(9),kc=I&&!ob("8");!Ya||ob("528");Xa&&ob("1.9b")||I&&ob("8")||Wa&&ob("9.5")||Ya&&ob("528");!Xa||ob("8");function lc(a,b){this.type=a;this.currentTarget=this.target=b}A(lc,Xb);w=lc.prototype;w.H=function(){delete this.type;delete this.target;delete this.currentTarget};w.$b=q;w.cd=n;w.stopPropagation=function(){this.$b=n};w.preventDefault=function(){this.cd=q};function mc(a){mc[" "](a);return a}mc[" "]=fa;function nc(a,b){a&&this.ba(a,b)}A(nc,lc);w=nc.prototype;w.target=p;w.relatedTarget=p;w.offsetX=0;w.offsetY=0;w.clientX=0;w.clientY=0;w.screenX=0;w.screenY=0;w.button=0;w.keyCode=0;w.charCode=0;w.ctrlKey=q;w.altKey=q;w.shiftKey=q;w.metaKey=q;w.Qa=p;
w.ba=function(a,b){var c=this.type=a.type;lc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Xa){var e;a:{try{mc(d.nodeName);e=n;break a}catch(f){}e=q}e||(d=p)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Ya||a.offsetX!==l?a.offsetX:a.layerX;this.offsetY=Ya||a.offsetY!==l?a.offsetY:a.layerY;this.clientX=a.clientX!==l?a.clientX:a.pageX;this.clientY=a.clientY!==l?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Qa=a;delete this.cd;delete this.$b};w.stopPropagation=function(){nc.h.stopPropagation.call(this);this.Qa.stopPropagation?this.Qa.stopPropagation():this.Qa.cancelBubble=n};
w.preventDefault=function(){nc.h.preventDefault.call(this);var a=this.Qa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,kc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};w.kh=t("Qa");w.H=function(){nc.h.H.call(this);this.relatedTarget=this.currentTarget=this.target=this.Qa=p};var oc={},pc={},qc={},rc={};
function J(a,b,c,d,e){if(b){if(ia(b)){for(var f=0;f<b.length;f++)J(a,b[f],c,d,e);return p}var d=!!d,g=pc;b in g||(g[b]={G:0,za:0});g=g[b];d in g||(g[d]={G:0,za:0},g.G++);var g=g[d],h=pa(a),k;g.za++;if(g[h]){k=g[h];for(f=0;f<k.length;f++)if(g=k[f],g.Wc==c&&g.He==e){if(g.uc)break;return k[f].key}}else k=g[h]=[],g.G++;f=sc();f.src=a;g=new hc;g.ba(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);oc[c]=g;qc[h]||(qc[h]=[]);qc[h].push(g);a.addEventListener?(a==ea||!a.Nf)&&a.addEventListener(b,f,d):a.attachEvent(b in
rc?rc[b]:rc[b]="on"+b,f);return c}i(Error("Invalid event type"))}function sc(){var a=tc,b=jc?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function uc(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)uc(a,b[f],c,d,e);else a=J(a,b,c,d,e),oc[a].ve=n}
function vc(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)vc(a,b[f],c,d,e);else{d=!!d;a:{f=pc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=pa(a),f[a]))){a=f[a];break a}a=p}if(a)for(f=0;f<a.length;f++)if(a[f].Wc==c&&a[f].capture==d&&a[f].He==e){wc(a[f].key);break}}}
function wc(a){if(!oc[a])return q;var b=oc[a];if(b.uc)return q;var c=b.src,d=b.type,e=b.wg,f=b.capture;c.removeEventListener?(c==ea||!c.Nf)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in rc?rc[d]:rc[d]="on"+d,e);c=pa(c);e=pc[d][f][c];if(qc[c]){var g=qc[c];Cb(g,b);0==g.length&&delete qc[c]}b.uc=n;e.ig=n;xc(d,f,c,e);delete oc[a];return n}
function xc(a,b,c,d){if(!d.Nd&&d.ig){for(var e=0,f=0;e<d.length;e++)d[e].uc?d[e].wg.src=p:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.ig=q;0==f&&(delete pc[a][b][c],pc[a][b].G--,0==pc[a][b].G&&(delete pc[a][b],pc[a].G--),0==pc[a].G&&delete pc[a])}}function yc(a){var b,c=0,d=b==p;b=!!b;if(a==p)rb(qc,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)wc(f.key),c++}});else if(a=pa(a),qc[a])for(var a=qc[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)wc(f.key),c++}}
function zc(a){var b=Ac,a=pa(a),c=qc[a];if(c){var d=ha(b),e=ha(l);return d&&e?(c=pc[b],!!c&&!!c[l]&&a in c[l]):!d&&!e?n:Ab(c,function(a){return d&&a.type==b||e&&a.capture==l})}return q}function Ec(a,b,c,d,e){var f=1,b=pa(b);if(a[b]){a.za--;a=a[b];a.Nd?a.Nd++:a.Nd=1;try{for(var g=a.length,h=0;h<g;h++){var k=a[h];k&&!k.uc&&(f&=Fc(k,e)!==q)}}finally{a.Nd--,xc(c,d,b,a)}}return Boolean(f)}function Fc(a,b){var c=a.handleEvent(b);a.ve&&wc(a.key);return c}
function tc(a,b){if(!oc[a])return n;var c=oc[a],d=c.type,e=pc;if(!(d in e))return n;var e=e[d],f,g;if(!jc){var h;if(!(h=b))a:{h=["window","event"];for(var k=ea;f=h.shift();)if(x(k[f]))k=k[f];else{h=p;break a}h=k}f=h;h=n in e;k=q in e;if(h){if(0>f.keyCode||f.returnValue!=l)return n;a:{var j=q;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(m){j=n}if(j||f.returnValue==l)f.returnValue=n}}j=new nc;j.ba(f,this);f=n;try{if(h){for(var o=[],r=j.currentTarget;r;r=r.parentNode)o.push(r);g=e[n];g.za=g.G;for(var s=
o.length-1;!j.$b&&0<=s&&g.za;s--)j.currentTarget=o[s],f&=Ec(g,o[s],d,n,j);if(k){g=e[q];g.za=g.G;for(s=0;!j.$b&&s<o.length&&g.za;s++)j.currentTarget=o[s],f&=Ec(g,o[s],d,q,j)}}else f=Fc(c,j)}finally{o&&(o.length=0),j.Ha()}return f}d=new nc(b,this);try{f=Fc(c,d)}finally{d.Ha()}return f}var Gc=0;function Hc(a){return a+"_"+Gc++};function Ic(){}A(Ic,Xb);w=Ic.prototype;w.Nf=n;w.Pd=p;w.ef=da("Pd");w.addEventListener=function(a,b,c,d){J(this,a,b,c,d)};w.removeEventListener=function(a,b,c,d){vc(this,a,b,c,d)};
w.dispatchEvent=function(a){var b=a.type||a,c=pc;if(b in c){if(ma(a))a=new lc(a,this);else if(a instanceof lc)a.target=a.target||this;else{var d=a,a=new lc(b,this);vb(a,d)}var d=1,e,c=c[b],b=n in c,f;if(b){e=[];for(f=this;f;f=f.Pd)e.push(f);f=c[n];f.za=f.G;for(var g=e.length-1;!a.$b&&0<=g&&f.za;g--)a.currentTarget=e[g],d&=Ec(f,e[g],a.type,n,a)&&a.cd!=q}if(q in c)if(f=c[q],f.za=f.G,b)for(g=0;!a.$b&&g<e.length&&f.za;g++)a.currentTarget=e[g],d&=Ec(f,e[g],a.type,q,a)&&a.cd!=q;else for(e=this;!a.$b&&e&&
f.za;e=e.Pd)a.currentTarget=e,d&=Ec(f,e,a.type,q,a)&&a.cd!=q;a=Boolean(d)}else a=n;return a};w.H=function(){Ic.h.H.call(this);yc(this);this.Pd=p};function K(){this.c="base";this.Ca=window["X.counter"].Gi();this.d=q}A(K,Ic);K.prototype.__defineGetter__("classname",t("c"));K.prototype.__defineGetter__("id",t("Ca"));z("X.base",K);function Jc(a,b){this.ra=new Aa(a);this.T=new Aa(b)}Jc.prototype={f:function(){return new Jc(this.ra.f(),this.T.f())},Vb:function(){this.T=this.T.Te()},wh:function(a,b){return new Jc(this.ra.cg(a.ra,b),this.T.cg(a.T,b))}};function Kc(a,b){this.T=a;this.hd=b}Kc.prototype={f:function(){return new Kc(this.T.f(),this.hd)},Vb:function(){this.T=this.T.Te();this.hd=-this.hd}};function Lc(a,b){this.fb=a;this.Xd=b;var c=a[0].ra,d=a[2].ra,d=a[1].ra.Yc(c).Be(d.Yc(c)).fd();this.qa=new Kc(d,d.oc(c))}
Lc.prototype={f:function(){var a=this.fb.map(function(a){return a.f()});return new Lc(a,this.Xd)},Vb:function(){this.fb.reverse().map(function(a){a.Vb()});this.qa.Vb()},zg:function(a,b,c,d,e){for(var f=0,g=[],h=0;h<this.fb.length;h++){var k=a.T.oc(this.fb[h].ra)-a.hd,k=-1.0E-5>k?2:1.0E-5<k?1:0,f=f|k;g.push(k)}switch(f){case 0:(0<a.T.oc(this.qa.T)?b:c).push(this);break;case 1:d.push(this);break;case 2:e.push(this);break;case 3:b=[];c=[];for(h=0;h<this.fb.length;h++){var j=(h+1)%this.fb.length,k=g[h],
m=g[j],f=this.fb[h],j=this.fb[j];2!=k&&b.push(f);1!=k&&c.push(2!=k?f.f():f);3==(k|m)&&(k=(a.hd-a.T.oc(f.ra))/a.T.oc(j.ra.Yc(f.ra)),k=f.wh(j,k),b.push(k),c.push(k.f()))}3<=b.length&&d.push(new Lc(b,this.Xd));3<=c.length&&e.push(new Lc(c,this.Xd))}}};function Mc(a){this.V=this.W=this.qa=p;this.v=[];a&&this.lc(a)}
Mc.prototype={f:function(){var a=new Mc;a.ni(this.qa&&this.qa.f());a.mi(this.W&&this.W.f());a.li(this.V&&this.V.f());a.Vd(this.v.map(function(a){return a.f()}));return a},Q:function(){for(var a=0;a<this.v.length;a++)this.v[a].Vb();this.qa.Vb();this.W&&this.W.Q();this.V&&this.V.Q();a=this.W;this.W=this.V;this.V=a},ye:function(a){if(!this.qa)return a.slice();for(var b=[],c=[],d=0;d<a.length;d++)a[d].zg(this.qa,b,c,b,c);this.W&&(b=this.W.ye(b));c=this.V?this.V.ye(c):[];return b.concat(c)},Ga:function(a){this.v=
a.ye(this.v);this.W&&this.W.Ga(a);this.V&&this.V.Ga(a)},wb:function(){var a=this.v.slice();this.W&&(a=a.concat(this.W.wb()));this.V&&(a=a.concat(this.V.wb()));return a},lc:function(a){if(a.length){this.qa||(this.qa=a[0].qa.f());for(var b=[],c=[],d=0;d<a.length;d++)a[d].zg(this.qa,this.v,this.v,b,c);b.length&&(this.W||(this.W=new Mc),this.W.lc(b));c.length&&(this.V||(this.V=new Mc),this.V.lc(c))}},ni:da("qa"),mi:da("W"),li:da("V"),Vd:da("v")};function Nc(){this.v=[]}function Oc(a){var b=new Nc;b.Vd(a);return b}
Nc.prototype={f:function(){var a=new Nc;a.Vd(this.v.map(function(a){return a.f()}));return a},kf:function(a){var b=new Mc(this.f().v),a=new Mc(a.f().v);b.Ga(a);a.Ga(b);a.Q();a.Ga(b);a.Q();b.lc(a.wb());return Oc(b.wb())},eb:function(a){var b=new Mc(this.f().v),a=new Mc(a.f().v);b.Q();b.Ga(a);a.Ga(b);a.Q();a.Ga(b);a.Q();b.lc(a.wb());b.Q();return Oc(b.wb())},Le:function(a){var b=new Mc(this.f().v),a=new Mc(a.f().v);b.Q();a.Ga(b);a.Q();b.Ga(a);a.Ga(b);b.lc(a.wb());b.Q();return Oc(b.wb())},inverse:function(){var a=
this.f();a.v.map(function(a){a.Vb()});return a},Vd:da("v")};function Pc(){K.call(this);this.c="indexer";this.te=[];this.da={}}A(Pc,K);Pc.prototype.add=function(a){x(a)||i(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.da||(this.da[b]=this.te.length,this.te.push(a));return this.da[b]};Pc.prototype.unique=t("te");function Qc(a){K.call(this);this.c="file";this.me=a;this.d=n}A(Qc,K);function Rc(){this.md=this.u=p}Rc.prototype.__defineSetter__("file",function(a){this.u=x(a)?new Qc(a):p});Rc.prototype.__defineGetter__("file",function(){return!this.u?"":this.u.me});Rc.prototype.__defineGetter__("filedata",t("md"));Rc.prototype.__defineSetter__("filedata",da("md"));function Sc(){K.call(this);this.c="colortable";this.da=new Qb;Da(this,new Rc)}A(Sc,K);Sc.prototype.add=function(a,b,c,d,e,f){(!y(a)||!y(c)||!y(d)||!y(e)||!y(f))&&i(Error("Invalid color table entry."));this.da.set(a,[b,c,d,e,f]);this.d=n};function Tc(a,b,c){this.x=ha(a)?a:0;this.y=ha(b)?b:0;this.b=ha(c)?c:0}Tc.prototype.f=function(){return new Tc(this.x,this.y,this.b)};Tc.prototype.jf=function(){return[this.x,this.y,this.b]};function L(a,b,c){this.x=a;this.y=b;this.b=c}A(L,Tc);w=L.prototype;w.f=function(){return new L(this.x,this.y,this.b)};w.Yb=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};w.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};w.Q=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};w.normalize=function(){return this.scale(1/this.Yb())};w.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
w.eb=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};w.Qc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Uc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Vc(a,b){return new L(a.x+b.x,a.y+b.y,a.b+b.b)}function Wc(a,b){return new L(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Xc(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}Xc.prototype.f=function(){return new Xc(this.x,this.y)};function Yc(a,b){return new Xc(a.x-b.x,a.y-b.y)};function Zc(a,b){this.x=a;this.y=b}A(Zc,Xc);w=Zc.prototype;w.f=function(){return new Zc(this.x,this.y)};w.Yb=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};w.scale=function(a){this.x*=a;this.y*=a;return this};w.Q=function(){this.x=-this.x;this.y=-this.y;return this};w.normalize=function(){return this.scale(1/this.Yb())};w.add=function(a){this.x+=a.x;this.y+=a.y;return this};w.eb=function(a){this.x-=a.x;this.y-=a.y;return this};
w.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};w.Qc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function $c(a,b){this.width=a;this.height=b}function ad(a,b){return a==b?n:!a||!b?q:a.width==b.width&&a.height==b.height}$c.prototype.f=function(){return new $c(this.width,this.height)};$c.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};$c.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};$c.prototype.scale=function(a){this.width*=a;this.height*=a;return this};function cd(a,b){if(a instanceof cd)this.K=a.jf();else{var c;if(c=ja(a))a:{for(var d=c=0;d<a.length;d++){if(!ja(a[d])||0<c&&a[d].length!=c){c=q;break a}for(var e=0;e<a[d].length;e++)if(!y(a[d][e])){c=q;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.K=Hb(a):a instanceof $c?this.K=dd(a.height,a.width):y(a)&&y(b)&&0<a&&0<b?this.K=dd(a,b):i(Error("Invalid argument(s) for Matrix contructor"))}this.z=new $c(this.K[0].length,this.K.length)}
function ed(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new cd(b)}function id(a,b,c){for(var d=0;d<a.oa().height;d++)for(var e=0;e<a.oa().width;e++)b.call(c,a.K[d][e],d,e,a)}function jd(a,b){var c=new cd(a.oa());id(a,function(d,e,f){c.K[e][f]=b.call(l,d,e,f,a)});return c}function dd(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}w=cd.prototype;
w.add=function(a){ad(this.z,a.oa())||i(Error("Matrix summation is only supported on arrays of equal size"));return jd(this,function(b,c,d){return b+a.K[c][d]})};w.Qc=function(a,b){if(this.z.width!=a.z.width||this.z.height!=a.z.height)return q;for(var c=b||0,d=0;d<this.z.height;d++)for(var e=0;e<this.z.width;e++)if(!(Math.abs(this.K[d][e]-a.K[d][e])<=(c||1.0E-6)))return q;return n};w.oa=t("z");w.M=function(a,b){return!(0<=a&&a<this.z.height&&0<=b&&b<this.z.width)?p:this.K[a][b]};
function M(a,b,c,d){0<=b&&b<a.z.height&&0<=c&&c<a.z.width||i(Error("Index out of bounds when setting matrix value, ("+b+","+c+") in size ("+a.z.height+","+a.z.width+")"));a.K[b][c]=d}w.multiply=function(a){if(a instanceof cd)return this.z.width!=a.oa().height&&i(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.")),kd(this,a);if(y(a))return ld(this,a);i(Error("A matrix can only be multiplied by a number or another matrix."))};
w.eb=function(a){ad(this.z,a.oa())||i(Error("Matrix subtraction is only supported on arrays of equal size."));return jd(this,function(b,c,d){return b-a.K[c][d]})};w.jf=t("K");function kd(a,b){var c=new cd(a.z.height,b.oa().width);id(c,function(a,e,f){for(var g=a=0;g<this.z.width;g++)a+=this.M(e,g)*b.M(g,f);M(c,e,f,a)},a);return c}function ld(a,b){return jd(a,function(a){return a*b})};function N(a,b){cd.call(this,a,b);this.c="matrix"}A(N,cd);function md(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new N(b)}w=N.prototype;w.L=function(){var a=[],b=this.oa();if(0==b.height||0==b.width)return[];var c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.M(c,d));return a};
w.translate=function(a){this.z.width!=this.z.height&&i(Error("Can not translate non-square matrix."));var b=this.oa(),c=ed(b.height);a instanceof Zc&&3==b.height?(M(c,0,2,a.x),M(c,1,2,a.y)):a instanceof L&&4==b.height?(M(c,0,3,a.x),M(c,1,3,a.y),M(c,2,3,a.b)):i(Error("Translation failed."));return new N(this.multiply(c))};
w.rotate=function(a,b){(4!=this.oa().height||this.z.width!=this.z.height)&&i(Error("Only 4x4 matrices can be rotated."));(!x(b)||!(b instanceof L))&&i(Error("Invalid axis vector."));y(a)||i(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=ed(4);M(f,0,0,d+c.x*c.x*(1-d));M(f,0,1,c.x*c.y*(1-d)-c.b*e);M(f,0,2,c.x*c.b*(1-d)+c.y*e);M(f,1,0,c.y*c.x*(1-d)+c.b*e);M(f,1,1,d+c.y*c.y*(1-d));M(f,1,2,c.y*c.b*(1-d)-c.x*e);M(f,2,0,c.b*c.x*(1-d)-c.y*e);M(f,2,1,c.b*c.y*(1-d)+c.x*e);M(f,2,
2,d+c.b*c.b*(1-d));return new N(this.multiply(f))};w.Ja=function(a){var b=this.oa(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof L&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):i(Error("Multiplication by vector failed."));a=this.multiply(new cd(c));return new L(parseFloat(a.M(0,0)),parseFloat(a.M(1,0)),parseFloat(a.M(2,0)))};w.Ai=function(a,b){var c=this.K[a];this.K[a]=this.K[b];this.K[b]=c};
w.zi=function(a,b){for(var c=this.oa(),d=0,d=0;d<c.height;d++){var e=this.M(d,a);e||(e=0);var f=this.M(d,b);f||(f=0);M(this,d,a,f);M(this,d,b,e)}};z("X.matrix",N);z("X.matrix.createIdentityMatrix",md);z("X.matrix.prototype.flatten",N.prototype.L);z("X.matrix.prototype.translate",N.prototype.translate);z("X.matrix.prototype.rotate",N.prototype.rotate);z("X.matrix.prototype.toArray",N.prototype.jf);z("X.matrix.prototype.getValueAt",N.prototype.M);z("X.matrix.prototype.multiplyByVector",N.prototype.Ja);
z("X.matrix.prototype.swapRows",N.prototype.Ai);z("X.matrix.prototype.swapCols",N.prototype.zi);function nd(){K.call(this);this.c="transform";this.l=md(4);this.Ua=new Float32Array(this.l.L())}A(nd,K);nd.prototype.__defineGetter__("matrix",t("l"));nd.prototype.__defineSetter__("matrix",function(a){(!x(a)||!(a instanceof N))&&i(Error("Invalid matrix."));this.l=a;this.Ua=new Float32Array(this.l.L());this.d=n});w=nd.prototype;w.gi=function(a){(!y(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.l=this.l.rotate(a*Math.PI/180,new L(0,1,0));this.Ua=new Float32Array(this.l.L());this.d=n};
w.hi=function(a){(!y(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.l=this.l.rotate(a*Math.PI/180,new L(1,0,0));this.Ua=new Float32Array(this.l.L());this.d=n};w.ii=function(a){(!y(a)||-360>a||360<a)&&i(Error("Invalid angle."));this.l=this.l.rotate(a*Math.PI/180,new L(0,0,1));this.Ua=new Float32Array(this.l.L());this.d=n};w.Di=function(a){y(a)||i(Error("Invalid distance."));this.l=this.l.translate(new L(a,0,0));this.Ua=new Float32Array(this.l.L());this.d=n};
w.Ei=function(a){y(a)||i(Error("Invalid distance."));this.l=this.l.translate(new L(0,a,0));this.Ua=new Float32Array(this.l.L());this.d=n};w.Fi=function(a){y(a)||i(Error("Invalid distance."));this.l=this.l.translate(new L(0,0,a));this.Ua=new Float32Array(this.l.L());this.d=n};function od(a,b,c){var d=a.l.M(b,c);d||(d=0);M(a.l,b,c,-1*d);a.Ua=new Float32Array(a.l.L());a.d=n}w.gh=function(){od(this,0,0)};w.hh=function(){od(this,1,1)};w.ih=function(){od(this,2,2)};z("X.transform",nd);
z("X.transform.prototype.rotateX",nd.prototype.gi);z("X.transform.prototype.rotateY",nd.prototype.hi);z("X.transform.prototype.rotateZ",nd.prototype.ii);z("X.transform.prototype.translateX",nd.prototype.Di);z("X.transform.prototype.translateY",nd.prototype.Ei);z("X.transform.prototype.translateZ",nd.prototype.Fi);z("X.transform.prototype.flipX",nd.prototype.gh);z("X.transform.prototype.flipY",nd.prototype.hh);z("X.transform.prototype.flipZ",nd.prototype.ih);function pd(){K.call(this);this.c="texture";this.sb=this.tf=this.u=p;this.sd=this.td=0;Da(this,new Rc)}A(pd,K);z("X.texture",pd);function O(a){K.call(this);this.c="triplets";this.Kb=Infinity;this.Hb=-Infinity;this.Lb=Infinity;this.Ib=-Infinity;this.Mb=Infinity;this.Jb=-Infinity;this.jd=[0,0,0];this.U=[];x(a)&&(this.U=a.U.slice(),this.Kb=a.Kb,this.Hb=a.Hb,this.Lb=a.Lb,this.Ib=a.Ib,this.Mb=a.Mb,this.Jb=a.Jb,this.jd=a.jd.slice())}A(O,K);
O.prototype.add=function(a,b,c){(!y(a)||!y(b)||!y(c))&&i(Error("Invalid triplet."));this.Kb=Math.min(this.Kb,a);this.Hb=Math.max(this.Hb,a);this.Lb=Math.min(this.Lb,b);this.Ib=Math.max(this.Ib,b);this.Mb=Math.min(this.Mb,c);this.Jb=Math.max(this.Jb,c);this.jd=[(this.Kb+this.Hb)/2,(this.Lb+this.Ib)/2,(this.Mb+this.Jb)/2];this.d=n;return this.U.push(a,b,c)/3};
O.prototype.get=function(a){(!y(a)||0>a||3*a>this.U.length||a==this.U.length/3)&&i(Error("Invalid id."));a*=3;return[this.U[a],this.U[a+1],this.U[a+2]]};O.prototype.remove=function(a){(!y(a)||0>a||3*a>this.U.length||a==this.count)&&i(Error("Invalid id."));this.U.splice(a,3);this.d=n};O.prototype.clear=function(){this.U=[];this.d=n};O.prototype.__defineGetter__("count",function(){return this.U.length/3});O.prototype.__defineGetter__("length",function(){return this.U.length});z("X.triplets",O);
z("X.triplets.prototype.add",O.prototype.add);z("X.triplets.prototype.get",O.prototype.get);z("X.triplets.prototype.remove",O.prototype.remove);z("X.triplets.prototype.clear",O.prototype.clear);function qd(){this.ma=rd;this.Qb=new nd;this.Bb=[1,1,1];this.j=new O;this.m=new O;this.Ba=new O;this.Pb=this.aa=p;this.Jc=[];this.Ea=n;this.hc=this.Kc=1;this.dc=p;this.Cc=q;this.P=1;this.O=0}var rd="TRIANGLES";qd.prototype.__defineGetter__("texture",function(){this.aa||(this.aa=new pd);return this.aa});qd.prototype.__defineGetter__("transform",t("Qb"));qd.prototype.__defineGetter__("points",t("j"));qd.prototype.__defineGetter__("normals",t("m"));qd.prototype.__defineGetter__("colors",t("Ba"));
qd.prototype.__defineGetter__("color",t("Bb"));qd.prototype.__defineSetter__("color",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid color."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.Bb=a;this.d=n});qd.prototype.__defineGetter__("opacity",t("P"));qd.prototype.__defineSetter__("opacity",function(a){(!y(a)||1<a||0>a)&&i(Error("Invalid opacity."));for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.P=a;this.d=n});
qd.prototype.__defineGetter__("caption",t("dc"));qd.prototype.__defineSetter__("caption",function(a){this.dc=a;this.d=n});qd.prototype.__defineGetter__("visible",t("Ea"));qd.prototype.__defineSetter__("visible",function(a){for(var b=this.e,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Ea=a;this.d=n});qd.prototype.__defineGetter__("pointsize",t("Kc"));qd.prototype.__defineSetter__("pointsize",function(a){y(a)||i(Error("Invalid point size."));this.Kc=a;this.d=n});
qd.prototype.__defineGetter__("magicmode",t("Cc"));qd.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&i(Error("Invalid magic mode setting."));this.Cc=a;this.d=n});qd.prototype.__defineGetter__("linewidth",t("hc"));qd.prototype.__defineSetter__("linewidth",function(a){y(a)||i(Error("Invalid line width."));this.hc=a;this.d=n});function sd(){this.Na=Infinity;this.ca=this.Da=-Infinity;this.ea=Infinity;this.pb=[0,0,0];this.nb=[1,1,1]}sd.prototype.__defineGetter__("lowerThreshold",t("ca"));sd.prototype.__defineSetter__("lowerThreshold",function(a){a>=this.Na&&a<=this.Da&&(this.ca=a)});sd.prototype.__defineGetter__("upperThreshold",t("ea"));sd.prototype.__defineSetter__("upperThreshold",function(a){a>=this.Na&&a<=this.Da&&(this.ea=a)});sd.prototype.__defineGetter__("min",t("Na"));sd.prototype.__defineGetter__("max",t("Da"));
sd.prototype.__defineGetter__("minColor",t("pb"));sd.prototype.__defineSetter__("minColor",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid min. color."));this.pb=a});sd.prototype.__defineGetter__("maxColor",t("nb"));sd.prototype.__defineSetter__("maxColor",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid max. color."));this.nb=a});function td(){K.call(this);this.c="scalars";this.yc=this.s=p;this.Ff=n;Da(this,new Rc);Da(this,new sd);this.pb=[0,1,0];this.nb=[1,0,0]}A(td,K);td.prototype.__defineGetter__("array",t("s"));td.prototype.__defineSetter__("array",function(a){this.yc=this.s=a;this.d=n});z("X.scalars",td);function T(a){K.call(this);this.c="object";this.e=[];this.r=this.R=p;Da(this,new qd);x(a)&&this.Tb(a)}A(T,K);
T.prototype.Tb=function(a){this.ma=a.ma;this.Qb=new nd;this.Qb.l=new N(a.Qb.l.K);this.Bb=a.Bb.slice();this.j=new O(a.j);this.m=new O(a.m);this.Ba=new O(a.Ba);this.aa=a.aa;this.Pb=a.Pb;a.u&&(this.u=new Qc((new String(a.u.me)).toString()));this.P=a.P;this.e.length=0;var b=a.e;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.e.push(new H[b[d].c](b[d]));this.Ea=a.Ea;this.Kc=a.Kc;this.hc=a.hc;a.dc&&(this.dc=(new String(a.dc)).toString());this.Cc=a.Cc;this.Jc=a.Jc.slice();this.d=n};
T.prototype.__defineGetter__("colortable",function(){this.R||(this.R=new Sc);return this.R});T.prototype.__defineGetter__("scalars",function(){this.r||(this.r=new td);return this.r});T.prototype.__defineGetter__("children",t("e"));T.prototype.C=function(){var a=new ud;a.$=this;this.dispatchEvent(a)};function vd(a,b){(!x(a)||!x(b)||!(a instanceof T)||!(b instanceof T))&&i(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.P?-1:1==b.P?1:x(a.O)&&x(b.O)&&a.O>b.O?-1:1}
z("X.object",T);z("X.object.prototype.modified",T.prototype.C);function wd(){}function xd(a){for(var b=a.j.count,c=[],d=0,d=0;d<b;d+=3){var e=a.j.get(d),f=a.j.get(d+1),g=a.j.get(d+2),h=a.m.get(d),k=a.m.get(d+1),j=a.m.get(d+2),m=a.Bb;0<a.Ba.length&&(m=a.Ba.get(d));var o=[];o.push(new Jc(e,h));o.push(new Jc(f,k));o.push(new Jc(g,j));c.push(new Lc(o,m))}return Oc(c)}
function yd(a,b){(!x(b)||!(b instanceof Nc))&&i(Error("Invalid CSG object."));a.j.clear();a.m.clear();a.Ba.clear();var c=new Pc,d=[];zb(b.v,function(a){for(var b=[],g=a.Xd,b=zb(a.fb,function(a){a.color=g;return c.add(a)}),a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Pg=zb(c.unique(),function(a){return[a.ra.x(),a.ra.y(),a.ra.b()]});a.Og=zb(c.unique(),function(a){return[a.T.x(),a.T.y(),a.T.b()]});a.Ng=zb(c.unique(),function(a){return!a.color?p:[a.color[0],a.color[1],a.color[2]]});zb(d,
function(a){var b=a[0],c=a[1],a=a[2],d=this.Pg,k=this.Og,j=this.Ng;this.j.add(d[b][0],d[b][1],d[b][2]);this.j.add(d[c][0],d[c][1],d[c][2]);this.j.add(d[a][0],d[a][1],d[a][2]);this.m.add(k[b][0],k[b][1],k[b][2]);this.m.add(k[c][0],k[c][1],k[c][2]);this.m.add(k[a][0],k[a][1],k[a][2]);j[b]&&this.Ba.add(j[b][0],j[b][1],j[b][2]);j[c]&&this.Ba.add(j[c][0],j[c][1],j[c][2]);j[a]&&this.Ba.add(j[a][0],j[a][1],j[a][2])}.bind(a));a.ma=rd}
wd.prototype.kf=function(a){(!x(a)||!(a instanceof Nc)&&!(a instanceof T))&&i(Error("Invalid object."));var b=a;a instanceof T&&(b=xd(b));a=new T;Da(a,new wd);yd(a,xd(this).kf(b));return a};wd.prototype.eb=function(a){(!x(a)||!(a instanceof Nc)&&!(a instanceof T))&&i(Error("Invalid object."));var b=a;a instanceof T&&(b=xd(b));a=new T;Da(a,new wd);yd(a,xd(this).eb(b));return a};
wd.prototype.Le=function(a){(!x(a)||!(a instanceof Nc)&&!(a instanceof T))&&i(Error("Invalid object."));var b=a;a instanceof T&&(b=xd(b));a=new T;Da(a,new wd);yd(a,xd(this).Le(b));return a};wd.prototype.inverse=function(){var a=new T;Da(a,new wd);yd(a,xd(this).inverse());return a};z("X.constructable",wd);z("X.constructable.prototype.intersect",wd.prototype.Le);z("X.constructable.prototype.inverse",wd.prototype.inverse);z("X.constructable.prototype.subtract",wd.prototype.eb);
z("X.constructable.prototype.union",wd.prototype.kf);function zd(a){lc.call(this,a);this.c="event"}A(zd,lc);var Ad=Hc("pan"),Bd=Hc("rotate"),Cd=Hc("zoom"),Dd=Hc("scroll");Hc("render");var Ed=Hc("resetview"),Ac=Hc("modified"),Fd=Hc("progress"),Gd=Hc("hover"),Hd=Hc("hover_end");function Id(){zd.call(this,Ad);this.O=new Zc(0,0)}A(Id,zd);function Jd(){zd.call(this,Bd);this.O=new Zc(0,0)}A(Jd,zd);function Kd(){zd.call(this,Cd);this.gb=this.Fb=q}A(Kd,zd);function Ld(){zd.call(this,Dd);this.D=q}A(Ld,zd);function Md(){zd.call(this,Gd);this.Ad=this.zd=0}
A(Md,zd);function Nd(){zd.call(this,Hd)}A(Nd,zd);function Od(){zd.call(this,Ed)}A(Od,zd);function ud(){zd.call(this,Ac);this.$=new T;this.q=p}A(ud,zd);function Pd(){zd.call(this,Fd);this.Gf=0}A(Pd,zd);function Qd(a){x(a)||i(Error("Invalid data."));K.call(this);this.c="parserHelper";this.qf=a;this.Ta=0;this.ic=this.ae=1;this.kc=2;this.jc=this.pe=4;this.Bf=p}A(Qd,K);function U(a,b,c){a.Bf=b;a.ae=c}function V(a,b){x(b)||(b=1);var c=a.Bf(a.qf,a.Ta,b)[0];a.Ta+=a.ae*b;return 1==b?c[0]:c};function W(){K.call(this);this.c="parser"}A(W,K);w=W.prototype;w.parse=function(){i(Error("The function parse() should be overloaded."))};w.o=function(a,b){return a.charCodeAt(b)&255};w.sg=function(a,b){var c=this.o(a,b);return 127<c?c-256:c};w.ad=function(a,b){return(this.o(a,b+1)<<8)+this.o(a,b)};function Rd(a,b,c){return(a.o(b,c+3)<<24)+(a.o(b,c+2)<<16)+(a.o(b,c+1)<<8)+a.o(b,c)}function Sd(a,b,c){return(a.o(b,c)<<24)+(a.o(b,c+1)<<16)+(a.o(b,c+2)<<8)+a.o(b,c+3)}
w.$c=function(a,b){var c=this.o(a,b+2),d=this.o(a,b+3),e=(d<<1&255|c>>7)-127,c=(c&127)<<16|this.o(a,b+1)<<8|this.o(a,b);return 0==c&&-127==e?0:(1-2*(d>>7))*(1+c*Math.pow(2,-23))*Math.pow(2,e)};function Td(a,b,c){var d=a.o(b,c),e=a.o(b,c+1),f=(d<<1&255|e>>7)-127,a=(e&127)<<16|a.o(b,c+2)<<8|a.o(b,c+3);return 0==a&&-127==f?0:(1-2*(d>>7))*(1+a*Math.pow(2,-23))*Math.pow(2,f)}
w.ug=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=Sd(this,a,b+4*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.Zb=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=this.ad(a,b+2*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.Wh=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h;h=this.ad(a,b+2*g);h=32767<h?h-65536:h;d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};
w.af=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=Td(this,a,b+4*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.tg=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=(this.o(a,b+2*g)<<8)+this.o(a,b+2*g+1);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.ha=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=this.$c(a,b+4*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};
w.cf=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=Rd(this,a,b+4*g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.Xh=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h;h=Rd(this,a,b+4*g);h=2147483647<h?h-4294967296:h;d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};w.Vh=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=this.sg(a,b+g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};
w.yb=function(a,b,c){var d=[],e=0,f=Infinity,g;for(g=0;g<c;g++){var h=this.o(a,b+g);d[g]=h;e=Math.max(e,h);f=Math.min(f,h)}return[d,e,f]};
function Ud(a,b,c,d,e){H.wa(a.c+".reslice");for(var f=d[2],g=d[1],d=d[0],h=b.w!=p,k=g*d,j=Array(f),m=0;m<f;m++){j[m]=Array(g);for(var o=0;o<g;o++)j[m][o]=Array(d)}for(var r=0,m=m=0;m<f;m++){for(var o=c.slice(m*k,(m+1)*k),s=new Uint8Array(4*k),u=0,v=0,C=0,u=0;u<g;u++)for(v=0;v<d;v++){var r=o[C],F=0,D=0,E=0,B=0;b.R?((B=b.R.da.get(Math.floor(r)))||(B=b.R.da.get(b.R.da.na()-1)),F=255*B[1],D=255*B[2],E=255*B[3],B=255*B[4]):(F=D=E=255*(r/e),B=255);var G=4*C;s[G]=F;s[++G]=D;s[++G]=E;s[++G]=B;j[m][u][v]=
r;C++}r=new pd;r.sb=s;r.td=d;r.sd=g;o=b.$a.e[m];o.aa=r;h&&(o.w=b.w.$a.e[m].aa)}for(u=0;u<g;u++){s=new Uint8Array(4*f*d);for(m=C=0;m<f;m++)for(v=0;v<d;v++)r=j[m][u][v],b.R?((B=b.R.da.get(Math.floor(r)))||(B=b.R.da.get(b.R.da.na()-1)),F=255*B[1],D=255*B[2],E=255*B[3],B=255*B[4]):(F=D=E=255*(r/e),B=255),G=4*C,s[G]=F,s[++G]=D,s[++G]=E,s[++G]=B,C++;r=new pd;r.sb=s;r.td=d;r.sd=f;o=b.Za.e[u];o.aa=r;h&&(o.w=b.w.Za.e[u].aa)}for(v=0;v<d;v++){s=new Uint8Array(4*f*g);for(m=C=0;m<f;m++)for(u=0;u<g;u++)r=j[m][u][v],
b.R?((B=b.R.da.get(Math.floor(r)))||(B=b.R.da.get(b.R.da.na()-1)),F=255*B[1],D=255*B[2],E=255*B[3],B=255*B[4]):(F=D=E=255*(r/e),B=255),G=4*C,s[G]=F,s[++G]=D,s[++G]=E,s[++G]=B,C++;r=new pd;r.sb=s;r.td=g;r.sd=f;o=b.Ya.e[v];o.aa=r;h&&(o.w=b.w.Ya.e[v].aa)}H.ja(a.c+".reslice")};function Wd(){W.call(this);this.c="parserLBL"}A(Wd,W);
Wd.prototype.parse=function(a,b,c){H.wa(this.c+".parse");for(var d=c.split("\n"),e=d.length,f=Array(e-3),g=0,h=0,k=0,c=b.j.count,g=2;g<e-1;g++,h++)k=this.pa(d[g]),f[g-2]=k;if(b.r.s)g=b.r.s;else{g=0;g="undefined"!==typeof g?g:0;d=[];for(e=0;e<c;)d[e++]=g;g=d}d=g;for(g=0;g<f.length;g++)d[f[g]]=1;f=b.Jc;0==f.length&&i(Error("No _pointIndices defined on the X.object."));e=f.length;h=[];for(g=0;g<e;g++)k=f[g],k>c&&i(Error("Could not find scalar for vertex.")),k=d[k],h.push(k),h.push(k),h.push(k);b.r.s=
d;b.r.yc=h;b.r.d=n;H.ja(this.c+".parse");c=new ud;c.$=b;c.q=a;this.dispatchEvent(c)};Wd.prototype.pa=function(a){a=a.replace(/^\s+|\s+$/g,"");return parseInt(a.split(" ")[0],10)};z("X.parserLBL",Wd);z("X.parserLBL.prototype.parse",Wd.prototype.parse);function Xd(a){this.n=a;this.dg=J(this.n,Xa?"DOMMouseScroll":"mousewheel",this)}A(Xd,Ic);
Xd.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Qa;if("mousewheel"==a.type){c=1;if(I||Ya&&(Qa||ob("532.0")))c=40;d=Ya&&Pa&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ha(a.wheelDeltaX)?(b=Ya&&Pa&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Ya&&Pa&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ha(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;y(this.fg)&&Math.min(Math.max(b,-this.fg),this.fg);y(this.gg)&&(c=Math.min(Math.max(c,
-this.gg),this.gg));b=new Yd(d,a,0,c);try{this.dispatchEvent(b)}finally{b.Ha()}};Xd.prototype.H=function(){Xd.h.H.call(this);wc(this.dg);delete this.dg};function Yd(a,b,c,d){b&&this.ba(b,l);this.type="mousewheel";this.detail=a;this.nc=d}A(Yd,nc);I||Ya&&ob("525");var Zd;function $d(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=Ib(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)0<=xb(e,d[g])||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};var ae=!I||qb(9);!Xa&&!I||I&&qb(9)||Xa&&ob("1.9.1");I&&ob("9");function be(a){return a?new ce(de(a)):Zd||(Zd=new ce)}function ee(a){return ma(a)?document.getElementById(a):a}function fe(a,b){rb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ge?a.setAttribute(ge[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}
var ge={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function he(a,b,c){return ie(document,arguments)}
function ie(a,b){var c=b[0],d=b[1];if(!ae&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ea(d.name),'"');if(d.type){c.push(' type="',Ea(d.type),'"');var e={};vb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ma(d)?c.className=d:ia(d)?$d.apply(p,[c].concat(d)):fe(c,d));2<b.length&&je(a,c,b);return c}
function je(a,b,c){function d(c){c&&b.appendChild(ma(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ja(f)&&!(oa(f)&&0<f.nodeType)?yb(ke(f)?Hb(f):f,d):d(f)}}function me(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ne(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function oe(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function de(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function ke(a){if(a&&"number"==typeof a.length){if(oa(a))return"function"==typeof a.item||"string"==typeof a.item;if(na(a))return"function"==typeof a.item}return q}function ce(a){this.I=a||ea.document||document}w=ce.prototype;
w.Hd=be;w.g=function(a){return ma(a)?this.I.getElementById(a):a};w.mc=function(a,b,c){return ie(this.I,arguments)};w.createElement=function(a){return this.I.createElement(a)};w.createTextNode=function(a){return this.I.createTextNode(a)};function pe(a){return"CSS1Compat"==a.I.compatMode}function qe(a){var b=a.I,a=!Ya&&"CSS1Compat"==b.compatMode?b.documentElement:b.body,b=b.parentWindow||b.defaultView;return new Xc(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}w.appendChild=function(a,b){a.appendChild(b)};
w.contains=oe;function Y(a){(!x(a)||!(a instanceof Element))&&i(Error("Could not add interactor to the given element."));K.call(this);this.c="interactor";this.ec=a;this.je=this.xf=this.wf=this.yf=this.vf=this.zf=p;this.ie=n;this.tb=this.ob=this.Va=q;this.rd=[0,0];this.ee=new Zc(0,0);this.N={MOUSEWHEEL_ENABLED:n,MOUSECLICKS_ENABLED:n,KEYBOARD_ENABLED:n,HOVERING_ENABLED:n,CONTEXTMENU_ENABLED:q}}A(Y,K);Y.prototype.__defineGetter__("config",t("N"));Y.prototype.__defineGetter__("leftButtonDown",t("Va"));
Y.prototype.__defineGetter__("middleButtonDown",t("ob"));Y.prototype.__defineGetter__("rightButtonDown",t("tb"));
Y.prototype.ba=function(){this.N.MOUSEWHEEL_ENABLED?(this.je=new Xd(this.ec),this.zf=J(this.je,"mousewheel",this.Zc.bind(this))):(wc(this.zf),this.je=p);this.N.MOUSECLICKS_ENABLED?(this.vf=J(this.ec,"mousedown",this.Hh.bind(this)),this.yf=J(this.ec,"mouseup",this.Mh.bind(this))):(wc(this.vf),wc(this.yf));this.ec.oncontextmenu=this.N.CONTEXTMENU_ENABLED?p:function(){return q};window.onkeydown=this.N.KEYBOARD_ENABLED?this.lg.bind(this):p;wc(this.wf);wc(this.xf);this.wf=J(this.ec,"mousemove",this.Jh.bind(this));
this.xf=J(this.ec,"mouseout",this.Kh.bind(this))};Y.prototype.Hh=function(a){0==a.button?this.Va=n:1==a.button?this.ob=n:2==a.button&&(this.tb=n);eval("this.onMouseDown("+this.Va+","+this.ob+","+this.tb+")");re(this);a.preventDefault()};Y.prototype.Gh=ca();Y.prototype.Mh=function(a){0==a.button?this.Va=q:1==a.button?this.ob=q:2==a.button&&(this.tb=q);eval("this.onMouseUp("+this.Va+","+this.ob+","+this.tb+")");re(this);a.preventDefault()};Y.prototype.__defineGetter__("mousePosition",t("rd"));w=Y.prototype;
w.Lh=ca();w.Kh=function(a){this.ie=q;this.N.KEYBOARD_ENABLED&&(window.onkeydown=p);this.tb=this.ob=this.Va=q;re(this);this.ee=new Zc(0,0);a.preventDefault()};w.Ih=ca();
w.Jh=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.ie=n;this.N.KEYBOARD_ENABLED&&window.onkeydown==p&&(window.onkeydown=this.lg.bind(this));a.preventDefault();var b=a.shiftKey;this.rd=[a.offsetX,a.offsetY];var c=new Zc(this.rd[0],this.rd[1]),a=this.ee.eb(c);this.ee=c.f();this.N.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.ob||this.Va||this.tb)&&re(this),this.Ie=setTimeout(function(){re(this);var a=new Md;a.zd=c.x;a.Ad=c.y;this.dispatchEvent(a);
this.Ie=p}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.Yb()&&(this.Va&&!b?(b=new Jd,b.O=a,b.wj=0,this.dispatchEvent(b)):this.ob||this.Va&&b?(b=new Id,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.O=a,this.dispatchEvent(b)):this.tb&&(b=new Kd,b.Fb=0<a.y,b.gb=q,this.dispatchEvent(b)))};function re(a){a.Ie&&clearTimeout(a.Ie);a.dispatchEvent(new Nd)}w.Nh=ca();
w.Zc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");re(this);a.preventDefault()};w.Eh=ca();
w.lg=function(a){if(this.ie){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");re(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Od,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Id:b?a=new Kd:(a=new Jd,this instanceof se&&(a=new Ld)),a&&(c=new Zc(0,0),37==f?(c.x=5,a.D=q,b&&(a.D=n,a.Fb=n,a.gb=q)):39==f?(c.x=-5,a.D=n,b&&(a.Fb=q,a.gb=q)):38==f?(c.y=5,a.D=n,b&&(a.Fb=n,a.gb=n)):40==f&&(c.y=-5,a.D=q,b&&(a.Fb=q,
a.gb=n)),a.O=c,this.dispatchEvent(a)))}};z("X.interactor",Y);z("X.interactor.prototype.init",Y.prototype.ba);z("X.interactor.prototype.onMouseDown",Y.prototype.Gh);z("X.interactor.prototype.onMouseUp",Y.prototype.Lh);z("X.interactor.prototype.onMouseMove",Y.prototype.Ih);z("X.interactor.prototype.onMouseWheel",Y.prototype.Nh);z("X.interactor.prototype.onKey",Y.prototype.Eh);function se(a){Y.call(this,a);this.c="interactor2D"}A(se,Y);se.prototype.Zc=function(a){se.h.Zc.call(this,a);var b=new Ld;x(a.nc)||(a.nc=0);b.D=0>a.nc;this.dispatchEvent(b)};function te(a){T.call(this);this.c="slice";this.i=[0,0,0];this.gc=[0,0,1];this.D=[0,1,0];this.A=this.F=10;this.Pb=[0,1,0,0,1,1,1,1,1,0,0,0];this.w=this.bb=p;this.Ma=n;this.cc=[1,1,1];x(a)&&this.Tb(a)}A(te,T);te.prototype.Tb=function(a){this.i=a.i.slice();this.gc=a.gc.slice();this.D=a.D.slice();this.F=a.F;this.A=a.A;this.bb=a.bb;this.w=a.w;this.Ma=a.Ma;this.cc=a.cc;this.Rg=a.Rg;te.h.Tb.call(this,a)};
te.prototype.Pc=function(){this.j.clear();var a=new L(this.gc[0],this.gc[1],this.gc[2]),b=new L(this.D[0],this.D[1],this.D[2]),c=Wc(b,a),d=new L(this.i[0],this.i[1],this.i[2]),e=new L(1,1,1);1==a.x?(e=new L(this.i[0],this.A/2,this.F/2),this.Pb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new L(this.F/2,this.i[1],this.A/2),this.Pb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new L(this.F/2,this.A/2,this.i[2]));var f=Vc(c.f().Q(),b.f().Q()),f=new L(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=Vc(c.f().Q(),b),g=new L(g.x*
e.x,g.y*e.y,g.b*e.b);g.add(d);var h=Vc(c,b.f().Q()),h=new L(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var k=h,b=Vc(c,b),b=new L(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.j.add(f.x,f.y,f.b);this.j.add(g.x,g.y,g.b);this.j.add(h.x,h.y,h.b);this.j.add(k.x,k.y,k.b);this.j.add(b.x,b.y,b.b);this.j.add(d.x,d.y,d.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.m.add(a.x,a.y,a.b);this.Ma&&(a=new T,a.j.add(f.x,f.y,f.b),a.j.add(g.x,g.y,
g.b),a.j.add(g.x,g.y,g.b),a.j.add(b.x,b.y,b.b),a.j.add(b.x,b.y,b.b),a.j.add(h.x,h.y,h.b),a.j.add(h.x,h.y,h.b),a.j.add(f.x,f.y,f.b),a.m.add(0,0,0),a.m.add(0,0,0),a.m.add(0,0,0),a.m.add(0,0,0),a.m.add(0,0,0),a.m.add(0,0,0),a.m.add(0,0,0),a.m.add(0,0,0),a.Bb=[this.cc[0],this.cc[1],this.cc[2]],a.ma="LINES",a.hc=2,this.e.push(a))};z("X.slice",te);function Z(a){T.call(this);this.c="volume";this.i=[0,0,0];this.Y=[10,10,10];this.J=[1,1,1];this.Bc=this.kb=this.Ac=this.jb=this.zc=this.ib=0;this.Ya=new T;this.Za=new T;this.$a=new T;this.yd=this.Fa=q;this.vb=0;this.w=p;this.Ma=n;this.Sb=Infinity;this.Rb=-Infinity;Da(this,new Rc);Da(this,new sd);x(a)&&this.Tb(a)}A(Z,T);
Z.prototype.Tb=function(a){window.console.log(a);this.i=a.i.slice();this.Y=a.Y.slice();this.J=a.J.slice();this.ib=a.ib;this.zc=a.zc;this.jb=a.jb;this.Ac=a.Ac;this.kb=a.kb;this.Bc=a.Bc;this.Ya=new T(a.Ya);this.Za=new T(a.Za);this.$a=new T(a.$a);this.Fa=a.Fa;this.yd=a.yd;this.vb=a.vb;this.w=a.w;this.Ma=a.Ma;Z.h.Tb.call(this,a)};
Z.prototype.Pc=function(){this.e.length=0;this.Ya.e.length=0;this.Za.e.length=0;this.$a.e.length=0;this.e.push(this.Ya);this.e.push(this.Za);this.e.push(this.$a);for(var a=0,a=0;3>a;a++){for(var b=(this.Y[a]-1)/2,c=b,d=0,d=0;d<this.Y[a];d++){var e=-b*this.J[a]+d*this.J[a],f=[[this.i[0]+e,this.i[1],this.i[2]],[this.i[0],this.i[1]+e,this.i[2]],[this.i[0],this.i[1],this.i[2]+e]],e=this.e[a].e,g=0,h=0,k=[1,1,1],j=this.Ma;0==a?(g=this.Y[2]*this.J[2]-this.J[2],h=this.Y[1]*this.J[1]-this.J[1],k=[1,1,0]):
1==a?(g=this.Y[0]*this.J[0]-this.J[0],h=this.Y[2]*this.J[2]-this.J[2],k=[1,0,0]):2==a&&(g=this.Y[0]*this.J[0]-this.J[0],h=this.Y[1]*this.J[1]-this.J[1],k=[0,1,0]);x(this.bb)&&(j=q);var m=new te,o=m,f=f[a],r=[[1,0,0],[0,1,0],[0,0,1]][a],s=[[0,1,0],[0,0,-1],[0,1,0]][a];(!x(f)||!(f instanceof Array)||3!=f.length)&&i(Error("Invalid center."));(!x(r)||!(r instanceof Array)||3!=r.length)&&i(Error("Invalid front direction."));(!x(s)||!(s instanceof Array)||3!=s.length)&&i(Error("Invalid up direction."));
y(g)||i(Error("Invalid width."));y(h)||i(Error("Invalid height."));var u=q;x(j)&&(u=j);j=[1,1,1];x(k)&&(j=k);o.i=f;o.gc=r;o.D=s;o.F=g;o.A=h;o.Ma=u;o.cc=j;o.Pc();m.bb=this;m.visible=d==Math.floor(c);e.push(m)}0==a?this.zc=this.ib=c:1==a?this.Ac=this.jb=c:2==a&&(this.Bc=this.kb=c)}this.d=n};
Z.prototype.C=function(a){a="undefined"!==typeof a?a:n;if(0<this.e.length)if(this.Fa!=this.yd&&(this.Fa?(this.e[0].e[parseInt(this.ib,10)].visible=q,this.e[1].e[parseInt(this.jb,10)].visible=q,this.e[2].e[parseInt(this.kb,10)].visible=q):this.e[this.vb].visible=q,this.d=n,this.yd=this.Fa),this.Fa)ue(this,this.vb);else for(var b=0,b=0;3>b;b++){var c=this.e[b],d=0,e=0;0==b?(d=this.ib,e=this.zc,this.zc=this.ib):1==b?(d=this.jb,e=this.Ac,this.Ac=this.jb):2==b&&(d=this.kb,e=this.Bc,this.Bc=this.kb);c.e[parseInt(e,
10)].visible=q;c=c.e[parseInt(d,10)];c.visible=n;c.P=1}a&&Z.h.C.call(this)};Z.prototype.__defineGetter__("dimensions",t("Y"));Z.prototype.__defineGetter__("volumeRendering",t("Fa"));Z.prototype.__defineSetter__("volumeRendering",function(a){this.Fa=a;this.C(q)});Z.prototype.__defineSetter__("visible",da("Ea"));Z.prototype.__defineGetter__("center",t("i"));Z.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center."));this.i=a});
Z.prototype.__defineGetter__("labelmap",function(){this.w||(this.w=new ve(this));return this.w});Z.prototype.__defineGetter__("indexX",t("ib"));Z.prototype.__defineSetter__("indexX",function(a){y(a)&&0<=a&&a<this.Ya.e.length&&(this.ib=a,this.C(q))});Z.prototype.__defineGetter__("indexY",t("jb"));Z.prototype.__defineSetter__("indexY",function(a){y(a)&&0<=a&&a<this.Za.e.length&&(this.jb=a,this.C(q))});Z.prototype.__defineGetter__("indexZ",t("kb"));
Z.prototype.__defineSetter__("indexZ",function(a){y(a)&&0<=a&&a<this.$a.e.length&&(this.kb=a,this.C(q))});Z.prototype.__defineGetter__("windowLow",t("Sb"));Z.prototype.__defineSetter__("windowLow",da("Sb"));Z.prototype.__defineGetter__("windowHigh",t("Rb"));Z.prototype.__defineSetter__("windowHigh",da("Rb"));Z.prototype.__defineGetter__("borders",t("Ma"));Z.prototype.__defineSetter__("borders",da("Ma"));
function ue(a,b){if(a.Fa&&(a.d||b!=a.vb)){var c=a.e[a.vb];c.visible=q;var c=a.e[b],d=c.e.length,e;for(e=0;e<d;e++)c.e[e].Ea=n;a.vb=b;a.d=q}}z("X.volume",Z);z("X.volume.prototype.modified",Z.prototype.C);function xe(){W.call(this);this.c="parserSTL"}A(xe,W);xe.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var d=c,e=0,f=p;"solid"==c.substr(0,5)?(d=c.split("\n"),e=c.length,f=this.pa.bind(this)):(d=c,c.slice(0,80),e=Rd(this,c,80),f=this.rc.bind(this));for(var c=b.j,g=b.m,h=0,k=e%8;k--;)f(c,g,d,h),h++;for(k=0.125*e^0;k--;)f(c,g,d,h),h++,f(c,g,d,h),h++,f(c,g,d,h),h++,f(c,g,d,h),h++,f(c,g,d,h),h++,f(c,g,d,h),h++,f(c,g,d,h),h++,f(c,g,d,h),h++;H.ja(this.c+".parse");d=new ud;d.$=b;d.q=a;this.dispatchEvent(d)};
xe.prototype.pa=function(a,b,c,d){if(c=c[d]){var e=c.replace(/^\s+|\s+$/g,"").split(" ");"vertex"==e[0]?(c=parseFloat(e[1]),d=parseFloat(e[2]),e=parseFloat(e[3]),a.add(c,d,e)):"facet"==e[0]&&(c=parseFloat(e[2]),d=parseFloat(e[3]),e=parseFloat(e[4]),b.add(c,d,e),b.add(c,d,e),b.add(c,d,e))}};
xe.prototype.rc=function(a,b,c,d){var e=84+50*d,d=this.ha(c,e,3)[0],e=e+12,f=this.ha(c,e,3)[0],e=e+12,g=this.ha(c,e,3)[0],c=this.ha(c,e+12,3)[0];a.add(f[0],f[1],f[2]);a.add(g[0],g[1],g[2]);a.add(c[0],c[1],c[2]);b.add(d[0],d[1],d[2]);b.add(d[0],d[1],d[2]);b.add(d[0],d[1],d[2])};z("X.parserSTL",xe);z("X.parserSTL.prototype.parse",xe.prototype.parse);function ye(){W.call(this);this.c="parserVTK"}A(ye,W);
ye.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var d=b.j,e=b.m,f=c.split("\n"),g=f.length,c=new O,h=new O;this.Db=[];this.ka=rd;this.le=this.qb=this.hb=this.rb=q;for(var k=0,j=g%8;j--;)this.pa(c,h,f[k]),k++;for(j=0.125*g^0;j--;)this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++,this.pa(c,h,f[k]),k++;f=h.length;k=g=this.Db.length;do{var j=this.Db[g-k],m=j.length,o;for(o=0;o<m&&!("LINES"==
this.ka&&o+1>=m);o++){var r=parseInt(j[o],10),s=c.get(r);d.add(s[0],s[1],s[2]);var u=r,v=s;"LINES"==this.ka?(u=parseInt(j[o+1],10),v=c.get(u),d.add(v[0],v[1],v[2])):"TRIANGLE_STRIPS"==this.ka&&(0==o||o==m-1)&&d.add(s[0],s[1],s[2]);r<f?(v=h.get(r),e.add(v[0],v[1],v[2]),"LINES"==this.ka?(u=h.get(u),e.add(u[0],u[1],u[2])):"TRIANGLE_STRIPS"==this.ka&&(0==o||o==m-1)&&e.add(v[0],v[1],v[2])):(u=new L(s[0],s[1],s[2]),u.normalize(),e.add(u.x,u.y,u.b),"LINES"==this.ka?(u=new L(v[0],v[1],v[2]),u.normalize(),
e.add(u.x,u.y,u.b)):"TRIANGLE_STRIPS"==this.ka&&(0==o||o==m-1)&&e.add(u.x,u.y,u.b))}k--}while(0<k);b.ma=this.ka;H.ja(this.c+".parse");d=new ud;d.$=b;d.q=a;this.dispatchEvent(d)};
ye.prototype.pa=function(a,b,c){var c=c.replace(/^\s+|\s+$/g,""),c=c.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":this.rb=n;this.qb=this.hb=q;return;case "VERTICES":this.hb=n;this.qb=this.rb=q;a=parseInt(c[1],10);3<=a?this.ka=rd:1==a?this.ka="POINTS":i(Error("This VTK file is not supported!"));this.Db=[];return;case "TRIANGLE_STRIPS":this.hb=n;this.qb=this.rb=q;this.ka="TRIANGLE_STRIPS";this.Db=[];return;case "LINES":this.hb=n;this.qb=this.rb=q;this.ka="LINES";this.Db=[];return;case "POLYGONS":this.hb=
n;this.qb=this.rb=q;this.ka="POLYGONS";this.Db=[];return;case "POINT_DATA":this.qb=n;this.hb=this.rb=q;return}if(this.rb)if(1==d||isNaN(parseFloat(e)))this.rb=q;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.add(d,e,c))}else this.hb?1==d||isNaN(parseFloat(e))?this.hb=q:this.Db.push(c.slice(1)):this.qb&&("NORMALS"==
e?this.le=n:1==d||isNaN(parseFloat(e))?this.le=this.qb=q:this.le&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),b.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),b.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),b.add(d,e,c))))};z("X.parserVTK",ye);z("X.parserVTK.prototype.parse",ye.prototype.parse);function ze(){W.call(this);this.c="parserFSM"}A(ze,W);
ze.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var d=b.j,e=b.m,f=b.Jc,g=new O,h;h=3;var k=0,j;do j=this.o(c,h++),k++;while(200>k&&10!=j);h++;var m=Sd(this,c,h);h+=4;k=Sd(this,c,h);h+=4;j=[];for(var o=0,o=0;o<m;o++){var r=Td(this,c,h);h+=4;var s=Td(this,c,h);h+=4;var u=Td(this,c,h);h+=4;j[o]=0;g.add(r,s,u)}m=[];o=[];for(r=0;r<k;r++){var v=Sd(this,c,h);h+=4;u=Sd(this,c,h);h+=4;s=Sd(this,c,h);h+=4;j[v]+=1;j[u]+=1;j[s]+=1;m.push([v,u,s]);o.push(new L(0,0,0))}for(r=0;r<k;r++){v=m[r][0];u=m[r][1];
s=m[r][2];h=g.get(v);var c=g.get(u),C=g.get(s);h=new L(h[0],h[1],h[2]);C=new L(C[0],C[1],C[2]);c=(new L(c[0],c[1],c[2])).f().eb(h);h=C.f().eb(h);c=Wc(c,h).normalize();o[v]=o[v].add(c);o[u]=o[u].add(c);o[s]=o[s].add(c)}for(r=0;r<k;r++)v=m[r][0],u=m[r][1],s=m[r][2],h=g.get(v),c=g.get(u),C=g.get(s),f.push(v),f.push(u),f.push(s),d.add(h[0],h[1],h[2]),d.add(c[0],c[1],c[2]),d.add(C[0],C[1],C[2]),v=o[v].scale(1/j[v]).normalize(),u=o[u].scale(1/j[u]).normalize(),s=o[s].scale(1/j[s]).normalize(),e.add(v.x,
v.y,v.b),e.add(u.x,u.y,u.b),e.add(s.x,s.y,s.b);b.ma=rd;H.ja(this.c+".parse");d=new ud;d.$=b;d.q=a;this.dispatchEvent(d)};z("X.parserFSM",ze);z("X.parserFSM.prototype.parse",ze.prototype.parse);function Ae(a){function b(){Bc+=8;return ka<qa.length?qa.charCodeAt(ka++)&255:-1}function c(){var a;Bc++;a=P&1;P>>=1;0==P&&(P=b(),a=P&1,P=P>>1|128);return a}function d(a){for(var b=0,d=a;d--;)b=b<<1|c();a&&(b=G[b]>>8-a);return b}function e(a){B++;F[D++]=a;s.push(String.fromCharCode(a));32768==D&&(D=0)}function f(){this.Cd=this.Bd=0;this.Me=p}function g(){for(;;){if(mb[Ba]>=fd)return-1;if(Cc[mb[Ba]]==Ba)return mb[Ba]++;mb[Ba]++}}function h(){var a=Dc[Eb],b;if(17==Ba)return-1;Eb++;Ba++;b=g();if(0<=
b)a.Bd=b;else if(a.Bd=32768,h())return-1;b=g();if(0<=b)a.Cd=b,a.Me=p;else if(a.Cd=32768,a.Me=Dc[Eb],a.xj=Eb,h())return-1;Ba--;return 0}function k(a,b,c){Dc=a;Eb=0;Cc=c;fd=b;for(a=0;17>a;a++)mb[a]=0;Ba=0;return h()?-1:0}function j(a){for(var b,d,e=0,f=a[e];;)if(b=c()){if(!(f.Cd&32768))return f.Cd;f=f.Me;b=a.length;for(d=0;d<b;d++)if(a[d]===f){e=d;break}}else{if(!(f.Bd&32768))return f.Bd;e++;f=a[e]}}function m(){var a,h,g,m,o;do if(a=c(),g=d(2),0==g){P=1;g=b();g|=b()<<8;h=b();h|=b()<<8;for((g^~h)&65535&&
document.write("BlockLen checksum mismatch\n");g--;)h=b(),e(h)}else if(1==g)for(;;)if(g=G[d(7)]>>1,23<g?(g=g<<1|c(),199<g?(g-=128,g=g<<1|c()):(g-=48,143<g&&(g+=136))):g+=256,256>g)e(g);else if(256==g)break;else{var r;g-=257;o=d(aa[g])+Q[g];g=G[d(5)]>>3;8<ba[g]?(r=d(8),r|=d(ba[g]-8)<<8):r=d(ba[g]);r+=la[g];for(g=0;g<o;g++)h=F[D-r&32767],e(h)}else if(2==g){var s=Array(320);h=257+d(5);r=1+d(5);m=4+d(4);for(g=0;19>g;g++)s[g]=0;for(g=0;g<m;g++)s[sa[g]]=d(3);o=hb.length;for(m=0;m<o;m++)hb[m]=new f;if(k(hb,
19,s)){D=0;return}o=h+r;m=0;for(var u=-1;m<o;)if(u++,g=j(hb),16>g)s[m++]=g;else if(16==g){var v;g=3+d(2);if(m+g>o){D=0;return}for(v=m?s[m-1]:0;g--;)s[m++]=v}else{g=17==g?3+d(3):11+d(7);if(m+g>o){D=0;return}for(;g--;)s[m++]=0}o=Gb.length;for(m=0;m<o;m++)Gb[m]=new f;if(k(Gb,h,s)){D=0;return}o=Gb.length;for(m=0;m<o;m++)hb[m]=new f;g=[];o=s.length;for(m=h;m<o;m++)g[m-h]=s[m];if(k(hb,r,g)){D=0;return}for(;;)if(g=j(Gb),256<=g){g-=256;if(0==g)break;g--;o=d(aa[g])+Q[g];g=j(hb);8<ba[g]?(r=d(8),r|=d(ba[g]-
8)<<8):r=d(ba[g]);for(r+=la[g];o--;)h=F[D-r&32767],e(h)}else e(g)}while(!a);D=0;P=1}function o(){s=[];var a=[];E=q;a[0]=b();a[1]=b();120==a[0]&&218==a[1]&&(m(),C[v]=Array(2),C[v][0]=s.join(""),C[v][1]="geonext.gxt",v++);31==a[0]&&139==a[1]&&(r(),C[v]=Array(2),C[v][0]=s.join(""),C[v][1]="file",v++);if(80==a[0]&&75==a[1]&&(E=n,a[2]=b(),a[3]=b(),3==a[2]&&4==a[3])){a[0]=b();a[1]=b();u=b();u|=b()<<8;a=b();a|=b()<<8;b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();b();var c=b(),c=c|b()<<8,d=
b(),d=d|b()<<8,e=0;for(nb=[];c--;){var f=b();"/"==f|":"==f?e=0:e<gd-1&&(nb[e++]=String.fromCharCode(f))}hd||(hd=nb);for(e=0;e<d;)b(),e++;B=0;8==a&&(m(),C[v]=Array(2),C[v][0]=s.join(""),C[v][1]=nb.join(""),v++);r()}}function r(){var a=[],c;u&8&&(a[0]=b(),a[1]=b(),a[2]=b(),a[3]=b(),80==a[0]&&75==a[1]&&7==a[2]&&8==a[3]&&(b(),b(),b(),b()),b(),b(),b(),b(),b(),b(),b(),b());E&&o();a[0]=b();if(8==a[0]){u=b();b();b();b();b();b();b();if(u&4){a[0]=b();a[2]=b();Ba=a[0]+256*a[1];for(a=0;a<Ba;a++)b()}if(u&8){a=
0;for(nb=[];c=b();){if("7"==c||":"==c)a=0;a<gd-1&&(nb[a++]=c)}}if(u&16)for(;b(););u&2&&(b(),b());m();b();b();b();b();b();b();b();b();E&&o()}}var s=[],u,v=0,C=[],F=Array(32768),D=0,E=q,B,G=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,
26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,
167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],aa=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],la=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ba=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],sa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,
15],qa=a,ka=0,P=1,Bc=0,gd=256,nb=[],hd,Gb=Array(288),hb=Array(32),Eb=0,Dc=p,Ba=0,mb=Array(17);mb[0]=0;var Cc,fd;Ae.prototype.lf=function(){o();return C}};function Be(){W.call(this);this.c="parserMGZ"}A(Be,W);Be.prototype.parse=function(a,b,c,d){H.wa(this.c+".parse");var e=0,e=d?(new Ae(c.substr(0))).lf()[0][0]:c.substr(0),c=this.bf(e),d=[c.Qe,c.Re,c.Se];b.Y=d;b.J=c.Zd;var e=c.min,f=c.max;b.Na=b.Sb=e;b.Da=b.Rb=f;-Infinity==b.ca&&(b.ca=e);Infinity==b.ea&&(b.ea=f);b.Pc();H.ja(this.c+".parse");Ud(this,b,c.Gg,d,f);c=new ud;c.$=b;c.q=a;this.dispatchEvent(c)};
Be.prototype.bf=function(a){var b={version:0,Mg:0,Kg:0,jh:0,Lg:0,Qe:0,Re:0,Se:0,Ch:0,type:0,dh:0,xg:0,Mi:p,va:[[0,0,0,0],[0,0,0,0],[0,0,0,0]],Zd:[],Gg:[],vj:[],Bj:p,min:0,max:0},c={value:0,name:"uchar",size:1,ya:this.yb.bind(this)},d={value:1,name:"int",size:4,ya:this.ug.bind(this)},e={value:3,name:"float",size:4,ya:this.af.bind(this)},f={value:4,name:"short",size:2,ya:this.tg.bind(this)},g=256,h=new Qd(a);U(h,this.ug.bind(this),h.pe);b.version=V(h);b.Qe=V(h);b.Re=V(h);b.Se=V(h);b.Ch=V(h);b.type=
V(h);switch(b.type){case 0:b.ia=c;break;case 1:b.ia=d;break;case 3:b.ia=e;break;case 4:b.ia=f}b.dh=V(h);U(h,this.tg.bind(this),h.kc);b.xg=V(h);g-=2;0<b.xg&&(U(h,this.af.bind(this),h.jc),g-=60,b.Zd[0]=V(h),b.Zd[1]=V(h),b.Zd[2]=V(h),b.va[0][0]=V(h),b.va[1][0]=V(h),b.va[2][0]=V(h),b.va[0][1]=V(h),b.va[1][1]=V(h),b.va[2][1]=V(h),b.va[0][2]=V(h),b.va[1][2]=V(h),b.va[2][2]=V(h),b.va[0][3]=V(h),b.va[1][3]=V(h),b.va[2][3]=V(h));U(h,this.yb.bind(this),h.ic);V(h,g);a=b.ia.ya(a,h.Ta,b.Qe*b.Re*b.Se);b.Gg=a[0];
b.min=a[2];b.max=a[1];h.Ta+=h.ae*b.ia.size;h.Ta+16<h.qf.length&&(U(h,this.af.bind(this),h.jc),b.Mg=V(h),b.jh=V(h),b.Kg=V(h),b.Lg=V(h));return b};z("X.parserMGZ",Be);z("X.parserMGZ.prototype.parse",Be.prototype.parse);function Ce(){W.call(this);this.c="parserCRV"}A(Ce,W);
Ce.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var d=b.Jc;0==d.length&&i(Error("No _pointIndices defined on the X.object."));var e=0,f=(this.o(c,e)<<16)+(this.o(c,e+1)<<8)+this.o(c,e+2)&16777215,e=e+3;if(16777215!=f)alert("Can't load curvature file, invalid magic number.");else{var f=Sd(this,c,e),e=e+4+4+4,g=0,h=0,k=0,j=0,m=0,o=0,r=0,s=0,u=0,v=0,C=0,F=Array(f),D=Array(2),E=Array(2),B;for(B=0;B<f;B++){var G=Td(this,c,e),e=e+4;0==B&&(D[0]=E[0]=G);0<=G?(g++,j+=G):(h++,k+=G);u+=G;C++;E[0]=Math.max(G,
E[0]);D[0]=Math.min(G,D[0]);F[B]=G}0!=g&&(m=j/g);0!=h&&(o=k/h);0!=C&&(v=u/C);for(c=u=k=j=0;c<f;c++)G=F[c],e=0,0<=G?(e=Math.pow(G-m,2),j+=e):(e=Math.pow(G-o,2),k+=e),e=Math.pow(G-v,2),u+=e;1<g&&(r=Math.sqrt(j/(g-1)));1<h&&(s=Math.sqrt(k/(h-1)));D[1]=o-2.5*s;E[1]=m+2.5*r;g=d.length;h=[];for(c=0;c<g;c++)k=d[c],k>f&&i(Error("Could not find scalar for vertex.")),k=F[k],h.push(k),h.push(k),h.push(k);b.r.Na=D[1];b.r.Da=E[1];-Infinity==b.r.ca&&(b.r.ca=D[1]);Infinity==b.r.ea&&(b.r.ea=E[1]);b.r.s=F;b.r.yc=
h;b.r.d=n;H.ja(this.c+".parse");d=new ud;d.$=b;d.q=a;this.dispatchEvent(d)}};z("X.parserCRV",Ce);z("X.parserCRV.prototype.parse",Ce.prototype.parse);function De(){W.call(this);this.c="parserTRK"}A(De,W);
De.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var d=b.j,e=b.m,f=b.Ba,g=0;this.Zb(c,g+6,3);var h=this.ha(c,g+12,3)[0];this.ha(c,g+24,3);var k=this.ad(c,g+36),j=this.ad(c,g+238);this.ha(c,g+440,16);this.ha(c,g+956,6);var m=Rd(this,c,g+988),g=Rd(this,c,g+996),o=[],r=[],s=Infinity,u=-Infinity,v=p,C=p,F=p,D=p,E=p,B=p,G;for(G=0;G<m;G++){for(var Q=Rd(this,c,g),aa=new O,la=0,g=g+4,ba=0;ba<Q;ba++){var sa=this.$c(c,g),g=g+4,qa=this.$c(c,g),g=g+4,ka=this.$c(c,g),g=g+4,P=p;0<k&&(this.ha(c,g,k),g+=
4*k);sa/=h[0];qa/=h[1];ka/=h[2];aa.add(sa,qa,ka);0<ba&&(P=aa.get(ba-1),la+=Math.sqrt(Math.pow(sa-P[0],2)+Math.pow(qa-P[1],2)+Math.pow(ka-P[2],2)))}0<j&&(g+=4*j);ba=aa.Kb;Q=aa.Hb;sa=aa.Lb;qa=aa.Ib;ka=aa.Mb;P=aa.Jb;if(!v||ba<v)v=ba;if(!C||Q>C)C=Q;if(!F||sa<F)F=sa;if(!D||qa>D)D=qa;if(!E||ka<E)E=ka;if(!B||P>B)B=P;o.push(aa);r.push(la)}c=(v+C)/2;F=(F+D)/2;B=(E+B)/2;E=[];for(G=0;G<m;G++){D=o[G];g=D.count;la=r[G];s=Math.min(s,la);u=Math.max(u,la);for(ba=0;ba<g-1;ba++)k=D.get(ba),h=D.get(ba+1),d.add(k[0],
k[1],k[2]),d.add(h[0],h[1],h[2]),j=k[0]-c,v=k[1]-F,C=k[2]-B,aa=Math.sqrt(j*j+v*v+C*C),Q=h[0]-c,sa=h[1]-F,qa=h[2]-B,ka=Math.sqrt(Q*Q+sa*sa+qa*qa),e.add(j/aa,v/aa,C/aa),e.add(Q/ka,sa/ka,qa/ka),h=[Math.abs(h[0]-k[0]),Math.abs(h[1]-k[1]),Math.abs(h[2]-k[2])],k=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]),h[0]/=k,h[1]/=k,h[2]/=k,f.add(h[0],h[1],h[2]),f.add(h[0],h[1],h[2]),E.push(la),E.push(la),E.push(la),E.push(la),E.push(la),E.push(la)}b.ma="LINES";P=new td;P.Na=s;P.Da=u;P.ca=s;P.ea=u;P.yc=E;P.Ff=q;P.d=n;
b.r=P;H.ja(this.c+".parse");d=new ud;d.$=b;d.q=a;this.dispatchEvent(d)};z("X.parserTRK",De);z("X.parserTRK.prototype.parse",De.prototype.parse);function Ee(){W.call(this);this.c="parserIMAGE"}A(Ee,W);Ee.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||i(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;uc(f,"load",this.Uh.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};Ee.prototype.Uh=function(a,b,c){b.tf=a;a=new ud;a.$=c;a.q=b;this.dispatchEvent(a)};z("X.parserIMAGE",Ee);z("X.parserIMAGE.prototype.parse",Ee.prototype.parse);function Fe(){W.call(this);this.c="parserLUT"}A(Fe,W);Fe.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var c=c.split("\n"),d=c.length,e;for(e=0;e<d;++e){var f=c[e],f=f.replace(/^\s+|\s+$/g,"");"#"!=f[0]&&(f=f.split(" "),f=f.filter(function(a){return""!=a}),6==f.length&&(f[2]=parseInt(f[2],10)/255,f[3]=parseInt(f[3],10)/255,f[4]=parseInt(f[4],10)/255,f[5]=parseInt(f[5],10)/255,a.add(parseInt(f[0],10),f[1],f[2],f[3],f[4],f[5],10)))}H.ja(this.c+".parse");c=new ud;c.$=b;c.q=a;this.dispatchEvent(c)};
z("X.parserLUT",Fe);z("X.parserLUT.prototype.parse",Fe.prototype.parse);function Ge(){W.call(this);this.c="parserNRRD"}A(Ge,W);
Ge.prototype.parse=function(a,b,c){H.wa(this.c+".parse");var d=0,e=c.match(/^([\s\S]*?)\r?\n\r?\n/),d=e[0].length,f,g,h,k,j,m,e=e[1].split(/\r?\n/);for(j=0,m=e.length;j<m;j++)if(f=e[j],f.match(/NRRD\d+/))this.yh=n;else if(!f.match(/^#/)&&(k=f.match(/(.*):(.*)/)))g=k[1].trim(),f=k[2].trim(),(h=this.fh[g])?h.call(this,f):this[g]=f;this.yh||i(Error("Not an NRRD file"));"raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding&&i(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Aa&&
(this.Aa=[new L(1,0,0),new L(0,1,0),new L(0,0,1)],this.gf)){e=[];for(k=0;2>=k;k++)e.push(!isNaN(this.gf[k])?this.Aa[k].scale(this.gf[k]):l)}k=0;k="gzip"==this.encoding||"gz"==this.encoding?(new Ae(c.substr(d))).lf()[0][0]:c.substr(d);c=this.bc[0]*this.bc[1]*this.bc[2];d=Array(c);e=-Infinity;j=Infinity;for(m=0;m<c;m++)f=this.Qd(k,0+m*this.rc),d[m]=f,e=Math.max(e,f),j=Math.min(j,f);b.Y=[this.bc[0],this.bc[1],this.bc[2]];b.J=[(new L(this.Aa[0][0],this.Aa[0][1],this.Aa[0][2])).Yb(),(new L(this.Aa[1][0],
this.Aa[1][1],this.Aa[1][2])).Yb(),(new L(this.Aa[2][0],this.Aa[2][1],this.Aa[2][2])).Yb()];b.Na=b.Sb=j;b.Da=b.Rb=e;-Infinity==b.ca&&(b.ca=j);Infinity==b.ea&&(b.ea=e);b.Pc();H.ja(this.c+".parse");Ud(this,b,d,this.bc,e);c=new ud;c.$=b;c.q=a;this.dispatchEvent(c)};
Ge.prototype.fh={type:function(a){switch(a){case "unsigned char":case "uint8":this.Qd=this.o;this.rc=1;break;case "signed char":case "int8":this.Qd=this.sg;this.rc=1;break;case "short":case "signed short":case "unsigned short":case "short int":case "int16":this.Qd=this.ad;this.rc=2;break;case "int":case "int32":break;case "float":this.Qd=this.$c;this.rc=4;break;default:i(Error("Only short/int/int8/float data is allowed. Found "+a))}return this.type=a},endian:function(a){return a},encoding:function(a){return this.encoding=
a},dimension:function(a){return this.xb=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.bc=e},"space directions":function(a){var b,c,d;c=a.match(/\(.*?\)/g);return this.Aa=function(){var a,f,g;g=[];for(a=0,f=c.length;a<f;a++)d=c[a],g.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];for(a=0,c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return g}()},spacings:function(a){var b;b=a.split(/\s+/);
var c,d,e;e=[];for(c=0,d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.gf=e}};z("X.parserNRRD",Ge);z("X.parserNRRD.prototype.parse",Ge.prototype.parse);function He(){W.call(this);this.c="parserNII"}A(He,W);He.prototype.parse=function(a,b,c,d){H.wa(this.c+".parse");var e=0,e=d?(new Ae(c.substr(0))).lf()[0][0]:c.substr(0),c=this.bf(e),d=[c.xb[1],c.xb[2],c.xb[3]];b.Y=d;b.J=[c.Rd[1],c.Rd[2],c.Rd[3]];var e=c.min,f=c.max;b.Na=b.Sb=e;b.Da=b.Rb=f;-Infinity==b.ca&&(b.ca=e);Infinity==b.ea&&(b.ea=f);b.Pc();H.ja(this.c+".parse");Ud(this,b,c.data,d,f);c=new ud;c.$=b;c.q=a;this.dispatchEvent(c)};
He.prototype.bf=function(a){var b={qi:0,ah:p,xb:[],th:0,uh:0,vh:0,rh:0,De:0,Vg:0,ui:0,Rd:[],Hg:0,ki:0,ji:0,ti:0,ri:p,Ii:p,Wg:0,Xg:0,si:0,Bi:0,$g:p,Ug:p,Zh:0,oi:0,ci:0,di:0,ei:0,$h:0,ai:0,bi:0,vi:[],wi:[],xi:[],sh:p,zh:[],data:[]},c={value:0,name:"uchar",size:1,ya:this.yb.bind(this)},d={value:1,name:"schar",size:1,ya:this.Vh.bind(this)},e={value:2,name:"ushort",size:2,ya:this.Zb.bind(this)},f={value:3,name:"short",size:2,ya:this.Wh.bind(this)},g={value:4,name:"uint",size:4,ya:this.cf.bind(this)},h=
{value:5,name:"sint",size:4,ya:this.Xh.bind(this)},k={value:6,name:"float",size:4,ya:this.ha.bind(this)},j=new Qd(a);U(j,this.cf.bind(this),j.pe);b.qi=V(j);U(j,this.yb.bind(this),j.ic);V(j,28);U(j,this.cf.bind(this),j.pe);V(j,1);U(j,this.Zb.bind(this),j.kc);V(j,1);U(j,this.yb.bind(this),j.ic);V(j,1);b.ah=V(j,1);U(j,this.Zb.bind(this),j.kc);b.xb=V(j,8);var m=b.xb[1]*b.xb[2]*b.xb[3];U(j,this.ha.bind(this),j.jc);b.th=V(j);b.uh=V(j);b.vh=V(j);U(j,this.Zb.bind(this),j.kc);b.rh=V(j);b.De=V(j);b.Vg=V(j);
b.ui=V(j);U(j,this.ha.bind(this),j.jc);b.Rd=V(j,8);b.Hg=V(j);b.ki=V(j);b.ji=V(j);U(j,this.Zb.bind(this),j.kc);b.ti=V(j);U(j,this.yb.bind(this),j.ic);b.ri=V(j);b.Ii=V(j);U(j,this.ha.bind(this),j.jc);b.Wg=V(j);b.Xg=V(j);b.si=V(j);b.Bi=V(j);U(j,this.yb.bind(this),j.ic);b.$g=V(j,80);b.Ug=V(j,24);U(j,this.Zb.bind(this),j.kc);b.Zh=V(j);b.oi=V(j);U(j,this.ha.bind(this),j.jc);b.ci=V(j);b.di=V(j);b.ei=V(j);b.$h=V(j);b.ai=V(j);b.bi=V(j);b.vi=V(j,4);b.wi=V(j,4);b.xi=V(j,4);U(j,this.yb.bind(this),j.ic);b.sh=
V(j,16);b.zh=V(j,4);j.Ta=parseInt(b.Hg,10);switch(b.De){case 2:b.ia=c;break;case 4:b.ia=f;break;case 8:b.ia=h;break;case 16:b.ia=k;break;case 256:b.ia=d;break;case 512:b.ia=e;break;case 768:b.ia=g;break;default:i(Error("Unsupported NII data type: "+b.De))}a=b.ia.ya(a,j.Ta,m);b.data=a[0];b.min=a[2];b.max=a[1];return b};z("X.parserNII",He);z("X.parserNII.prototype.parse",He.prototype.parse);function Ie(){K.call(this);this.c="loader";this.od=new Qb;this.Lc=0}A(Ie,K);function Je(a,b){a.Lc+=b/a.od.na()/3;a.Lc=Math.min(1,a.Lc);var c=new Pd;c.Gf=a.Lc;a.dispatchEvent(c)}function Ke(a){var a=a.u.me,b=a.split(".").pop().toUpperCase();b in Le||i(Error("The "+b+" file format is not supported."));return[a,b,Le[b][0],Le[b][1],Le[b][2]]}
Ie.prototype.load=function(a,b){(!a||!b)&&i(Error("No container or object to load."));this.od.set(a.Ca,q);var c=Ke(a),d=c[0],c=c[4];if(a.md!=p)this.parse(p,a,b);else{var e=new XMLHttpRequest;J(e,"abort",this.Sf.bind(this,e,a,b));J(e,"error",this.Sf.bind(this,e,a,b));J(e,"load",this.parse.bind(this,e,a,b));e.open("GET",d,n);c&&(e.responseType=c);e.overrideMimeType("text/plain; charset=x-user-defined");e.setRequestHeader("Content-Type","text/plain");e.send(p)}};
Ie.prototype.parse=function(a,b,c){Je(this,1);setTimeout(function(){var d=Ke(b),e=d[3],d=new d[2];uc(d,Ac,this.complete.bind(this));var f=b.md;f==p&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};Ie.prototype.complete=function(a){Je(this,1);setTimeout(function(){var b=a.q,c=a.$;b.u.d=q;c.C();this.od.set(b.Ca,n)}.bind(this),100)};Ie.prototype.Sf=function(a,b,c){i(Error("Loading failed: ",b,c))};
var Le={STL:[xe,p,p],VTK:[ye,p,p],TRK:[De,p,p],FSM:[ze,p,p],INFLATED:[ze,p,p],SMOOTHWM:[ze,p,p],SPHERE:[ze,p,p],PIAL:[ze,p,p],ORIG:[ze,p,p],NRRD:[Ge,p,p],NII:[He,q,p],CRV:[Ce,p,p],LABEL:[Wd,p,p],MGH:[Be,q,p],MGZ:[Be,n,p],TXT:[Fe,p,p],LUT:[Fe,p,p],PNG:[Ee,"png","arraybuffer"],JPG:[Ee,"jpeg","arraybuffer"],JPEG:[Ee,"jpeg","arraybuffer"],GIF:[Ee,"gif","arraybuffer"]};function Me(a,b){(!y(a)||!y(b))&&i(Error("A camera needs valid width and height values."));K.call(this);this.c="camera";this.la=new L(0,0,100);this.fc=new L(0,0,0);this.D=new L(0,1,0);this.k=this.Od(this.la,this.fc);this.Eb=new Float32Array(this.k.L())}A(Me,K);Me.prototype.Ve=function(a){(!x(a)||!(a instanceof Y))&&i(Error("Could not observe the interactor."));J(a,Ad,this.Oh.bind(this));J(a,Cd,this.Th.bind(this))};
Me.prototype.Th=function(a){a instanceof Kd||i(Error("Received no valid zoom event."));a.Fb?this.Ig(a.gb):this.Jg(a.gb)};Me.prototype.Oh=function(a){a instanceof Id||i(Error("Received no valid pan event."));this.qg(a.O)};Me.prototype.__defineGetter__("view",t("k"));Me.prototype.__defineSetter__("view",function(a){(!x(a)||!(a instanceof N))&&i(Error("Invalid view matrix."));this.k=a;this.Eb=new Float32Array(this.k.L())});
Me.prototype.__defineGetter__("position",function(){return[this.la.x,this.la.y,this.la.b]});Me.prototype.__defineSetter__("position",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid position."));this.la=new L(a[0],a[1],a[2]);this.reset()});Me.prototype.__defineGetter__("focus",function(){return[this.fc.x,this.fc.y,this.fc.b]});
Me.prototype.__defineSetter__("focus",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid focus"));this.fc=new L(a[0],a[1],a[2]);this.reset()});Me.prototype.__defineGetter__("up",function(){return[this.D.x,this.D.y,this.D.b]});Me.prototype.__defineSetter__("up",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid up vector."));this.D=new L(a[0],a[1],a[2]);this.reset()});w=Me.prototype;w.reset=function(){this.k=this.Od(this.la,this.fc);this.Eb=new Float32Array(this.k.L())};
w.qg=function(a){a instanceof Array&&2==a.length?a=new Zc(a[0],a[1]):a instanceof Zc||i(Error("Invalid distance vector for pan operation."));a=new L(-a.x,a.y,0);a=md(4).translate(a);this.k=new N(a.multiply(this.k));this.Eb=new Float32Array(this.k.L())};w.Ig=function(a){var b=20;x(a)&&!a&&(b=1);a=new L(0,0,b);a=md(4).translate(a);this.k=new N(a.multiply(this.k));this.Eb=new Float32Array(this.k.L())};
w.Jg=function(a){var b=30;x(a)&&!a&&(b=1);a=new L(0,0,-b);a=md(4).translate(a);this.k=new N(a.multiply(this.k));this.Eb=new Float32Array(this.k.L())};w.Od=function(a,b){(!(a instanceof L)||!(b instanceof L))&&i(Error("3D vectors required for calculating the view."));return md(4)};z("X.camera",Me);z("X.camera.prototype.pan",Me.prototype.qg);z("X.camera.prototype.zoomIn",Me.prototype.Ig);z("X.camera.prototype.zoomOut",Me.prototype.Jg);function Ne(a){function b(a,b,d){b=2*b*Math.PI;b=k.Ab(Math.cos(b)).sc(j.Ab(Math.sin(b)));a=c.sc(e.Ab(a)).sc(b.Ab(f));d=b.Ab(1-Math.abs(d)).sc(g.Ab(d));return new Jc(a,d)}this.v=[];for(var a=a||{},c=new Aa(a.start||[0,-1,0]),d=new Aa(a.end||[0,1,0]),e=d.Yc(c),f=a.Ra||1,a=a.ff||16,g=e.fd(),h=0.5<Math.abs(g.y()),k=(new Aa(h,!h,0)).Be(g).fd(),j=k.Be(g).fd(),h=new Jc(c,g.Te()),d=new Jc(d,g.fd()),m=[],o=0;o<a;o++){var r=o/a,s=(o+1)/a;m.push(new Lc([h,b(0,r,-1),b(0,s,-1)]));m.push(new Lc([b(0,s,0),b(0,r,
0),b(1,r,0),b(1,s,0)]));m.push(new Lc([d,b(1,s,1),b(1,r,1)]))}return Oc(m)}A(Ne,Nc);function Oe(){T.call(this);this.c="cylinder";this.se=[-10,-10,-10];this.be=[10,10,10];this.Nb=10;this.Ob=32;Da(this,new wd)}A(Oe,T);Oe.prototype.__defineGetter__("start",t("se"));Oe.prototype.__defineSetter__("start",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid start"));this.se=a});Oe.prototype.__defineGetter__("end",t("be"));Oe.prototype.__defineSetter__("end",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid end"));this.be=a});
Oe.prototype.__defineGetter__("radius",t("Nb"));Oe.prototype.__defineSetter__("radius",function(a){y(a)||i(Error("Invalid radius."));this.Nb=a});Oe.prototype.C=function(){yd(this,new Ne({start:this.se,end:this.be,Ra:this.Nb,ff:this.Ob}));Oe.h.C.call(this)};z("X.cylinder",Oe);z("X.cylinder.prototype.modified",Oe.prototype.C);function Pe(a){function b(a,b){var a=a*2*Math.PI,b=b*Math.PI,e=new Aa(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new Jc(c.sc(e.Ab(d)),e))}this.v=[];for(var a=a||{},c=new Aa(a.xe||[0,0,0]),d=a.Ra||1,e=a.ff||16,a=a.yi||8,f=[],g=[],h=0;h<e;h++)for(var k=0;k<a;k++)g=[],b(h/e,k/a),0<k&&b((h+1)/e,k/a),k<a-1&&b((h+1)/e,(k+1)/a),b(h/e,(k+1)/a),f.push(new Lc(g));return Oc(f)}A(Pe,Nc);function Qe(){T.call(this);this.c="sphere";this.i=[0,0,0];this.Nb=5;this.Ob=32;this.Sg=16;Da(this,new wd)}A(Qe,T);Qe.prototype.__defineGetter__("center",t("i"));Qe.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.i=a});Qe.prototype.__defineGetter__("radius",t("Nb"));Qe.prototype.__defineSetter__("radius",function(a){y(a)||i(Error("Invalid radius."));this.Nb=a});
Qe.prototype.C=function(){yd(this,new Pe({xe:this.i,Ra:this.Nb,ff:this.Ob,yi:this.Sg}));Qe.h.C.call(this)};z("X.sphere",Qe);z("X.sphere.prototype.modified",Qe.prototype.C);function ve(a){Z.call(this);this.c="labelmap";this.bb=a}A(ve,Z);ve.prototype.C=function(){var a=new ud;a.$=this;this.dispatchEvent(a);this.bb.C()};z("X.labelmap",ve);function Re(a){this.v=[];var a=a||{},b=new Aa(a.xe||[0,0,0]),c=!a.Ra?[1,1,1]:a.Ra.length?a.Ra:[a.Ra,a.Ra,a.Ra];return Oc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Lc(a[0].map(function(e){e=new Aa(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Jc(e,new Aa(a[1]))}))}))}A(Re,Nc);function Se(){T.call(this);this.c="cube";this.i=[0,0,0];this.he=this.ge=this.fe=20;this.Pb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Da(this,new wd)}A(Se,T);Se.prototype.__defineGetter__("center",t("i"));Se.prototype.__defineSetter__("center",function(a){(!x(a)||!(a instanceof Array)||3!=a.length)&&i(Error("Invalid center"));this.i=a});Se.prototype.__defineGetter__("lengthX",t("fe"));
Se.prototype.__defineSetter__("lengthX",function(a){y(a)||i(Error("Invalid lengthX."));this.fe=a});Se.prototype.__defineGetter__("lengthY",t("ge"));Se.prototype.__defineSetter__("lengthY",function(a){y(a)||i(Error("Invalid lengthY."));this.ge=a});Se.prototype.__defineGetter__("lengthZ",t("he"));Se.prototype.__defineSetter__("lengthZ",function(a){y(a)||i(Error("Invalid lengthZ."));this.he=a});Se.prototype.C=function(){yd(this,new Re({xe:this.i,Ra:[this.fe/2,this.ge/2,this.he/2]}));Se.h.C.call(this)};
z("X.cube",Se);z("X.cube.prototype.modified",Se.prototype.C);function Te(a){Y.call(this,a);this.c="interactor3D"}A(Te,Y);Te.prototype.Zc=function(a){Te.h.Zc.call(this,a);var b=new Kd;x(a.nc)||(a.nc=0);b.Fb=0>a.nc;b.gb=n;this.dispatchEvent(b)};function Ue(a){K.call(this);this.c="array";this.s=[];this.pf=a}A(Ue,K);Ue.prototype.add=function(a){this.s.push(a);return n};Ue.prototype.clear=function(){this.s.length=0};function Ve(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Ve(a,b,d);for(Ve(a,d,c);b<d;++b)if(0<a.pf(a.s[b],a.s[d])){var e=a.s[b];a.s[b]=a.s[d];for(var f=a,g=d,h=c;g+1<h&&0>f.pf(f.s[g+1],e);){var k=f,j=g+1,m=k.s[g];k.s[g]=k.s[j];k.s[j]=m;++g}f.s[g]=e}}}Ue.prototype.sort=function(){Ve(this,0,this.s.length)};function We(a,b){Me.call(this,a,b);this.c="camera2D"}A(We,Me);function Xe(a,b){Me.call(this,a,b);this.c="camera3D";this.rf=45;this.Cf=new Float32Array(Ye(this.rf,a/b).L())}A(Xe,Me);Xe.prototype.Ve=function(a){Xe.h.Ve.call(this,a);J(a,Bd,this.Rh.bind(this))};Xe.prototype.Rh=function(a){a instanceof Jd||i(Error("Received no valid rotate event."));this.rotate(a.O)};function Ye(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new N([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
Xe.prototype.rotate=function(a){a instanceof Array&&2==a.length?a=new Zc(a[0],a[1]):a instanceof Zc||i(Error("Invalid distance vector for rotate operation."));var b=-a.x/5*Math.PI/180,a=-a.y/5*Math.PI/180,c=md(4),d=new L(parseFloat(this.k.M(0,0)),parseFloat(this.k.M(0,1)),parseFloat(this.k.M(0,2))),b=c.rotate(b,new L(parseFloat(this.k.M(1,0)),parseFloat(this.k.M(1,1)),parseFloat(this.k.M(1,2)))),a=c.rotate(a,d);this.k=new N(this.k.multiply(a.multiply(b)));this.Eb=new Float32Array(this.k.L())};
Xe.prototype.Od=function(a,b){Xe.h.Od.call(this,a,b);var c=md(4),d=new L(a.x-b.x,a.y-b.y,a.b-b.b),d=d.normalize(),e=this.D.f();e.Qc(d)&&(e.b+=1.0E-6);var f=Wc(e,d),e=Wc(d,f),f=f.normalize(),e=e.normalize();M(c,0,0,f.x);M(c,0,1,f.y);M(c,0,2,f.b);M(c,0,3,0);M(c,1,0,e.x);M(c,1,1,e.y);M(c,1,2,e.b);M(c,1,3,0);M(c,2,0,d.x);M(c,2,1,d.y);M(c,2,2,d.b);M(c,2,3,0);M(c,3,0,0);M(c,3,1,0);M(c,3,2,0);M(c,3,3,1);d=a.f();return c.translate(d.Q())};z("X.camera3D",Xe);z("X.camera3D.prototype.rotate",Xe.prototype.rotate);function Ze(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ze.prototype.f=function(){return new Ze(this.top,this.right,this.bottom,this.left)};Ze.prototype.contains=function(a){return!this||!a?q:a instanceof Ze?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function $e(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}$e.prototype.f=function(){return new $e(this.left,this.top,this.width,this.height)};$e.prototype.ag=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,n}return q};
$e.prototype.contains=function(a){return a instanceof $e?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};$e.prototype.oa=function(){return new $c(this.width,this.height)};function af(a,b){var c=de(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,p))?c[b]||c.getPropertyValue(b):""}function bf(a,b){return a.currentStyle?a.currentStyle[b]:p}function cf(a,b){return af(a,b)||bf(a,b)||a.style&&a.style[b]}function df(a){a=a?9==a.nodeType?a:de(a):document;return I&&!qb(9)&&!pe(be(a))?a.body:a.documentElement}
function ef(a){var b=a.getBoundingClientRect();I&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function ff(a){if(I&&!qb(8))return a.offsetParent;for(var b=de(a),c=cf(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=cf(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return p}
function gf(a){for(var b=new Ze(0,Infinity,Infinity,0),c=be(a),d=c.I.body,e=c.I.documentElement,f=!Ya&&"CSS1Compat"==c.I.compatMode?c.I.documentElement:c.I.body;a=ff(a);)if((!I||0!=a.clientWidth)&&(!Ya||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=cf(a,"overflow")){var g=hf(a),h;h=a;if(Xa&&!ob("1.9")){var k=parseFloat(af(h,"borderLeftWidth"));if(jf(h))var j=h.offsetWidth-h.clientWidth-k-parseFloat(af(h,"borderRightWidth")),k=k+j;h=new Xc(k,parseFloat(af(h,"borderTopWidth")))}else h=new Xc(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.I.parentWindow||c.I.defaultView||window;e=c.document;Ya&&!ob("500")&&!Za?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new $c(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new $c(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:p}
function hf(a){var b,c=de(a),d=cf(a,"position"),e=Xa&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Xc(0,0),g=df(c);if(a==g)return f;if(a.getBoundingClientRect)b=ef(a),a=qe(be(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(Ya&&"fixed"==cf(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Wa||Ya&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=ff(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!Wa||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function kf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function lf(a){if("none"!=cf(a,"display"))return mf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=mf(a);b.display=c;b.position=e;b.visibility=d;return a}function mf(a){var b=a.offsetWidth,c=a.offsetHeight,d=Ya&&!b&&!c;return(!ha(b)||d)&&a.getBoundingClientRect?(a=ef(a),new $c(a.right-a.left,a.bottom-a.top)):new $c(b,c)}function nf(a,b){a.style.display=b?"":"none"}function jf(a){return"rtl"==cf(a,"direction")}
function of(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var pf={thin:2,medium:4,thick:6};function qf(a,b){if("none"==bf(a,b+"Style"))return 0;var c=bf(a,b+"Width");return c in pf?pf[c]:of(a,c)};function rf(a){this.Ia=a;this.t=[]}A(rf,Xb);var sf=[];function tf(a,b,c,d,e){ia(c)||(sf[0]=c,c=sf);for(var f=0;f<c.length;f++)a.t.push(J(b,c[f],d||a,e||q,a.Ia||a))}rf.prototype.Td=function(){yb(this.t,wc);this.t.length=0};rf.prototype.H=function(){rf.h.H.call(this);this.Td()};rf.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function uf(){}(function(a){a.Tf=function(){return a.qh||(a.qh=new a)}})(uf);uf.prototype.Ue=0;uf.Tf();function vf(a){this.Pa=a||be()}A(vf,Ic);w=vf.prototype;w.oh=uf.Tf();w.$f=p;w.Xb=q;w.n=p;w.qc=p;w.Dd=p;w.Oc=p;w.Hi=q;w.g=t("n");w.ef=function(a){this.qc&&this.qc!=a&&i(Error("Method not supported"));vf.h.ef.call(this,a)};w.Hd=t("Pa");w.mc=function(){this.n=this.Pa.createElement("div")};w.ac=function(a){this.zb(a)};w.zb=function(a,b){this.Xb&&i(Error("Component already rendered"));this.n||this.mc();a?a.insertBefore(this.n,b||p):this.Pa.I.body.appendChild(this.n);(!this.qc||this.qc.Xb)&&this.Gd()};
w.Gd=function(){this.Xb=n;wf(this,function(a){!a.Xb&&a.g()&&a.Gd()})};w.Sc=function(){wf(this,function(a){a.Xb&&a.Sc()});this.Ld&&this.Ld.Td();this.Xb=q};w.H=function(){vf.h.H.call(this);this.Xb&&this.Sc();this.Ld&&(this.Ld.Ha(),delete this.Ld);wf(this,function(a){a.Ha()});!this.Hi&&this.n&&me(this.n);this.qc=this.n=this.Oc=this.Dd=p};function wf(a,b){a.Dd&&yb(a.Dd,b,l)}
w.removeChild=function(a,b){if(a){var c=ma(a)?a:a.$f||(a.$f=":"+(a.oh.Ue++).toString(36)),a=this.Oc&&c?(c in this.Oc?this.Oc[c]:l)||p:p;if(c&&a){var d=this.Oc;c in d&&delete d[c];Cb(this.Dd,a);b&&(a.Sc(),a.n&&me(a.n));c=a;c==p&&i(Error("Unable to set parent component"));c.qc=p;vf.h.ef.call(c,p)}}a||i(Error("Child is not in parent component"));return a};function xf(){}A(xf,Ic);w=xf.prototype;w.mf=0;w.Xc=0;w.Pe=100;w.Rf=0;w.hf=1;w.xh=q;w.Bh=q;w.Wd=function(a){a=yf(this,a);this.mf!=a&&(this.mf=a+this.Rf>this.Pe?this.Pe-this.Rf:a<this.Xc?this.Xc:a,!this.xh&&!this.Bh&&this.dispatchEvent("change"))};w.Kd=function(){return yf(this,this.mf)};w.Jd=function(){return yf(this,this.Xc)};w.Id=function(){return yf(this,this.Pe)};function yf(a,b){return a.hf==p?b:a.Xc+Math.round((b-a.Xc)/a.hf)*a.hf};function zf(a){this.Pa=a||be();this.tc=new xf;J(this.tc,"change",this.lh,q,this)}A(zf,vf);var Af={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};w=zf.prototype;w.mc=function(){this.La=this.Hd().mc("div","progress-bar-thumb");var a=Af[this.pg];this.n=this.Hd().mc("div",a,this.La);Bf(this);this.g().setAttribute("aria-valuemin",this.Jd());this.g().setAttribute("aria-valuemax",this.Id())};
w.Gd=function(){zf.h.Gd.call(this);I&&7>db&&J(this.g(),"resize",this.Yd,q,this);this.Yd();var a=this.g();a.setAttribute("role","progressbar");a.Aj="progressbar";this.g().setAttribute("aria-live","polite")};w.Sc=function(){zf.h.Sc.call(this);Cf(this)};function Cf(a){I&&7>db&&vc(a.g(),"resize",a.Yd,q,a)}w.Kd=function(){return this.tc.Kd()};w.Wd=function(a){this.tc.Wd(a);this.g()&&Bf(this)};function Bf(a){var b=a.Kd();a.g().setAttribute("aria-valuenow",b)}w.Jd=function(){return this.tc.Jd()};w.Id=function(){return this.tc.Id()};
w.pg="horizontal";w.lh=function(){this.Yd();this.dispatchEvent("change")};w.Yd=function(){if(this.La){var a=this.Jd(),b=this.Id(),a=(this.Kd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.pg?I&&7>db?(this.La.style.top=0,this.La.style.height="100%",b=this.La.offsetHeight,a=Math.round(a*b),this.La.style.top=b-a+"px",this.La.style.height=a+"px"):(this.La.style.top=100-b+"%",this.La.style.height=b+"%"):this.La.style.width=b+"%"}};w.H=function(){Cf(this);zf.h.H.call(this);this.La=p;this.tc.Ha()};function Df(a,b){x(a)||i(Error("No valid parent element."));x(b)||i(Error("Invalid initial value."));zf.call(this);this.c="progressbar";this.xa=a;this.ld=this.ab=p;this.Cb=[];this.Cb=[".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n  background: white;\n  padding: 1px;\n  overflow: hidden;\n  margin: 2px;\n  width: 100px;\n  height: 5px;\n}",".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n  overflow: hidden;\n  width: 0%;\n  height: 100%;\n}",
".progress-bar-thumb-done {\n  background: #57E964;\n}"];this.Wd(b);this.Ke()}A(Df,zf);
Df.prototype.Ke=function(){if("static"==this.xa.style.position||""==this.xa.style.position)this.xa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=he("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Cb[0]),d=document.createTextNode(this.Cb[1]),e=document.createTextNode(this.Cb[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.ab=b;this.ac(this.xa);a=this.g();a.style.position="absolute";a.style.top=(this.xa.clientHeight-
5)/2;a.style.left=(this.xa.clientWidth-100)/2;a.classList.add("xtk-progress-bar")};function Ef(a){var b=a.g().style.top,c=a.g().style.left;me(a.g());var d=new Df(a.xa,100),e=d.g();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=l?e.firstElementChild:ne(e.firstChild)).classList.add("progress-bar-thumb-done");a.ld=d}Df.prototype.Ne=function(){this.ab&&me(this.ab);this.g()&&me(this.g());this.ld&&me(this.ld.g());this.ld=this.ab=p};var Ff=ea.window;function Gf(a,b,c){na(a)?c&&(a=xa(a,c)):a&&"function"==typeof a.handleEvent?a=xa(a.handleEvent,a):i(Error("Invalid listener argument"));return 2147483647<b?-1:Ff.setTimeout(a,b||0)};function Hf(){K.call(this);this.c="renderer";this.q=window.document.body;this.F=this.q.clientWidth;this.A=this.q.clientHeight;this.Gb=this.p=this.X=p;this.Wa=new Ue(vd);this.ub=[];this.S=p;this.Af=this.pd=this.qd=q;this.a=this.Oa=p;this.N={PROGRESSBAR_ENABLED:n};window.console.log("XTK Release 4 -- 04/12/12 -- http://www.goXTK.com")}A(Hf,K);w=Hf.prototype;w.Ph=function(a){this.Oa&&this.Oa.Wd(100*a.Gf)};w.Fh=function(a){x(a)&&a instanceof ud&&this.Sa(a.$)};
w.Ye=function(a){(!x(a)||!(a instanceof Md))&&i(Error("Invalid hover event."))};w.Qh=function(){var a=ee(this.q);this.F=a.clientWidth;this.A=a.clientHeight;a=ee(this.X);a.width=this.F;a.height=this.A;this instanceof If&&(this.a.viewport(0,0,this.F,this.A),this.p.Cf=new Float32Array(Ye(this.p.rf,this.X.width/this.X.height).L()));this.vc()};w.Ze=function(a){(!x(a)||!(a instanceof Ld))&&i(Error("Invalid scroll event."))};Hf.prototype.__defineGetter__("config",t("N"));
Hf.prototype.__defineGetter__("interactor",t("Gb"));Hf.prototype.__defineGetter__("camera",t("p"));Hf.prototype.__defineGetter__("loadingCompleted",t("pd"));Hf.prototype.__defineSetter__("loadingCompleted",da("pd"));Hf.prototype.__defineGetter__("container",t("q"));Hf.prototype.__defineSetter__("container",function(a){x(a)||i(Error("An ID to a valid container (<div>..) is required."));var b=a;ma(b)&&(b=ee(a));oa(b)&&1==b.nodeType||i(Error("Could not find the given container."));this.q=b});w=Hf.prototype;
w.vc=function(){this.p.reset()};function Jf(a){a.N.PROGRESSBAR_ENABLED&&a.Oa&&!a.of&&(Ef(a.Oa),a.of=Gf(function(){this.of=p;this.Oa&&(this.Oa.Ne(),this.Oa=p);this.ac()}.bind(a),700))}
w.ba=function(a){var b=he("canvas");this.q.appendChild(b);this.F=this.q.clientWidth;this.A=this.q.clientHeight;b.width=this.F;b.height=this.A;try{var c=b.getContext(a);c||i(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.q.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+"</p>";
i(Error(e))}this.S=new Ie;J(this.S,Fd,this.Ph.bind(this));this.X=b;this.a=c;b=new Te(this.X);"2d"==a&&(b=new se(this.X));b.ba();J(b,Ed,this.vc.bind(this));J(b,Gd,this.Ye.bind(this));J(b,Dd,this.Ze.bind(this));this.Gb=b;b=new Xe(this.F,this.A);"2d"==a&&(b=new We(this.F,this.A));b.Ve(this.Gb);this.p=b;J(window,"resize",this.Qh,q,this)};w.add=function(a){(a instanceof Se||a instanceof Qe||a instanceof Oe)&&a.C();this.ub.push(a);this.Sa(a)};
w.Sa=function(a){(!this.X||!this.a)&&i(Error("The renderer was not initialized properly."));x(a)||(window.console.log(a),i(Error("Illegal object.")));zc(a)||J(a,Ac,this.Fh.bind(this))};w.get=function(a){x(a)||i(Error("Invalid object id."));for(var b=this.Wa.s,c=b.length,d=0,d=0;d<c;d++)if(b[d].Ca==a)return b[d];return p};
w.ac=function(){(!this.X||!this.a)&&i(Error("The renderer was not initialized properly."));x(this.Ef)||(this.S.od.ze(q)?(this.N.PROGRESSBAR_ENABLED&&!this.Oa&&(this.Oa=new Df(this.q,3)),this.Ef=Gf(function(){this.Ef=p;this.ac()}.bind(this),100)):(!this.pd&&!this.Af&&(this.Af=n,eval("this.onShowtime()"),this.pd=n),this.Oa?Jf(this):(window.bd(this.ac.bind(this,this.X)),eval("this.onRender()"),this.zb(q,n))))};w.og=ca();w.mg=ca();w.zb=ca();
w.Fd=function(){this.Wa.clear();delete this.Wa;this.ub.length=0;delete this.ub;delete this.S;this.S=p;delete this.p;this.p=p;delete this.Gb;this.Gb=p;delete this.a;this.a=p;me(this.X);delete this.X;this.X=p};function Kf(){K.call(this);this.c="shaders";this.xd="";this.xd="precision mediump float;\n\nattribute vec3 vertexPosition;\nattribute vec3 vertexNormal;\nattribute vec3 vertexColor;\nattribute vec2 vertexTexturePos;\nattribute float vertexScalar;\n\nuniform mat4 view;\nuniform mat4 perspective;\nuniform vec3 center;\nuniform mat4 objectTransform;\nuniform bool useObjectColor;\nuniform bool useScalars;\nuniform bool scalarsReplaceMode;\nuniform float scalarsMin;\nuniform float scalarsMax;\nuniform vec3 scalarsMinColor;\nuniform vec3 scalarsMaxColor;\nuniform float scalarsMinThreshold;\nuniform float scalarsMaxThreshold;\nuniform vec3 objectColor;\nuniform float pointSize;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n  fTransformedVertexNormal = mat3(view[0].xyz,view[1].xyz,view[2].xyz) * mat3(objectTransform[0].xyz,objectTransform[1].xyz,objectTransform[2].xyz) * vertexNormal;\n  fVertexNormal = vertexNormal;\n  fDiscardNow = 0.0;\n  vec3 vertexPosition2 = vertexPosition - center;\n  fVertexPosition = view * objectTransform * vec4(vertexPosition2, 1.0);\n  fragmentTexturePos = vertexTexturePos;\n  if (useScalars) {\n    float scalarValue = vertexScalar;\n    if (scalarValue < scalarsMinThreshold || scalarValue > scalarsMaxThreshold) {\n      if (scalarsReplaceMode) {\n        fragmentColor = objectColor;\n      } else {\n        fDiscardNow = 1.0;\n      }\n    } else {\n      if (scalarsReplaceMode) {\n        fragmentColor = scalarValue * scalarsMaxColor + (1.0 - scalarValue) * scalarsMinColor;\n      } else {\n        fragmentColor = vertexColor;\n      }\n    }\n  } else if (useObjectColor) {\n    fragmentColor = objectColor;\n  } else {\n    fragmentColor = vertexColor;\n  }\n  gl_PointSize = pointSize;\n  gl_Position = perspective * fVertexPosition;\n}\n";
this.nd="";this.nd="precision mediump float;\n\nuniform bool usePicking;\nuniform bool useTexture;\nuniform bool volumeTexture;\nuniform bool useLabelMapTexture;\nuniform sampler2D textureSampler;\nuniform sampler2D textureSampler2;\nuniform float objectOpacity;\nuniform float labelmapOpacity;\nuniform float volumeLowerThreshold;\nuniform float volumeUpperThreshold;\nuniform float volumeScalarMin;\nuniform float volumeScalarMax;\nuniform vec3 volumeScalarMinColor;\nuniform vec3 volumeScalarMaxColor;\nuniform float volumeWindowLow;\nuniform float volumeWindowHigh;\n\nvarying float fDiscardNow;\nvarying vec4 fVertexPosition;\nvarying vec3 fragmentColor;\nvarying vec2 fragmentTexturePos;\nvarying vec3 fVertexNormal;\nvarying vec3 fTransformedVertexNormal;\n\nvoid main(void) {\n if (fDiscardNow > 0.0) {\n   discard;\n }\n if (usePicking) {\n   gl_FragColor = vec4(fragmentColor, 1.0);\n } else if (useTexture) {\n   vec4 texture1 = texture2D(textureSampler,fragmentTexturePos);\n   vec4 textureSum = texture1;\n   if (volumeTexture) {\n     float _windowLow = (volumeWindowLow / volumeScalarMax);\n     float _windowHigh = (volumeWindowHigh / volumeScalarMax);\n     vec3 _minrange = vec3(_windowLow,_windowLow,_windowLow);\n     vec3 _maxrange = vec3(_windowHigh,_windowHigh,_windowHigh);\n     vec3 fac = _maxrange - _minrange;\n     textureSum = vec4((textureSum.r - _minrange)/fac,1);\n     textureSum = textureSum.r * vec4(volumeScalarMaxColor,1) + (1.0 - textureSum.r) * vec4(volumeScalarMinColor,1);\n   }\n   if (useLabelMapTexture) {\n     vec4 texture2 = texture2D(textureSampler2,fragmentTexturePos);\n     if (texture2.a > 0.0) {\n       if (labelmapOpacity < 1.0) {\n         textureSum = mix(texture2, textureSum, 1.0 - labelmapOpacity);\n       } else {\n         textureSum = texture2;\n       }\n     }\n   }\n   if (volumeTexture) {\n     float _volumeLowerThreshold = (volumeLowerThreshold / volumeScalarMax);\n     float _volumeUpperThreshold = (volumeUpperThreshold / volumeScalarMax);\n     if (texture1.r < _volumeLowerThreshold ||\n         texture1.r > _volumeUpperThreshold) {\n       discard;\n     };\n   };\n   gl_FragColor = textureSum;\n   gl_FragColor.a = objectOpacity;\n } else {\n   vec3 nNormal = normalize(fTransformedVertexNormal);\n   if (fVertexNormal == vec3(0.0,0.0,0.0)) {\n     gl_FragColor = vec4(fragmentColor,1.0);\n     return;\n   }\n   vec3 light = vec3(0.0, 0.0, 1.0);\n   vec3 lightDirection = vec3(0,0,-10);\n   lightDirection = normalize(lightDirection);\n   vec3 eyeDirection = normalize(-fVertexPosition.xyz);\n   vec3 reflectionDirection = reflect(-lightDirection, nNormal);\n   float specular = pow(max(dot(reflectionDirection, eyeDirection), 0.0), 10.0);\n   float diffuse = 0.8 * max(dot(nNormal, light), 0.0);\n   float ambient = 0.3;\n   gl_FragColor = vec4(fragmentColor * ambient +\n                       fragmentColor * diffuse +\n                       vec3(0.2, 0.2, 0.2) * specular,\n                       objectOpacity);\n }\n}\n"}
A(Kf,K);
var Lf={ij:"vertexPosition",hj:"vertexNormal",gj:"vertexColor",kj:"vertexTexturePos",jj:"vertexScalar"},Mf={lj:"view",Ri:"perspective",Ji:"center",Qi:"objectTransform",cj:"useObjectColor",Oi:"objectColor",ej:"useScalars",Zi:"scalarsReplaceMode",Wi:"scalarsMin",Ti:"scalarsMax",Xi:"scalarsMinColor",Ui:"scalarsMaxColor",Yi:"scalarsMinThreshold",Vi:"scalarsMaxThreshold",Si:"pointSize",Pi:"objectOpacity",Ni:"normal",dj:"usePicking",fj:"useTexture",bj:"useLabelMapTexture",Li:"labelmapOpacity",$i:"textureSampler",aj:"textureSampler2",
mj:"volumeLowerThreshold",sj:"volumeUpperThreshold",pj:"volumeScalarMin",nj:"volumeScalarMax",qj:"volumeScalarMinColor",oj:"volumeScalarMaxColor",uj:"volumeWindowLow",tj:"volumeWindowHigh",rj:"volumeTexture"};
function Nf(a){var b=Object.keys(Mf);Object.keys(Lf).every(function(a){a=Lf[a];return-1!=this.xd.search(a)||-1!=this.nd.search(a)}.bind(a))||i(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=Mf[a];return-1!=this.xd.search(a)||-1!=this.nd.search(a)}.bind(a))||i(Error("Could not find all uniforms in the shader sources."))};function Of(a,b,c){x(a)||i(Error("Invalid GL Buffer."));x(b)||i(Error("Invalid number of items."));x(c)||i(Error("Invalid item size."));K.call(this);this.c="buffer";this.Z=a;this.lb=b;this.mb=c}A(Of,K);function Pf(a,b,c,d,e,f,g,h){var k,j=c.offsetParent;if(j){var m="HTML"==j.tagName||"BODY"==j.tagName;if(!m||"static"!=cf(j,"position"))k=hf(j),m||(k=Yc(k,new Xc(j.scrollLeft,j.scrollTop)))}j=hf(a);m=lf(a);j=new $e(j.x,j.y,m.width,m.height);(m=gf(a))&&j.ag(new $e(m.left,m.top,m.right-m.left,m.bottom-m.top));var m=be(a),o=be(c);if(m.I!=o.I){var r=m.I.body,o=o.I.parentWindow||o.I.defaultView,s=new Xc(0,0),u=de(r)?de(r).parentWindow||de(r).defaultView:window,v=r;do{var C;if(u==o)C=hf(v);else{var F=v;
C=new Xc;if(1==F.nodeType)if(F.getBoundingClientRect)F=ef(F),C.x=F.left,C.y=F.top;else{var D=qe(be(F)),F=hf(F);C.x=F.x-D.x;C.y=F.y-D.y}else{var D=na(F.kh),E=F;F.targetTouches?E=F.targetTouches[0]:D&&F.Qa.targetTouches&&(E=F.Qa.targetTouches[0]);C.x=E.clientX;C.y=E.clientY}}s.x+=C.x;s.y+=C.y}while(u&&u!=o&&(v=u.frameElement)&&(u=u.parent));r=Yc(s,hf(r));I&&!pe(m)&&(r=Yc(r,qe(m)));j.left+=r.x;j.top+=r.y}a=(b&4&&jf(a)?b^2:b)&-5;b=new Xc(a&2?j.left+j.width:j.left,a&1?j.top+j.height:j.top);k&&(b=Yc(b,
k));e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var B;if(g&&(B=gf(c))&&k)B.top-=k.y,B.right-=k.x,B.bottom-=k.y,B.left-=k.x;return Qf(b,c,d,f,B,g,h)}
function Qf(a,b,c,d,e,f,g){var a=a.f(),h=0,k=(c&4&&jf(b)?c^2:c)&-5,c=lf(b),g=g?g.f():c.f();if(d||0!=k)k&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),k&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){h=a;d=0;if(65==(f&65)&&(h.x<e.left||h.x>=e.right))f&=-2;if(132==(f&132)&&(h.y<e.top||h.y>=e.bottom))f&=-5;h.x<e.left&&f&1&&(h.x=e.left,d|=1);h.x<e.left&&h.x+g.width>e.right&&f&16&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4);h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1);f&2&&(d|=(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0));h.y<e.top&&f&4&&(h.y=e.top,d|=2);h.y>=e.top&&h.y+g.height>e.bottom&&f&32&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8);h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2);f&8&&(d|=(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0));h=d}else h=256;if(h&496)return h}f=a;e=Xa&&(Pa||cb)&&ob("1.9");f instanceof Xc?(a=f.x,f=f.y):(a=f,f=l);b.style.left=kf(a,e);b.style.top=kf(f,e);ad(c,g)||(a=pe(be(de(b))),
I&&(!a||!ob("8"))?(c=b.style,a?(I?(a=of(b,bf(b,"paddingLeft")),e=of(b,bf(b,"paddingRight")),f=of(b,bf(b,"paddingTop")),d=of(b,bf(b,"paddingBottom")),a=new Ze(f,e,d,a)):(a=af(b,"paddingLeft"),e=af(b,"paddingRight"),f=af(b,"paddingTop"),d=af(b,"paddingBottom"),a=new Ze(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),I?(e=qf(b,"borderLeft"),f=qf(b,"borderRight"),d=qf(b,"borderTop"),b=qf(b,"borderBottom"),b=new Ze(d,f,b,e)):(e=af(b,"borderLeftWidth"),f=af(b,"borderRightWidth"),d=af(b,"borderTopWidth"),
b=af(b,"borderBottomWidth"),b=new Ze(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,Xa?b.MozBoxSizing="border-box":Ya?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",b.height=Math.max(g.height,0)+"px"));return h};function Rf(){}Rf.prototype.Ka=ca();function Sf(a,b){this.element=a;this.Lf=b}A(Sf,Rf);Sf.prototype.Ka=function(a,b,c){Pf(this.element,this.Lf,a,b,l,c)};function Tf(a,b){this.Ia=new rf(this);this.df(a||p);b&&(this.wc=b)}A(Tf,Ic);w=Tf.prototype;w.n=p;w.Tg=n;w.Hf=p;w.ga=q;w.pi=q;w.Oe=-1;w.nh=q;w.eh=n;w.wc="toggle_display";w.g=t("n");w.df=function(a){this.ga&&i(Error("Can not change this state of the popup while showing."));this.n=a};
function Uf(a,b){a.dd&&a.dd.stop();a.Vc&&a.Vc.stop();if(b){if(!a.ga&&a.We()){a.n||i(Error("Caller must call setElement before trying to show the popup"));a.Ka();var c=de(a.n);a.nh&&tf(a.Ia,c,"keydown",a.Dh,n);if(a.Tg)if(tf(a.Ia,c,"mousedown",a.kg,n),I){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}tf(a.Ia,c,"mousedown",a.kg,n);tf(a.Ia,c,"deactivate",a.jg)}else tf(a.Ia,c,"blur",a.jg);"toggle_display"==
a.wc?(a.n.style.visibility="visible",nf(a.n,n)):"move_offscreen"==a.wc&&a.Ka();a.ga=n;a.dd?(uc(a.dd,"end",a.ng,q,a),a.dd.play()):a.ng()}}else Vf(a)}w.Ka=fa;function Vf(a,b){if(!a.ga||!a.dispatchEvent({type:"beforehide",target:b}))return q;a.Ia&&a.Ia.Td();a.Vc?(uc(a.Vc,"end",ya(a.Kf,b),q,a),a.Vc.play()):a.Kf(b);return n}w.Kf=function(a){"toggle_display"==this.wc?this.pi?Gf(this.Zf,0,this):this.Zf():"move_offscreen"==this.wc&&(this.n.style.left="-200px",this.n.style.top="-200px");this.ga=q;this.Xe(a)};
w.Zf=function(){this.n.style.visibility="hidden";nf(this.n,q)};w.We=function(){return this.dispatchEvent("beforeshow")};w.ng=function(){this.Oe=za();this.dispatchEvent("show")};w.Xe=function(a){za();this.dispatchEvent({type:"hide",target:a})};w.kg=function(a){a=a.target;!oe(this.n,a)&&(!this.Hf||oe(this.Hf,a))&&!(150>za()-this.Oe)&&Vf(this,a)};w.Dh=function(a){27==a.keyCode&&Vf(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
w.jg=function(a){if(this.eh){var b=de(this.n);if(I||Wa){if(a=b.activeElement,!a||oe(this.n,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>za()-this.Oe||Vf(this)}};w.H=function(){Tf.h.H.call(this);this.Ia.Ha();Zb(this.dd);Zb(this.Vc);delete this.n;delete this.Ia};function Wf(a,b){this.Ae=a instanceof Xc?a:new Xc(a,b)}A(Wf,Rf);Wf.prototype.Ka=function(a,b,c,d){Pf(df(a),0,a,b,this.Ae,c,p,d)};function Xf(a,b){this.Yh=4;this.Sd=b||l;Tf.call(this,a)}A(Xf,Tf);Xf.prototype.Ka=function(){if(this.Sd){var a=!this.ga&&"move_offscreen"!=this.wc,b=this.g();a&&(b.style.visibility="hidden",nf(b,n));this.Sd.Ka(b,this.Yh,this.yj);a&&nf(b,q)}};function Yf(a,b,c){this.Pa=c||(a?be(ee(a)):be());Xf.call(this,this.Pa.mc("div",{style:"position:absolute;display:none;"}));this.Ce=new Xc(1,1);this.Ub=new Ub;a&&Zf(this,a);if(b!=p)if(a=this.g(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(de(a).createTextNode(b))}}A(Yf,Xf);var $f=[];w=Yf.prototype;w.fa=p;w.className="goog-tooltip";
w.yg=500;w.mh=0;w.Hd=t("Pa");function Zf(a,b){b=ee(b);a.Ub.add(b);J(b,"mouseover",a.Wf,q,a);J(b,"mouseout",a.Md,q,a);J(b,"mousemove",a.Vf,q,a);J(b,"focus",a.Uf,q,a);J(b,"blur",a.Md,q,a)}w.detach=function(a){if(a)a=ee(a),ag(this,a),this.Ub.remove(a);else{for(var b=this.Ub.Wb(),c=0;a=b[c];c++)ag(this,a);this.Ub.clear()}};function ag(a,b){vc(b,"mouseover",a.Wf,q,a);vc(b,"mouseout",a.Md,q,a);vc(b,"mousemove",a.Vf,q,a);vc(b,"focus",a.Uf,q,a);vc(b,"blur",a.Md,q,a)}
w.df=function(a){var b=this.g();b&&me(b);Yf.h.df.call(this,a);a&&(b=this.Pa.I.body,b.insertBefore(a,b.lastChild))};w.We=function(){if(!Tf.prototype.We.call(this))return q;if(this.anchor)for(var a,b=0;a=$f[b];b++)oe(a.g(),this.anchor)||Uf(a,q);0<=xb($f,this)||$f.push(this);a=this.g();a.className=this.className;bg(this);J(a,"mouseover",this.Yf,q,this);J(a,"mouseout",this.Xf,q,this);cg(this);return n};
w.Xe=function(){Cb($f,this);for(var a=this.g(),b,c=0;b=$f[c];c++)b.anchor&&oe(a,b.anchor)&&Uf(b,q);this.rg&&dg(this.rg);vc(a,"mouseover",this.Yf,q,this);vc(a,"mouseout",this.Xf,q,this);this.anchor=l;if(0==(this.cb?this.ga?4:1:this.pc?3:this.ga?2:0))this.Ud=q;Tf.prototype.Xe.call(this)};w.hg=function(a,b){this.anchor==a&&this.Ub.contains(this.anchor)&&(this.Ud||!this.zj?(Uf(this,q),this.ga||(this.anchor=a,this.Sd=b||eg(this,0)||l,this.ga&&this.Ka(),Uf(this,n))):this.anchor=l);this.cb=l};
w.Ah=function(a){this.pc=l;a==this.anchor&&(this.fa==p||this.fa!=this.g()&&!this.Ub.contains(this.fa))&&(!this.If||!this.If.fa)&&Uf(this,q)};function fg(a,b){var c=qe(a.Pa);a.Ce.x=b.clientX+c.x;a.Ce.y=b.clientY+c.y}w.Wf=function(a){var b=gg(this,a.target);this.fa=b;bg(this);b!=this.anchor&&(this.anchor=b,this.cb||(this.cb=Gf(xa(this.hg,this,b,l),this.yg)),hg(this),fg(this,a))};function gg(a,b){try{for(;b&&!a.Ub.contains(b);)b=b.parentNode;return b}catch(c){return p}}
w.Vf=function(a){fg(this,a);this.Ud=n};w.Uf=function(a){this.fa=a=gg(this,a.target);this.Ud=n;if(this.anchor!=a){this.anchor=a;var b=eg(this,1);bg(this);this.cb||(this.cb=Gf(xa(this.hg,this,a,b),this.yg));hg(this)}};function eg(a,b){if(0==b){var c=a.Ce.f();return new ig(c)}return new jg(a.fa)}function hg(a){if(a.anchor)for(var b,c=0;b=$f[c];c++)oe(b.g(),a.anchor)&&(b.If=a,a.rg=b)}
w.Md=function(a){var b=gg(this,a.target),c=gg(this,a.relatedTarget);b!=c&&(b==this.fa&&(this.fa=p),cg(this),this.Ud=q,this.ga&&(!a.relatedTarget||!oe(this.g(),a.relatedTarget))?dg(this):this.anchor=l)};w.Yf=function(){var a=this.g();this.fa!=a&&(bg(this),this.fa=a)};w.Xf=function(a){var b=this.g();if(this.fa==b&&(!a.relatedTarget||!oe(b,a.relatedTarget)))this.fa=p,dg(this)};function cg(a){a.cb&&(Ff.clearTimeout(a.cb),a.cb=l)}
function dg(a){if(2==(a.cb?a.ga?4:1:a.pc?3:a.ga?2:0))a.pc=Gf(xa(a.Ah,a,a.anchor),a.mh)}function bg(a){a.pc&&(Ff.clearTimeout(a.pc),a.pc=l)}w.H=function(){Uf(this,q);cg(this);this.detach();this.g()&&me(this.g());this.fa=p;delete this.Pa;Yf.h.H.call(this)};function ig(a,b){Wf.call(this,a,b)}A(ig,Wf);ig.prototype.Ka=function(a,b,c){b=df(a);b=gf(b);c=c?new Ze(c.top+10,c.right,c.bottom,c.left+10):new Ze(10,0,0,10);Qf(this.Ae,a,4,c,b,9)&496&&Qf(this.Ae,a,4,c,b,5)};function jg(a){Sf.call(this,a,3)}
A(jg,Sf);jg.prototype.Ka=function(a,b,c){var d=new Xc(10,0);Pf(this.element,this.Lf,a,b,d,c,9)&496&&Pf(this.element,2,a,1,d,c,5)};function kg(a,b,c,d){x(a)||i(Error("No valid parent element."));(!y(b)||!y(c))&&i(Error("Invalid coordinates."));(!x(d)||!(d instanceof Y))&&i(Error("Invalid interactor."));Yf.call(this);this.c="caption";this.xa=a;this.zd=b;this.Ad=c;this.Gb=d;this.ab=p;this.Cb=[];this.Cb=[".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n  border: 1px solid infotext;\n  padding: 1px;\n  font-family: sans-serif;\n}"];uc(d,Hd,this.Ne.bind(this));this.Ke()}A(kg,Yf);
kg.prototype.Ke=function(){if("static"==this.xa.style.position||""==this.xa.style.position)this.xa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=he("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Cb[0]);a.appendChild(b);b.appendChild(c);this.ab=b;this.Sd=new Wf(this.zd,this.Ad)||l;this.ga&&this.Ka();Uf(this,n);Zf(this,this.xa);this.g().classList.add("x-tooltip")};
kg.prototype.Ne=function(){Uf(this,q);this.ab&&me(this.ab);this.g()&&me(this.g());this.ab=p};function If(){Hf.call(this);this.c="renderer3D";this.Fc=this.Ic=this.Ec=this.Hc=this.Dc=this.Gc=this.ne=this.oe=p;this.i=[0,0,0];this.Df=p;this.$d=new Qb;this.Mc=new Qb;this.Nc=new Qb;this.ke=new Qb;this.kd=new Qb;this.ud=new Qb;this.vd=new Qb;this.wd=new Qb;this.N={PROGRESSBAR_ENABLED:n,PICKING_ENABLED:n,ORDERING_ENABLED:n,STATISTICS_ENABLED:q}}A(If,Hf);If.prototype.__defineGetter__("config",t("N"));w=If.prototype;w.fi=function(){this.Fc=this.Ic=this.Ec=this.Hc=this.Dc=this.Gc=p;this.i=[0,0,0]};
w.Ye=function(a){If.h.Ye.call(this,a);var b=a.zd,a=a.Ad,c=this.get(this.vg(b,a));if(c&&(c=c.dc))(new kg(this.q,this.q.offsetLeft+b+10,this.q.offsetTop+a+10,this.Gb)).g().innerHTML=c};
w.ba=function(){If.h.ba.call(this,"experimental-webgl");try{if(this.a.viewport(0,0,this.F,this.A),this.a.clearColor(0,0,0,0),this.a.enable(this.a.BLEND),this.a.blendEquation(this.a.FUNC_ADD),this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA),this.a.enable(this.a.DEPTH_TEST),this.a.depthFunc(this.a.LEQUAL),this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT),this.N.PICKING_ENABLED){var a=this.a.createFramebuffer(),b=this.a.createRenderbuffer(),c=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,
c);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.F,this.A,0,this.a.RGB,this.a.UNSIGNED_BYTE,p);this.a.bindFramebuffer(this.a.FRAMEBUFFER,a);this.a.bindRenderbuffer(this.a.RENDERBUFFER,b);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.F,this.A);this.a.bindRenderbuffer(this.a.RENDERBUFFER,p);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,c,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,
b);this.a.bindFramebuffer(this.a.FRAMEBUFFER,p);this.Df=a}}catch(d){i(Error("Exception while accessing GL Context!\n"+d))}mg(this)};
function mg(a){var b=new Kf;(!x(a.X)||!x(a.a)||!x(a.p))&&i(Error("Renderer was not initialized properly."));(!x(b)||!(b instanceof Kf))&&i(Error("Could not add shaders."));Nf(b);var c=a.a.createShader(a.a.FRAGMENT_SHADER),d=a.a.createShader(a.a.VERTEX_SHADER);a.a.shaderSource(c,b.nd);a.a.shaderSource(d,b.xd);a.a.compileShader(c);a.a.compileShader(d);a.a.getShaderParameter(c,a.a.COMPILE_STATUS)||i(Error("Fragement Shader compilation failed!\n"+a.a.getShaderInfoLog(c)));a.a.getShaderParameter(d,a.a.COMPILE_STATUS)||
i(Error("Vertex Shader compilation failed!\n"+a.a.getShaderInfoLog(d)));var e=a.a.createProgram();a.a.attachShader(e,d);a.a.attachShader(e,c);a.a.linkProgram(e);a.a.getProgramParameter(e,a.a.LINK_STATUS)||i(Error("Could not create shader program!\n"+a.a.getShaderInfoLog(c)+"\n"+a.a.getShaderInfoLog(d)+"\n"+a.a.getProgramInfoLog(e)));a.a.useProgram(e);a.ne=e;Object.keys(Lf).forEach(function(a){a=Lf[a];this.$d.set(a,this.a.getAttribLocation(this.ne,a));this.a.enableVertexAttribArray(this.$d.get(a))}.bind(a));
Object.keys(Mf).forEach(function(a){a=Mf[a];this.Mc.set(a,this.a.getUniformLocation(this.ne,a))}.bind(a));a.oe=b}
w.Sa=function(a){If.h.Sa.call(this,a);var b=q;this.get(a.Ca)&&(b=n);var c=a.Ca,d=a.j,e=a.m,f=a.Ba,g=a.aa,h=a.u,k=a.Qb,j=a.R,m=a.w,o=a.r;if(x(m)&&x(m.u)&&m.u.d)this.Sa(m);else if(x(m)&&m.d&&this.Sa(m),x(j)&&x(j.u)&&j.u.d)this.S.load(j,a);else if(x(g)&&x(g.u)&&g.u.d)this.S.load(g,a);else if(x(h)&&h.d)this.S.load(a,a);else if(x(o)&&x(o.u)&&o.u.d)this.S.load(o,a);else{if(0<a.e.length){h=a.e;j=h.length;for(m=m=0;m<j;m++)this.Sa(h[m])}if(0==d.count)a.d=q;else{for(h=0;this.qd;)h++,window.console.log("Possible thread lock avoided: "+
h);this.qd=n;H.wa(this.c+".update");j=a instanceof te&&a.bb instanceof ve;b&&x(g)&&g.d&&(h=this.vd.get(c),x(h)&&this.a.isBuffer(h.Z)&&this.a.deleteBuffer(h.Z));h=p;x(g)&&(!b||g.d?(h=a.Pb,x(h)||i(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),m=q,g.sb&&(m=n),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,m),m=this.a.createTexture(),m.ph=g.tf,this.wd.set(g.Ca,m),this.a.bindTexture(this.a.TEXTURE_2D,m),g.sb?this.a.texImage2D(this.a.TEXTURE_2D,
0,this.a.RGBA,g.td,g.sd,0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.sb):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,m.ph),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),j?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,
this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,p),m=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,m),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new Of(m,h.length,2),g.d=q):h=this.vd.get(c));Je(this.S,0.1);if(j)this.qd=q,H.ja(this.c+".update"),Je(this.S,0.9);else{if(!b||d.d||k.d){j=k.l;g=j.Ja(new L(d.Kb,d.Lb,d.Mb));j=j.Ja(new L(d.Hb,d.Ib,
d.Jb));if(this.Gc===p||g.x<this.Gc)this.Gc=g.x;if(this.Dc===p||j.x>this.Dc)this.Dc=j.x;if(this.Hc===p||g.y<this.Hc)this.Hc=g.y;if(this.Ec===p||j.y>this.Ec)this.Ec=j.y;if(this.Ic===p||g.b<this.Ic)this.Ic=g.b;if(this.Fc===p||j.b>this.Fc)this.Fc=j.b;this.i=[(this.Gc+this.Dc)/2,(this.Hc+this.Ec)/2,(this.Ic+this.Fc)/2];k.d=q}b&&d.d&&(k=this.Nc.get(c),x(k)&&this.a.isBuffer(k.Z)&&this.a.deleteBuffer(k.Z));k=p;!b||d.d?(k=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,k),this.a.bufferData(this.a.ARRAY_BUFFER,
new Float32Array(d.U),this.a.STATIC_DRAW),k=new Of(k,d.count,3),d.d=q):k=this.Nc.get(c);Je(this.S,0.3);b&&e.d&&(g=this.Nc.get(c),x(g)&&this.a.isBuffer(g.Z)&&this.a.deleteBuffer(g.Z));g=p;!b||e.d?(g=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(e.U),this.a.STATIC_DRAW),g=new Of(g,e.count,3),e.d=q):g=this.ke.get(c);Je(this.S,0.3);b&&f.d&&(e=this.kd.get(c),x(e)&&this.a.isBuffer(e.Z)&&this.a.deleteBuffer(e.Z));e=p;0<f.length&&(!b||
f.d?(f.length!=d.length&&i(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f.U),this.a.STATIC_DRAW),e=new Of(e,f.count,3),f.d=q):e=this.kd.get(c));Je(this.S,0.2);b&&o&&o.d&&(f=this.ud.get(c),x(f)&&this.a.isBuffer(f.Z)&&this.a.deleteBuffer(f.Z));f=p;o&&(f=o.yc,!b||o.d?(f.length!=d.length&&i(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,
d),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(f),this.a.STATIC_DRAW),f=new Of(d,f.length,3),o.d=q):f=this.ud.get(c));Je(this.S,0.1);b||this.Wa.add(a);this.Nc.set(c,k);this.ke.set(c,g);this.kd.set(c,e);this.vd.set(c,h);this.ud.set(c,f);a.d=q;H.ja(this.c+".update");this.qd=q}}}};function ng(a,b){var c=b.j.jd,c=a.p.k.Ja(b.Qb.l.Ja(new L(c[0],c[1],c[2]))),c=Uc(a.p.la,c);return Math.round(1E3*c)/1E3}
w.vg=function(a,b){if(this.N.PICKING_ENABLED){this.zb(n,q);var c=new Uint8Array(4);this.a.readPixels(a,this.A-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
w.zb=function(a,b){If.h.zb.call(this,a,b);var c=this.Wa.s,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.Df):this.a.bindFramebuffer(this.a.FRAMEBUFFER,p);this.a.viewport(0,0,this.F,this.A);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.p.Cf,f=this.p.Eb;this.a.uniformMatrix4fv(this.Mc.get("perspective"),q,e);this.a.uniformMatrix4fv(this.Mc.get("view"),q,f);e=this.i;this.a.uniform3f(this.Mc.get("center"),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.ub.length;for(e=0;e<f;++e){var g=this.ub[e];if(g instanceof Z){var h=new L(1,0,0),h=this.p.k.Ja(h),k=Uc(this.p.la,h),h=new L(-1,0,0),h=this.p.k.Ja(h),j=Uc(this.p.la,h),h=new L(0,1,0),h=this.p.k.Ja(h),m=Uc(this.p.la,h),h=new L(0,-1,0),h=this.p.k.Ja(h),o=Uc(this.p.la,h),h=new L(0,0,1),h=this.p.k.Ja(h),r=Uc(this.p.la,h),h=new L(0,0,-1),h=this.p.k.Ja(h),h=Uc(this.p.la,h),s=Math.max(k,m,r,j,o,h);s==k||s==j?ue(g,0):s==m||s==o?ue(g,1):(s==r||s==h)&&ue(g,2)}}if(this.N.ORDERING_ENABLED){k=q;f=this.ub;
g=f.length-1;do if(e=f[g],e instanceof Z&&e.Fa){j=e.vb;k=e.Ya.e;1==j?k=e.Za.e:2==j&&(k=e.$a.e);j=k.length;m=k[0];m.O=ng(this,m);m.P=e.P;o=k[j-1];o.O=ng(this,o);o.P=e.P;o=Math.round(1E3*((o.O-m.O)/j))/1E3;for(r=r=1;r<j-1;r++)h=Math.round(1E3*(m.O+r*o))/1E3,k[r].O=h,k[r].P=e.P;k=n}while(g--);f=this.Wa.s;g=f.length-1;do if(e=f[g],e.Ea&&!(1==e.P||e instanceof te))e.O=ng(this,e),k=n;while(g--);k&&this.Wa.sort()}if(f=!a&&x(b)&&b&&this.N.STATISTICS_ENABLED)var u=0,v=0,C=0,F=0;var e=this.$d,g=e.get("vertexPosition"),
k=e.get("vertexNormal"),j=e.get("vertexColor"),m=e.get("vertexTexturePos"),o=e.get("vertexScalar"),e=this.Mc,r=e.get("usePicking"),h=e.get("useObjectColor"),s=e.get("objectColor"),D=e.get("useScalars"),E=e.get("scalarsReplaceMode"),B=e.get("scalarsMin"),G=e.get("scalarsMax"),Q=e.get("scalarsMinColor"),aa=e.get("scalarsMaxColor"),la=e.get("scalarsMinThreshold"),ba=e.get("scalarsMaxThreshold"),sa=e.get("objectOpacity"),qa=e.get("labelmapOpacity"),ka=e.get("useTexture"),P=e.get("useLabelMapTexture"),
Bc=e.get("textureSampler"),gd=e.get("textureSampler2"),nb=e.get("volumeLowerThreshold"),hd=e.get("volumeUpperThreshold"),Gb=e.get("volumeScalarMin"),hb=e.get("volumeScalarMax"),Eb=e.get("volumeWindowLow"),Dc=e.get("volumeWindowHigh"),Ba=e.get("volumeScalarMinColor"),mb=e.get("volumeScalarMaxColor"),Cc=e.get("volumeTexture"),fd=e.get("objectTransform"),lg=e.get("pointSize"),e=d;do{var R=c[d-e];if(R){var S=p;R instanceof te&&R.bb&&(S=R.bb);if(R.Ea&&(!S||S.Ea)){var ra=R.Ca,Ra=R.Cc,Ca=this.Nc.get(ra),
ab=this.ke.get(ra),Vd=this.kd.get(ra),Fb=this.ud.get(ra),le=this.vd.get(ra);this.a.bindBuffer(this.a.ARRAY_BUFFER,Ca.Z);this.a.vertexAttribPointer(g,Ca.mb,this.a.FLOAT,q,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,ab.Z);this.a.vertexAttribPointer(k,ab.mb,this.a.FLOAT,q,0,0);a?this.a.uniform1i(r,n):this.a.uniform1i(r,q);Vd&&!a&&!Ra?(this.a.uniform1i(h,q),this.a.bindBuffer(this.a.ARRAY_BUFFER,Vd.Z),this.a.vertexAttribPointer(j,Vd.mb,this.a.FLOAT,q,0,0)):(ab=1,Ra&&!a&&(ab=0),this.a.uniform1i(h,ab),ab=
R.Bb,a&&(ab=[Math.floor(ra%65025%255)/255,Math.floor(ra%65025/255)/255,Math.floor(ra/65025)/255]),this.a.uniform3f(s,parseFloat(ab[0]),parseFloat(ab[1]),parseFloat(ab[2])),this.a.vertexAttribPointer(j,Ca.mb,this.a.FLOAT,q,0,0));Fb&&!a&&!Ra?(this.a.uniform1i(D,n),this.a.uniform1i(E,R.r.Ff),ra=R.r.pb,Ra=R.r.nb,this.a.uniform3f(Q,parseFloat(ra[0]),parseFloat(ra[1]),parseFloat(ra[2])),this.a.uniform3f(aa,parseFloat(Ra[0]),parseFloat(Ra[1]),parseFloat(Ra[2])),this.a.uniform1f(la,parseFloat(R.r.ca)),this.a.uniform1f(ba,
parseFloat(R.r.ea)),this.a.uniform1f(B,parseFloat(R.r.Na)),this.a.uniform1f(G,parseFloat(R.r.Da)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Fb.Z),this.a.vertexAttribPointer(o,Fb.mb,this.a.FLOAT,q,0,0)):(this.a.uniform1i(D,q),this.a.vertexAttribPointer(o,Ca.mb,this.a.FLOAT,q,0,0));this.a.uniform1f(sa,parseFloat(R.P));R.aa&&le&&!a?(this.a.uniform1i(ka,n),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.wd.get(R.aa.Ca)),this.a.uniform1i(Bc,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,
le.Z),this.a.vertexAttribPointer(m,le.mb,this.a.FLOAT,q,0,0),this.a.uniform1i(Cc,q)):(this.a.uniform1i(ka,q),this.a.vertexAttribPointer(m,Ca.mb,this.a.FLOAT,q,0,0));S&&(this.a.uniform1i(Cc,n),this.a.uniform1f(nb,S.ca),this.a.uniform1f(hd,S.ea),this.a.uniform1f(Gb,S.Na),this.a.uniform1f(hb,S.Da),ra=S.pb,Ra=S.nb,this.a.uniform3f(Ba,parseFloat(ra[0]),parseFloat(ra[1]),parseFloat(ra[2])),this.a.uniform3f(mb,parseFloat(Ra[0]),parseFloat(Ra[1]),parseFloat(Ra[2])),this.a.uniform1f(Eb,S.Sb),this.a.uniform1f(Dc,
S.Rb),Fb=S.w,this.a.uniform1i(P,q),S.Fa?this.a.uniform1f(sa,parseFloat(S.P)):Fb&&Fb.Ea&&(S=R.w.Ca,this.a.uniform1i(P,n),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.wd.get(S)),this.a.uniform1i(gd,1),this.a.uniform1f(qa,Fb.P)));this.a.uniformMatrix4fv(fd,q,R.Qb.Ua);S=1;"POINTS"==R.ma&&(S=R.Kc);this.a.uniform1f(lg,S);S=-1;R.ma==rd?(S=this.a.TRIANGLES,f&&(v+=Ca.lb/3)):"LINES"==R.ma?(this.a.lineWidth(R.hc),S=this.a.LINES,f&&(C+=Ca.lb/2)):"POINTS"==R.ma?(S=this.a.POINTS,
f&&(F+=Ca.lb)):"TRIANGLE_STRIPS"==R.ma?(S=this.a.TRIANGLE_STRIP,f&&(v+=Ca.lb/3)):"POLYGONS"==R.ma&&(S=0==Ca.lb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(v+=Ca.lb/3));f&&(u+=Ca.lb);this.a.drawArrays(S,0,Ca.lb)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+u+" | ")+("Triangles: "+Math.round(v)+" | "),c=c+("Lines: "+C+" | ")+("Points: "+F+" | ")+("Textures: "+this.wd.na()),window.console.log(c))}};
w.Fd=function(){this.oe=p;delete this.oe;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);If.h.Fd.call(this)};z("X.renderer3D",If);z("X.renderer3D.prototype.init",If.prototype.ba);z("X.renderer3D.prototype.add",If.prototype.add);z("X.renderer3D.prototype.onShowtime",If.prototype.og);z("X.renderer3D.prototype.onRender",If.prototype.mg);z("X.renderer3D.prototype.get",If.prototype.get);z("X.renderer3D.prototype.render",If.prototype.ac);z("X.renderer3D.prototype.destroy",If.prototype.Fd);
z("X.renderer3D.prototype.resetBoundingBox",If.prototype.fi);z("X.renderer3D.prototype.resetViewAndRender",If.prototype.vc);z("X.renderer3D.prototype.pick",If.prototype.vg);function $(){Hf.call(this);this.c="renderer2D";this.uf=this.de=this.sf=this.ce=this.Xa=p;this.qe=this.re=0}A($,Hf);$.prototype.Sh=ca();$.prototype.Ze=function(a){$.h.Ze.call(this,a);var b=this.ub[0];if(b){var c=this.Xa;b["index"+c]=a.D?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};$.prototype.__defineGetter__("orientation",t("Xa"));$.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&"Y"!=a&&"Z"!=a&&i(Error("Invalid orientation."));this.Xa=a});
$.prototype.ba=function(){this.Xa||i(Error("No 2D orientation set."));$.h.ba.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.X.width,this.X.height);this.ce=he("canvas");this.de=he("canvas")};$.prototype.vc=function(){$.h.vc.call(this);og(this)};
$.prototype.Sa=function(a){$.h.Sa.call(this,a);var b=q;this.get(a.Ca)&&(b=n);var c=a.u,d=a.w,e=a.R;if(x(d)&&x(d.u)&&d.u.d)this.Sa(d);else if(x(e)&&x(e.u)&&e.u.d)this.S.load(e,a);else if(x(c)&&c.d)this.S.load(a,a);else{d=c=0;e=a.Y;"X"==this.Xa?(this.Ob=a.Ya.e,c=e[2],d=e[1]):"Y"==this.Xa?(this.Ob=a.Za.e,c=e[0],d=e[2]):"Z"==this.Xa&&(this.Ob=a.$a.e,c=e[0],d=e[1]);"X"==this.Xa&&(e=d,d=c,c=e);this.re=c;this.qe=d;e=this.ce;e.width=c;e.height=d;var f=this.de;f.width=c;f.height=d;this.sf=e.getContext("2d");
this.uf=f.getContext("2d");b||(this.Wa.add(a),og(this))}};function og(a){var b=Math.min(a.F/a.re,a.A/a.qe);M(a.p.k,2,3,10*b-10)}
$.prototype.zb=function(a,b){$.h.zb.call(this,a,b);if(0!=this.Wa.s.length){var c=this.F,d=this.A,e=this.p.k;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.M(0,3),g=-1*e.M(1,3),h=Math.max(1+e.M(2,3)/10,0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.ub[0],k=this.Ob[parseInt(e["index"+this.Xa],10)],j=k.aa.sb,k=k.w,m=p;k&&(m=k.sb);var o=this.re,r=this.qe,c=1/(2*h)*(c-o*h)+f,d=1/(2*h)*(d-r*h)+g,g=this.sf,f=this.uf,h=g.getImageData(0,0,o,r),o=f.getImageData(0,0,o,r),r=h.data,
s=o.data,u=r.length,v=e.Da,C=e.ca,F=e.ea,D=0;do{var E=[0,0,0,0],B=[0,0,0,0],G=j[D]/255*v,Q=j[D],aa=e.Sb/v,Q=(Q/255-aa)/(e.Rb/v-aa),Q=255*Q;G>=C&&G<=F&&(E=new L(e.pb[0],e.pb[1],e.pb[2]),E=(new L(e.nb[0],e.nb[1],e.nb[2])).scale(Q).add(E.scale(255-Q)),E=[Math.floor(E.x),Math.floor(E.y),Math.floor(E.b),255],k&&(B=[m[D],m[D+1],m[D+2],m[D+3]]));Q=u-1-D;r[Q-3]=E[0];r[Q-2]=E[1];r[Q-1]=E[2];r[Q]=E[3];s[Q-3]=B[0];s[Q-2]=B[1];s[Q-1]=B[2];s[Q]=B[3];D+=4}while(D<u);g.putImageData(h,0,0);f.putImageData(o,0,0);
this.a.globalAlpha=1;this.a.drawImage(this.ce,c,d);k&&e.w.Ea&&(this.a.globalAlpha=e.w.P,this.a.drawImage(this.de,c,d))}};z("X.renderer2D",$);z("X.renderer2D.prototype.init",$.prototype.ba);z("X.renderer2D.prototype.add",$.prototype.add);z("X.renderer2D.prototype.onShowtime",$.prototype.og);z("X.renderer2D.prototype.onRender",$.prototype.mg);z("X.renderer2D.prototype.onScroll",$.prototype.Sh);z("X.renderer2D.prototype.get",$.prototype.get);z("X.renderer2D.prototype.resetViewAndRender",$.prototype.vc);
z("X.renderer2D.prototype.render",$.prototype.ac);z("X.renderer2D.prototype.destroy",$.prototype.Fd);function pg(){T.call(this);this.c="fibers";Da(this,new Rc)}A(pg,T);z("X.fibers",pg);function qg(){T.call(this);this.c="mesh";Da(this,new Rc)}A(qg,T);z("X.mesh",qg);
